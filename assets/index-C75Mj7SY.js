var AR=Object.defineProperty;var CR=(e,t,r)=>t in e?AR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ca=(e,t,r)=>CR(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var one=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Eo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function kR(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var s=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(r,a,s.get?s:{enumerable:!0,get:function(){return e[a]}})}),r}var zy={exports:{}},tp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KN;function ER(){if(KN)return tp;KN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,s,i){var l=null;if(i!==void 0&&(l=""+i),s.key!==void 0&&(l=""+s.key),"key"in s){i={};for(var u in s)u!=="key"&&(i[u]=s[u])}else i=s;return s=i.ref,{$$typeof:e,type:a,key:l,ref:s!==void 0?s:null,props:i}}return tp.Fragment=t,tp.jsx=r,tp.jsxs=r,tp}var WN;function PR(){return WN||(WN=1,zy.exports=ER()),zy.exports}var n=PR(),Vy={exports:{}},Tr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YN;function TR(){if(YN)return Tr;YN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function v(Y){return Y===null||typeof Y!="object"?null:(Y=g&&Y[g]||Y["@@iterator"],typeof Y=="function"?Y:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,b={};function S(Y,ye,P){this.props=Y,this.context=ye,this.refs=b,this.updater=P||x}S.prototype.isReactComponent={},S.prototype.setState=function(Y,ye){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,ye,"setState")},S.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function A(){}A.prototype=S.prototype;function E(Y,ye,P){this.props=Y,this.context=ye,this.refs=b,this.updater=P||x}var T=E.prototype=new A;T.constructor=E,j(T,S.prototype),T.isPureReactComponent=!0;var D=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function U(Y,ye,P,K,le,ee){return P=ee.ref,{$$typeof:e,type:Y,key:ye,ref:P!==void 0?P:null,props:ee}}function I(Y,ye){return U(Y.type,ye,void 0,void 0,void 0,Y.props)}function F(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===e}function pe(Y){var ye={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(P){return ye[P]})}var L=/\/+/g;function q(Y,ye){return typeof Y=="object"&&Y!==null&&Y.key!=null?pe(""+Y.key):ye.toString(36)}function z(){}function V(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(z,z):(Y.status="pending",Y.then(function(ye){Y.status==="pending"&&(Y.status="fulfilled",Y.value=ye)},function(ye){Y.status==="pending"&&(Y.status="rejected",Y.reason=ye)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function de(Y,ye,P,K,le){var ee=typeof Y;(ee==="undefined"||ee==="boolean")&&(Y=null);var me=!1;if(Y===null)me=!0;else switch(ee){case"bigint":case"string":case"number":me=!0;break;case"object":switch(Y.$$typeof){case e:case t:me=!0;break;case m:return me=Y._init,de(me(Y._payload),ye,P,K,le)}}if(me)return le=le(Y),me=K===""?"."+q(Y,0):K,D(le)?(P="",me!=null&&(P=me.replace(L,"$&/")+"/"),de(le,ye,P,"",function(xe){return xe})):le!=null&&(F(le)&&(le=I(le,P+(le.key==null||Y&&Y.key===le.key?"":(""+le.key).replace(L,"$&/")+"/")+me)),ye.push(le)),1;me=0;var ke=K===""?".":K+":";if(D(Y))for(var Ae=0;Ae<Y.length;Ae++)K=Y[Ae],ee=ke+q(K,Ae),me+=de(K,ye,P,ee,le);else if(Ae=v(Y),typeof Ae=="function")for(Y=Ae.call(Y),Ae=0;!(K=Y.next()).done;)K=K.value,ee=ke+q(K,Ae++),me+=de(K,ye,P,ee,le);else if(ee==="object"){if(typeof Y.then=="function")return de(V(Y),ye,P,K,le);throw ye=String(Y),Error("Objects are not valid as a React child (found: "+(ye==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":ye)+"). If you meant to render a collection of children, use an array instead.")}return me}function se(Y,ye,P){if(Y==null)return Y;var K=[],le=0;return de(Y,K,"","",function(ee){return ye.call(P,ee,le++)}),K}function fe(Y){if(Y._status===-1){var ye=Y._result;ye=ye(),ye.then(function(P){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=P)},function(P){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=P)}),Y._status===-1&&(Y._status=0,Y._result=ye)}if(Y._status===1)return Y._result.default;throw Y._result}var oe=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ye=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(ye))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)};function Se(){}return Tr.Children={map:se,forEach:function(Y,ye,P){se(Y,function(){ye.apply(this,arguments)},P)},count:function(Y){var ye=0;return se(Y,function(){ye++}),ye},toArray:function(Y){return se(Y,function(ye){return ye})||[]},only:function(Y){if(!F(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},Tr.Component=S,Tr.Fragment=r,Tr.Profiler=s,Tr.PureComponent=E,Tr.StrictMode=a,Tr.Suspense=d,Tr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Tr.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return R.H.useMemoCache(Y)}},Tr.cache=function(Y){return function(){return Y.apply(null,arguments)}},Tr.cloneElement=function(Y,ye,P){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var K=j({},Y.props),le=Y.key,ee=void 0;if(ye!=null)for(me in ye.ref!==void 0&&(ee=void 0),ye.key!==void 0&&(le=""+ye.key),ye)!B.call(ye,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&ye.ref===void 0||(K[me]=ye[me]);var me=arguments.length-2;if(me===1)K.children=P;else if(1<me){for(var ke=Array(me),Ae=0;Ae<me;Ae++)ke[Ae]=arguments[Ae+2];K.children=ke}return U(Y.type,le,void 0,void 0,ee,K)},Tr.createContext=function(Y){return Y={$$typeof:l,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:i,_context:Y},Y},Tr.createElement=function(Y,ye,P){var K,le={},ee=null;if(ye!=null)for(K in ye.key!==void 0&&(ee=""+ye.key),ye)B.call(ye,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(le[K]=ye[K]);var me=arguments.length-2;if(me===1)le.children=P;else if(1<me){for(var ke=Array(me),Ae=0;Ae<me;Ae++)ke[Ae]=arguments[Ae+2];le.children=ke}if(Y&&Y.defaultProps)for(K in me=Y.defaultProps,me)le[K]===void 0&&(le[K]=me[K]);return U(Y,ee,void 0,void 0,null,le)},Tr.createRef=function(){return{current:null}},Tr.forwardRef=function(Y){return{$$typeof:u,render:Y}},Tr.isValidElement=F,Tr.lazy=function(Y){return{$$typeof:m,_payload:{_status:-1,_result:Y},_init:fe}},Tr.memo=function(Y,ye){return{$$typeof:f,type:Y,compare:ye===void 0?null:ye}},Tr.startTransition=function(Y){var ye=R.T,P={};R.T=P;try{var K=Y(),le=R.S;le!==null&&le(P,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(Se,oe)}catch(ee){oe(ee)}finally{R.T=ye}},Tr.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Tr.use=function(Y){return R.H.use(Y)},Tr.useActionState=function(Y,ye,P){return R.H.useActionState(Y,ye,P)},Tr.useCallback=function(Y,ye){return R.H.useCallback(Y,ye)},Tr.useContext=function(Y){return R.H.useContext(Y)},Tr.useDebugValue=function(){},Tr.useDeferredValue=function(Y,ye){return R.H.useDeferredValue(Y,ye)},Tr.useEffect=function(Y,ye,P){var K=R.H;if(typeof P=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(Y,ye)},Tr.useId=function(){return R.H.useId()},Tr.useImperativeHandle=function(Y,ye,P){return R.H.useImperativeHandle(Y,ye,P)},Tr.useInsertionEffect=function(Y,ye){return R.H.useInsertionEffect(Y,ye)},Tr.useLayoutEffect=function(Y,ye){return R.H.useLayoutEffect(Y,ye)},Tr.useMemo=function(Y,ye){return R.H.useMemo(Y,ye)},Tr.useOptimistic=function(Y,ye){return R.H.useOptimistic(Y,ye)},Tr.useReducer=function(Y,ye,P){return R.H.useReducer(Y,ye,P)},Tr.useRef=function(Y){return R.H.useRef(Y)},Tr.useState=function(Y){return R.H.useState(Y)},Tr.useSyncExternalStore=function(Y,ye,P){return R.H.useSyncExternalStore(Y,ye,P)},Tr.useTransition=function(){return R.H.useTransition()},Tr.version="19.1.1",Tr}var XN;function am(){return XN||(XN=1,Vy.exports=TR()),Vy.exports}var _=am();const Vc=Eo(_);var Hy={exports:{}},rp={},Gy={exports:{}},Ky={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZN;function OR(){return ZN||(ZN=1,function(e){function t(se,fe){var oe=se.length;se.push(fe);e:for(;0<oe;){var Se=oe-1>>>1,Y=se[Se];if(0<s(Y,fe))se[Se]=fe,se[oe]=Y,oe=Se;else break e}}function r(se){return se.length===0?null:se[0]}function a(se){if(se.length===0)return null;var fe=se[0],oe=se.pop();if(oe!==fe){se[0]=oe;e:for(var Se=0,Y=se.length,ye=Y>>>1;Se<ye;){var P=2*(Se+1)-1,K=se[P],le=P+1,ee=se[le];if(0>s(K,oe))le<Y&&0>s(ee,K)?(se[Se]=ee,se[le]=oe,Se=le):(se[Se]=K,se[P]=oe,Se=P);else if(le<Y&&0>s(ee,oe))se[Se]=ee,se[le]=oe,Se=le;else break e}}return fe}function s(se,fe){var oe=se.sortIndex-fe.sortIndex;return oe!==0?oe:se.id-fe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],f=[],m=1,g=null,v=3,x=!1,j=!1,b=!1,S=!1,A=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function D(se){for(var fe=r(f);fe!==null;){if(fe.callback===null)a(f);else if(fe.startTime<=se)a(f),fe.sortIndex=fe.expirationTime,t(d,fe);else break;fe=r(f)}}function R(se){if(b=!1,D(se),!j)if(r(d)!==null)j=!0,B||(B=!0,q());else{var fe=r(f);fe!==null&&de(R,fe.startTime-se)}}var B=!1,U=-1,I=5,F=-1;function pe(){return S?!0:!(e.unstable_now()-F<I)}function L(){if(S=!1,B){var se=e.unstable_now();F=se;var fe=!0;try{e:{j=!1,b&&(b=!1,E(U),U=-1),x=!0;var oe=v;try{t:{for(D(se),g=r(d);g!==null&&!(g.expirationTime>se&&pe());){var Se=g.callback;if(typeof Se=="function"){g.callback=null,v=g.priorityLevel;var Y=Se(g.expirationTime<=se);if(se=e.unstable_now(),typeof Y=="function"){g.callback=Y,D(se),fe=!0;break t}g===r(d)&&a(d),D(se)}else a(d);g=r(d)}if(g!==null)fe=!0;else{var ye=r(f);ye!==null&&de(R,ye.startTime-se),fe=!1}}break e}finally{g=null,v=oe,x=!1}fe=void 0}}finally{fe?q():B=!1}}}var q;if(typeof T=="function")q=function(){T(L)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,V=z.port2;z.port1.onmessage=L,q=function(){V.postMessage(null)}}else q=function(){A(L,0)};function de(se,fe){U=A(function(){se(e.unstable_now())},fe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(se){se.callback=null},e.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<se?Math.floor(1e3/se):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(se){switch(v){case 1:case 2:case 3:var fe=3;break;default:fe=v}var oe=v;v=fe;try{return se()}finally{v=oe}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(se,fe){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var oe=v;v=se;try{return fe()}finally{v=oe}},e.unstable_scheduleCallback=function(se,fe,oe){var Se=e.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Se+oe:Se):oe=Se,se){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=oe+Y,se={id:m++,callback:fe,priorityLevel:se,startTime:oe,expirationTime:Y,sortIndex:-1},oe>Se?(se.sortIndex=oe,t(f,se),r(d)===null&&se===r(f)&&(b?(E(U),U=-1):b=!0,de(R,oe-Se))):(se.sortIndex=Y,t(d,se),j||x||(j=!0,B||(B=!0,q()))),se},e.unstable_shouldYield=pe,e.unstable_wrapCallback=function(se){var fe=v;return function(){var oe=v;v=fe;try{return se.apply(this,arguments)}finally{v=oe}}}}(Ky)),Ky}var JN;function DR(){return JN||(JN=1,Gy.exports=OR()),Gy.exports}var Wy={exports:{}},Ms={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QN;function RR(){if(QN)return Ms;QN=1;var e=am();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(d,f,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:d,containerInfo:f,implementation:m}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ms.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Ms.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return i(d,f,null,m)},Ms.flushSync=function(d){var f=l.T,m=a.p;try{if(l.T=null,a.p=2,d)return d()}finally{l.T=f,a.p=m,a.d.f()}},Ms.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,a.d.C(d,f))},Ms.prefetchDNS=function(d){typeof d=="string"&&a.d.D(d)},Ms.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,g=u(m,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,x=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?a.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:x}):m==="script"&&a.d.X(d,{crossOrigin:g,integrity:v,fetchPriority:x,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ms.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=u(f.as,f.crossOrigin);a.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&a.d.M(d)},Ms.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,g=u(m,f.crossOrigin);a.d.L(d,m,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ms.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=u(f.as,f.crossOrigin);a.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else a.d.m(d)},Ms.requestFormReset=function(d){a.d.r(d)},Ms.unstable_batchedUpdates=function(d,f){return d(f)},Ms.useFormState=function(d,f,m){return l.H.useFormState(d,f,m)},Ms.useFormStatus=function(){return l.H.useHostTransitionStatus()},Ms.version="19.1.1",Ms}var eS;function pk(){if(eS)return Wy.exports;eS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Wy.exports=RR(),Wy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tS;function LR(){if(tS)return rp;tS=1;var e=DR(),t=am(),r=pk();function a(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function i(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function l(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function u(o){if(i(o)!==o)throw Error(a(188))}function d(o){var c=o.alternate;if(!c){if(c=i(o),c===null)throw Error(a(188));return c!==o?null:o}for(var h=o,p=c;;){var w=h.return;if(w===null)break;var C=w.alternate;if(C===null){if(p=w.return,p!==null){h=p;continue}break}if(w.child===C.child){for(C=w.child;C;){if(C===h)return u(w),o;if(C===p)return u(w),c;C=C.sibling}throw Error(a(188))}if(h.return!==p.return)h=w,p=C;else{for(var H=!1,ue=w.child;ue;){if(ue===h){H=!0,h=w,p=C;break}if(ue===p){H=!0,p=w,h=C;break}ue=ue.sibling}if(!H){for(ue=C.child;ue;){if(ue===h){H=!0,h=C,p=w;break}if(ue===p){H=!0,p=C,h=w;break}ue=ue.sibling}if(!H)throw Error(a(189))}}if(h.alternate!==p)throw Error(a(190))}if(h.tag!==3)throw Error(a(188));return h.stateNode.current===h?o:c}function f(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=f(o),c!==null)return c;o=o.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),E=Symbol.for("react.consumer"),T=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),pe=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function q(o){return o===null||typeof o!="object"?null:(o=L&&o[L]||o["@@iterator"],typeof o=="function"?o:null)}var z=Symbol.for("react.client.reference");function V(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===z?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case j:return"Fragment";case S:return"Profiler";case b:return"StrictMode";case R:return"Suspense";case B:return"SuspenseList";case F:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case x:return"Portal";case T:return(o.displayName||"Context")+".Provider";case E:return(o._context.displayName||"Context")+".Consumer";case D:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case U:return c=o.displayName||null,c!==null?c:V(o.type)||"Memo";case I:c=o._payload,o=o._init;try{return V(o(c))}catch{}}return null}var de=Array.isArray,se=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},Se=[],Y=-1;function ye(o){return{current:o}}function P(o){0>Y||(o.current=Se[Y],Se[Y]=null,Y--)}function K(o,c){Y++,Se[Y]=o.current,o.current=c}var le=ye(null),ee=ye(null),me=ye(null),ke=ye(null);function Ae(o,c){switch(K(me,c),K(ee,o),K(le,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?wN(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=wN(c),o=jN(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}P(le),K(le,o)}function xe(){P(le),P(ee),P(me)}function De(o){o.memoizedState!==null&&K(ke,o);var c=le.current,h=jN(c,o.type);c!==h&&(K(ee,o),K(le,h))}function ve(o){ee.current===o&&(P(le),P(ee)),ke.current===o&&(P(ke),Xm._currentValue=oe)}var Z=Object.prototype.hasOwnProperty,te=e.unstable_scheduleCallback,re=e.unstable_cancelCallback,$=e.unstable_shouldYield,ne=e.unstable_requestPaint,W=e.unstable_now,be=e.unstable_getCurrentPriorityLevel,Ce=e.unstable_ImmediatePriority,ze=e.unstable_UserBlockingPriority,Pe=e.unstable_NormalPriority,we=e.unstable_LowPriority,ae=e.unstable_IdlePriority,qe=e.log,ft=e.unstable_setDisableYieldValue,Et=null,Bt=null;function vt(o){if(typeof qe=="function"&&ft(o),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(Et,o)}catch{}}var ht=Math.clz32?Math.clz32:_t,Dt=Math.log,Ie=Math.LN2;function _t(o){return o>>>=0,o===0?32:31-(Dt(o)/Ie|0)|0}var jt=256,Pt=4194304;function Rt(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function rr(o,c,h){var p=o.pendingLanes;if(p===0)return 0;var w=0,C=o.suspendedLanes,H=o.pingedLanes;o=o.warmLanes;var ue=p&134217727;return ue!==0?(p=ue&~C,p!==0?w=Rt(p):(H&=ue,H!==0?w=Rt(H):h||(h=ue&~o,h!==0&&(w=Rt(h))))):(ue=p&~C,ue!==0?w=Rt(ue):H!==0?w=Rt(H):h||(h=p&~o,h!==0&&(w=Rt(h)))),w===0?0:c!==0&&c!==w&&(c&C)===0&&(C=w&-w,h=c&-c,C>=h||C===32&&(h&4194048)!==0)?c:w}function Ke(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function Re(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function at(){var o=jt;return jt<<=1,(jt&4194048)===0&&(jt=256),o}function rt(){var o=Pt;return Pt<<=1,(Pt&62914560)===0&&(Pt=4194304),o}function Tt(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function Te(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Ue(o,c,h,p,w,C){var H=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var ue=o.entanglements,Le=o.expirationTimes,Je=o.hiddenUpdates;for(h=H&~h;0<h;){var pt=31-ht(h),wt=1<<pt;ue[pt]=0,Le[pt]=-1;var Qe=Je[pt];if(Qe!==null)for(Je[pt]=null,pt=0;pt<Qe.length;pt++){var tt=Qe[pt];tt!==null&&(tt.lane&=-536870913)}h&=~wt}p!==0&&it(o,p,0),C!==0&&w===0&&o.tag!==0&&(o.suspendedLanes|=C&~(H&~c))}function it(o,c,h){o.pendingLanes|=c,o.suspendedLanes&=~c;var p=31-ht(c);o.entangledLanes|=c,o.entanglements[p]=o.entanglements[p]|1073741824|h&4194090}function kt(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var p=31-ht(h),w=1<<p;w&c|o[p]&c&&(o[p]|=c),h&=~w}}function We(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function It(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function ir(){var o=fe.p;return o!==0?o:(o=window.event,o===void 0?32:UN(o.type))}function St(o,c){var h=fe.p;try{return fe.p=o,c()}finally{fe.p=h}}var Ht=Math.random().toString(36).slice(2),ar="__reactFiber$"+Ht,cr="__reactProps$"+Ht,Ur="__reactContainer$"+Ht,Ar="__reactEvents$"+Ht,or="__reactListeners$"+Ht,fr="__reactHandles$"+Ht,gr="__reactResources$"+Ht,Fa="__reactMarker$"+Ht;function nn(o){delete o[ar],delete o[cr],delete o[Ar],delete o[or],delete o[fr]}function sa(o){var c=o[ar];if(c)return c;for(var h=o.parentNode;h;){if(c=h[Ur]||h[ar]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=AN(o);o!==null;){if(h=o[ar])return h;o=AN(o)}return c}o=h,h=o.parentNode}return null}function Ba(o){if(o=o[ar]||o[Ur]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function dn(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(a(33))}function Oa(o){var c=o[gr];return c||(c=o[gr]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Wr(o){o[Fa]=!0}var yn=new Set,Yr={};function lr(o,c){ia(o,c),ia(o+"Capture",c)}function ia(o,c){for(Yr[o]=c,o=0;o<c.length;o++)yn.add(c[o])}var ni=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bn={},gl={};function cu(o){return Z.call(gl,o)?!0:Z.call(bn,o)?!1:ni.test(o)?gl[o]=!0:(bn[o]=!0,!1)}function Do(o,c,h){if(cu(c))if(h===null)o.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var p=c.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+h)}}function Un(o,c,h){if(h===null)o.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+h)}}function gs(o,c,h,p){if(p===null)o.removeAttribute(h);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(c,h,""+p)}}var xl,vl;function bi(o){if(xl===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);xl=c&&c[1]||"",vl=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xl+o+vl}var yl=!1;function bl(o,c){if(!o||yl)return"";yl=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(c){var wt=function(){throw Error()};if(Object.defineProperty(wt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wt,[])}catch(tt){var Qe=tt}Reflect.construct(o,[],wt)}else{try{wt.call()}catch(tt){Qe=tt}o.call(wt.prototype)}}else{try{throw Error()}catch(tt){Qe=tt}(wt=o())&&typeof wt.catch=="function"&&wt.catch(function(){})}}catch(tt){if(tt&&Qe&&typeof tt.stack=="string")return[tt.stack,Qe.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=p.DetermineComponentFrameRoot(),H=C[0],ue=C[1];if(H&&ue){var Le=H.split(`
`),Je=ue.split(`
`);for(w=p=0;p<Le.length&&!Le[p].includes("DetermineComponentFrameRoot");)p++;for(;w<Je.length&&!Je[w].includes("DetermineComponentFrameRoot");)w++;if(p===Le.length||w===Je.length)for(p=Le.length-1,w=Je.length-1;1<=p&&0<=w&&Le[p]!==Je[w];)w--;for(;1<=p&&0<=w;p--,w--)if(Le[p]!==Je[w]){if(p!==1||w!==1)do if(p--,w--,0>w||Le[p]!==Je[w]){var pt=`
`+Le[p].replace(" at new "," at ");return o.displayName&&pt.includes("<anonymous>")&&(pt=pt.replace("<anonymous>",o.displayName)),pt}while(1<=p&&0<=w);break}}}finally{yl=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?bi(h):""}function wl(o){switch(o.tag){case 26:case 27:case 5:return bi(o.type);case 16:return bi("Lazy");case 13:return bi("Suspense");case 19:return bi("SuspenseList");case 0:case 15:return bl(o.type,!1);case 11:return bl(o.type.render,!1);case 1:return bl(o.type,!0);case 31:return bi("Activity");default:return""}}function uu(o){try{var c="";do c+=wl(o),o=o.return;while(o);return c}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function Vr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function ic(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function du(o){var c=ic(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),p=""+o[c];if(!o.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var w=h.get,C=h.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return w.call(this)},set:function(H){p=""+H,C.call(this,H)}}),Object.defineProperty(o,c,{enumerable:h.enumerable}),{getValue:function(){return p},setValue:function(H){p=""+H},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Os(o){o._valueTracker||(o._valueTracker=du(o))}function Xi(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),p="";return o&&(p=ic(o)?o.checked?"true":"false":o.value),o=p,o!==h?(c.setValue(o),!0):!1}function Ln(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Ro=/[\n"\\]/g;function Mr(o){return o.replace(Ro,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function wi(o,c,h,p,w,C,H,ue){o.name="",H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?o.type=H:o.removeAttribute("type"),c!=null?H==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+Vr(c)):o.value!==""+Vr(c)&&(o.value=""+Vr(c)):H!=="submit"&&H!=="reset"||o.removeAttribute("value"),c!=null?oc(o,H,Vr(c)):h!=null?oc(o,H,Vr(h)):p!=null&&o.removeAttribute("value"),w==null&&C!=null&&(o.defaultChecked=!!C),w!=null&&(o.checked=w&&typeof w!="function"&&typeof w!="symbol"),ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?o.name=""+Vr(ue):o.removeAttribute("name")}function si(o,c,h,p,w,C,H,ue){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(o.type=C),c!=null||h!=null){if(!(C!=="submit"&&C!=="reset"||c!=null))return;h=h!=null?""+Vr(h):"",c=c!=null?""+Vr(c):h,ue||c===o.value||(o.value=c),o.defaultValue=c}p=p??w,p=typeof p!="function"&&typeof p!="symbol"&&!!p,o.checked=ue?o.checked:!!p,o.defaultChecked=!!p,H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(o.name=H)}function oc(o,c,h){c==="number"&&Ln(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function ji(o,c,h,p){if(o=o.options,c){c={};for(var w=0;w<h.length;w++)c["$"+h[w]]=!0;for(h=0;h<o.length;h++)w=c.hasOwnProperty("$"+o[h].value),o[h].selected!==w&&(o[h].selected=w),w&&p&&(o[h].defaultSelected=!0)}else{for(h=""+Vr(h),c=null,w=0;w<o.length;w++){if(o[w].value===h){o[w].selected=!0,p&&(o[w].defaultSelected=!0);return}c!==null||o[w].disabled||(c=o[w])}c!==null&&(c.selected=!0)}}function Hs(o,c,h){if(c!=null&&(c=""+Vr(c),c!==o.value&&(o.value=c),h==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=h!=null?""+Vr(h):""}function lc(o,c,h,p){if(c==null){if(p!=null){if(h!=null)throw Error(a(92));if(de(p)){if(1<p.length)throw Error(a(93));p=p[0]}h=p}h==null&&(h=""),c=h}h=Vr(c),o.defaultValue=h,p=o.textContent,p===h&&p!==""&&p!==null&&(o.value=p)}function X(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var Ee=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lt(o,c,h){var p=c.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?p?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":p?o.setProperty(c,h):typeof h!="number"||h===0||Ee.has(c)?c==="float"?o.cssFloat=h:o[c]=(""+h).trim():o[c]=h+"px"}function yt(o,c,h){if(c!=null&&typeof c!="object")throw Error(a(62));if(o=o.style,h!=null){for(var p in h)!h.hasOwnProperty(p)||c!=null&&c.hasOwnProperty(p)||(p.indexOf("--")===0?o.setProperty(p,""):p==="float"?o.cssFloat="":o[p]="");for(var w in c)p=c[w],c.hasOwnProperty(w)&&h[w]!==p&&lt(o,w,p)}else for(var C in c)c.hasOwnProperty(C)&&lt(o,C,c[C])}function ot(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ut=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Lt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qt(o){return Lt.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var gt=null;function ur(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var dr=null,Hr=null;function Gt(o){var c=Ba(o);if(c&&(o=c.stateNode)){var h=o[cr]||null;e:switch(o=c.stateNode,c.type){case"input":if(wi(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Mr(""+c)+'"][type="radio"]'),c=0;c<h.length;c++){var p=h[c];if(p!==o&&p.form===o.form){var w=p[cr]||null;if(!w)throw Error(a(90));wi(p,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(c=0;c<h.length;c++)p=h[c],p.form===o.form&&Xi(p)}break e;case"textarea":Hs(o,h.value,h.defaultValue);break e;case"select":c=h.value,c!=null&&ji(o,!!h.multiple,c,!1)}}}var Gr=!1;function Qr(o,c,h){if(Gr)return o(c,h);Gr=!0;try{var p=o(c);return p}finally{if(Gr=!1,(dr!==null||Hr!==null)&&(zg(),dr&&(c=dr,o=Hr,Hr=dr=null,Gt(c),o)))for(c=0;c<o.length;c++)Gt(o[c])}}function Da(o,c){var h=o.stateNode;if(h===null)return null;var p=h[cr]||null;if(p===null)return null;h=p[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(a(231,c,typeof h));return h}var Er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ut=!1;if(Er)try{var ma={};Object.defineProperty(ma,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",ma,ma),window.removeEventListener("test",ma,ma)}catch{Ut=!1}var Ra=null,jl=null,fa=null;function xs(){if(fa)return fa;var o,c=jl,h=c.length,p,w="value"in Ra?Ra.value:Ra.textContent,C=w.length;for(o=0;o<h&&c[o]===w[o];o++);var H=h-o;for(p=1;p<=H&&c[h-p]===w[C-p];p++);return fa=w.slice(o,1<p?1-p:void 0)}function wn(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Lo(){return!0}function cc(){return!1}function Jn(o){function c(h,p,w,C,H){this._reactName=h,this._targetInst=w,this.type=p,this.nativeEvent=C,this.target=H,this.currentTarget=null;for(var ue in o)o.hasOwnProperty(ue)&&(h=o[ue],this[ue]=h?h(C):C[ue]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Lo:cc,this.isPropagationStopped=cc,this}return m(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Lo)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Lo)},persist:function(){},isPersistent:Lo}),c}var _i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_l=Jn(_i),Ni=m({},_i,{view:0,detail:0}),uc=Jn(Ni),dc,Nl,Mo,Zi=m({},Ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zt,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Mo&&(Mo&&o.type==="mousemove"?(dc=o.screenX-Mo.screenX,Nl=o.screenY-Mo.screenY):Nl=dc=0,Mo=o),dc)},movementY:function(o){return"movementY"in o?o.movementY:Nl}}),jd=Jn(Zi),Tf=m({},Zi,{dataTransfer:0}),Io=Jn(Tf),qo=m({},Ni,{relatedTarget:0}),fu=Jn(qo),Of=m({},_i,{animationName:0,elapsedTime:0,pseudoElement:0}),fc=Jn(Of),Df=m({},_i,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),k=Jn(Df),J=m({},_i,{data:0}),Ne=Jn(J),Me={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},He={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nt(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=mt[o])?!!c[o]:!1}function zt(){return Nt}var tr=m({},Ni,{key:function(o){if(o.key){var c=Me[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=wn(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?He[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zt,charCode:function(o){return o.type==="keypress"?wn(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?wn(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),xr=Jn(tr),Nr=m({},Zi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xr=Jn(Nr),Ua=m({},Ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zt}),fn=Jn(Ua),wa=m({},_i,{propertyName:0,elapsedTime:0,pseudoElement:0}),jn=Jn(wa),hn=m({},Zi,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),$n=Jn(hn),ii=m({},_i,{newState:0,oldState:0}),Ds=Jn(ii),Rf=[9,13,27,32],Sl=Er&&"CompositionEvent"in window,Si=null;Er&&"documentMode"in document&&(Si=document.documentMode);var Al=Er&&"TextEvent"in window&&!Si,Cl=Er&&(!Sl||Si&&8<Si&&11>=Si),kl=" ",El=!1;function zn(o,c){switch(o){case"keyup":return Rf.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pl(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var oi=!1;function _d(o,c){switch(o){case"compositionend":return Pl(c);case"keypress":return c.which!==32?null:(El=!0,kl);case"textInput":return o=c.data,o===kl&&El?null:o;default:return null}}function Nd(o,c){if(oi)return o==="compositionend"||!Sl&&zn(o,c)?(o=xs(),fa=jl=Ra=null,oi=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Cl&&c.locale!=="ko"?null:c.data;default:return null}}var Ga={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ji(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!Ga[o.type]:c==="textarea"}function hc(o,c,h,p){dr?Hr?Hr.push(p):Hr=[p]:dr=p,c=Yg(c,"onChange"),0<c.length&&(h=new _l("onChange","change",null,h,p),o.push({event:h,listeners:c}))}var Tl=null,Qn=null;function mc(o){gN(o,0)}function Ol(o){var c=dn(o);if(Xi(c))return o}function hu(o,c){if(o==="change")return c}var Fo=!1;if(Er){var Bo;if(Er){var vs="oninput"in document;if(!vs){var Rs=document.createElement("div");Rs.setAttribute("oninput","return;"),vs=typeof Rs.oninput=="function"}Bo=vs}else Bo=!1;Fo=Bo&&(!document.documentMode||9<document.documentMode)}function Uo(){Tl&&(Tl.detachEvent("onpropertychange",Qi),Qn=Tl=null)}function Qi(o){if(o.propertyName==="value"&&Ol(Qn)){var c=[];hc(c,Qn,o,ur(o)),Qr(mc,c)}}function Dl(o,c,h){o==="focusin"?(Uo(),Tl=c,Qn=h,Tl.attachEvent("onpropertychange",Qi)):o==="focusout"&&Uo()}function Sd(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Ol(Qn)}function mu(o,c){if(o==="click")return Ol(c)}function sn(o,c){if(o==="input"||o==="change")return Ol(c)}function Lf(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Ka=typeof Object.is=="function"?Object.is:Lf;function Ls(o,c){if(Ka(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),p=Object.keys(c);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var w=h[p];if(!Z.call(c,w)||!Ka(o[w],c[w]))return!1}return!0}function pu(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function gu(o,c){var h=pu(o);o=0;for(var p;h;){if(h.nodeType===3){if(p=o+h.textContent.length,o<=c&&p>=c)return{node:h,offset:c-o};o=p}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=pu(h)}}function xu(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?xu(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function vu(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=Ln(o.document);c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=Ln(o.document)}return c}function eo(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var Rl=Er&&"documentMode"in document&&11>=document.documentMode,Gs=null,$o=null,li=null,zo=!1;function Ks(o,c,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;zo||Gs==null||Gs!==Ln(p)||(p=Gs,"selectionStart"in p&&eo(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),li&&Ls(li,p)||(li=p,p=Yg($o,"onSelect"),0<p.length&&(c=new _l("onSelect","select",null,c,h),o.push({event:c,listeners:p}),c.target=Gs)))}function es(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var Ir={animationend:es("Animation","AnimationEnd"),animationiteration:es("Animation","AnimationIteration"),animationstart:es("Animation","AnimationStart"),transitionrun:es("Transition","TransitionRun"),transitionstart:es("Transition","TransitionStart"),transitioncancel:es("Transition","TransitionCancel"),transitionend:es("Transition","TransitionEnd")},oa={},Wa={};Er&&(Wa=document.createElement("div").style,"AnimationEvent"in window||(delete Ir.animationend.animation,delete Ir.animationiteration.animation,delete Ir.animationstart.animation),"TransitionEvent"in window||delete Ir.transitionend.transition);function Aa(o){if(oa[o])return oa[o];if(!Ir[o])return o;var c=Ir[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in Wa)return oa[o]=c[h];return o}var to=Aa("animationend"),yu=Aa("animationiteration"),pc=Aa("animationstart"),Mf=Aa("transitionrun"),dg=Aa("transitionstart"),fg=Aa("transitioncancel"),gm=Aa("transitionend"),xm=new Map,If="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");If.push("scrollEnd");function ci(o,c){xm.set(o,c),lr(c,[o])}var bu=new WeakMap;function Ws(o,c){if(typeof o=="object"&&o!==null){var h=bu.get(o);return h!==void 0?h:(c={value:o,source:c,stack:uu(c)},bu.set(o,c),c)}return{value:o,source:c,stack:uu(c)}}var Ys=[],gc=0,qf=0;function Ad(){for(var o=gc,c=qf=gc=0;c<o;){var h=Ys[c];Ys[c++]=null;var p=Ys[c];Ys[c++]=null;var w=Ys[c];Ys[c++]=null;var C=Ys[c];if(Ys[c++]=null,p!==null&&w!==null){var H=p.pending;H===null?w.next=w:(w.next=H.next,H.next=w),p.pending=w}C!==0&&Bf(h,w,C)}}function Cd(o,c,h,p){Ys[gc++]=o,Ys[gc++]=c,Ys[gc++]=h,Ys[gc++]=p,qf|=p,o.lanes|=p,o=o.alternate,o!==null&&(o.lanes|=p)}function Ff(o,c,h,p){return Cd(o,c,h,p),vc(o)}function xc(o,c){return Cd(o,null,null,c),vc(o)}function Bf(o,c,h){o.lanes|=h;var p=o.alternate;p!==null&&(p.lanes|=h);for(var w=!1,C=o.return;C!==null;)C.childLanes|=h,p=C.alternate,p!==null&&(p.childLanes|=h),C.tag===22&&(o=C.stateNode,o===null||o._visibility&1||(w=!0)),o=C,C=C.return;return o.tag===3?(C=o.stateNode,w&&c!==null&&(w=31-ht(h),o=C.hiddenUpdates,p=o[w],p===null?o[w]=[c]:p.push(c),c.lane=h|536870912),C):null}function vc(o){if(50<$m)throw $m=0,hy=null,Error(a(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var Mn={};function ui(o,c,h,p){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ts(o,c,h,p){return new ui(o,c,h,p)}function wu(o){return o=o.prototype,!(!o||!o.isReactComponent)}function ro(o,c){var h=o.alternate;return h===null?(h=ts(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function kd(o,c){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,c=h.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function yc(o,c,h,p,w,C){var H=0;if(p=o,typeof o=="function")wu(o)&&(H=1);else if(typeof o=="string")H=hR(o,h,le.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case F:return o=ts(31,h,c,w),o.elementType=F,o.lanes=C,o;case j:return Vo(h.children,w,C,c);case b:H=8,w|=24;break;case S:return o=ts(12,h,c,w|2),o.elementType=S,o.lanes=C,o;case R:return o=ts(13,h,c,w),o.elementType=R,o.lanes=C,o;case B:return o=ts(19,h,c,w),o.elementType=B,o.lanes=C,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case A:case T:H=10;break e;case E:H=9;break e;case D:H=11;break e;case U:H=14;break e;case I:H=16,p=null;break e}H=29,h=Error(a(130,o===null?"null":typeof o,"")),p=null}return c=ts(H,h,c,w),c.elementType=o,c.type=p,c.lanes=C,c}function Vo(o,c,h,p){return o=ts(7,o,p,c),o.lanes=h,o}function Uf(o,c,h){return o=ts(6,o,null,c),o.lanes=h,o}function Ed(o,c,h){return c=ts(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var Ll=[],Ho=0,ju=null,$f=0,di=[],Xs=0,bc=null,Go=1,Ko="";function wc(o,c){Ll[Ho++]=$f,Ll[Ho++]=ju,ju=o,$f=c}function hg(o,c,h){di[Xs++]=Go,di[Xs++]=Ko,di[Xs++]=bc,bc=o;var p=Go;o=Ko;var w=32-ht(p)-1;p&=~(1<<w),h+=1;var C=32-ht(c)+w;if(30<C){var H=w-w%5;C=(p&(1<<H)-1).toString(32),p>>=H,w-=H,Go=1<<32-ht(c)+w|h<<w|p,Ko=C+o}else Go=1<<C|h<<w|p,Ko=o}function Pd(o){o.return!==null&&(wc(o,1),hg(o,1,0))}function Td(o){for(;o===ju;)ju=Ll[--Ho],Ll[Ho]=null,$f=Ll[--Ho],Ll[Ho]=null;for(;o===bc;)bc=di[--Xs],di[Xs]=null,Ko=di[--Xs],di[Xs]=null,Go=di[--Xs],di[Xs]=null}var _n=null,Ya=null,ea=!1,Ml=null,ao=!1,vm=Error(a(519));function jc(o){var c=Error(a(418,""));throw _u(Ws(c,o)),vm}function mg(o){var c=o.stateNode,h=o.type,p=o.memoizedProps;switch(c[ar]=o,c[cr]=p,h){case"dialog":Fr("cancel",c),Fr("close",c);break;case"iframe":case"object":case"embed":Fr("load",c);break;case"video":case"audio":for(h=0;h<Vm.length;h++)Fr(Vm[h],c);break;case"source":Fr("error",c);break;case"img":case"image":case"link":Fr("error",c),Fr("load",c);break;case"details":Fr("toggle",c);break;case"input":Fr("invalid",c),si(c,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),Os(c);break;case"select":Fr("invalid",c);break;case"textarea":Fr("invalid",c),lc(c,p.value,p.defaultValue,p.children),Os(c)}h=p.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||c.textContent===""+h||p.suppressHydrationWarning===!0||bN(c.textContent,h)?(p.popover!=null&&(Fr("beforetoggle",c),Fr("toggle",c)),p.onScroll!=null&&Fr("scroll",c),p.onScrollEnd!=null&&Fr("scrollend",c),p.onClick!=null&&(c.onclick=Xg),c=!0):c=!1,c||jc(o)}function Wo(o){for(_n=o.return;_n;)switch(_n.tag){case 5:case 13:ao=!1;return;case 27:case 3:ao=!0;return;default:_n=_n.return}}function ys(o){if(o!==_n)return!1;if(!ea)return Wo(o),ea=!0,!1;var c=o.tag,h;if((h=c!==3&&c!==27)&&((h=c===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||Ey(o.type,o.memoizedProps)),h=!h),h&&Ya&&jc(o),Wo(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(a(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(h=o.data,h==="/$"){if(c===0){Ya=rl(o.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++;o=o.nextSibling}Ya=null}}else c===27?(c=Ya,Fu(o.type)?(o=Dy,Dy=null,Ya=o):Ya=c):Ya=_n?rl(o.stateNode.nextSibling):null;return!0}function Zs(){Ya=_n=null,ea=!1}function pg(){var o=Ml;return o!==null&&(hi===null?hi=o:hi.push.apply(hi,o),Ml=null),o}function _u(o){Ml===null?Ml=[o]:Ml.push(o)}var no=ye(null),In=null,Yo=null;function Il(o,c,h){K(no,c._currentValue),c._currentValue=h}function so(o){o._currentValue=no.current,P(no)}function zf(o,c,h){for(;o!==null;){var p=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,p!==null&&(p.childLanes|=c)):p!==null&&(p.childLanes&c)!==c&&(p.childLanes|=c),o===h)break;o=o.return}}function Vf(o,c,h,p){var w=o.child;for(w!==null&&(w.return=o);w!==null;){var C=w.dependencies;if(C!==null){var H=w.child;C=C.firstContext;e:for(;C!==null;){var ue=C;C=w;for(var Le=0;Le<c.length;Le++)if(ue.context===c[Le]){C.lanes|=h,ue=C.alternate,ue!==null&&(ue.lanes|=h),zf(C.return,h,o),p||(H=null);break e}C=ue.next}}else if(w.tag===18){if(H=w.return,H===null)throw Error(a(341));H.lanes|=h,C=H.alternate,C!==null&&(C.lanes|=h),zf(H,h,o),H=null}else H=w.child;if(H!==null)H.return=w;else for(H=w;H!==null;){if(H===o){H=null;break}if(w=H.sibling,w!==null){w.return=H.return,H=w;break}H=H.return}w=H}}function Nu(o,c,h,p){o=null;for(var w=c,C=!1;w!==null;){if(!C){if((w.flags&524288)!==0)C=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var H=w.alternate;if(H===null)throw Error(a(387));if(H=H.memoizedProps,H!==null){var ue=w.type;Ka(w.pendingProps.value,H.value)||(o!==null?o.push(ue):o=[ue])}}else if(w===ke.current){if(H=w.alternate,H===null)throw Error(a(387));H.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(o!==null?o.push(Xm):o=[Xm])}w=w.return}o!==null&&Vf(c,o,h,p),c.flags|=262144}function Hf(o){for(o=o.firstContext;o!==null;){if(!Ka(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function io(o){In=o,Yo=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Nn(o){return Gf(In,o)}function ql(o,c){return In===null&&io(o),Gf(o,c)}function Gf(o,c){var h=c._currentValue;if(c={context:c,memoizedValue:h,next:null},Yo===null){if(o===null)throw Error(a(308));Yo=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else Yo=Yo.next=c;return h}var qv=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(h,p){o.push(p)}};this.abort=function(){c.aborted=!0,o.forEach(function(h){return h()})}},gg=e.unstable_scheduleCallback,Fv=e.unstable_NormalPriority,Sn={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ym(){return{controller:new qv,data:new Map,refCount:0}}function Od(o){o.refCount--,o.refCount===0&&gg(Fv,function(){o.controller.abort()})}var Dd=null,bm=0,_c=0,Xo=null;function Bv(o,c){if(Dd===null){var h=Dd=[];bm=0,_c=by(),Xo={status:"pending",value:void 0,then:function(p){h.push(p)}}}return bm++,c.then(xg,xg),c}function xg(){if(--bm===0&&Dd!==null){Xo!==null&&(Xo.status="fulfilled");var o=Dd;Dd=null,_c=0,Xo=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function vg(o,c){var h=[],p={status:"pending",value:null,reason:null,then:function(w){h.push(w)}};return o.then(function(){p.status="fulfilled",p.value=c;for(var w=0;w<h.length;w++)(0,h[w])(c)},function(w){for(p.status="rejected",p.reason=w,w=0;w<h.length;w++)(0,h[w])(void 0)}),p}var y=se.S;se.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&Bv(o,c),y!==null&&y(o,c)};var N=ye(null);function O(){var o=N.current;return o!==null?o:La.pooledCache}function M(o,c){c===null?K(N,N.current):K(N,c.pool)}function Q(){var o=O();return o===null?null:{parent:Sn._currentValue,pool:o}}var ie=Error(a(460)),ce=Error(a(474)),he=Error(a(542)),ge={then:function(){}};function _e(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Fe(){}function Ze(o,c,h){switch(h=o[h],h===void 0?o.push(c):h!==c&&(c.then(Fe,Fe),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,Ge(o),o;default:if(typeof c.status=="string")c.then(Fe,Fe);else{if(o=La,o!==null&&100<o.shellSuspendCounter)throw Error(a(482));o=c,o.status="pending",o.then(function(p){if(c.status==="pending"){var w=c;w.status="fulfilled",w.value=p}},function(p){if(c.status==="pending"){var w=c;w.status="rejected",w.reason=p}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,Ge(o),o}throw je=c,ie}}var je=null;function $e(){if(je===null)throw Error(a(459));var o=je;return je=null,o}function Ge(o){if(o===ie||o===he)throw Error(a(483))}var st=!1;function Xe(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dt(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function ct(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function At(o,c,h){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(ga&2)!==0){var w=p.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),p.pending=c,c=vc(o),Bf(o,null,h),c}return Cd(o,p,c,h),vc(o)}function bt(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194048)!==0)){var p=c.lanes;p&=o.pendingLanes,h|=p,c.lanes=h,kt(o,h)}}function Qt(o,c){var h=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var w=null,C=null;if(h=h.firstBaseUpdate,h!==null){do{var H={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};C===null?w=C=H:C=C.next=H,h=h.next}while(h!==null);C===null?w=C=c:C=C.next=c}else w=C=c;h={baseState:p.baseState,firstBaseUpdate:w,lastBaseUpdate:C,shared:p.shared,callbacks:p.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}var $t=!1;function wr(){if($t){var o=Xo;if(o!==null)throw o}}function Vt(o,c,h,p){$t=!1;var w=o.updateQueue;st=!1;var C=w.firstBaseUpdate,H=w.lastBaseUpdate,ue=w.shared.pending;if(ue!==null){w.shared.pending=null;var Le=ue,Je=Le.next;Le.next=null,H===null?C=Je:H.next=Je,H=Le;var pt=o.alternate;pt!==null&&(pt=pt.updateQueue,ue=pt.lastBaseUpdate,ue!==H&&(ue===null?pt.firstBaseUpdate=Je:ue.next=Je,pt.lastBaseUpdate=Le))}if(C!==null){var wt=w.baseState;H=0,pt=Je=Le=null,ue=C;do{var Qe=ue.lane&-536870913,tt=Qe!==ue.lane;if(tt?(Jr&Qe)===Qe:(p&Qe)===Qe){Qe!==0&&Qe===_c&&($t=!0),pt!==null&&(pt=pt.next={lane:0,tag:ue.tag,payload:ue.payload,callback:null,next:null});e:{var yr=o,mr=ue;Qe=c;var Na=h;switch(mr.tag){case 1:if(yr=mr.payload,typeof yr=="function"){wt=yr.call(Na,wt,Qe);break e}wt=yr;break e;case 3:yr.flags=yr.flags&-65537|128;case 0:if(yr=mr.payload,Qe=typeof yr=="function"?yr.call(Na,wt,Qe):yr,Qe==null)break e;wt=m({},wt,Qe);break e;case 2:st=!0}}Qe=ue.callback,Qe!==null&&(o.flags|=64,tt&&(o.flags|=8192),tt=w.callbacks,tt===null?w.callbacks=[Qe]:tt.push(Qe))}else tt={lane:Qe,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},pt===null?(Je=pt=tt,Le=wt):pt=pt.next=tt,H|=Qe;if(ue=ue.next,ue===null){if(ue=w.shared.pending,ue===null)break;tt=ue,ue=tt.next,tt.next=null,w.lastBaseUpdate=tt,w.shared.pending=null}}while(!0);pt===null&&(Le=wt),w.baseState=Le,w.firstBaseUpdate=Je,w.lastBaseUpdate=pt,C===null&&(w.shared.lanes=0),Lu|=H,o.lanes=H,o.memoizedState=wt}}function Rr(o,c){if(typeof o!="function")throw Error(a(191,o));o.call(c)}function mn(o,c){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)Rr(h[o],c)}var vr=ye(null),Kt=ye(0);function Mt(o,c){o=Tc,K(Kt,o),K(vr,c),Tc=o|c.baseLanes}function $a(){K(Kt,Tc),K(vr,vr.current)}function jr(){Tc=Kt.current,P(vr),P(Kt)}var kr=0,Xt=null,Sr=null,$r=null,Ca=!1,on=!1,ln=!1,Xa=0,Dr=0,zr=null,Za=0;function hr(){throw Error(a(321))}function An(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!Ka(o[h],c[h]))return!1;return!0}function Js(o,c,h,p,w,C){return kr=C,Xt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,se.H=o===null||o.memoizedState===null?e5:t5,ln=!1,C=h(p,w),ln=!1,on&&(C=bs(c,h,p,w)),Ja(o),C}function Ja(o){se.H=Pg;var c=Sr!==null&&Sr.next!==null;if(kr=0,$r=Sr=Xt=null,Ca=!1,Dr=0,zr=null,c)throw Error(a(300));o===null||as||(o=o.dependencies,o!==null&&Hf(o)&&(as=!0))}function bs(o,c,h,p){Xt=o;var w=0;do{if(on&&(zr=null),Dr=0,on=!1,25<=w)throw Error(a(301));if(w+=1,$r=Sr=null,o.updateQueue!=null){var C=o.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}se.H=ND,C=c(h,p)}while(on);return C}function pa(){var o=se.H,c=o.useState()[0];return c=typeof c.then=="function"?Hn(c):c,o=o.useState()[0],(Sr!==null?Sr.memoizedState:null)!==o&&(Xt.flags|=1024),c}function cn(){var o=Xa!==0;return Xa=0,o}function ws(o,c,h){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~h}function Vn(o){if(Ca){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Ca=!1}kr=0,$r=Sr=Xt=null,on=!1,Dr=Xa=0,zr=null}function ja(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $r===null?Xt.memoizedState=$r=o:$r=$r.next=o,$r}function Zr(){if(Sr===null){var o=Xt.alternate;o=o!==null?o.memoizedState:null}else o=Sr.next;var c=$r===null?Xt.memoizedState:$r.next;if(c!==null)$r=c,Sr=o;else{if(o===null)throw Xt.alternate===null?Error(a(467)):Error(a(310));Sr=o,o={memoizedState:Sr.memoizedState,baseState:Sr.baseState,baseQueue:Sr.baseQueue,queue:Sr.queue,next:null},$r===null?Xt.memoizedState=$r=o:$r=$r.next=o}return $r}function rs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hn(o){var c=Dr;return Dr+=1,zr===null&&(zr=[]),o=Ze(zr,o,c),c=Xt,($r===null?c.memoizedState:$r.next)===null&&(c=c.alternate,se.H=c===null||c.memoizedState===null?e5:t5),o}function la(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Hn(o);if(o.$$typeof===T)return Nn(o)}throw Error(a(438,String(o)))}function js(o){var c=null,h=Xt.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var p=Xt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(c={data:p.data.map(function(w){return w.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=rs(),Xt.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(o),p=0;p<o;p++)h[p]=pe;return c.index++,h}function Cn(o,c){return typeof c=="function"?c(o):c}function oo(o){var c=Zr();return Ai(c,Sr,o)}function Ai(o,c,h){var p=o.queue;if(p===null)throw Error(a(311));p.lastRenderedReducer=h;var w=o.baseQueue,C=p.pending;if(C!==null){if(w!==null){var H=w.next;w.next=C.next,C.next=H}c.baseQueue=w=C,p.pending=null}if(C=o.baseState,w===null)o.memoizedState=C;else{c=w.next;var ue=H=null,Le=null,Je=c,pt=!1;do{var wt=Je.lane&-536870913;if(wt!==Je.lane?(Jr&wt)===wt:(kr&wt)===wt){var Qe=Je.revertLane;if(Qe===0)Le!==null&&(Le=Le.next={lane:0,revertLane:0,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null}),wt===_c&&(pt=!0);else if((kr&Qe)===Qe){Je=Je.next,Qe===_c&&(pt=!0);continue}else wt={lane:0,revertLane:Je.revertLane,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Le===null?(ue=Le=wt,H=C):Le=Le.next=wt,Xt.lanes|=Qe,Lu|=Qe;wt=Je.action,ln&&h(C,wt),C=Je.hasEagerState?Je.eagerState:h(C,wt)}else Qe={lane:wt,revertLane:Je.revertLane,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Le===null?(ue=Le=Qe,H=C):Le=Le.next=Qe,Xt.lanes|=wt,Lu|=wt;Je=Je.next}while(Je!==null&&Je!==c);if(Le===null?H=C:Le.next=ue,!Ka(C,o.memoizedState)&&(as=!0,pt&&(h=Xo,h!==null)))throw h;o.memoizedState=C,o.baseState=H,o.baseQueue=Le,p.lastRenderedState=C}return w===null&&(p.lanes=0),[o.memoizedState,p.dispatch]}function kn(o){var c=Zr(),h=c.queue;if(h===null)throw Error(a(311));h.lastRenderedReducer=o;var p=h.dispatch,w=h.pending,C=c.memoizedState;if(w!==null){h.pending=null;var H=w=w.next;do C=o(C,H.action),H=H.next;while(H!==w);Ka(C,c.memoizedState)||(as=!0),c.memoizedState=C,c.baseQueue===null&&(c.baseState=C),h.lastRenderedState=C}return[C,p]}function Rd(o,c,h){var p=Xt,w=Zr(),C=ea;if(C){if(h===void 0)throw Error(a(407));h=h()}else h=c();var H=!Ka((Sr||w).memoizedState,h);H&&(w.memoizedState=h,as=!0),w=w.queue;var ue=Su.bind(null,p,w,o);if(ku(2048,8,ue,[o]),w.getSnapshot!==c||H||$r!==null&&$r.memoizedState.tag&1){if(p.flags|=2048,Jo(9,qd(),Ld.bind(null,p,w,h,c),null),La===null)throw Error(a(349));C||(kr&124)!==0||Kf(p,c,h)}return h}function Kf(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=Xt.updateQueue,c===null?(c=rs(),Xt.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function Ld(o,c,h,p){c.value=h,c.getSnapshot=p,yg(c)&&bg(o)}function Su(o,c,h){return h(function(){yg(c)&&bg(o)})}function yg(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!Ka(o,h)}catch{return!0}}function bg(o){var c=xc(o,2);c!==null&&Oi(c,o,2)}function Md(o){var c=ja();if(typeof o=="function"){var h=o;if(o=h(),ln){vt(!0);try{h()}finally{vt(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cn,lastRenderedState:o},c}function Zo(o,c,h,p){return o.baseState=h,Ai(o,Sr,typeof p=="function"?p:Cn)}function Uv(o,c,h,p,w){if(Eg(o))throw Error(a(485));if(o=c.action,o!==null){var C={payload:w,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){C.listeners.push(H)}};se.T!==null?h(!0):C.isTransition=!1,p(C),h=c.pending,h===null?(C.next=c.pending=C,wg(c,C)):(C.next=h.next,c.pending=h.next=C)}}function wg(o,c){var h=c.action,p=c.payload,w=o.state;if(c.isTransition){var C=se.T,H={};se.T=H;try{var ue=h(w,p),Le=se.S;Le!==null&&Le(H,ue),jg(o,c,ue)}catch(Je){Au(o,c,Je)}finally{se.T=C}}else try{C=h(w,p),jg(o,c,C)}catch(Je){Au(o,c,Je)}}function jg(o,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(p){wm(o,c,p)},function(p){return Au(o,c,p)}):wm(o,c,h)}function wm(o,c,h){c.status="fulfilled",c.value=h,jm(c),o.state=h,c=o.pending,c!==null&&(h=c.next,h===c?o.pending=null:(h=h.next,c.next=h,wg(o,h)))}function Au(o,c,h){var p=o.pending;if(o.pending=null,p!==null){p=p.next;do c.status="rejected",c.reason=h,jm(c),c=c.next;while(c!==p)}o.action=null}function jm(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function _m(o,c){return c}function Id(o,c){if(ea){var h=La.formState;if(h!==null){e:{var p=Xt;if(ea){if(Ya){t:{for(var w=Ya,C=ao;w.nodeType!==8;){if(!C){w=null;break t}if(w=rl(w.nextSibling),w===null){w=null;break t}}C=w.data,w=C==="F!"||C==="F"?w:null}if(w){Ya=rl(w.nextSibling),p=w.data==="F!";break e}}jc(p)}p=!1}p&&(c=h[0])}}return h=ja(),h.memoizedState=h.baseState=c,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_m,lastRenderedState:c},h.queue=p,h=Z_.bind(null,Xt,p),p.dispatch=h,p=Md(!1),C=$v.bind(null,Xt,!1,p.queue),p=ja(),w={state:c,dispatch:null,action:o,pending:null},p.queue=w,h=Uv.bind(null,Xt,w,C,h),w.dispatch=h,p.memoizedState=o,[c,h,!1]}function Wf(o){var c=Zr();return Cu(c,Sr,o)}function Cu(o,c,h){if(c=Ai(o,c,_m)[0],o=oo(Cn)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var p=Hn(c)}catch(H){throw H===ie?he:H}else p=c;c=Zr();var w=c.queue,C=w.dispatch;return h!==c.memoizedState&&(Xt.flags|=2048,Jo(9,qd(),_g.bind(null,w,h),null)),[p,C,o]}function _g(o,c){o.action=c}function Ng(o){var c=Zr(),h=Sr;if(h!==null)return Cu(c,h,o);Zr(),c=c.memoizedState,h=Zr();var p=h.queue.dispatch;return h.memoizedState=o,[c,p,!1]}function Jo(o,c,h,p){return o={tag:o,create:h,deps:p,inst:c,next:null},c=Xt.updateQueue,c===null&&(c=rs(),Xt.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=o.next=o:(p=h.next,h.next=o,o.next=p,c.lastEffect=o),o}function qd(){return{destroy:void 0,resource:void 0}}function Yf(){return Zr().memoizedState}function Ci(o,c,h,p){var w=ja();p=p===void 0?null:p,Xt.flags|=o,w.memoizedState=Jo(1|c,qd(),h,p)}function ku(o,c,h,p){var w=Zr();p=p===void 0?null:p;var C=w.memoizedState.inst;Sr!==null&&p!==null&&An(p,Sr.memoizedState.deps)?w.memoizedState=Jo(c,C,h,p):(Xt.flags|=o,w.memoizedState=Jo(1|c,C,h,p))}function Nm(o,c){Ci(8390656,8,o,c)}function Sg(o,c){ku(2048,8,o,c)}function Sm(o,c){return ku(4,2,o,c)}function Nc(o,c){return ku(4,4,o,c)}function Ag(o,c){if(typeof c=="function"){o=o();var h=c(o);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function Am(o,c,h){h=h!=null?h.concat([o]):null,ku(4,4,Ag.bind(null,c,o),h)}function Cm(){}function km(o,c){var h=Zr();c=c===void 0?null:c;var p=h.memoizedState;return c!==null&&An(c,p[1])?p[0]:(h.memoizedState=[o,c],o)}function Cg(o,c){var h=Zr();c=c===void 0?null:c;var p=h.memoizedState;if(c!==null&&An(c,p[1]))return p[0];if(p=o(),ln){vt(!0);try{o()}finally{vt(!1)}}return h.memoizedState=[p,c],p}function Sc(o,c,h){return h===void 0||(kr&1073741824)!==0?o.memoizedState=c:(o.memoizedState=h,o=K5(),Xt.lanes|=o,Lu|=o,h)}function Xf(o,c,h,p){return Ka(h,c)?h:vr.current!==null?(o=Sc(o,h,p),Ka(o,c)||(as=!0),o):(kr&42)===0?(as=!0,o.memoizedState=h):(o=K5(),Xt.lanes|=o,Lu|=o,c)}function Fd(o,c,h,p,w){var C=fe.p;fe.p=C!==0&&8>C?C:8;var H=se.T,ue={};se.T=ue,$v(o,!1,c,h);try{var Le=w(),Je=se.S;if(Je!==null&&Je(ue,Le),Le!==null&&typeof Le=="object"&&typeof Le.then=="function"){var pt=vg(Le,p);Om(o,c,pt,Ti(o))}else Om(o,c,p,Ti(o))}catch(wt){Om(o,c,{then:function(){},status:"rejected",reason:wt},Ti())}finally{fe.p=C,se.T=H}}function Qo(){}function lo(o,c,h,p){if(o.tag!==5)throw Error(a(476));var w=el(o).queue;Fd(o,w,c,oe,h===null?Qo:function(){return Bd(o),h(p)})}function el(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cn,lastRenderedState:oe},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cn,lastRenderedState:h},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function Bd(o){var c=el(o).next.queue;Om(o,c,{},Ti())}function Ud(){return Nn(Xm)}function Em(){return Zr().memoizedState}function kg(){return Zr().memoizedState}function Pm(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var h=Ti();o=ct(h);var p=At(c,o,h);p!==null&&(Oi(p,c,h),bt(p,c,h)),c={cache:ym()},o.payload=c;return}c=c.return}}function Tm(o,c,h){var p=Ti();h={lane:p,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},Eg(o)?J_(c,h):(h=Ff(o,c,h,p),h!==null&&(Oi(h,o,p),Q_(h,c,p)))}function Z_(o,c,h){var p=Ti();Om(o,c,h,p)}function Om(o,c,h,p){var w={lane:p,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(Eg(o))J_(c,w);else{var C=o.alternate;if(o.lanes===0&&(C===null||C.lanes===0)&&(C=c.lastRenderedReducer,C!==null))try{var H=c.lastRenderedState,ue=C(H,h);if(w.hasEagerState=!0,w.eagerState=ue,Ka(ue,H))return Cd(o,c,w,0),La===null&&Ad(),!1}catch{}finally{}if(h=Ff(o,c,w,p),h!==null)return Oi(h,o,p),Q_(h,c,p),!0}return!1}function $v(o,c,h,p){if(p={lane:2,revertLane:by(),action:p,hasEagerState:!1,eagerState:null,next:null},Eg(o)){if(c)throw Error(a(479))}else c=Ff(o,h,p,2),c!==null&&Oi(c,o,2)}function Eg(o){var c=o.alternate;return o===Xt||c!==null&&c===Xt}function J_(o,c){on=Ca=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function Q_(o,c,h){if((h&4194048)!==0){var p=c.lanes;p&=o.pendingLanes,h|=p,c.lanes=h,kt(o,h)}}var Pg={readContext:Nn,use:la,useCallback:hr,useContext:hr,useEffect:hr,useImperativeHandle:hr,useLayoutEffect:hr,useInsertionEffect:hr,useMemo:hr,useReducer:hr,useRef:hr,useState:hr,useDebugValue:hr,useDeferredValue:hr,useTransition:hr,useSyncExternalStore:hr,useId:hr,useHostTransitionStatus:hr,useFormState:hr,useActionState:hr,useOptimistic:hr,useMemoCache:hr,useCacheRefresh:hr},e5={readContext:Nn,use:la,useCallback:function(o,c){return ja().memoizedState=[o,c===void 0?null:c],o},useContext:Nn,useEffect:Nm,useImperativeHandle:function(o,c,h){h=h!=null?h.concat([o]):null,Ci(4194308,4,Ag.bind(null,c,o),h)},useLayoutEffect:function(o,c){return Ci(4194308,4,o,c)},useInsertionEffect:function(o,c){Ci(4,2,o,c)},useMemo:function(o,c){var h=ja();c=c===void 0?null:c;var p=o();if(ln){vt(!0);try{o()}finally{vt(!1)}}return h.memoizedState=[p,c],p},useReducer:function(o,c,h){var p=ja();if(h!==void 0){var w=h(c);if(ln){vt(!0);try{h(c)}finally{vt(!1)}}}else w=c;return p.memoizedState=p.baseState=w,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:w},p.queue=o,o=o.dispatch=Tm.bind(null,Xt,o),[p.memoizedState,o]},useRef:function(o){var c=ja();return o={current:o},c.memoizedState=o},useState:function(o){o=Md(o);var c=o.queue,h=Z_.bind(null,Xt,c);return c.dispatch=h,[o.memoizedState,h]},useDebugValue:Cm,useDeferredValue:function(o,c){var h=ja();return Sc(h,o,c)},useTransition:function(){var o=Md(!1);return o=Fd.bind(null,Xt,o.queue,!0,!1),ja().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,h){var p=Xt,w=ja();if(ea){if(h===void 0)throw Error(a(407));h=h()}else{if(h=c(),La===null)throw Error(a(349));(Jr&124)!==0||Kf(p,c,h)}w.memoizedState=h;var C={value:h,getSnapshot:c};return w.queue=C,Nm(Su.bind(null,p,C,o),[o]),p.flags|=2048,Jo(9,qd(),Ld.bind(null,p,C,h,c),null),h},useId:function(){var o=ja(),c=La.identifierPrefix;if(ea){var h=Ko,p=Go;h=(p&~(1<<32-ht(p)-1)).toString(32)+h,c="«"+c+"R"+h,h=Xa++,0<h&&(c+="H"+h.toString(32)),c+="»"}else h=Za++,c="«"+c+"r"+h.toString(32)+"»";return o.memoizedState=c},useHostTransitionStatus:Ud,useFormState:Id,useActionState:Id,useOptimistic:function(o){var c=ja();c.memoizedState=c.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=$v.bind(null,Xt,!0,h),h.dispatch=c,[o,c]},useMemoCache:js,useCacheRefresh:function(){return ja().memoizedState=Pm.bind(null,Xt)}},t5={readContext:Nn,use:la,useCallback:km,useContext:Nn,useEffect:Sg,useImperativeHandle:Am,useInsertionEffect:Sm,useLayoutEffect:Nc,useMemo:Cg,useReducer:oo,useRef:Yf,useState:function(){return oo(Cn)},useDebugValue:Cm,useDeferredValue:function(o,c){var h=Zr();return Xf(h,Sr.memoizedState,o,c)},useTransition:function(){var o=oo(Cn)[0],c=Zr().memoizedState;return[typeof o=="boolean"?o:Hn(o),c]},useSyncExternalStore:Rd,useId:Em,useHostTransitionStatus:Ud,useFormState:Wf,useActionState:Wf,useOptimistic:function(o,c){var h=Zr();return Zo(h,Sr,o,c)},useMemoCache:js,useCacheRefresh:kg},ND={readContext:Nn,use:la,useCallback:km,useContext:Nn,useEffect:Sg,useImperativeHandle:Am,useInsertionEffect:Sm,useLayoutEffect:Nc,useMemo:Cg,useReducer:kn,useRef:Yf,useState:function(){return kn(Cn)},useDebugValue:Cm,useDeferredValue:function(o,c){var h=Zr();return Sr===null?Sc(h,o,c):Xf(h,Sr.memoizedState,o,c)},useTransition:function(){var o=kn(Cn)[0],c=Zr().memoizedState;return[typeof o=="boolean"?o:Hn(o),c]},useSyncExternalStore:Rd,useId:Em,useHostTransitionStatus:Ud,useFormState:Ng,useActionState:Ng,useOptimistic:function(o,c){var h=Zr();return Sr!==null?Zo(h,Sr,o,c):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:js,useCacheRefresh:kg},Zf=null,Dm=0;function Tg(o){var c=Dm;return Dm+=1,Zf===null&&(Zf=[]),Ze(Zf,o,c)}function Rm(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function Og(o,c){throw c.$$typeof===g?Error(a(525)):(o=Object.prototype.toString.call(c),Error(a(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function r5(o){var c=o._init;return c(o._payload)}function a5(o){function c(Ve,Be){if(o){var Ye=Ve.deletions;Ye===null?(Ve.deletions=[Be],Ve.flags|=16):Ye.push(Be)}}function h(Ve,Be){if(!o)return null;for(;Be!==null;)c(Ve,Be),Be=Be.sibling;return null}function p(Ve){for(var Be=new Map;Ve!==null;)Ve.key!==null?Be.set(Ve.key,Ve):Be.set(Ve.index,Ve),Ve=Ve.sibling;return Be}function w(Ve,Be){return Ve=ro(Ve,Be),Ve.index=0,Ve.sibling=null,Ve}function C(Ve,Be,Ye){return Ve.index=Ye,o?(Ye=Ve.alternate,Ye!==null?(Ye=Ye.index,Ye<Be?(Ve.flags|=67108866,Be):Ye):(Ve.flags|=67108866,Be)):(Ve.flags|=1048576,Be)}function H(Ve){return o&&Ve.alternate===null&&(Ve.flags|=67108866),Ve}function ue(Ve,Be,Ye,xt){return Be===null||Be.tag!==6?(Be=Uf(Ye,Ve.mode,xt),Be.return=Ve,Be):(Be=w(Be,Ye),Be.return=Ve,Be)}function Le(Ve,Be,Ye,xt){var Zt=Ye.type;return Zt===j?pt(Ve,Be,Ye.props.children,xt,Ye.key):Be!==null&&(Be.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===I&&r5(Zt)===Be.type)?(Be=w(Be,Ye.props),Rm(Be,Ye),Be.return=Ve,Be):(Be=yc(Ye.type,Ye.key,Ye.props,null,Ve.mode,xt),Rm(Be,Ye),Be.return=Ve,Be)}function Je(Ve,Be,Ye,xt){return Be===null||Be.tag!==4||Be.stateNode.containerInfo!==Ye.containerInfo||Be.stateNode.implementation!==Ye.implementation?(Be=Ed(Ye,Ve.mode,xt),Be.return=Ve,Be):(Be=w(Be,Ye.children||[]),Be.return=Ve,Be)}function pt(Ve,Be,Ye,xt,Zt){return Be===null||Be.tag!==7?(Be=Vo(Ye,Ve.mode,xt,Zt),Be.return=Ve,Be):(Be=w(Be,Ye),Be.return=Ve,Be)}function wt(Ve,Be,Ye){if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return Be=Uf(""+Be,Ve.mode,Ye),Be.return=Ve,Be;if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case v:return Ye=yc(Be.type,Be.key,Be.props,null,Ve.mode,Ye),Rm(Ye,Be),Ye.return=Ve,Ye;case x:return Be=Ed(Be,Ve.mode,Ye),Be.return=Ve,Be;case I:var xt=Be._init;return Be=xt(Be._payload),wt(Ve,Be,Ye)}if(de(Be)||q(Be))return Be=Vo(Be,Ve.mode,Ye,null),Be.return=Ve,Be;if(typeof Be.then=="function")return wt(Ve,Tg(Be),Ye);if(Be.$$typeof===T)return wt(Ve,ql(Ve,Be),Ye);Og(Ve,Be)}return null}function Qe(Ve,Be,Ye,xt){var Zt=Be!==null?Be.key:null;if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Zt!==null?null:ue(Ve,Be,""+Ye,xt);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case v:return Ye.key===Zt?Le(Ve,Be,Ye,xt):null;case x:return Ye.key===Zt?Je(Ve,Be,Ye,xt):null;case I:return Zt=Ye._init,Ye=Zt(Ye._payload),Qe(Ve,Be,Ye,xt)}if(de(Ye)||q(Ye))return Zt!==null?null:pt(Ve,Be,Ye,xt,null);if(typeof Ye.then=="function")return Qe(Ve,Be,Tg(Ye),xt);if(Ye.$$typeof===T)return Qe(Ve,Be,ql(Ve,Ye),xt);Og(Ve,Ye)}return null}function tt(Ve,Be,Ye,xt,Zt){if(typeof xt=="string"&&xt!==""||typeof xt=="number"||typeof xt=="bigint")return Ve=Ve.get(Ye)||null,ue(Be,Ve,""+xt,Zt);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case v:return Ve=Ve.get(xt.key===null?Ye:xt.key)||null,Le(Be,Ve,xt,Zt);case x:return Ve=Ve.get(xt.key===null?Ye:xt.key)||null,Je(Be,Ve,xt,Zt);case I:var Lr=xt._init;return xt=Lr(xt._payload),tt(Ve,Be,Ye,xt,Zt)}if(de(xt)||q(xt))return Ve=Ve.get(Ye)||null,pt(Be,Ve,xt,Zt,null);if(typeof xt.then=="function")return tt(Ve,Be,Ye,Tg(xt),Zt);if(xt.$$typeof===T)return tt(Ve,Be,Ye,ql(Be,xt),Zt);Og(Be,xt)}return null}function yr(Ve,Be,Ye,xt){for(var Zt=null,Lr=null,sr=Be,pr=Be=0,ss=null;sr!==null&&pr<Ye.length;pr++){sr.index>pr?(ss=sr,sr=null):ss=sr.sibling;var ta=Qe(Ve,sr,Ye[pr],xt);if(ta===null){sr===null&&(sr=ss);break}o&&sr&&ta.alternate===null&&c(Ve,sr),Be=C(ta,Be,pr),Lr===null?Zt=ta:Lr.sibling=ta,Lr=ta,sr=ss}if(pr===Ye.length)return h(Ve,sr),ea&&wc(Ve,pr),Zt;if(sr===null){for(;pr<Ye.length;pr++)sr=wt(Ve,Ye[pr],xt),sr!==null&&(Be=C(sr,Be,pr),Lr===null?Zt=sr:Lr.sibling=sr,Lr=sr);return ea&&wc(Ve,pr),Zt}for(sr=p(sr);pr<Ye.length;pr++)ss=tt(sr,Ve,pr,Ye[pr],xt),ss!==null&&(o&&ss.alternate!==null&&sr.delete(ss.key===null?pr:ss.key),Be=C(ss,Be,pr),Lr===null?Zt=ss:Lr.sibling=ss,Lr=ss);return o&&sr.forEach(function(Vu){return c(Ve,Vu)}),ea&&wc(Ve,pr),Zt}function mr(Ve,Be,Ye,xt){if(Ye==null)throw Error(a(151));for(var Zt=null,Lr=null,sr=Be,pr=Be=0,ss=null,ta=Ye.next();sr!==null&&!ta.done;pr++,ta=Ye.next()){sr.index>pr?(ss=sr,sr=null):ss=sr.sibling;var Vu=Qe(Ve,sr,ta.value,xt);if(Vu===null){sr===null&&(sr=ss);break}o&&sr&&Vu.alternate===null&&c(Ve,sr),Be=C(Vu,Be,pr),Lr===null?Zt=Vu:Lr.sibling=Vu,Lr=Vu,sr=ss}if(ta.done)return h(Ve,sr),ea&&wc(Ve,pr),Zt;if(sr===null){for(;!ta.done;pr++,ta=Ye.next())ta=wt(Ve,ta.value,xt),ta!==null&&(Be=C(ta,Be,pr),Lr===null?Zt=ta:Lr.sibling=ta,Lr=ta);return ea&&wc(Ve,pr),Zt}for(sr=p(sr);!ta.done;pr++,ta=Ye.next())ta=tt(sr,Ve,pr,ta.value,xt),ta!==null&&(o&&ta.alternate!==null&&sr.delete(ta.key===null?pr:ta.key),Be=C(ta,Be,pr),Lr===null?Zt=ta:Lr.sibling=ta,Lr=ta);return o&&sr.forEach(function(SR){return c(Ve,SR)}),ea&&wc(Ve,pr),Zt}function Na(Ve,Be,Ye,xt){if(typeof Ye=="object"&&Ye!==null&&Ye.type===j&&Ye.key===null&&(Ye=Ye.props.children),typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case v:e:{for(var Zt=Ye.key;Be!==null;){if(Be.key===Zt){if(Zt=Ye.type,Zt===j){if(Be.tag===7){h(Ve,Be.sibling),xt=w(Be,Ye.props.children),xt.return=Ve,Ve=xt;break e}}else if(Be.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===I&&r5(Zt)===Be.type){h(Ve,Be.sibling),xt=w(Be,Ye.props),Rm(xt,Ye),xt.return=Ve,Ve=xt;break e}h(Ve,Be);break}else c(Ve,Be);Be=Be.sibling}Ye.type===j?(xt=Vo(Ye.props.children,Ve.mode,xt,Ye.key),xt.return=Ve,Ve=xt):(xt=yc(Ye.type,Ye.key,Ye.props,null,Ve.mode,xt),Rm(xt,Ye),xt.return=Ve,Ve=xt)}return H(Ve);case x:e:{for(Zt=Ye.key;Be!==null;){if(Be.key===Zt)if(Be.tag===4&&Be.stateNode.containerInfo===Ye.containerInfo&&Be.stateNode.implementation===Ye.implementation){h(Ve,Be.sibling),xt=w(Be,Ye.children||[]),xt.return=Ve,Ve=xt;break e}else{h(Ve,Be);break}else c(Ve,Be);Be=Be.sibling}xt=Ed(Ye,Ve.mode,xt),xt.return=Ve,Ve=xt}return H(Ve);case I:return Zt=Ye._init,Ye=Zt(Ye._payload),Na(Ve,Be,Ye,xt)}if(de(Ye))return yr(Ve,Be,Ye,xt);if(q(Ye)){if(Zt=q(Ye),typeof Zt!="function")throw Error(a(150));return Ye=Zt.call(Ye),mr(Ve,Be,Ye,xt)}if(typeof Ye.then=="function")return Na(Ve,Be,Tg(Ye),xt);if(Ye.$$typeof===T)return Na(Ve,Be,ql(Ve,Ye),xt);Og(Ve,Ye)}return typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint"?(Ye=""+Ye,Be!==null&&Be.tag===6?(h(Ve,Be.sibling),xt=w(Be,Ye),xt.return=Ve,Ve=xt):(h(Ve,Be),xt=Uf(Ye,Ve.mode,xt),xt.return=Ve,Ve=xt),H(Ve)):h(Ve,Be)}return function(Ve,Be,Ye,xt){try{Dm=0;var Zt=Na(Ve,Be,Ye,xt);return Zf=null,Zt}catch(sr){if(sr===ie||sr===he)throw sr;var Lr=ts(29,sr,null,Ve.mode);return Lr.lanes=xt,Lr.return=Ve,Lr}finally{}}}var Jf=a5(!0),n5=a5(!1),co=ye(null),Fl=null;function Eu(o){var c=o.alternate;K(Gn,Gn.current&1),K(co,o),Fl===null&&(c===null||vr.current!==null||c.memoizedState!==null)&&(Fl=o)}function s5(o){if(o.tag===22){if(K(Gn,Gn.current),K(co,o),Fl===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(Fl=o)}}else Pu()}function Pu(){K(Gn,Gn.current),K(co,co.current)}function Ac(o){P(co),Fl===o&&(Fl=null),P(Gn)}var Gn=ye(0);function Dg(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||Oy(h)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function zv(o,c,h,p){c=o.memoizedState,h=h(p,c),h=h==null?c:m({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var Vv={enqueueSetState:function(o,c,h){o=o._reactInternals;var p=Ti(),w=ct(p);w.payload=c,h!=null&&(w.callback=h),c=At(o,w,p),c!==null&&(Oi(c,o,p),bt(c,o,p))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var p=Ti(),w=ct(p);w.tag=1,w.payload=c,h!=null&&(w.callback=h),c=At(o,w,p),c!==null&&(Oi(c,o,p),bt(c,o,p))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=Ti(),p=ct(h);p.tag=2,c!=null&&(p.callback=c),c=At(o,p,h),c!==null&&(Oi(c,o,h),bt(c,o,h))}};function i5(o,c,h,p,w,C,H){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,C,H):c.prototype&&c.prototype.isPureReactComponent?!Ls(h,p)||!Ls(w,C):!0}function o5(o,c,h,p){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,p),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,p),c.state!==o&&Vv.enqueueReplaceState(c,c.state,null)}function $d(o,c){var h=c;if("ref"in c){h={};for(var p in c)p!=="ref"&&(h[p]=c[p])}if(o=o.defaultProps){h===c&&(h=m({},h));for(var w in o)h[w]===void 0&&(h[w]=o[w])}return h}var Rg=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function l5(o){Rg(o)}function c5(o){console.error(o)}function u5(o){Rg(o)}function Lg(o,c){try{var h=o.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(p){setTimeout(function(){throw p})}}function d5(o,c,h){try{var p=o.onCaughtError;p(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function Hv(o,c,h){return h=ct(h),h.tag=3,h.payload={element:null},h.callback=function(){Lg(o,c)},h}function f5(o){return o=ct(o),o.tag=3,o}function h5(o,c,h,p){var w=h.type.getDerivedStateFromError;if(typeof w=="function"){var C=p.value;o.payload=function(){return w(C)},o.callback=function(){d5(c,h,p)}}var H=h.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(o.callback=function(){d5(c,h,p),typeof w!="function"&&(Mu===null?Mu=new Set([this]):Mu.add(this));var ue=p.stack;this.componentDidCatch(p.value,{componentStack:ue!==null?ue:""})})}function SD(o,c,h,p,w){if(h.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(c=h.alternate,c!==null&&Nu(c,h,w,!0),h=co.current,h!==null){switch(h.tag){case 13:return Fl===null?py():h.alternate===null&&pn===0&&(pn=3),h.flags&=-257,h.flags|=65536,h.lanes=w,p===ge?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([p]):c.add(p),xy(o,p,w)),!1;case 22:return h.flags|=65536,p===ge?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([p])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([p]):h.add(p)),xy(o,p,w)),!1}throw Error(a(435,h.tag))}return xy(o,p,w),py(),!1}if(ea)return c=co.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=w,p!==vm&&(o=Error(a(422),{cause:p}),_u(Ws(o,h)))):(p!==vm&&(c=Error(a(423),{cause:p}),_u(Ws(c,h))),o=o.current.alternate,o.flags|=65536,w&=-w,o.lanes|=w,p=Ws(p,h),w=Hv(o.stateNode,p,w),Qt(o,w),pn!==4&&(pn=2)),!1;var C=Error(a(520),{cause:p});if(C=Ws(C,h),Um===null?Um=[C]:Um.push(C),pn!==4&&(pn=2),c===null)return!0;p=Ws(p,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,o=w&-w,h.lanes|=o,o=Hv(h.stateNode,p,o),Qt(h,o),!1;case 1:if(c=h.type,C=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Mu===null||!Mu.has(C))))return h.flags|=65536,w&=-w,h.lanes|=w,w=f5(w),h5(w,o,h,p),Qt(h,w),!1}h=h.return}while(h!==null);return!1}var m5=Error(a(461)),as=!1;function _s(o,c,h,p){c.child=o===null?n5(c,null,h,p):Jf(c,o.child,h,p)}function p5(o,c,h,p,w){h=h.render;var C=c.ref;if("ref"in p){var H={};for(var ue in p)ue!=="ref"&&(H[ue]=p[ue])}else H=p;return io(c),p=Js(o,c,h,H,C,w),ue=cn(),o!==null&&!as?(ws(o,c,w),Cc(o,c,w)):(ea&&ue&&Pd(c),c.flags|=1,_s(o,c,p,w),c.child)}function g5(o,c,h,p,w){if(o===null){var C=h.type;return typeof C=="function"&&!wu(C)&&C.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=C,x5(o,c,C,p,w)):(o=yc(h.type,null,p,c,c.mode,w),o.ref=c.ref,o.return=c,c.child=o)}if(C=o.child,!Qv(o,w)){var H=C.memoizedProps;if(h=h.compare,h=h!==null?h:Ls,h(H,p)&&o.ref===c.ref)return Cc(o,c,w)}return c.flags|=1,o=ro(C,p),o.ref=c.ref,o.return=c,c.child=o}function x5(o,c,h,p,w){if(o!==null){var C=o.memoizedProps;if(Ls(C,p)&&o.ref===c.ref)if(as=!1,c.pendingProps=p=C,Qv(o,w))(o.flags&131072)!==0&&(as=!0);else return c.lanes=o.lanes,Cc(o,c,w)}return Gv(o,c,h,p,w)}function v5(o,c,h){var p=c.pendingProps,w=p.children,C=o!==null?o.memoizedState:null;if(p.mode==="hidden"){if((c.flags&128)!==0){if(p=C!==null?C.baseLanes|h:h,o!==null){for(w=c.child=o.child,C=0;w!==null;)C=C|w.lanes|w.childLanes,w=w.sibling;c.childLanes=C&~p}else c.childLanes=0,c.child=null;return y5(o,c,p,h)}if((h&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&M(c,C!==null?C.cachePool:null),C!==null?Mt(c,C):$a(),s5(c);else return c.lanes=c.childLanes=536870912,y5(o,c,C!==null?C.baseLanes|h:h,h)}else C!==null?(M(c,C.cachePool),Mt(c,C),Pu(),c.memoizedState=null):(o!==null&&M(c,null),$a(),Pu());return _s(o,c,w,h),c.child}function y5(o,c,h,p){var w=O();return w=w===null?null:{parent:Sn._currentValue,pool:w},c.memoizedState={baseLanes:h,cachePool:w},o!==null&&M(c,null),$a(),s5(c),o!==null&&Nu(o,c,p,!0),null}function Mg(o,c){var h=c.ref;if(h===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(a(284));(o===null||o.ref!==h)&&(c.flags|=4194816)}}function Gv(o,c,h,p,w){return io(c),h=Js(o,c,h,p,void 0,w),p=cn(),o!==null&&!as?(ws(o,c,w),Cc(o,c,w)):(ea&&p&&Pd(c),c.flags|=1,_s(o,c,h,w),c.child)}function b5(o,c,h,p,w,C){return io(c),c.updateQueue=null,h=bs(c,p,h,w),Ja(o),p=cn(),o!==null&&!as?(ws(o,c,C),Cc(o,c,C)):(ea&&p&&Pd(c),c.flags|=1,_s(o,c,h,C),c.child)}function w5(o,c,h,p,w){if(io(c),c.stateNode===null){var C=Mn,H=h.contextType;typeof H=="object"&&H!==null&&(C=Nn(H)),C=new h(p,C),c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Vv,c.stateNode=C,C._reactInternals=c,C=c.stateNode,C.props=p,C.state=c.memoizedState,C.refs={},Xe(c),H=h.contextType,C.context=typeof H=="object"&&H!==null?Nn(H):Mn,C.state=c.memoizedState,H=h.getDerivedStateFromProps,typeof H=="function"&&(zv(c,h,H,p),C.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(H=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),H!==C.state&&Vv.enqueueReplaceState(C,C.state,null),Vt(c,p,C,w),wr(),C.state=c.memoizedState),typeof C.componentDidMount=="function"&&(c.flags|=4194308),p=!0}else if(o===null){C=c.stateNode;var ue=c.memoizedProps,Le=$d(h,ue);C.props=Le;var Je=C.context,pt=h.contextType;H=Mn,typeof pt=="object"&&pt!==null&&(H=Nn(pt));var wt=h.getDerivedStateFromProps;pt=typeof wt=="function"||typeof C.getSnapshotBeforeUpdate=="function",ue=c.pendingProps!==ue,pt||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(ue||Je!==H)&&o5(c,C,p,H),st=!1;var Qe=c.memoizedState;C.state=Qe,Vt(c,p,C,w),wr(),Je=c.memoizedState,ue||Qe!==Je||st?(typeof wt=="function"&&(zv(c,h,wt,p),Je=c.memoizedState),(Le=st||i5(c,h,Le,p,Qe,Je,H))?(pt||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(c.flags|=4194308)):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=p,c.memoizedState=Je),C.props=p,C.state=Je,C.context=H,p=Le):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),p=!1)}else{C=c.stateNode,dt(o,c),H=c.memoizedProps,pt=$d(h,H),C.props=pt,wt=c.pendingProps,Qe=C.context,Je=h.contextType,Le=Mn,typeof Je=="object"&&Je!==null&&(Le=Nn(Je)),ue=h.getDerivedStateFromProps,(Je=typeof ue=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(H!==wt||Qe!==Le)&&o5(c,C,p,Le),st=!1,Qe=c.memoizedState,C.state=Qe,Vt(c,p,C,w),wr();var tt=c.memoizedState;H!==wt||Qe!==tt||st||o!==null&&o.dependencies!==null&&Hf(o.dependencies)?(typeof ue=="function"&&(zv(c,h,ue,p),tt=c.memoizedState),(pt=st||i5(c,h,pt,p,Qe,tt,Le)||o!==null&&o.dependencies!==null&&Hf(o.dependencies))?(Je||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(p,tt,Le),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(p,tt,Le)),typeof C.componentDidUpdate=="function"&&(c.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof C.componentDidUpdate!="function"||H===o.memoizedProps&&Qe===o.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&Qe===o.memoizedState||(c.flags|=1024),c.memoizedProps=p,c.memoizedState=tt),C.props=p,C.state=tt,C.context=Le,p=pt):(typeof C.componentDidUpdate!="function"||H===o.memoizedProps&&Qe===o.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&Qe===o.memoizedState||(c.flags|=1024),p=!1)}return C=p,Mg(o,c),p=(c.flags&128)!==0,C||p?(C=c.stateNode,h=p&&typeof h.getDerivedStateFromError!="function"?null:C.render(),c.flags|=1,o!==null&&p?(c.child=Jf(c,o.child,null,w),c.child=Jf(c,null,h,w)):_s(o,c,h,w),c.memoizedState=C.state,o=c.child):o=Cc(o,c,w),o}function j5(o,c,h,p){return Zs(),c.flags|=256,_s(o,c,h,p),c.child}var Kv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wv(o){return{baseLanes:o,cachePool:Q()}}function Yv(o,c,h){return o=o!==null?o.childLanes&~h:0,c&&(o|=uo),o}function _5(o,c,h){var p=c.pendingProps,w=!1,C=(c.flags&128)!==0,H;if((H=C)||(H=o!==null&&o.memoizedState===null?!1:(Gn.current&2)!==0),H&&(w=!0,c.flags&=-129),H=(c.flags&32)!==0,c.flags&=-33,o===null){if(ea){if(w?Eu(c):Pu(),ea){var ue=Ya,Le;if(Le=ue){e:{for(Le=ue,ue=ao;Le.nodeType!==8;){if(!ue){ue=null;break e}if(Le=rl(Le.nextSibling),Le===null){ue=null;break e}}ue=Le}ue!==null?(c.memoizedState={dehydrated:ue,treeContext:bc!==null?{id:Go,overflow:Ko}:null,retryLane:536870912,hydrationErrors:null},Le=ts(18,null,null,0),Le.stateNode=ue,Le.return=c,c.child=Le,_n=c,Ya=null,Le=!0):Le=!1}Le||jc(c)}if(ue=c.memoizedState,ue!==null&&(ue=ue.dehydrated,ue!==null))return Oy(ue)?c.lanes=32:c.lanes=536870912,null;Ac(c)}return ue=p.children,p=p.fallback,w?(Pu(),w=c.mode,ue=Ig({mode:"hidden",children:ue},w),p=Vo(p,w,h,null),ue.return=c,p.return=c,ue.sibling=p,c.child=ue,w=c.child,w.memoizedState=Wv(h),w.childLanes=Yv(o,H,h),c.memoizedState=Kv,p):(Eu(c),Xv(c,ue))}if(Le=o.memoizedState,Le!==null&&(ue=Le.dehydrated,ue!==null)){if(C)c.flags&256?(Eu(c),c.flags&=-257,c=Zv(o,c,h)):c.memoizedState!==null?(Pu(),c.child=o.child,c.flags|=128,c=null):(Pu(),w=p.fallback,ue=c.mode,p=Ig({mode:"visible",children:p.children},ue),w=Vo(w,ue,h,null),w.flags|=2,p.return=c,w.return=c,p.sibling=w,c.child=p,Jf(c,o.child,null,h),p=c.child,p.memoizedState=Wv(h),p.childLanes=Yv(o,H,h),c.memoizedState=Kv,c=w);else if(Eu(c),Oy(ue)){if(H=ue.nextSibling&&ue.nextSibling.dataset,H)var Je=H.dgst;H=Je,p=Error(a(419)),p.stack="",p.digest=H,_u({value:p,source:null,stack:null}),c=Zv(o,c,h)}else if(as||Nu(o,c,h,!1),H=(h&o.childLanes)!==0,as||H){if(H=La,H!==null&&(p=h&-h,p=(p&42)!==0?1:We(p),p=(p&(H.suspendedLanes|h))!==0?0:p,p!==0&&p!==Le.retryLane))throw Le.retryLane=p,xc(o,p),Oi(H,o,p),m5;ue.data==="$?"||py(),c=Zv(o,c,h)}else ue.data==="$?"?(c.flags|=192,c.child=o.child,c=null):(o=Le.treeContext,Ya=rl(ue.nextSibling),_n=c,ea=!0,Ml=null,ao=!1,o!==null&&(di[Xs++]=Go,di[Xs++]=Ko,di[Xs++]=bc,Go=o.id,Ko=o.overflow,bc=c),c=Xv(c,p.children),c.flags|=4096);return c}return w?(Pu(),w=p.fallback,ue=c.mode,Le=o.child,Je=Le.sibling,p=ro(Le,{mode:"hidden",children:p.children}),p.subtreeFlags=Le.subtreeFlags&65011712,Je!==null?w=ro(Je,w):(w=Vo(w,ue,h,null),w.flags|=2),w.return=c,p.return=c,p.sibling=w,c.child=p,p=w,w=c.child,ue=o.child.memoizedState,ue===null?ue=Wv(h):(Le=ue.cachePool,Le!==null?(Je=Sn._currentValue,Le=Le.parent!==Je?{parent:Je,pool:Je}:Le):Le=Q(),ue={baseLanes:ue.baseLanes|h,cachePool:Le}),w.memoizedState=ue,w.childLanes=Yv(o,H,h),c.memoizedState=Kv,p):(Eu(c),h=o.child,o=h.sibling,h=ro(h,{mode:"visible",children:p.children}),h.return=c,h.sibling=null,o!==null&&(H=c.deletions,H===null?(c.deletions=[o],c.flags|=16):H.push(o)),c.child=h,c.memoizedState=null,h)}function Xv(o,c){return c=Ig({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function Ig(o,c){return o=ts(22,o,null,c),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Zv(o,c,h){return Jf(c,o.child,null,h),o=Xv(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function N5(o,c,h){o.lanes|=c;var p=o.alternate;p!==null&&(p.lanes|=c),zf(o.return,c,h)}function Jv(o,c,h,p,w){var C=o.memoizedState;C===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:w}:(C.isBackwards=c,C.rendering=null,C.renderingStartTime=0,C.last=p,C.tail=h,C.tailMode=w)}function S5(o,c,h){var p=c.pendingProps,w=p.revealOrder,C=p.tail;if(_s(o,c,p.children,h),p=Gn.current,(p&2)!==0)p=p&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&N5(o,h,c);else if(o.tag===19)N5(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}switch(K(Gn,p),w){case"forwards":for(h=c.child,w=null;h!==null;)o=h.alternate,o!==null&&Dg(o)===null&&(w=h),h=h.sibling;h=w,h===null?(w=c.child,c.child=null):(w=h.sibling,h.sibling=null),Jv(c,!1,w,h,C);break;case"backwards":for(h=null,w=c.child,c.child=null;w!==null;){if(o=w.alternate,o!==null&&Dg(o)===null){c.child=w;break}o=w.sibling,w.sibling=h,h=w,w=o}Jv(c,!0,h,null,C);break;case"together":Jv(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Cc(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),Lu|=c.lanes,(h&c.childLanes)===0)if(o!==null){if(Nu(o,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(a(153));if(c.child!==null){for(o=c.child,h=ro(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=ro(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function Qv(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Hf(o)))}function AD(o,c,h){switch(c.tag){case 3:Ae(c,c.stateNode.containerInfo),Il(c,Sn,o.memoizedState.cache),Zs();break;case 27:case 5:De(c);break;case 4:Ae(c,c.stateNode.containerInfo);break;case 10:Il(c,c.type,c.memoizedProps.value);break;case 13:var p=c.memoizedState;if(p!==null)return p.dehydrated!==null?(Eu(c),c.flags|=128,null):(h&c.child.childLanes)!==0?_5(o,c,h):(Eu(c),o=Cc(o,c,h),o!==null?o.sibling:null);Eu(c);break;case 19:var w=(o.flags&128)!==0;if(p=(h&c.childLanes)!==0,p||(Nu(o,c,h,!1),p=(h&c.childLanes)!==0),w){if(p)return S5(o,c,h);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),K(Gn,Gn.current),p)break;return null;case 22:case 23:return c.lanes=0,v5(o,c,h);case 24:Il(c,Sn,o.memoizedState.cache)}return Cc(o,c,h)}function A5(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps)as=!0;else{if(!Qv(o,h)&&(c.flags&128)===0)return as=!1,AD(o,c,h);as=(o.flags&131072)!==0}else as=!1,ea&&(c.flags&1048576)!==0&&hg(c,$f,c.index);switch(c.lanes=0,c.tag){case 16:e:{o=c.pendingProps;var p=c.elementType,w=p._init;if(p=w(p._payload),c.type=p,typeof p=="function")wu(p)?(o=$d(p,o),c.tag=1,c=w5(null,c,p,o,h)):(c.tag=0,c=Gv(null,c,p,o,h));else{if(p!=null){if(w=p.$$typeof,w===D){c.tag=11,c=p5(null,c,p,o,h);break e}else if(w===U){c.tag=14,c=g5(null,c,p,o,h);break e}}throw c=V(p)||p,Error(a(306,c,""))}}return c;case 0:return Gv(o,c,c.type,c.pendingProps,h);case 1:return p=c.type,w=$d(p,c.pendingProps),w5(o,c,p,w,h);case 3:e:{if(Ae(c,c.stateNode.containerInfo),o===null)throw Error(a(387));p=c.pendingProps;var C=c.memoizedState;w=C.element,dt(o,c),Vt(c,p,null,h);var H=c.memoizedState;if(p=H.cache,Il(c,Sn,p),p!==C.cache&&Vf(c,[Sn],h,!0),wr(),p=H.element,C.isDehydrated)if(C={element:p,isDehydrated:!1,cache:H.cache},c.updateQueue.baseState=C,c.memoizedState=C,c.flags&256){c=j5(o,c,p,h);break e}else if(p!==w){w=Ws(Error(a(424)),c),_u(w),c=j5(o,c,p,h);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Ya=rl(o.firstChild),_n=c,ea=!0,Ml=null,ao=!0,h=n5(c,null,p,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Zs(),p===w){c=Cc(o,c,h);break e}_s(o,c,p,h)}c=c.child}return c;case 26:return Mg(o,c),o===null?(h=PN(c.type,null,c.pendingProps,null))?c.memoizedState=h:ea||(h=c.type,o=c.pendingProps,p=Zg(me.current).createElement(h),p[ar]=c,p[cr]=o,Ss(p,h,o),Wr(p),c.stateNode=p):c.memoizedState=PN(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return De(c),o===null&&ea&&(p=c.stateNode=CN(c.type,c.pendingProps,me.current),_n=c,ao=!0,w=Ya,Fu(c.type)?(Dy=w,Ya=rl(p.firstChild)):Ya=w),_s(o,c,c.pendingProps.children,h),Mg(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&ea&&((w=p=Ya)&&(p=eR(p,c.type,c.pendingProps,ao),p!==null?(c.stateNode=p,_n=c,Ya=rl(p.firstChild),ao=!1,w=!0):w=!1),w||jc(c)),De(c),w=c.type,C=c.pendingProps,H=o!==null?o.memoizedProps:null,p=C.children,Ey(w,C)?p=null:H!==null&&Ey(w,H)&&(c.flags|=32),c.memoizedState!==null&&(w=Js(o,c,pa,null,null,h),Xm._currentValue=w),Mg(o,c),_s(o,c,p,h),c.child;case 6:return o===null&&ea&&((o=h=Ya)&&(h=tR(h,c.pendingProps,ao),h!==null?(c.stateNode=h,_n=c,Ya=null,o=!0):o=!1),o||jc(c)),null;case 13:return _5(o,c,h);case 4:return Ae(c,c.stateNode.containerInfo),p=c.pendingProps,o===null?c.child=Jf(c,null,p,h):_s(o,c,p,h),c.child;case 11:return p5(o,c,c.type,c.pendingProps,h);case 7:return _s(o,c,c.pendingProps,h),c.child;case 8:return _s(o,c,c.pendingProps.children,h),c.child;case 12:return _s(o,c,c.pendingProps.children,h),c.child;case 10:return p=c.pendingProps,Il(c,c.type,p.value),_s(o,c,p.children,h),c.child;case 9:return w=c.type._context,p=c.pendingProps.children,io(c),w=Nn(w),p=p(w),c.flags|=1,_s(o,c,p,h),c.child;case 14:return g5(o,c,c.type,c.pendingProps,h);case 15:return x5(o,c,c.type,c.pendingProps,h);case 19:return S5(o,c,h);case 31:return p=c.pendingProps,h=c.mode,p={mode:p.mode,children:p.children},o===null?(h=Ig(p,h),h.ref=c.ref,c.child=h,h.return=c,c=h):(h=ro(o.child,p),h.ref=c.ref,c.child=h,h.return=c,c=h),c;case 22:return v5(o,c,h);case 24:return io(c),p=Nn(Sn),o===null?(w=O(),w===null&&(w=La,C=ym(),w.pooledCache=C,C.refCount++,C!==null&&(w.pooledCacheLanes|=h),w=C),c.memoizedState={parent:p,cache:w},Xe(c),Il(c,Sn,w)):((o.lanes&h)!==0&&(dt(o,c),Vt(c,null,null,h),wr()),w=o.memoizedState,C=c.memoizedState,w.parent!==p?(w={parent:p,cache:p},c.memoizedState=w,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=w),Il(c,Sn,p)):(p=C.cache,Il(c,Sn,p),p!==w.cache&&Vf(c,[Sn],h,!0))),_s(o,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(a(156,c.tag))}function kc(o){o.flags|=4}function C5(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!LN(c)){if(c=co.current,c!==null&&((Jr&4194048)===Jr?Fl!==null:(Jr&62914560)!==Jr&&(Jr&536870912)===0||c!==Fl))throw je=ge,ce;o.flags|=8192}}function qg(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?rt():536870912,o.lanes|=c,rh|=c)}function Lm(o,c){if(!ea)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function un(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,p=0;if(c)for(var w=o.child;w!==null;)h|=w.lanes|w.childLanes,p|=w.subtreeFlags&65011712,p|=w.flags&65011712,w.return=o,w=w.sibling;else for(w=o.child;w!==null;)h|=w.lanes|w.childLanes,p|=w.subtreeFlags,p|=w.flags,w.return=o,w=w.sibling;return o.subtreeFlags|=p,o.childLanes=h,c}function CD(o,c,h){var p=c.pendingProps;switch(Td(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(c),null;case 1:return un(c),null;case 3:return h=c.stateNode,p=null,o!==null&&(p=o.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),so(Sn),xe(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(ys(c)?kc(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,pg())),un(c),null;case 26:return h=c.memoizedState,o===null?(kc(c),h!==null?(un(c),C5(c,h)):(un(c),c.flags&=-16777217)):h?h!==o.memoizedState?(kc(c),un(c),C5(c,h)):(un(c),c.flags&=-16777217):(o.memoizedProps!==p&&kc(c),un(c),c.flags&=-16777217),null;case 27:ve(c),h=me.current;var w=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==p&&kc(c);else{if(!p){if(c.stateNode===null)throw Error(a(166));return un(c),null}o=le.current,ys(c)?mg(c):(o=CN(w,p,h),c.stateNode=o,kc(c))}return un(c),null;case 5:if(ve(c),h=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==p&&kc(c);else{if(!p){if(c.stateNode===null)throw Error(a(166));return un(c),null}if(o=le.current,ys(c))mg(c);else{switch(w=Zg(me.current),o){case 1:o=w.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:o=w.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":o=w.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":o=w.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":o=w.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof p.is=="string"?w.createElement("select",{is:p.is}):w.createElement("select"),p.multiple?o.multiple=!0:p.size&&(o.size=p.size);break;default:o=typeof p.is=="string"?w.createElement(h,{is:p.is}):w.createElement(h)}}o[ar]=c,o[cr]=p;e:for(w=c.child;w!==null;){if(w.tag===5||w.tag===6)o.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===c)break e;for(;w.sibling===null;){if(w.return===null||w.return===c)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}c.stateNode=o;e:switch(Ss(o,h,p),h){case"button":case"input":case"select":case"textarea":o=!!p.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&kc(c)}}return un(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==p&&kc(c);else{if(typeof p!="string"&&c.stateNode===null)throw Error(a(166));if(o=me.current,ys(c)){if(o=c.stateNode,h=c.memoizedProps,p=null,w=_n,w!==null)switch(w.tag){case 27:case 5:p=w.memoizedProps}o[ar]=c,o=!!(o.nodeValue===h||p!==null&&p.suppressHydrationWarning===!0||bN(o.nodeValue,h)),o||jc(c)}else o=Zg(o).createTextNode(p),o[ar]=c,c.stateNode=o}return un(c),null;case 13:if(p=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(w=ys(c),p!==null&&p.dehydrated!==null){if(o===null){if(!w)throw Error(a(318));if(w=c.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(a(317));w[ar]=c}else Zs(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;un(c),w=!1}else w=pg(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=w),w=!0;if(!w)return c.flags&256?(Ac(c),c):(Ac(c),null)}if(Ac(c),(c.flags&128)!==0)return c.lanes=h,c;if(h=p!==null,o=o!==null&&o.memoizedState!==null,h){p=c.child,w=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(w=p.alternate.memoizedState.cachePool.pool);var C=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(C=p.memoizedState.cachePool.pool),C!==w&&(p.flags|=2048)}return h!==o&&h&&(c.child.flags|=8192),qg(c,c.updateQueue),un(c),null;case 4:return xe(),o===null&&Ny(c.stateNode.containerInfo),un(c),null;case 10:return so(c.type),un(c),null;case 19:if(P(Gn),w=c.memoizedState,w===null)return un(c),null;if(p=(c.flags&128)!==0,C=w.rendering,C===null)if(p)Lm(w,!1);else{if(pn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(C=Dg(o),C!==null){for(c.flags|=128,Lm(w,!1),o=C.updateQueue,c.updateQueue=o,qg(c,o),c.subtreeFlags=0,o=h,h=c.child;h!==null;)kd(h,o),h=h.sibling;return K(Gn,Gn.current&1|2),c.child}o=o.sibling}w.tail!==null&&W()>Ug&&(c.flags|=128,p=!0,Lm(w,!1),c.lanes=4194304)}else{if(!p)if(o=Dg(C),o!==null){if(c.flags|=128,p=!0,o=o.updateQueue,c.updateQueue=o,qg(c,o),Lm(w,!0),w.tail===null&&w.tailMode==="hidden"&&!C.alternate&&!ea)return un(c),null}else 2*W()-w.renderingStartTime>Ug&&h!==536870912&&(c.flags|=128,p=!0,Lm(w,!1),c.lanes=4194304);w.isBackwards?(C.sibling=c.child,c.child=C):(o=w.last,o!==null?o.sibling=C:c.child=C,w.last=C)}return w.tail!==null?(c=w.tail,w.rendering=c,w.tail=c.sibling,w.renderingStartTime=W(),c.sibling=null,o=Gn.current,K(Gn,p?o&1|2:o&1),c):(un(c),null);case 22:case 23:return Ac(c),jr(),p=c.memoizedState!==null,o!==null?o.memoizedState!==null!==p&&(c.flags|=8192):p&&(c.flags|=8192),p?(h&536870912)!==0&&(c.flags&128)===0&&(un(c),c.subtreeFlags&6&&(c.flags|=8192)):un(c),h=c.updateQueue,h!==null&&qg(c,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==h&&(c.flags|=2048),o!==null&&P(N),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),so(Sn),un(c),null;case 25:return null;case 30:return null}throw Error(a(156,c.tag))}function kD(o,c){switch(Td(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return so(Sn),xe(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return ve(c),null;case 13:if(Ac(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(a(340));Zs()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return P(Gn),null;case 4:return xe(),null;case 10:return so(c.type),null;case 22:case 23:return Ac(c),jr(),o!==null&&P(N),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return so(Sn),null;case 25:return null;default:return null}}function k5(o,c){switch(Td(c),c.tag){case 3:so(Sn),xe();break;case 26:case 27:case 5:ve(c);break;case 4:xe();break;case 13:Ac(c);break;case 19:P(Gn);break;case 10:so(c.type);break;case 22:case 23:Ac(c),jr(),o!==null&&P(N);break;case 24:so(Sn)}}function Mm(o,c){try{var h=c.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var w=p.next;h=w;do{if((h.tag&o)===o){p=void 0;var C=h.create,H=h.inst;p=C(),H.destroy=p}h=h.next}while(h!==w)}}catch(ue){ka(c,c.return,ue)}}function Tu(o,c,h){try{var p=c.updateQueue,w=p!==null?p.lastEffect:null;if(w!==null){var C=w.next;p=C;do{if((p.tag&o)===o){var H=p.inst,ue=H.destroy;if(ue!==void 0){H.destroy=void 0,w=c;var Le=h,Je=ue;try{Je()}catch(pt){ka(w,Le,pt)}}}p=p.next}while(p!==C)}}catch(pt){ka(c,c.return,pt)}}function E5(o){var c=o.updateQueue;if(c!==null){var h=o.stateNode;try{mn(c,h)}catch(p){ka(o,o.return,p)}}}function P5(o,c,h){h.props=$d(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(p){ka(o,c,p)}}function Im(o,c){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var p=o.stateNode;break;case 30:p=o.stateNode;break;default:p=o.stateNode}typeof h=="function"?o.refCleanup=h(p):h.current=p}}catch(w){ka(o,c,w)}}function Bl(o,c){var h=o.ref,p=o.refCleanup;if(h!==null)if(typeof p=="function")try{p()}catch(w){ka(o,c,w)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(w){ka(o,c,w)}else h.current=null}function T5(o){var c=o.type,h=o.memoizedProps,p=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":h.autoFocus&&p.focus();break e;case"img":h.src?p.src=h.src:h.srcSet&&(p.srcset=h.srcSet)}}catch(w){ka(o,o.return,w)}}function ey(o,c,h){try{var p=o.stateNode;YD(p,o.type,h,c),p[cr]=c}catch(w){ka(o,o.return,w)}}function O5(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Fu(o.type)||o.tag===4}function ty(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||O5(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Fu(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function ry(o,c,h){var p=o.tag;if(p===5||p===6)o=o.stateNode,c?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,c):(c=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,c.appendChild(o),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=Xg));else if(p!==4&&(p===27&&Fu(o.type)&&(h=o.stateNode,c=null),o=o.child,o!==null))for(ry(o,c,h),o=o.sibling;o!==null;)ry(o,c,h),o=o.sibling}function Fg(o,c,h){var p=o.tag;if(p===5||p===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(p!==4&&(p===27&&Fu(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(Fg(o,c,h),o=o.sibling;o!==null;)Fg(o,c,h),o=o.sibling}function D5(o){var c=o.stateNode,h=o.memoizedProps;try{for(var p=o.type,w=c.attributes;w.length;)c.removeAttributeNode(w[0]);Ss(c,p,h),c[ar]=o,c[cr]=h}catch(C){ka(o,o.return,C)}}var Ec=!1,En=!1,ay=!1,R5=typeof WeakSet=="function"?WeakSet:Set,ns=null;function ED(o,c){if(o=o.containerInfo,Cy=a0,o=vu(o),eo(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var w=p.anchorOffset,C=p.focusNode;p=p.focusOffset;try{h.nodeType,C.nodeType}catch{h=null;break e}var H=0,ue=-1,Le=-1,Je=0,pt=0,wt=o,Qe=null;t:for(;;){for(var tt;wt!==h||w!==0&&wt.nodeType!==3||(ue=H+w),wt!==C||p!==0&&wt.nodeType!==3||(Le=H+p),wt.nodeType===3&&(H+=wt.nodeValue.length),(tt=wt.firstChild)!==null;)Qe=wt,wt=tt;for(;;){if(wt===o)break t;if(Qe===h&&++Je===w&&(ue=H),Qe===C&&++pt===p&&(Le=H),(tt=wt.nextSibling)!==null)break;wt=Qe,Qe=wt.parentNode}wt=tt}h=ue===-1||Le===-1?null:{start:ue,end:Le}}else h=null}h=h||{start:0,end:0}}else h=null;for(ky={focusedElem:o,selectionRange:h},a0=!1,ns=c;ns!==null;)if(c=ns,o=c.child,(c.subtreeFlags&1024)!==0&&o!==null)o.return=c,ns=o;else for(;ns!==null;){switch(c=ns,C=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&C!==null){o=void 0,h=c,w=C.memoizedProps,C=C.memoizedState,p=h.stateNode;try{var yr=$d(h.type,w,h.elementType===h.type);o=p.getSnapshotBeforeUpdate(yr,C),p.__reactInternalSnapshotBeforeUpdate=o}catch(mr){ka(h,h.return,mr)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,h=o.nodeType,h===9)Ty(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Ty(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(a(163))}if(o=c.sibling,o!==null){o.return=c.return,ns=o;break}ns=c.return}}function L5(o,c,h){var p=h.flags;switch(h.tag){case 0:case 11:case 15:Ou(o,h),p&4&&Mm(5,h);break;case 1:if(Ou(o,h),p&4)if(o=h.stateNode,c===null)try{o.componentDidMount()}catch(H){ka(h,h.return,H)}else{var w=$d(h.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(w,c,o.__reactInternalSnapshotBeforeUpdate)}catch(H){ka(h,h.return,H)}}p&64&&E5(h),p&512&&Im(h,h.return);break;case 3:if(Ou(o,h),p&64&&(o=h.updateQueue,o!==null)){if(c=null,h.child!==null)switch(h.child.tag){case 27:case 5:c=h.child.stateNode;break;case 1:c=h.child.stateNode}try{mn(o,c)}catch(H){ka(h,h.return,H)}}break;case 27:c===null&&p&4&&D5(h);case 26:case 5:Ou(o,h),c===null&&p&4&&T5(h),p&512&&Im(h,h.return);break;case 12:Ou(o,h);break;case 13:Ou(o,h),p&4&&q5(o,h),p&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=qD.bind(null,h),rR(o,h))));break;case 22:if(p=h.memoizedState!==null||Ec,!p){c=c!==null&&c.memoizedState!==null||En,w=Ec;var C=En;Ec=p,(En=c)&&!C?Du(o,h,(h.subtreeFlags&8772)!==0):Ou(o,h),Ec=w,En=C}break;case 30:break;default:Ou(o,h)}}function M5(o){var c=o.alternate;c!==null&&(o.alternate=null,M5(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&nn(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Qa=null,fi=!1;function Pc(o,c,h){for(h=h.child;h!==null;)I5(o,c,h),h=h.sibling}function I5(o,c,h){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Et,h)}catch{}switch(h.tag){case 26:En||Bl(h,c),Pc(o,c,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:En||Bl(h,c);var p=Qa,w=fi;Fu(h.type)&&(Qa=h.stateNode,fi=!1),Pc(o,c,h),Gm(h.stateNode),Qa=p,fi=w;break;case 5:En||Bl(h,c);case 6:if(p=Qa,w=fi,Qa=null,Pc(o,c,h),Qa=p,fi=w,Qa!==null)if(fi)try{(Qa.nodeType===9?Qa.body:Qa.nodeName==="HTML"?Qa.ownerDocument.body:Qa).removeChild(h.stateNode)}catch(C){ka(h,c,C)}else try{Qa.removeChild(h.stateNode)}catch(C){ka(h,c,C)}break;case 18:Qa!==null&&(fi?(o=Qa,SN(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),ep(o)):SN(Qa,h.stateNode));break;case 4:p=Qa,w=fi,Qa=h.stateNode.containerInfo,fi=!0,Pc(o,c,h),Qa=p,fi=w;break;case 0:case 11:case 14:case 15:En||Tu(2,h,c),En||Tu(4,h,c),Pc(o,c,h);break;case 1:En||(Bl(h,c),p=h.stateNode,typeof p.componentWillUnmount=="function"&&P5(h,c,p)),Pc(o,c,h);break;case 21:Pc(o,c,h);break;case 22:En=(p=En)||h.memoizedState!==null,Pc(o,c,h),En=p;break;default:Pc(o,c,h)}}function q5(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{ep(o)}catch(h){ka(c,c.return,h)}}function PD(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new R5),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new R5),c;default:throw Error(a(435,o.tag))}}function ny(o,c){var h=PD(o);c.forEach(function(p){var w=FD.bind(null,o,p);h.has(p)||(h.add(p),p.then(w,w))})}function ki(o,c){var h=c.deletions;if(h!==null)for(var p=0;p<h.length;p++){var w=h[p],C=o,H=c,ue=H;e:for(;ue!==null;){switch(ue.tag){case 27:if(Fu(ue.type)){Qa=ue.stateNode,fi=!1;break e}break;case 5:Qa=ue.stateNode,fi=!1;break e;case 3:case 4:Qa=ue.stateNode.containerInfo,fi=!0;break e}ue=ue.return}if(Qa===null)throw Error(a(160));I5(C,H,w),Qa=null,fi=!1,C=w.alternate,C!==null&&(C.return=null),w.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)F5(c,o),c=c.sibling}var tl=null;function F5(o,c){var h=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:ki(c,o),Ei(o),p&4&&(Tu(3,o,o.return),Mm(3,o),Tu(5,o,o.return));break;case 1:ki(c,o),Ei(o),p&512&&(En||h===null||Bl(h,h.return)),p&64&&Ec&&(o=o.updateQueue,o!==null&&(p=o.callbacks,p!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?p:h.concat(p))));break;case 26:var w=tl;if(ki(c,o),Ei(o),p&512&&(En||h===null||Bl(h,h.return)),p&4){var C=h!==null?h.memoizedState:null;if(p=o.memoizedState,h===null)if(p===null)if(o.stateNode===null){e:{p=o.type,h=o.memoizedProps,w=w.ownerDocument||w;t:switch(p){case"title":C=w.getElementsByTagName("title")[0],(!C||C[Fa]||C[ar]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=w.createElement(p),w.head.insertBefore(C,w.querySelector("head > title"))),Ss(C,p,h),C[ar]=o,Wr(C),p=C;break e;case"link":var H=DN("link","href",w).get(p+(h.href||""));if(H){for(var ue=0;ue<H.length;ue++)if(C=H[ue],C.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&C.getAttribute("rel")===(h.rel==null?null:h.rel)&&C.getAttribute("title")===(h.title==null?null:h.title)&&C.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){H.splice(ue,1);break t}}C=w.createElement(p),Ss(C,p,h),w.head.appendChild(C);break;case"meta":if(H=DN("meta","content",w).get(p+(h.content||""))){for(ue=0;ue<H.length;ue++)if(C=H[ue],C.getAttribute("content")===(h.content==null?null:""+h.content)&&C.getAttribute("name")===(h.name==null?null:h.name)&&C.getAttribute("property")===(h.property==null?null:h.property)&&C.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&C.getAttribute("charset")===(h.charSet==null?null:h.charSet)){H.splice(ue,1);break t}}C=w.createElement(p),Ss(C,p,h),w.head.appendChild(C);break;default:throw Error(a(468,p))}C[ar]=o,Wr(C),p=C}o.stateNode=p}else RN(w,o.type,o.stateNode);else o.stateNode=ON(w,p,o.memoizedProps);else C!==p?(C===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):C.count--,p===null?RN(w,o.type,o.stateNode):ON(w,p,o.memoizedProps)):p===null&&o.stateNode!==null&&ey(o,o.memoizedProps,h.memoizedProps)}break;case 27:ki(c,o),Ei(o),p&512&&(En||h===null||Bl(h,h.return)),h!==null&&p&4&&ey(o,o.memoizedProps,h.memoizedProps);break;case 5:if(ki(c,o),Ei(o),p&512&&(En||h===null||Bl(h,h.return)),o.flags&32){w=o.stateNode;try{X(w,"")}catch(tt){ka(o,o.return,tt)}}p&4&&o.stateNode!=null&&(w=o.memoizedProps,ey(o,w,h!==null?h.memoizedProps:w)),p&1024&&(ay=!0);break;case 6:if(ki(c,o),Ei(o),p&4){if(o.stateNode===null)throw Error(a(162));p=o.memoizedProps,h=o.stateNode;try{h.nodeValue=p}catch(tt){ka(o,o.return,tt)}}break;case 3:if(e0=null,w=tl,tl=Jg(c.containerInfo),ki(c,o),tl=w,Ei(o),p&4&&h!==null&&h.memoizedState.isDehydrated)try{ep(c.containerInfo)}catch(tt){ka(o,o.return,tt)}ay&&(ay=!1,B5(o));break;case 4:p=tl,tl=Jg(o.stateNode.containerInfo),ki(c,o),Ei(o),tl=p;break;case 12:ki(c,o),Ei(o);break;case 13:ki(c,o),Ei(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(uy=W()),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,ny(o,p)));break;case 22:w=o.memoizedState!==null;var Le=h!==null&&h.memoizedState!==null,Je=Ec,pt=En;if(Ec=Je||w,En=pt||Le,ki(c,o),En=pt,Ec=Je,Ei(o),p&8192)e:for(c=o.stateNode,c._visibility=w?c._visibility&-2:c._visibility|1,w&&(h===null||Le||Ec||En||zd(o)),h=null,c=o;;){if(c.tag===5||c.tag===26){if(h===null){Le=h=c;try{if(C=Le.stateNode,w)H=C.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none";else{ue=Le.stateNode;var wt=Le.memoizedProps.style,Qe=wt!=null&&wt.hasOwnProperty("display")?wt.display:null;ue.style.display=Qe==null||typeof Qe=="boolean"?"":(""+Qe).trim()}}catch(tt){ka(Le,Le.return,tt)}}}else if(c.tag===6){if(h===null){Le=c;try{Le.stateNode.nodeValue=w?"":Le.memoizedProps}catch(tt){ka(Le,Le.return,tt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}p&4&&(p=o.updateQueue,p!==null&&(h=p.retryQueue,h!==null&&(p.retryQueue=null,ny(o,h))));break;case 19:ki(c,o),Ei(o),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,ny(o,p)));break;case 30:break;case 21:break;default:ki(c,o),Ei(o)}}function Ei(o){var c=o.flags;if(c&2){try{for(var h,p=o.return;p!==null;){if(O5(p)){h=p;break}p=p.return}if(h==null)throw Error(a(160));switch(h.tag){case 27:var w=h.stateNode,C=ty(o);Fg(o,C,w);break;case 5:var H=h.stateNode;h.flags&32&&(X(H,""),h.flags&=-33);var ue=ty(o);Fg(o,ue,H);break;case 3:case 4:var Le=h.stateNode.containerInfo,Je=ty(o);ry(o,Je,Le);break;default:throw Error(a(161))}}catch(pt){ka(o,o.return,pt)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function B5(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;B5(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function Ou(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)L5(o,c.alternate,c),c=c.sibling}function zd(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:Tu(4,c,c.return),zd(c);break;case 1:Bl(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&P5(c,c.return,h),zd(c);break;case 27:Gm(c.stateNode);case 26:case 5:Bl(c,c.return),zd(c);break;case 22:c.memoizedState===null&&zd(c);break;case 30:zd(c);break;default:zd(c)}o=o.sibling}}function Du(o,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var p=c.alternate,w=o,C=c,H=C.flags;switch(C.tag){case 0:case 11:case 15:Du(w,C,h),Mm(4,C);break;case 1:if(Du(w,C,h),p=C,w=p.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(Je){ka(p,p.return,Je)}if(p=C,w=p.updateQueue,w!==null){var ue=p.stateNode;try{var Le=w.shared.hiddenCallbacks;if(Le!==null)for(w.shared.hiddenCallbacks=null,w=0;w<Le.length;w++)Rr(Le[w],ue)}catch(Je){ka(p,p.return,Je)}}h&&H&64&&E5(C),Im(C,C.return);break;case 27:D5(C);case 26:case 5:Du(w,C,h),h&&p===null&&H&4&&T5(C),Im(C,C.return);break;case 12:Du(w,C,h);break;case 13:Du(w,C,h),h&&H&4&&q5(w,C);break;case 22:C.memoizedState===null&&Du(w,C,h),Im(C,C.return);break;case 30:break;default:Du(w,C,h)}c=c.sibling}}function sy(o,c){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&Od(h))}function iy(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Od(o))}function Ul(o,c,h,p){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)U5(o,c,h,p),c=c.sibling}function U5(o,c,h,p){var w=c.flags;switch(c.tag){case 0:case 11:case 15:Ul(o,c,h,p),w&2048&&Mm(9,c);break;case 1:Ul(o,c,h,p);break;case 3:Ul(o,c,h,p),w&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Od(o)));break;case 12:if(w&2048){Ul(o,c,h,p),o=c.stateNode;try{var C=c.memoizedProps,H=C.id,ue=C.onPostCommit;typeof ue=="function"&&ue(H,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Le){ka(c,c.return,Le)}}else Ul(o,c,h,p);break;case 13:Ul(o,c,h,p);break;case 23:break;case 22:C=c.stateNode,H=c.alternate,c.memoizedState!==null?C._visibility&2?Ul(o,c,h,p):qm(o,c):C._visibility&2?Ul(o,c,h,p):(C._visibility|=2,Qf(o,c,h,p,(c.subtreeFlags&10256)!==0)),w&2048&&sy(H,c);break;case 24:Ul(o,c,h,p),w&2048&&iy(c.alternate,c);break;default:Ul(o,c,h,p)}}function Qf(o,c,h,p,w){for(w=w&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var C=o,H=c,ue=h,Le=p,Je=H.flags;switch(H.tag){case 0:case 11:case 15:Qf(C,H,ue,Le,w),Mm(8,H);break;case 23:break;case 22:var pt=H.stateNode;H.memoizedState!==null?pt._visibility&2?Qf(C,H,ue,Le,w):qm(C,H):(pt._visibility|=2,Qf(C,H,ue,Le,w)),w&&Je&2048&&sy(H.alternate,H);break;case 24:Qf(C,H,ue,Le,w),w&&Je&2048&&iy(H.alternate,H);break;default:Qf(C,H,ue,Le,w)}c=c.sibling}}function qm(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=o,p=c,w=p.flags;switch(p.tag){case 22:qm(h,p),w&2048&&sy(p.alternate,p);break;case 24:qm(h,p),w&2048&&iy(p.alternate,p);break;default:qm(h,p)}c=c.sibling}}var Fm=8192;function eh(o){if(o.subtreeFlags&Fm)for(o=o.child;o!==null;)$5(o),o=o.sibling}function $5(o){switch(o.tag){case 26:eh(o),o.flags&Fm&&o.memoizedState!==null&&pR(tl,o.memoizedState,o.memoizedProps);break;case 5:eh(o);break;case 3:case 4:var c=tl;tl=Jg(o.stateNode.containerInfo),eh(o),tl=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=Fm,Fm=16777216,eh(o),Fm=c):eh(o));break;default:eh(o)}}function z5(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function Bm(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var p=c[h];ns=p,H5(p,o)}z5(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)V5(o),o=o.sibling}function V5(o){switch(o.tag){case 0:case 11:case 15:Bm(o),o.flags&2048&&Tu(9,o,o.return);break;case 3:Bm(o);break;case 12:Bm(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,Bg(o)):Bm(o);break;default:Bm(o)}}function Bg(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var p=c[h];ns=p,H5(p,o)}z5(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:Tu(8,c,c.return),Bg(c);break;case 22:h=c.stateNode,h._visibility&2&&(h._visibility&=-3,Bg(c));break;default:Bg(c)}o=o.sibling}}function H5(o,c){for(;ns!==null;){var h=ns;switch(h.tag){case 0:case 11:case 15:Tu(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var p=h.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Od(h.memoizedState.cache)}if(p=h.child,p!==null)p.return=h,ns=p;else e:for(h=o;ns!==null;){p=ns;var w=p.sibling,C=p.return;if(M5(p),p===h){ns=null;break e}if(w!==null){w.return=C,ns=w;break e}ns=C}}}var TD={getCacheForType:function(o){var c=Nn(Sn),h=c.data.get(o);return h===void 0&&(h=o(),c.data.set(o,h)),h}},OD=typeof WeakMap=="function"?WeakMap:Map,ga=0,La=null,qr=null,Jr=0,xa=0,Pi=null,Ru=!1,th=!1,oy=!1,Tc=0,pn=0,Lu=0,Vd=0,ly=0,uo=0,rh=0,Um=null,hi=null,cy=!1,uy=0,Ug=1/0,$g=null,Mu=null,Ns=0,Iu=null,ah=null,nh=0,dy=0,fy=null,G5=null,$m=0,hy=null;function Ti(){if((ga&2)!==0&&Jr!==0)return Jr&-Jr;if(se.T!==null){var o=_c;return o!==0?o:by()}return ir()}function K5(){uo===0&&(uo=(Jr&536870912)===0||ea?at():536870912);var o=co.current;return o!==null&&(o.flags|=32),uo}function Oi(o,c,h){(o===La&&(xa===2||xa===9)||o.cancelPendingCommit!==null)&&(sh(o,0),qu(o,Jr,uo,!1)),Te(o,h),((ga&2)===0||o!==La)&&(o===La&&((ga&2)===0&&(Vd|=h),pn===4&&qu(o,Jr,uo,!1)),$l(o))}function W5(o,c,h){if((ga&6)!==0)throw Error(a(327));var p=!h&&(c&124)===0&&(c&o.expiredLanes)===0||Ke(o,c),w=p?LD(o,c):gy(o,c,!0),C=p;do{if(w===0){th&&!p&&qu(o,c,0,!1);break}else{if(h=o.current.alternate,C&&!DD(h)){w=gy(o,c,!1),C=!1;continue}if(w===2){if(C=c,o.errorRecoveryDisabledLanes&C)var H=0;else H=o.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){c=H;e:{var ue=o;w=Um;var Le=ue.current.memoizedState.isDehydrated;if(Le&&(sh(ue,H).flags|=256),H=gy(ue,H,!1),H!==2){if(oy&&!Le){ue.errorRecoveryDisabledLanes|=C,Vd|=C,w=4;break e}C=hi,hi=w,C!==null&&(hi===null?hi=C:hi.push.apply(hi,C))}w=H}if(C=!1,w!==2)continue}}if(w===1){sh(o,0),qu(o,c,0,!0);break}e:{switch(p=o,C=w,C){case 0:case 1:throw Error(a(345));case 4:if((c&4194048)!==c)break;case 6:qu(p,c,uo,!Ru);break e;case 2:hi=null;break;case 3:case 5:break;default:throw Error(a(329))}if((c&62914560)===c&&(w=uy+300-W(),10<w)){if(qu(p,c,uo,!Ru),rr(p,0,!0)!==0)break e;p.timeoutHandle=_N(Y5.bind(null,p,h,hi,$g,cy,c,uo,Vd,rh,Ru,C,2,-0,0),w);break e}Y5(p,h,hi,$g,cy,c,uo,Vd,rh,Ru,C,0,-0,0)}}break}while(!0);$l(o)}function Y5(o,c,h,p,w,C,H,ue,Le,Je,pt,wt,Qe,tt){if(o.timeoutHandle=-1,wt=c.subtreeFlags,(wt&8192||(wt&16785408)===16785408)&&(Ym={stylesheets:null,count:0,unsuspend:mR},$5(c),wt=gR(),wt!==null)){o.cancelPendingCommit=wt(rN.bind(null,o,c,C,h,p,w,H,ue,Le,pt,1,Qe,tt)),qu(o,C,H,!Je);return}rN(o,c,C,h,p,w,H,ue,Le)}function DD(o){for(var c=o;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var p=0;p<h.length;p++){var w=h[p],C=w.getSnapshot;w=w.value;try{if(!Ka(C(),w))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function qu(o,c,h,p){c&=~ly,c&=~Vd,o.suspendedLanes|=c,o.pingedLanes&=~c,p&&(o.warmLanes|=c),p=o.expirationTimes;for(var w=c;0<w;){var C=31-ht(w),H=1<<C;p[C]=-1,w&=~H}h!==0&&it(o,h,c)}function zg(){return(ga&6)===0?(zm(0),!1):!0}function my(){if(qr!==null){if(xa===0)var o=qr.return;else o=qr,Yo=In=null,Vn(o),Zf=null,Dm=0,o=qr;for(;o!==null;)k5(o.alternate,o),o=o.return;qr=null}}function sh(o,c){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,ZD(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),my(),La=o,qr=h=ro(o.current,null),Jr=c,xa=0,Pi=null,Ru=!1,th=Ke(o,c),oy=!1,rh=uo=ly=Vd=Lu=pn=0,hi=Um=null,cy=!1,(c&8)!==0&&(c|=c&32);var p=o.entangledLanes;if(p!==0)for(o=o.entanglements,p&=c;0<p;){var w=31-ht(p),C=1<<w;c|=o[w],p&=~C}return Tc=c,Ad(),h}function X5(o,c){Xt=null,se.H=Pg,c===ie||c===he?(c=$e(),xa=3):c===ce?(c=$e(),xa=4):xa=c===m5?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Pi=c,qr===null&&(pn=1,Lg(o,Ws(c,o.current)))}function Z5(){var o=se.H;return se.H=Pg,o===null?Pg:o}function J5(){var o=se.A;return se.A=TD,o}function py(){pn=4,Ru||(Jr&4194048)!==Jr&&co.current!==null||(th=!0),(Lu&134217727)===0&&(Vd&134217727)===0||La===null||qu(La,Jr,uo,!1)}function gy(o,c,h){var p=ga;ga|=2;var w=Z5(),C=J5();(La!==o||Jr!==c)&&($g=null,sh(o,c)),c=!1;var H=pn;e:do try{if(xa!==0&&qr!==null){var ue=qr,Le=Pi;switch(xa){case 8:my(),H=6;break e;case 3:case 2:case 9:case 6:co.current===null&&(c=!0);var Je=xa;if(xa=0,Pi=null,ih(o,ue,Le,Je),h&&th){H=0;break e}break;default:Je=xa,xa=0,Pi=null,ih(o,ue,Le,Je)}}RD(),H=pn;break}catch(pt){X5(o,pt)}while(!0);return c&&o.shellSuspendCounter++,Yo=In=null,ga=p,se.H=w,se.A=C,qr===null&&(La=null,Jr=0,Ad()),H}function RD(){for(;qr!==null;)Q5(qr)}function LD(o,c){var h=ga;ga|=2;var p=Z5(),w=J5();La!==o||Jr!==c?($g=null,Ug=W()+500,sh(o,c)):th=Ke(o,c);e:do try{if(xa!==0&&qr!==null){c=qr;var C=Pi;t:switch(xa){case 1:xa=0,Pi=null,ih(o,c,C,1);break;case 2:case 9:if(_e(C)){xa=0,Pi=null,eN(c);break}c=function(){xa!==2&&xa!==9||La!==o||(xa=7),$l(o)},C.then(c,c);break e;case 3:xa=7;break e;case 4:xa=5;break e;case 7:_e(C)?(xa=0,Pi=null,eN(c)):(xa=0,Pi=null,ih(o,c,C,7));break;case 5:var H=null;switch(qr.tag){case 26:H=qr.memoizedState;case 5:case 27:var ue=qr;if(!H||LN(H)){xa=0,Pi=null;var Le=ue.sibling;if(Le!==null)qr=Le;else{var Je=ue.return;Je!==null?(qr=Je,Vg(Je)):qr=null}break t}}xa=0,Pi=null,ih(o,c,C,5);break;case 6:xa=0,Pi=null,ih(o,c,C,6);break;case 8:my(),pn=6;break e;default:throw Error(a(462))}}MD();break}catch(pt){X5(o,pt)}while(!0);return Yo=In=null,se.H=p,se.A=w,ga=h,qr!==null?0:(La=null,Jr=0,Ad(),pn)}function MD(){for(;qr!==null&&!$();)Q5(qr)}function Q5(o){var c=A5(o.alternate,o,Tc);o.memoizedProps=o.pendingProps,c===null?Vg(o):qr=c}function eN(o){var c=o,h=c.alternate;switch(c.tag){case 15:case 0:c=b5(h,c,c.pendingProps,c.type,void 0,Jr);break;case 11:c=b5(h,c,c.pendingProps,c.type.render,c.ref,Jr);break;case 5:Vn(c);default:k5(h,c),c=qr=kd(c,Tc),c=A5(h,c,Tc)}o.memoizedProps=o.pendingProps,c===null?Vg(o):qr=c}function ih(o,c,h,p){Yo=In=null,Vn(c),Zf=null,Dm=0;var w=c.return;try{if(SD(o,w,c,h,Jr)){pn=1,Lg(o,Ws(h,o.current)),qr=null;return}}catch(C){if(w!==null)throw qr=w,C;pn=1,Lg(o,Ws(h,o.current)),qr=null;return}c.flags&32768?(ea||p===1?o=!0:th||(Jr&536870912)!==0?o=!1:(Ru=o=!0,(p===2||p===9||p===3||p===6)&&(p=co.current,p!==null&&p.tag===13&&(p.flags|=16384))),tN(c,o)):Vg(c)}function Vg(o){var c=o;do{if((c.flags&32768)!==0){tN(c,Ru);return}o=c.return;var h=CD(c.alternate,c,Tc);if(h!==null){qr=h;return}if(c=c.sibling,c!==null){qr=c;return}qr=c=o}while(c!==null);pn===0&&(pn=5)}function tN(o,c){do{var h=kD(o.alternate,o);if(h!==null){h.flags&=32767,qr=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(o=o.sibling,o!==null)){qr=o;return}qr=o=h}while(o!==null);pn=6,qr=null}function rN(o,c,h,p,w,C,H,ue,Le){o.cancelPendingCommit=null;do Hg();while(Ns!==0);if((ga&6)!==0)throw Error(a(327));if(c!==null){if(c===o.current)throw Error(a(177));if(C=c.lanes|c.childLanes,C|=qf,Ue(o,h,C,H,ue,Le),o===La&&(qr=La=null,Jr=0),ah=c,Iu=o,nh=h,dy=C,fy=w,G5=p,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,BD(Pe,function(){return oN(),null})):(o.callbackNode=null,o.callbackPriority=0),p=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||p){p=se.T,se.T=null,w=fe.p,fe.p=2,H=ga,ga|=4;try{ED(o,c,h)}finally{ga=H,fe.p=w,se.T=p}}Ns=1,aN(),nN(),sN()}}function aN(){if(Ns===1){Ns=0;var o=Iu,c=ah,h=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||h){h=se.T,se.T=null;var p=fe.p;fe.p=2;var w=ga;ga|=4;try{F5(c,o);var C=ky,H=vu(o.containerInfo),ue=C.focusedElem,Le=C.selectionRange;if(H!==ue&&ue&&ue.ownerDocument&&xu(ue.ownerDocument.documentElement,ue)){if(Le!==null&&eo(ue)){var Je=Le.start,pt=Le.end;if(pt===void 0&&(pt=Je),"selectionStart"in ue)ue.selectionStart=Je,ue.selectionEnd=Math.min(pt,ue.value.length);else{var wt=ue.ownerDocument||document,Qe=wt&&wt.defaultView||window;if(Qe.getSelection){var tt=Qe.getSelection(),yr=ue.textContent.length,mr=Math.min(Le.start,yr),Na=Le.end===void 0?mr:Math.min(Le.end,yr);!tt.extend&&mr>Na&&(H=Na,Na=mr,mr=H);var Ve=gu(ue,mr),Be=gu(ue,Na);if(Ve&&Be&&(tt.rangeCount!==1||tt.anchorNode!==Ve.node||tt.anchorOffset!==Ve.offset||tt.focusNode!==Be.node||tt.focusOffset!==Be.offset)){var Ye=wt.createRange();Ye.setStart(Ve.node,Ve.offset),tt.removeAllRanges(),mr>Na?(tt.addRange(Ye),tt.extend(Be.node,Be.offset)):(Ye.setEnd(Be.node,Be.offset),tt.addRange(Ye))}}}}for(wt=[],tt=ue;tt=tt.parentNode;)tt.nodeType===1&&wt.push({element:tt,left:tt.scrollLeft,top:tt.scrollTop});for(typeof ue.focus=="function"&&ue.focus(),ue=0;ue<wt.length;ue++){var xt=wt[ue];xt.element.scrollLeft=xt.left,xt.element.scrollTop=xt.top}}a0=!!Cy,ky=Cy=null}finally{ga=w,fe.p=p,se.T=h}}o.current=c,Ns=2}}function nN(){if(Ns===2){Ns=0;var o=Iu,c=ah,h=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||h){h=se.T,se.T=null;var p=fe.p;fe.p=2;var w=ga;ga|=4;try{L5(o,c.alternate,c)}finally{ga=w,fe.p=p,se.T=h}}Ns=3}}function sN(){if(Ns===4||Ns===3){Ns=0,ne();var o=Iu,c=ah,h=nh,p=G5;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Ns=5:(Ns=0,ah=Iu=null,iN(o,o.pendingLanes));var w=o.pendingLanes;if(w===0&&(Mu=null),It(h),c=c.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Et,c,void 0,(c.current.flags&128)===128)}catch{}if(p!==null){c=se.T,w=fe.p,fe.p=2,se.T=null;try{for(var C=o.onRecoverableError,H=0;H<p.length;H++){var ue=p[H];C(ue.value,{componentStack:ue.stack})}}finally{se.T=c,fe.p=w}}(nh&3)!==0&&Hg(),$l(o),w=o.pendingLanes,(h&4194090)!==0&&(w&42)!==0?o===hy?$m++:($m=0,hy=o):$m=0,zm(0)}}function iN(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,Od(c)))}function Hg(o){return aN(),nN(),sN(),oN()}function oN(){if(Ns!==5)return!1;var o=Iu,c=dy;dy=0;var h=It(nh),p=se.T,w=fe.p;try{fe.p=32>h?32:h,se.T=null,h=fy,fy=null;var C=Iu,H=nh;if(Ns=0,ah=Iu=null,nh=0,(ga&6)!==0)throw Error(a(331));var ue=ga;if(ga|=4,V5(C.current),U5(C,C.current,H,h),ga=ue,zm(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Et,C)}catch{}return!0}finally{fe.p=w,se.T=p,iN(o,c)}}function lN(o,c,h){c=Ws(h,c),c=Hv(o.stateNode,c,2),o=At(o,c,2),o!==null&&(Te(o,2),$l(o))}function ka(o,c,h){if(o.tag===3)lN(o,o,h);else for(;c!==null;){if(c.tag===3){lN(c,o,h);break}else if(c.tag===1){var p=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Mu===null||!Mu.has(p))){o=Ws(h,o),h=f5(2),p=At(c,h,2),p!==null&&(h5(h,p,c,o),Te(p,2),$l(p));break}}c=c.return}}function xy(o,c,h){var p=o.pingCache;if(p===null){p=o.pingCache=new OD;var w=new Set;p.set(c,w)}else w=p.get(c),w===void 0&&(w=new Set,p.set(c,w));w.has(h)||(oy=!0,w.add(h),o=ID.bind(null,o,c,h),c.then(o,o))}function ID(o,c,h){var p=o.pingCache;p!==null&&p.delete(c),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,La===o&&(Jr&h)===h&&(pn===4||pn===3&&(Jr&62914560)===Jr&&300>W()-uy?(ga&2)===0&&sh(o,0):ly|=h,rh===Jr&&(rh=0)),$l(o)}function cN(o,c){c===0&&(c=rt()),o=xc(o,c),o!==null&&(Te(o,c),$l(o))}function qD(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),cN(o,h)}function FD(o,c){var h=0;switch(o.tag){case 13:var p=o.stateNode,w=o.memoizedState;w!==null&&(h=w.retryLane);break;case 19:p=o.stateNode;break;case 22:p=o.stateNode._retryCache;break;default:throw Error(a(314))}p!==null&&p.delete(c),cN(o,h)}function BD(o,c){return te(o,c)}var Gg=null,oh=null,vy=!1,Kg=!1,yy=!1,Hd=0;function $l(o){o!==oh&&o.next===null&&(oh===null?Gg=oh=o:oh=oh.next=o),Kg=!0,vy||(vy=!0,$D())}function zm(o,c){if(!yy&&Kg){yy=!0;do for(var h=!1,p=Gg;p!==null;){if(o!==0){var w=p.pendingLanes;if(w===0)var C=0;else{var H=p.suspendedLanes,ue=p.pingedLanes;C=(1<<31-ht(42|o)+1)-1,C&=w&~(H&~ue),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(h=!0,hN(p,C))}else C=Jr,C=rr(p,p===La?C:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(C&3)===0||Ke(p,C)||(h=!0,hN(p,C));p=p.next}while(h);yy=!1}}function UD(){uN()}function uN(){Kg=vy=!1;var o=0;Hd!==0&&(XD()&&(o=Hd),Hd=0);for(var c=W(),h=null,p=Gg;p!==null;){var w=p.next,C=dN(p,c);C===0?(p.next=null,h===null?Gg=w:h.next=w,w===null&&(oh=h)):(h=p,(o!==0||(C&3)!==0)&&(Kg=!0)),p=w}zm(o)}function dN(o,c){for(var h=o.suspendedLanes,p=o.pingedLanes,w=o.expirationTimes,C=o.pendingLanes&-62914561;0<C;){var H=31-ht(C),ue=1<<H,Le=w[H];Le===-1?((ue&h)===0||(ue&p)!==0)&&(w[H]=Re(ue,c)):Le<=c&&(o.expiredLanes|=ue),C&=~ue}if(c=La,h=Jr,h=rr(o,o===c?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p=o.callbackNode,h===0||o===c&&(xa===2||xa===9)||o.cancelPendingCommit!==null)return p!==null&&p!==null&&re(p),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||Ke(o,h)){if(c=h&-h,c===o.callbackPriority)return c;switch(p!==null&&re(p),It(h)){case 2:case 8:h=ze;break;case 32:h=Pe;break;case 268435456:h=ae;break;default:h=Pe}return p=fN.bind(null,o),h=te(h,p),o.callbackPriority=c,o.callbackNode=h,c}return p!==null&&p!==null&&re(p),o.callbackPriority=2,o.callbackNode=null,2}function fN(o,c){if(Ns!==0&&Ns!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(Hg()&&o.callbackNode!==h)return null;var p=Jr;return p=rr(o,o===La?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p===0?null:(W5(o,p,c),dN(o,W()),o.callbackNode!=null&&o.callbackNode===h?fN.bind(null,o):null)}function hN(o,c){if(Hg())return null;W5(o,c,!0)}function $D(){JD(function(){(ga&6)!==0?te(Ce,UD):uN()})}function by(){return Hd===0&&(Hd=at()),Hd}function mN(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:qt(""+o)}function pN(o,c){var h=c.ownerDocument.createElement("input");return h.name=c.name,h.value=c.value,o.id&&h.setAttribute("form",o.id),c.parentNode.insertBefore(h,c),o=new FormData(o),h.parentNode.removeChild(h),o}function zD(o,c,h,p,w){if(c==="submit"&&h&&h.stateNode===w){var C=mN((w[cr]||null).action),H=p.submitter;H&&(c=(c=H[cr]||null)?mN(c.formAction):H.getAttribute("formAction"),c!==null&&(C=c,H=null));var ue=new _l("action","action",null,p,w);o.push({event:ue,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Hd!==0){var Le=H?pN(w,H):new FormData(w);lo(h,{pending:!0,data:Le,method:w.method,action:C},null,Le)}}else typeof C=="function"&&(ue.preventDefault(),Le=H?pN(w,H):new FormData(w),lo(h,{pending:!0,data:Le,method:w.method,action:C},C,Le))},currentTarget:w}]})}}for(var wy=0;wy<If.length;wy++){var jy=If[wy],VD=jy.toLowerCase(),HD=jy[0].toUpperCase()+jy.slice(1);ci(VD,"on"+HD)}ci(to,"onAnimationEnd"),ci(yu,"onAnimationIteration"),ci(pc,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(Mf,"onTransitionRun"),ci(dg,"onTransitionStart"),ci(fg,"onTransitionCancel"),ci(gm,"onTransitionEnd"),ia("onMouseEnter",["mouseout","mouseover"]),ia("onMouseLeave",["mouseout","mouseover"]),ia("onPointerEnter",["pointerout","pointerover"]),ia("onPointerLeave",["pointerout","pointerover"]),lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),lr("onBeforeInput",["compositionend","keypress","textInput","paste"]),lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vm));function gN(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var p=o[h],w=p.event;p=p.listeners;e:{var C=void 0;if(c)for(var H=p.length-1;0<=H;H--){var ue=p[H],Le=ue.instance,Je=ue.currentTarget;if(ue=ue.listener,Le!==C&&w.isPropagationStopped())break e;C=ue,w.currentTarget=Je;try{C(w)}catch(pt){Rg(pt)}w.currentTarget=null,C=Le}else for(H=0;H<p.length;H++){if(ue=p[H],Le=ue.instance,Je=ue.currentTarget,ue=ue.listener,Le!==C&&w.isPropagationStopped())break e;C=ue,w.currentTarget=Je;try{C(w)}catch(pt){Rg(pt)}w.currentTarget=null,C=Le}}}}function Fr(o,c){var h=c[Ar];h===void 0&&(h=c[Ar]=new Set);var p=o+"__bubble";h.has(p)||(xN(c,o,2,!1),h.add(p))}function _y(o,c,h){var p=0;c&&(p|=4),xN(h,o,p,c)}var Wg="_reactListening"+Math.random().toString(36).slice(2);function Ny(o){if(!o[Wg]){o[Wg]=!0,yn.forEach(function(h){h!=="selectionchange"&&(GD.has(h)||_y(h,!1,o),_y(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Wg]||(c[Wg]=!0,_y("selectionchange",!1,c))}}function xN(o,c,h,p){switch(UN(c)){case 2:var w=yR;break;case 8:w=bR;break;default:w=qy}h=w.bind(null,c,h,o),w=void 0,!Ut||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(w=!0),p?w!==void 0?o.addEventListener(c,h,{capture:!0,passive:w}):o.addEventListener(c,h,!0):w!==void 0?o.addEventListener(c,h,{passive:w}):o.addEventListener(c,h,!1)}function Sy(o,c,h,p,w){var C=p;if((c&1)===0&&(c&2)===0&&p!==null)e:for(;;){if(p===null)return;var H=p.tag;if(H===3||H===4){var ue=p.stateNode.containerInfo;if(ue===w)break;if(H===4)for(H=p.return;H!==null;){var Le=H.tag;if((Le===3||Le===4)&&H.stateNode.containerInfo===w)return;H=H.return}for(;ue!==null;){if(H=sa(ue),H===null)return;if(Le=H.tag,Le===5||Le===6||Le===26||Le===27){p=C=H;continue e}ue=ue.parentNode}}p=p.return}Qr(function(){var Je=C,pt=ur(h),wt=[];e:{var Qe=xm.get(o);if(Qe!==void 0){var tt=_l,yr=o;switch(o){case"keypress":if(wn(h)===0)break e;case"keydown":case"keyup":tt=xr;break;case"focusin":yr="focus",tt=fu;break;case"focusout":yr="blur",tt=fu;break;case"beforeblur":case"afterblur":tt=fu;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tt=jd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tt=Io;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tt=fn;break;case to:case yu:case pc:tt=fc;break;case gm:tt=jn;break;case"scroll":case"scrollend":tt=uc;break;case"wheel":tt=$n;break;case"copy":case"cut":case"paste":tt=k;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tt=Xr;break;case"toggle":case"beforetoggle":tt=Ds}var mr=(c&4)!==0,Na=!mr&&(o==="scroll"||o==="scrollend"),Ve=mr?Qe!==null?Qe+"Capture":null:Qe;mr=[];for(var Be=Je,Ye;Be!==null;){var xt=Be;if(Ye=xt.stateNode,xt=xt.tag,xt!==5&&xt!==26&&xt!==27||Ye===null||Ve===null||(xt=Da(Be,Ve),xt!=null&&mr.push(Hm(Be,xt,Ye))),Na)break;Be=Be.return}0<mr.length&&(Qe=new tt(Qe,yr,null,h,pt),wt.push({event:Qe,listeners:mr}))}}if((c&7)===0){e:{if(Qe=o==="mouseover"||o==="pointerover",tt=o==="mouseout"||o==="pointerout",Qe&&h!==gt&&(yr=h.relatedTarget||h.fromElement)&&(sa(yr)||yr[Ur]))break e;if((tt||Qe)&&(Qe=pt.window===pt?pt:(Qe=pt.ownerDocument)?Qe.defaultView||Qe.parentWindow:window,tt?(yr=h.relatedTarget||h.toElement,tt=Je,yr=yr?sa(yr):null,yr!==null&&(Na=i(yr),mr=yr.tag,yr!==Na||mr!==5&&mr!==27&&mr!==6)&&(yr=null)):(tt=null,yr=Je),tt!==yr)){if(mr=jd,xt="onMouseLeave",Ve="onMouseEnter",Be="mouse",(o==="pointerout"||o==="pointerover")&&(mr=Xr,xt="onPointerLeave",Ve="onPointerEnter",Be="pointer"),Na=tt==null?Qe:dn(tt),Ye=yr==null?Qe:dn(yr),Qe=new mr(xt,Be+"leave",tt,h,pt),Qe.target=Na,Qe.relatedTarget=Ye,xt=null,sa(pt)===Je&&(mr=new mr(Ve,Be+"enter",yr,h,pt),mr.target=Ye,mr.relatedTarget=Na,xt=mr),Na=xt,tt&&yr)t:{for(mr=tt,Ve=yr,Be=0,Ye=mr;Ye;Ye=lh(Ye))Be++;for(Ye=0,xt=Ve;xt;xt=lh(xt))Ye++;for(;0<Be-Ye;)mr=lh(mr),Be--;for(;0<Ye-Be;)Ve=lh(Ve),Ye--;for(;Be--;){if(mr===Ve||Ve!==null&&mr===Ve.alternate)break t;mr=lh(mr),Ve=lh(Ve)}mr=null}else mr=null;tt!==null&&vN(wt,Qe,tt,mr,!1),yr!==null&&Na!==null&&vN(wt,Na,yr,mr,!0)}}e:{if(Qe=Je?dn(Je):window,tt=Qe.nodeName&&Qe.nodeName.toLowerCase(),tt==="select"||tt==="input"&&Qe.type==="file")var Zt=hu;else if(Ji(Qe))if(Fo)Zt=sn;else{Zt=Sd;var Lr=Dl}else tt=Qe.nodeName,!tt||tt.toLowerCase()!=="input"||Qe.type!=="checkbox"&&Qe.type!=="radio"?Je&&ot(Je.elementType)&&(Zt=hu):Zt=mu;if(Zt&&(Zt=Zt(o,Je))){hc(wt,Zt,h,pt);break e}Lr&&Lr(o,Qe,Je),o==="focusout"&&Je&&Qe.type==="number"&&Je.memoizedProps.value!=null&&oc(Qe,"number",Qe.value)}switch(Lr=Je?dn(Je):window,o){case"focusin":(Ji(Lr)||Lr.contentEditable==="true")&&(Gs=Lr,$o=Je,li=null);break;case"focusout":li=$o=Gs=null;break;case"mousedown":zo=!0;break;case"contextmenu":case"mouseup":case"dragend":zo=!1,Ks(wt,h,pt);break;case"selectionchange":if(Rl)break;case"keydown":case"keyup":Ks(wt,h,pt)}var sr;if(Sl)e:{switch(o){case"compositionstart":var pr="onCompositionStart";break e;case"compositionend":pr="onCompositionEnd";break e;case"compositionupdate":pr="onCompositionUpdate";break e}pr=void 0}else oi?zn(o,h)&&(pr="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(pr="onCompositionStart");pr&&(Cl&&h.locale!=="ko"&&(oi||pr!=="onCompositionStart"?pr==="onCompositionEnd"&&oi&&(sr=xs()):(Ra=pt,jl="value"in Ra?Ra.value:Ra.textContent,oi=!0)),Lr=Yg(Je,pr),0<Lr.length&&(pr=new Ne(pr,o,null,h,pt),wt.push({event:pr,listeners:Lr}),sr?pr.data=sr:(sr=Pl(h),sr!==null&&(pr.data=sr)))),(sr=Al?_d(o,h):Nd(o,h))&&(pr=Yg(Je,"onBeforeInput"),0<pr.length&&(Lr=new Ne("onBeforeInput","beforeinput",null,h,pt),wt.push({event:Lr,listeners:pr}),Lr.data=sr)),zD(wt,o,Je,h,pt)}gN(wt,c)})}function Hm(o,c,h){return{instance:o,listener:c,currentTarget:h}}function Yg(o,c){for(var h=c+"Capture",p=[];o!==null;){var w=o,C=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||C===null||(w=Da(o,h),w!=null&&p.unshift(Hm(o,w,C)),w=Da(o,c),w!=null&&p.push(Hm(o,w,C))),o.tag===3)return p;o=o.return}return[]}function lh(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function vN(o,c,h,p,w){for(var C=c._reactName,H=[];h!==null&&h!==p;){var ue=h,Le=ue.alternate,Je=ue.stateNode;if(ue=ue.tag,Le!==null&&Le===p)break;ue!==5&&ue!==26&&ue!==27||Je===null||(Le=Je,w?(Je=Da(h,C),Je!=null&&H.unshift(Hm(h,Je,Le))):w||(Je=Da(h,C),Je!=null&&H.push(Hm(h,Je,Le)))),h=h.return}H.length!==0&&o.push({event:c,listeners:H})}var KD=/\r\n?/g,WD=/\u0000|\uFFFD/g;function yN(o){return(typeof o=="string"?o:""+o).replace(KD,`
`).replace(WD,"")}function bN(o,c){return c=yN(c),yN(o)===c}function Xg(){}function _a(o,c,h,p,w,C){switch(h){case"children":typeof p=="string"?c==="body"||c==="textarea"&&p===""||X(o,p):(typeof p=="number"||typeof p=="bigint")&&c!=="body"&&X(o,""+p);break;case"className":Un(o,"class",p);break;case"tabIndex":Un(o,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Un(o,h,p);break;case"style":yt(o,p,C);break;case"data":if(c!=="object"){Un(o,"data",p);break}case"src":case"href":if(p===""&&(c!=="a"||h!=="href")){o.removeAttribute(h);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(h);break}p=qt(""+p),o.setAttribute(h,p);break;case"action":case"formAction":if(typeof p=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(h==="formAction"?(c!=="input"&&_a(o,c,"name",w.name,w,null),_a(o,c,"formEncType",w.formEncType,w,null),_a(o,c,"formMethod",w.formMethod,w,null),_a(o,c,"formTarget",w.formTarget,w,null)):(_a(o,c,"encType",w.encType,w,null),_a(o,c,"method",w.method,w,null),_a(o,c,"target",w.target,w,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(h);break}p=qt(""+p),o.setAttribute(h,p);break;case"onClick":p!=null&&(o.onclick=Xg);break;case"onScroll":p!=null&&Fr("scroll",o);break;case"onScrollEnd":p!=null&&Fr("scrollend",o);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(a(61));if(h=p.__html,h!=null){if(w.children!=null)throw Error(a(60));o.innerHTML=h}}break;case"multiple":o.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":o.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){o.removeAttribute("xlink:href");break}h=qt(""+p),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(h,""+p):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":p===!0?o.setAttribute(h,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(h,p):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?o.setAttribute(h,p):o.removeAttribute(h);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?o.removeAttribute(h):o.setAttribute(h,p);break;case"popover":Fr("beforetoggle",o),Fr("toggle",o),Do(o,"popover",p);break;case"xlinkActuate":gs(o,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":gs(o,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":gs(o,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":gs(o,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":gs(o,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":gs(o,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":gs(o,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":gs(o,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":gs(o,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Do(o,"is",p);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=ut.get(h)||h,Do(o,h,p))}}function Ay(o,c,h,p,w,C){switch(h){case"style":yt(o,p,C);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(a(61));if(h=p.__html,h!=null){if(w.children!=null)throw Error(a(60));o.innerHTML=h}}break;case"children":typeof p=="string"?X(o,p):(typeof p=="number"||typeof p=="bigint")&&X(o,""+p);break;case"onScroll":p!=null&&Fr("scroll",o);break;case"onScrollEnd":p!=null&&Fr("scrollend",o);break;case"onClick":p!=null&&(o.onclick=Xg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yr.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(w=h.endsWith("Capture"),c=h.slice(2,w?h.length-7:void 0),C=o[cr]||null,C=C!=null?C[h]:null,typeof C=="function"&&o.removeEventListener(c,C,w),typeof p=="function")){typeof C!="function"&&C!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(c,p,w);break e}h in o?o[h]=p:p===!0?o.setAttribute(h,""):Do(o,h,p)}}}function Ss(o,c,h){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fr("error",o),Fr("load",o);var p=!1,w=!1,C;for(C in h)if(h.hasOwnProperty(C)){var H=h[C];if(H!=null)switch(C){case"src":p=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,c));default:_a(o,c,C,H,h,null)}}w&&_a(o,c,"srcSet",h.srcSet,h,null),p&&_a(o,c,"src",h.src,h,null);return;case"input":Fr("invalid",o);var ue=C=H=w=null,Le=null,Je=null;for(p in h)if(h.hasOwnProperty(p)){var pt=h[p];if(pt!=null)switch(p){case"name":w=pt;break;case"type":H=pt;break;case"checked":Le=pt;break;case"defaultChecked":Je=pt;break;case"value":C=pt;break;case"defaultValue":ue=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(a(137,c));break;default:_a(o,c,p,pt,h,null)}}si(o,C,ue,Le,Je,H,w,!1),Os(o);return;case"select":Fr("invalid",o),p=H=C=null;for(w in h)if(h.hasOwnProperty(w)&&(ue=h[w],ue!=null))switch(w){case"value":C=ue;break;case"defaultValue":H=ue;break;case"multiple":p=ue;default:_a(o,c,w,ue,h,null)}c=C,h=H,o.multiple=!!p,c!=null?ji(o,!!p,c,!1):h!=null&&ji(o,!!p,h,!0);return;case"textarea":Fr("invalid",o),C=w=p=null;for(H in h)if(h.hasOwnProperty(H)&&(ue=h[H],ue!=null))switch(H){case"value":p=ue;break;case"defaultValue":w=ue;break;case"children":C=ue;break;case"dangerouslySetInnerHTML":if(ue!=null)throw Error(a(91));break;default:_a(o,c,H,ue,h,null)}lc(o,p,w,C),Os(o);return;case"option":for(Le in h)if(h.hasOwnProperty(Le)&&(p=h[Le],p!=null))switch(Le){case"selected":o.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:_a(o,c,Le,p,h,null)}return;case"dialog":Fr("beforetoggle",o),Fr("toggle",o),Fr("cancel",o),Fr("close",o);break;case"iframe":case"object":Fr("load",o);break;case"video":case"audio":for(p=0;p<Vm.length;p++)Fr(Vm[p],o);break;case"image":Fr("error",o),Fr("load",o);break;case"details":Fr("toggle",o);break;case"embed":case"source":case"link":Fr("error",o),Fr("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Je in h)if(h.hasOwnProperty(Je)&&(p=h[Je],p!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,c));default:_a(o,c,Je,p,h,null)}return;default:if(ot(c)){for(pt in h)h.hasOwnProperty(pt)&&(p=h[pt],p!==void 0&&Ay(o,c,pt,p,h,void 0));return}}for(ue in h)h.hasOwnProperty(ue)&&(p=h[ue],p!=null&&_a(o,c,ue,p,h,null))}function YD(o,c,h,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,C=null,H=null,ue=null,Le=null,Je=null,pt=null;for(tt in h){var wt=h[tt];if(h.hasOwnProperty(tt)&&wt!=null)switch(tt){case"checked":break;case"value":break;case"defaultValue":Le=wt;default:p.hasOwnProperty(tt)||_a(o,c,tt,null,p,wt)}}for(var Qe in p){var tt=p[Qe];if(wt=h[Qe],p.hasOwnProperty(Qe)&&(tt!=null||wt!=null))switch(Qe){case"type":C=tt;break;case"name":w=tt;break;case"checked":Je=tt;break;case"defaultChecked":pt=tt;break;case"value":H=tt;break;case"defaultValue":ue=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(a(137,c));break;default:tt!==wt&&_a(o,c,Qe,tt,p,wt)}}wi(o,H,ue,Le,Je,pt,C,w);return;case"select":tt=H=ue=Qe=null;for(C in h)if(Le=h[C],h.hasOwnProperty(C)&&Le!=null)switch(C){case"value":break;case"multiple":tt=Le;default:p.hasOwnProperty(C)||_a(o,c,C,null,p,Le)}for(w in p)if(C=p[w],Le=h[w],p.hasOwnProperty(w)&&(C!=null||Le!=null))switch(w){case"value":Qe=C;break;case"defaultValue":ue=C;break;case"multiple":H=C;default:C!==Le&&_a(o,c,w,C,p,Le)}c=ue,h=H,p=tt,Qe!=null?ji(o,!!h,Qe,!1):!!p!=!!h&&(c!=null?ji(o,!!h,c,!0):ji(o,!!h,h?[]:"",!1));return;case"textarea":tt=Qe=null;for(ue in h)if(w=h[ue],h.hasOwnProperty(ue)&&w!=null&&!p.hasOwnProperty(ue))switch(ue){case"value":break;case"children":break;default:_a(o,c,ue,null,p,w)}for(H in p)if(w=p[H],C=h[H],p.hasOwnProperty(H)&&(w!=null||C!=null))switch(H){case"value":Qe=w;break;case"defaultValue":tt=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(a(91));break;default:w!==C&&_a(o,c,H,w,p,C)}Hs(o,Qe,tt);return;case"option":for(var yr in h)if(Qe=h[yr],h.hasOwnProperty(yr)&&Qe!=null&&!p.hasOwnProperty(yr))switch(yr){case"selected":o.selected=!1;break;default:_a(o,c,yr,null,p,Qe)}for(Le in p)if(Qe=p[Le],tt=h[Le],p.hasOwnProperty(Le)&&Qe!==tt&&(Qe!=null||tt!=null))switch(Le){case"selected":o.selected=Qe&&typeof Qe!="function"&&typeof Qe!="symbol";break;default:_a(o,c,Le,Qe,p,tt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mr in h)Qe=h[mr],h.hasOwnProperty(mr)&&Qe!=null&&!p.hasOwnProperty(mr)&&_a(o,c,mr,null,p,Qe);for(Je in p)if(Qe=p[Je],tt=h[Je],p.hasOwnProperty(Je)&&Qe!==tt&&(Qe!=null||tt!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":if(Qe!=null)throw Error(a(137,c));break;default:_a(o,c,Je,Qe,p,tt)}return;default:if(ot(c)){for(var Na in h)Qe=h[Na],h.hasOwnProperty(Na)&&Qe!==void 0&&!p.hasOwnProperty(Na)&&Ay(o,c,Na,void 0,p,Qe);for(pt in p)Qe=p[pt],tt=h[pt],!p.hasOwnProperty(pt)||Qe===tt||Qe===void 0&&tt===void 0||Ay(o,c,pt,Qe,p,tt);return}}for(var Ve in h)Qe=h[Ve],h.hasOwnProperty(Ve)&&Qe!=null&&!p.hasOwnProperty(Ve)&&_a(o,c,Ve,null,p,Qe);for(wt in p)Qe=p[wt],tt=h[wt],!p.hasOwnProperty(wt)||Qe===tt||Qe==null&&tt==null||_a(o,c,wt,Qe,p,tt)}var Cy=null,ky=null;function Zg(o){return o.nodeType===9?o:o.ownerDocument}function wN(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jN(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function Ey(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Py=null;function XD(){var o=window.event;return o&&o.type==="popstate"?o===Py?!1:(Py=o,!0):(Py=null,!1)}var _N=typeof setTimeout=="function"?setTimeout:void 0,ZD=typeof clearTimeout=="function"?clearTimeout:void 0,NN=typeof Promise=="function"?Promise:void 0,JD=typeof queueMicrotask=="function"?queueMicrotask:typeof NN<"u"?function(o){return NN.resolve(null).then(o).catch(QD)}:_N;function QD(o){setTimeout(function(){throw o})}function Fu(o){return o==="head"}function SN(o,c){var h=c,p=0,w=0;do{var C=h.nextSibling;if(o.removeChild(h),C&&C.nodeType===8)if(h=C.data,h==="/$"){if(0<p&&8>p){h=p;var H=o.ownerDocument;if(h&1&&Gm(H.documentElement),h&2&&Gm(H.body),h&4)for(h=H.head,Gm(h),H=h.firstChild;H;){var ue=H.nextSibling,Le=H.nodeName;H[Fa]||Le==="SCRIPT"||Le==="STYLE"||Le==="LINK"&&H.rel.toLowerCase()==="stylesheet"||h.removeChild(H),H=ue}}if(w===0){o.removeChild(C),ep(c);return}w--}else h==="$"||h==="$?"||h==="$!"?w++:p=h.charCodeAt(0)-48;else p=0;h=C}while(h);ep(c)}function Ty(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var h=c;switch(c=c.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Ty(h),nn(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function eR(o,c,h,p){for(;o.nodeType===1;){var w=h;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!p&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(p){if(!o[Fa])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(C=o.getAttribute("rel"),C==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(C!==w.rel||o.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||o.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||o.getAttribute("title")!==(w.title==null?null:w.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(C=o.getAttribute("src"),(C!==(w.src==null?null:w.src)||o.getAttribute("type")!==(w.type==null?null:w.type)||o.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&C&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var C=w.name==null?null:""+w.name;if(w.type==="hidden"&&o.getAttribute("name")===C)return o}else return o;if(o=rl(o.nextSibling),o===null)break}return null}function tR(o,c,h){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=rl(o.nextSibling),o===null))return null;return o}function Oy(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function rR(o,c){var h=o.ownerDocument;if(o.data!=="$?"||h.readyState==="complete")c();else{var p=function(){c(),h.removeEventListener("DOMContentLoaded",p)};h.addEventListener("DOMContentLoaded",p),o._reactRetry=p}}function rl(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}var Dy=null;function AN(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return o;c--}else h==="/$"&&c++}o=o.previousSibling}return null}function CN(o,c,h){switch(c=Zg(h),o){case"html":if(o=c.documentElement,!o)throw Error(a(452));return o;case"head":if(o=c.head,!o)throw Error(a(453));return o;case"body":if(o=c.body,!o)throw Error(a(454));return o;default:throw Error(a(451))}}function Gm(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);nn(o)}var fo=new Map,kN=new Set;function Jg(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Oc=fe.d;fe.d={f:aR,r:nR,D:sR,C:iR,L:oR,m:lR,X:uR,S:cR,M:dR};function aR(){var o=Oc.f(),c=zg();return o||c}function nR(o){var c=Ba(o);c!==null&&c.tag===5&&c.type==="form"?Bd(c):Oc.r(o)}var ch=typeof document>"u"?null:document;function EN(o,c,h){var p=ch;if(p&&typeof c=="string"&&c){var w=Mr(c);w='link[rel="'+o+'"][href="'+w+'"]',typeof h=="string"&&(w+='[crossorigin="'+h+'"]'),kN.has(w)||(kN.add(w),o={rel:o,crossOrigin:h,href:c},p.querySelector(w)===null&&(c=p.createElement("link"),Ss(c,"link",o),Wr(c),p.head.appendChild(c)))}}function sR(o){Oc.D(o),EN("dns-prefetch",o,null)}function iR(o,c){Oc.C(o,c),EN("preconnect",o,c)}function oR(o,c,h){Oc.L(o,c,h);var p=ch;if(p&&o&&c){var w='link[rel="preload"][as="'+Mr(c)+'"]';c==="image"&&h&&h.imageSrcSet?(w+='[imagesrcset="'+Mr(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(w+='[imagesizes="'+Mr(h.imageSizes)+'"]')):w+='[href="'+Mr(o)+'"]';var C=w;switch(c){case"style":C=uh(o);break;case"script":C=dh(o)}fo.has(C)||(o=m({rel:"preload",href:c==="image"&&h&&h.imageSrcSet?void 0:o,as:c},h),fo.set(C,o),p.querySelector(w)!==null||c==="style"&&p.querySelector(Km(C))||c==="script"&&p.querySelector(Wm(C))||(c=p.createElement("link"),Ss(c,"link",o),Wr(c),p.head.appendChild(c)))}}function lR(o,c){Oc.m(o,c);var h=ch;if(h&&o){var p=c&&typeof c.as=="string"?c.as:"script",w='link[rel="modulepreload"][as="'+Mr(p)+'"][href="'+Mr(o)+'"]',C=w;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=dh(o)}if(!fo.has(C)&&(o=m({rel:"modulepreload",href:o},c),fo.set(C,o),h.querySelector(w)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Wm(C)))return}p=h.createElement("link"),Ss(p,"link",o),Wr(p),h.head.appendChild(p)}}}function cR(o,c,h){Oc.S(o,c,h);var p=ch;if(p&&o){var w=Oa(p).hoistableStyles,C=uh(o);c=c||"default";var H=w.get(C);if(!H){var ue={loading:0,preload:null};if(H=p.querySelector(Km(C)))ue.loading=5;else{o=m({rel:"stylesheet",href:o,"data-precedence":c},h),(h=fo.get(C))&&Ry(o,h);var Le=H=p.createElement("link");Wr(Le),Ss(Le,"link",o),Le._p=new Promise(function(Je,pt){Le.onload=Je,Le.onerror=pt}),Le.addEventListener("load",function(){ue.loading|=1}),Le.addEventListener("error",function(){ue.loading|=2}),ue.loading|=4,Qg(H,c,p)}H={type:"stylesheet",instance:H,count:1,state:ue},w.set(C,H)}}}function uR(o,c){Oc.X(o,c);var h=ch;if(h&&o){var p=Oa(h).hoistableScripts,w=dh(o),C=p.get(w);C||(C=h.querySelector(Wm(w)),C||(o=m({src:o,async:!0},c),(c=fo.get(w))&&Ly(o,c),C=h.createElement("script"),Wr(C),Ss(C,"link",o),h.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},p.set(w,C))}}function dR(o,c){Oc.M(o,c);var h=ch;if(h&&o){var p=Oa(h).hoistableScripts,w=dh(o),C=p.get(w);C||(C=h.querySelector(Wm(w)),C||(o=m({src:o,async:!0,type:"module"},c),(c=fo.get(w))&&Ly(o,c),C=h.createElement("script"),Wr(C),Ss(C,"link",o),h.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},p.set(w,C))}}function PN(o,c,h,p){var w=(w=me.current)?Jg(w):null;if(!w)throw Error(a(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(c=uh(h.href),h=Oa(w).hoistableStyles,p=h.get(c),p||(p={type:"style",instance:null,count:0,state:null},h.set(c,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=uh(h.href);var C=Oa(w).hoistableStyles,H=C.get(o);if(H||(w=w.ownerDocument||w,H={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(o,H),(C=w.querySelector(Km(o)))&&!C._p&&(H.instance=C,H.state.loading=5),fo.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},fo.set(o,h),C||fR(w,o,h,H.state))),c&&p===null)throw Error(a(528,""));return H}if(c&&p!==null)throw Error(a(529,""));return null;case"script":return c=h.async,h=h.src,typeof h=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=dh(h),h=Oa(w).hoistableScripts,p=h.get(c),p||(p={type:"script",instance:null,count:0,state:null},h.set(c,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,o))}}function uh(o){return'href="'+Mr(o)+'"'}function Km(o){return'link[rel="stylesheet"]['+o+"]"}function TN(o){return m({},o,{"data-precedence":o.precedence,precedence:null})}function fR(o,c,h,p){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?p.loading=1:(c=o.createElement("link"),p.preload=c,c.addEventListener("load",function(){return p.loading|=1}),c.addEventListener("error",function(){return p.loading|=2}),Ss(c,"link",h),Wr(c),o.head.appendChild(c))}function dh(o){return'[src="'+Mr(o)+'"]'}function Wm(o){return"script[async]"+o}function ON(o,c,h){if(c.count++,c.instance===null)switch(c.type){case"style":var p=o.querySelector('style[data-href~="'+Mr(h.href)+'"]');if(p)return c.instance=p,Wr(p),p;var w=m({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return p=(o.ownerDocument||o).createElement("style"),Wr(p),Ss(p,"style",w),Qg(p,h.precedence,o),c.instance=p;case"stylesheet":w=uh(h.href);var C=o.querySelector(Km(w));if(C)return c.state.loading|=4,c.instance=C,Wr(C),C;p=TN(h),(w=fo.get(w))&&Ry(p,w),C=(o.ownerDocument||o).createElement("link"),Wr(C);var H=C;return H._p=new Promise(function(ue,Le){H.onload=ue,H.onerror=Le}),Ss(C,"link",p),c.state.loading|=4,Qg(C,h.precedence,o),c.instance=C;case"script":return C=dh(h.src),(w=o.querySelector(Wm(C)))?(c.instance=w,Wr(w),w):(p=h,(w=fo.get(C))&&(p=m({},h),Ly(p,w)),o=o.ownerDocument||o,w=o.createElement("script"),Wr(w),Ss(w,"link",p),o.head.appendChild(w),c.instance=w);case"void":return null;default:throw Error(a(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(p=c.instance,c.state.loading|=4,Qg(p,h.precedence,o));return c.instance}function Qg(o,c,h){for(var p=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=p.length?p[p.length-1]:null,C=w,H=0;H<p.length;H++){var ue=p[H];if(ue.dataset.precedence===c)C=ue;else if(C!==w)break}C?C.parentNode.insertBefore(o,C.nextSibling):(c=h.nodeType===9?h.head:h,c.insertBefore(o,c.firstChild))}function Ry(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function Ly(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var e0=null;function DN(o,c,h){if(e0===null){var p=new Map,w=e0=new Map;w.set(h,p)}else w=e0,p=w.get(h),p||(p=new Map,w.set(h,p));if(p.has(o))return p;for(p.set(o,null),h=h.getElementsByTagName(o),w=0;w<h.length;w++){var C=h[w];if(!(C[Fa]||C[ar]||o==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var H=C.getAttribute(c)||"";H=o+H;var ue=p.get(H);ue?ue.push(C):p.set(H,[C])}}return p}function RN(o,c,h){o=o.ownerDocument||o,o.head.insertBefore(h,c==="title"?o.querySelector("head > title"):null)}function hR(o,c,h){if(h===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function LN(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Ym=null;function mR(){}function pR(o,c,h){if(Ym===null)throw Error(a(475));var p=Ym;if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var w=uh(h.href),C=o.querySelector(Km(w));if(C){o=C._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(p.count++,p=t0.bind(p),o.then(p,p)),c.state.loading|=4,c.instance=C,Wr(C);return}C=o.ownerDocument||o,h=TN(h),(w=fo.get(w))&&Ry(h,w),C=C.createElement("link"),Wr(C);var H=C;H._p=new Promise(function(ue,Le){H.onload=ue,H.onerror=Le}),Ss(C,"link",h),c.instance=C}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(p.count++,c=t0.bind(p),o.addEventListener("load",c),o.addEventListener("error",c))}}function gR(){if(Ym===null)throw Error(a(475));var o=Ym;return o.stylesheets&&o.count===0&&My(o,o.stylesheets),0<o.count?function(c){var h=setTimeout(function(){if(o.stylesheets&&My(o,o.stylesheets),o.unsuspend){var p=o.unsuspend;o.unsuspend=null,p()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(h)}}:null}function t0(){if(this.count--,this.count===0){if(this.stylesheets)My(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var r0=null;function My(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,r0=new Map,c.forEach(xR,o),r0=null,t0.call(o))}function xR(o,c){if(!(c.state.loading&4)){var h=r0.get(o);if(h)var p=h.get(null);else{h=new Map,r0.set(o,h);for(var w=o.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<w.length;C++){var H=w[C];(H.nodeName==="LINK"||H.getAttribute("media")!=="not all")&&(h.set(H.dataset.precedence,H),p=H)}p&&h.set(null,p)}w=c.instance,H=w.getAttribute("data-precedence"),C=h.get(H)||p,C===p&&h.set(null,w),h.set(H,w),this.count++,p=t0.bind(this),w.addEventListener("load",p),w.addEventListener("error",p),C?C.parentNode.insertBefore(w,C.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(w,o.firstChild)),c.state.loading|=4}}var Xm={$$typeof:T,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function vR(o,c,h,p,w,C,H,ue){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tt(0),this.hiddenUpdates=Tt(null),this.identifierPrefix=p,this.onUncaughtError=w,this.onCaughtError=C,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ue,this.incompleteTransitions=new Map}function MN(o,c,h,p,w,C,H,ue,Le,Je,pt,wt){return o=new vR(o,c,h,H,ue,Le,Je,wt),c=1,C===!0&&(c|=24),C=ts(3,null,null,c),o.current=C,C.stateNode=o,c=ym(),c.refCount++,o.pooledCache=c,c.refCount++,C.memoizedState={element:p,isDehydrated:h,cache:c},Xe(C),o}function IN(o){return o?(o=Mn,o):Mn}function qN(o,c,h,p,w,C){w=IN(w),p.context===null?p.context=w:p.pendingContext=w,p=ct(c),p.payload={element:h},C=C===void 0?null:C,C!==null&&(p.callback=C),h=At(o,p,c),h!==null&&(Oi(h,o,c),bt(h,o,c))}function FN(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function Iy(o,c){FN(o,c),(o=o.alternate)&&FN(o,c)}function BN(o){if(o.tag===13){var c=xc(o,67108864);c!==null&&Oi(c,o,67108864),Iy(o,67108864)}}var a0=!0;function yR(o,c,h,p){var w=se.T;se.T=null;var C=fe.p;try{fe.p=2,qy(o,c,h,p)}finally{fe.p=C,se.T=w}}function bR(o,c,h,p){var w=se.T;se.T=null;var C=fe.p;try{fe.p=8,qy(o,c,h,p)}finally{fe.p=C,se.T=w}}function qy(o,c,h,p){if(a0){var w=Fy(p);if(w===null)Sy(o,c,p,n0,h),$N(o,p);else if(jR(w,o,c,h,p))p.stopPropagation();else if($N(o,p),c&4&&-1<wR.indexOf(o)){for(;w!==null;){var C=Ba(w);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var H=Rt(C.pendingLanes);if(H!==0){var ue=C;for(ue.pendingLanes|=2,ue.entangledLanes|=2;H;){var Le=1<<31-ht(H);ue.entanglements[1]|=Le,H&=~Le}$l(C),(ga&6)===0&&(Ug=W()+500,zm(0))}}break;case 13:ue=xc(C,2),ue!==null&&Oi(ue,C,2),zg(),Iy(C,2)}if(C=Fy(p),C===null&&Sy(o,c,p,n0,h),C===w)break;w=C}w!==null&&p.stopPropagation()}else Sy(o,c,p,null,h)}}function Fy(o){return o=ur(o),By(o)}var n0=null;function By(o){if(n0=null,o=sa(o),o!==null){var c=i(o);if(c===null)o=null;else{var h=c.tag;if(h===13){if(o=l(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return n0=o,null}function UN(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(be()){case Ce:return 2;case ze:return 8;case Pe:case we:return 32;case ae:return 268435456;default:return 32}default:return 32}}var Uy=!1,Bu=null,Uu=null,$u=null,Zm=new Map,Jm=new Map,zu=[],wR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $N(o,c){switch(o){case"focusin":case"focusout":Bu=null;break;case"dragenter":case"dragleave":Uu=null;break;case"mouseover":case"mouseout":$u=null;break;case"pointerover":case"pointerout":Zm.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jm.delete(c.pointerId)}}function Qm(o,c,h,p,w,C){return o===null||o.nativeEvent!==C?(o={blockedOn:c,domEventName:h,eventSystemFlags:p,nativeEvent:C,targetContainers:[w]},c!==null&&(c=Ba(c),c!==null&&BN(c)),o):(o.eventSystemFlags|=p,c=o.targetContainers,w!==null&&c.indexOf(w)===-1&&c.push(w),o)}function jR(o,c,h,p,w){switch(c){case"focusin":return Bu=Qm(Bu,o,c,h,p,w),!0;case"dragenter":return Uu=Qm(Uu,o,c,h,p,w),!0;case"mouseover":return $u=Qm($u,o,c,h,p,w),!0;case"pointerover":var C=w.pointerId;return Zm.set(C,Qm(Zm.get(C)||null,o,c,h,p,w)),!0;case"gotpointercapture":return C=w.pointerId,Jm.set(C,Qm(Jm.get(C)||null,o,c,h,p,w)),!0}return!1}function zN(o){var c=sa(o.target);if(c!==null){var h=i(c);if(h!==null){if(c=h.tag,c===13){if(c=l(h),c!==null){o.blockedOn=c,St(o.priority,function(){if(h.tag===13){var p=Ti();p=We(p);var w=xc(h,p);w!==null&&Oi(w,h,p),Iy(h,p)}});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function s0(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=Fy(o.nativeEvent);if(h===null){h=o.nativeEvent;var p=new h.constructor(h.type,h);gt=p,h.target.dispatchEvent(p),gt=null}else return c=Ba(h),c!==null&&BN(c),o.blockedOn=h,!1;c.shift()}return!0}function VN(o,c,h){s0(o)&&h.delete(c)}function _R(){Uy=!1,Bu!==null&&s0(Bu)&&(Bu=null),Uu!==null&&s0(Uu)&&(Uu=null),$u!==null&&s0($u)&&($u=null),Zm.forEach(VN),Jm.forEach(VN)}function i0(o,c){o.blockedOn===c&&(o.blockedOn=null,Uy||(Uy=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,_R)))}var o0=null;function HN(o){o0!==o&&(o0=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){o0===o&&(o0=null);for(var c=0;c<o.length;c+=3){var h=o[c],p=o[c+1],w=o[c+2];if(typeof p!="function"){if(By(p||h)===null)continue;break}var C=Ba(h);C!==null&&(o.splice(c,3),c-=3,lo(C,{pending:!0,data:w,method:h.method,action:p},p,w))}}))}function ep(o){function c(Le){return i0(Le,o)}Bu!==null&&i0(Bu,o),Uu!==null&&i0(Uu,o),$u!==null&&i0($u,o),Zm.forEach(c),Jm.forEach(c);for(var h=0;h<zu.length;h++){var p=zu[h];p.blockedOn===o&&(p.blockedOn=null)}for(;0<zu.length&&(h=zu[0],h.blockedOn===null);)zN(h),h.blockedOn===null&&zu.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(p=0;p<h.length;p+=3){var w=h[p],C=h[p+1],H=w[cr]||null;if(typeof C=="function")H||HN(h);else if(H){var ue=null;if(C&&C.hasAttribute("formAction")){if(w=C,H=C[cr]||null)ue=H.formAction;else if(By(w)!==null)continue}else ue=H.action;typeof ue=="function"?h[p+1]=ue:(h.splice(p,3),p-=3),HN(h)}}}function $y(o){this._internalRoot=o}l0.prototype.render=$y.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(a(409));var h=c.current,p=Ti();qN(h,p,o,c,null,null)},l0.prototype.unmount=$y.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;qN(o.current,2,null,o,null,null),zg(),c[Ur]=null}};function l0(o){this._internalRoot=o}l0.prototype.unstable_scheduleHydration=function(o){if(o){var c=ir();o={blockedOn:null,target:o,priority:c};for(var h=0;h<zu.length&&c!==0&&c<zu[h].priority;h++);zu.splice(h,0,o),h===0&&zN(o)}};var GN=t.version;if(GN!=="19.1.1")throw Error(a(527,GN,"19.1.1"));fe.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(a(188)):(o=Object.keys(o).join(","),Error(a(268,o)));return o=d(c),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var NR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var c0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!c0.isDisabled&&c0.supportsFiber)try{Et=c0.inject(NR),Bt=c0}catch{}}return rp.createRoot=function(o,c){if(!s(o))throw Error(a(299));var h=!1,p="",w=l5,C=c5,H=u5,ue=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(H=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(ue=c.unstable_transitionCallbacks)),c=MN(o,1,!1,null,null,h,p,w,C,H,ue,null),o[Ur]=c.current,Ny(o),new $y(c)},rp.hydrateRoot=function(o,c,h){if(!s(o))throw Error(a(299));var p=!1,w="",C=l5,H=c5,ue=u5,Le=null,Je=null;return h!=null&&(h.unstable_strictMode===!0&&(p=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onUncaughtError!==void 0&&(C=h.onUncaughtError),h.onCaughtError!==void 0&&(H=h.onCaughtError),h.onRecoverableError!==void 0&&(ue=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(Le=h.unstable_transitionCallbacks),h.formState!==void 0&&(Je=h.formState)),c=MN(o,1,!0,c,h??null,p,w,C,H,ue,Le,Je),c.context=IN(null),h=c.current,p=Ti(),p=We(p),w=ct(p),w.callback=null,At(h,w,p),h=p,c.current.lanes=h,Te(c,h),$l(c),o[Ur]=c.current,Ny(o),new l0(c)},rp.version="19.1.1",rp}var rS;function MR(){if(rS)return Hy.exports;rS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Hy.exports=LR(),Hy.exports}var IR=MR();const qR=Eo(IR);var Ct=(e=>(e.Compliant="Compliant",e.Pending="Pending",e.NonCompliant="Non-Compliant",e.Verified="Verified",e.Rejected="Rejected",e.NotRequired="Not Required",e))(Ct||{}),va=(e=>(e.PreSeed="Pre-Seed",e.Seed="Seed",e.SeriesA="Series A",e.SeriesB="Series B",e.Bridge="Bridge",e))(va||{}),gk=(e=>(e.IncubationCenter="Incubation Center",e.Accelerator="Accelerator",e.InnovationHub="Innovation Hub",e.TechnologyPark="Technology Park",e.ResearchInstitute="Research Institute",e))(gk||{}),Zu=(e=>(e.Free="Free",e.Fees="Fees",e.Equity="Equity",e.Hybrid="Hybrid",e))(Zu||{}),ex=(e=>(e.Angel="Angel",e.VC="VC Firm",e.Corporate="Corporate",e.Government="Government",e))(ex||{}),qi=(e=>(e.Equity="Equity",e.Debt="Debt",e.Grant="Grant",e))(qi||{}),Vl=(e=>(e.Trademark="Trademark",e.Patent="Patent",e.Copyright="Copyright",e.TradeSecret="Trade Secret",e.DomainName="Domain Name",e.Other="Other",e))(Vl||{}),sl=(e=>(e.Active="Active",e.Pending="Pending",e.Expired="Expired",e.Abandoned="Abandoned",e.Cancelled="Cancelled",e))(sl||{}),h2=(e=>(e.RegistrationCertificate="Registration Certificate",e.ApplicationForm="Application Form",e.RenewalDocument="Renewal Document",e.AssignmentAgreement="Assignment Agreement",e.LicenseAgreement="License Agreement",e.Other="Other",e))(h2||{});const FR="modulepreload",BR=function(e){return"/"+e},aS={},So=function(t,r,a){let s=Promise.resolve();if(r&&r.length>0){let l=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=l(r.map(f=>{if(f=BR(f),f in aS)return;aS[f]=!0;const m=f.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":FR,m||(v.as="script"),v.crossOrigin="",v.href=f,d&&v.setAttribute("nonce",d),document.head.appendChild(v),m)return new Promise((x,j)=>{v.addEventListener("load",x),v.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&i(u.reason);return t().catch(i)})},UR=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>So(async()=>{const{default:a}=await Promise.resolve().then(()=>nm);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)};class Iw extends Error{constructor(t,r="FunctionsError",a){super(t),this.name=r,this.context=a}}class $R extends Iw{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class nS extends Iw{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class sS extends Iw{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var m2;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(m2||(m2={}));var zR=function(e,t,r,a){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(m){try{f(a.next(m))}catch(g){l(g)}}function d(m){try{f(a.throw(m))}catch(g){l(g)}}function f(m){m.done?i(m.value):s(m.value).then(u,d)}f((a=a.apply(e,t||[])).next())})};class VR{constructor(t,{headers:r={},customFetch:a,region:s=m2.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=UR(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var a;return zR(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:l}=r;let u={},{region:d}=r;d||(d=this.region);const f=new URL(`${this.url}/${t}`);d&&d!=="any"&&(u["x-region"]=d,f.searchParams.set("forceFunctionRegion",d));let m;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",m=l):typeof l=="string"?(u["Content-Type"]="text/plain",m=l):typeof FormData<"u"&&l instanceof FormData?m=l:(u["Content-Type"]="application/json",m=JSON.stringify(l)));const g=yield this.fetch(f.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:m}).catch(b=>{throw new $R(b)}),v=g.headers.get("x-relay-error");if(v&&v==="true")throw new nS(g);if(!g.ok)throw new sS(g);let x=((a=g.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),j;return x==="application/json"?j=yield g.json():x==="application/octet-stream"?j=yield g.blob():x==="text/event-stream"?j=g:x==="multipart/form-data"?j=yield g.formData():j=yield g.text(),{data:j,error:null,response:g}}catch(s){return{data:null,error:s,response:s instanceof sS||s instanceof nS?s.context:void 0}}})}}var is={},fh={},hh={},mh={},ph={},gh={},HR=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},zh=HR();const GR=zh.fetch,xk=zh.fetch.bind(zh),vk=zh.Headers,KR=zh.Request,WR=zh.Response,nm=Object.freeze(Object.defineProperty({__proto__:null,Headers:vk,Request:KR,Response:WR,default:xk,fetch:GR},Symbol.toStringTag,{value:"Module"})),YR=kR(nm);var u0={},iS;function yk(){if(iS)return u0;iS=1,Object.defineProperty(u0,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return u0.default=e,u0}var oS;function bk(){if(oS)return gh;oS=1;var e=gh&&gh.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(gh,"__esModule",{value:!0});const t=e(YR),r=e(yk());class a{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,l){return this.headers=Object.assign({},this.headers),this.headers[i]=l,this}then(i,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var m,g,v;let x=null,j=null,b=null,S=f.status,A=f.statusText;if(f.ok){if(this.method!=="HEAD"){const R=await f.text();R===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?j=R:j=JSON.parse(R))}const T=(m=this.headers.Prefer)===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),D=(g=f.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");T&&D&&D.length>1&&(b=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(j)&&(j.length>1?(x={code:"PGRST116",details:`Results contain ${j.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},j=null,b=null,S=406,A="Not Acceptable"):j.length===1?j=j[0]:j=null)}else{const T=await f.text();try{x=JSON.parse(T),Array.isArray(x)&&f.status===404&&(j=[],x=null,S=200,A="OK")}catch{f.status===404&&T===""?(S=204,A="No Content"):x={message:T}}if(x&&this.isMaybeSingle&&(!((v=x==null?void 0:x.details)===null||v===void 0)&&v.includes("0 rows"))&&(x=null,S=200,A="OK"),x&&this.shouldThrowOnError)throw new r.default(x)}return{error:x,data:j,count:b,status:S,statusText:A}});return this.shouldThrowOnError||(d=d.catch(f=>{var m,g,v;return{error:{message:`${(m=f==null?void 0:f.name)!==null&&m!==void 0?m:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(g=f==null?void 0:f.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(v=f==null?void 0:f.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),d.then(i,l)}returns(){return this}overrideTypes(){return this}}return gh.default=a,gh}var lS;function wk(){if(lS)return ph;lS=1;var e=ph&&ph.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ph,"__esModule",{value:!0});const t=e(bk());class r extends t.default{select(s){let i=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",l),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:i=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const f=d?`${d}.order`:"order",m=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${m?`${m},`:""}${s}.${i?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:l=i}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,i,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(f,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:i=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:f="text"}={}){var m;const g=[s?"analyze":null,i?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(m=this.headers.Accept)!==null&&m!==void 0?m:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${f}; for="${v}"; options=${g};`,f==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return ph.default=r,ph}var cS;function qw(){if(cS)return mh;cS=1;var e=mh&&mh.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(mh,"__esModule",{value:!0});const t=e(wk());class r extends t.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const l=Array.from(new Set(i)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${d}fts${f}.${i}`),this}match(s){return Object.entries(s).forEach(([i,l])=>{this.url.searchParams.append(i,`eq.${l}`)}),this}not(s,i,l){return this.url.searchParams.append(s,`not.${i}.${l}`),this}or(s,{foreignTable:i,referencedTable:l=i}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,i,l){return this.url.searchParams.append(s,`${i}.${l}`),this}}return mh.default=r,mh}var uS;function jk(){if(uS)return hh;uS=1;var e=hh&&hh.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(hh,"__esModule",{value:!0});const t=e(qw());class r{constructor(s,{headers:i={},schema:l,fetch:u}){this.url=s,this.headers=i,this.schema=l,this.fetch=u}select(s,{head:i=!1,count:l}={}){const u=i?"HEAD":"GET";let d=!1;const f=(s??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",f),l&&(this.headers.Prefer=`count=${l}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:i,defaultToNull:l=!0}={}){const u="POST",d=[];if(this.headers.Prefer&&d.push(this.headers.Prefer),i&&d.push(`count=${i}`),l||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(s)){const f=s.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(f.length>0){const m=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:i,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){const f="POST",m=[`resolution=${l?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&m.push(this.headers.Prefer),u&&m.push(`count=${u}`),d||m.push("missing=default"),this.headers.Prefer=m.join(","),Array.isArray(s)){const g=s.reduce((v,x)=>v.concat(Object.keys(x)),[]);if(g.length>0){const v=[...new Set(g)].map(x=>`"${x}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:i}={}){const l="PATCH",u=[];return this.headers.Prefer&&u.push(this.headers.Prefer),i&&u.push(`count=${i}`),this.headers.Prefer=u.join(","),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const i="DELETE",l=[];return s&&l.push(`count=${s}`),this.headers.Prefer&&l.unshift(this.headers.Prefer),this.headers.Prefer=l.join(","),new t.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return hh.default=r,hh}var ap={},np={},dS;function XR(){return dS||(dS=1,Object.defineProperty(np,"__esModule",{value:!0}),np.version=void 0,np.version="0.0.0-automated"),np}var fS;function ZR(){if(fS)return ap;fS=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.DEFAULT_HEADERS=void 0;const e=XR();return ap.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},ap}var hS;function JR(){if(hS)return fh;hS=1;var e=fh&&fh.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(fh,"__esModule",{value:!0});const t=e(jk()),r=e(qw()),a=ZR();class s{constructor(l,{headers:u={},schema:d,fetch:f}={}){this.url=l,this.headers=Object.assign(Object.assign({},a.DEFAULT_HEADERS),u),this.schemaName=d,this.fetch=f}from(l){const u=new URL(`${this.url}/${l}`);return new t.default(u,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:d=!1,get:f=!1,count:m}={}){let g;const v=new URL(`${this.url}/rpc/${l}`);let x;d||f?(g=d?"HEAD":"GET",Object.entries(u).filter(([b,S])=>S!==void 0).map(([b,S])=>[b,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([b,S])=>{v.searchParams.append(b,S)})):(g="POST",x=u);const j=Object.assign({},this.headers);return m&&(j.Prefer=`count=${m}`),new r.default({method:g,url:v,headers:j,schema:this.schemaName,body:x,fetch:this.fetch,allowEmpty:!1})}}return fh.default=s,fh}var mS;function QR(){if(mS)return is;mS=1;var e=is&&is.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(is,"__esModule",{value:!0}),is.PostgrestError=is.PostgrestBuilder=is.PostgrestTransformBuilder=is.PostgrestFilterBuilder=is.PostgrestQueryBuilder=is.PostgrestClient=void 0;const t=e(JR());is.PostgrestClient=t.default;const r=e(jk());is.PostgrestQueryBuilder=r.default;const a=e(qw());is.PostgrestFilterBuilder=a.default;const s=e(wk());is.PostgrestTransformBuilder=s.default;const i=e(bk());is.PostgrestBuilder=i.default;const l=e(yk());return is.PostgrestError=l.default,is.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:l.default},is}var e7=QR();const t7=Eo(e7),{PostgrestClient:r7,PostgrestQueryBuilder:lne,PostgrestFilterBuilder:cne,PostgrestTransformBuilder:une,PostgrestBuilder:dne,PostgrestError:fne}=t7;function a7(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const n7=a7(),s7="2.11.15",i7=`realtime-js/${s7}`,o7="1.0.0",_k=1e4,l7=1e3;var yp;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(yp||(yp={}));var Us;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Us||(Us={}));var il;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(il||(il={}));var p2;(function(e){e.websocket="websocket"})(p2||(p2={}));var ef;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ef||(ef={}));class c7{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),a=new TextDecoder;return this._decodeBroadcast(t,r,a)}_decodeBroadcast(t,r,a){const s=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const u=a.decode(t.slice(l,l+s));l=l+s;const d=a.decode(t.slice(l,l+i));l=l+i;const f=JSON.parse(a.decode(t.slice(l,t.byteLength)));return{ref:null,topic:u,event:d,payload:f}}}class Nk{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ma;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ma||(Ma={}));const pS=(e,t,r={})=>{var a;const s=(a=r.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(t).reduce((i,l)=>(i[l]=u7(l,e,t,s),i),{})},u7=(e,t,r,a)=>{const s=t.find(u=>u.name===e),i=s==null?void 0:s.type,l=r[e];return i&&!a.includes(i)?Sk(i,l):g2(l)},Sk=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return m7(t,r)}switch(e){case Ma.bool:return d7(t);case Ma.float4:case Ma.float8:case Ma.int2:case Ma.int4:case Ma.int8:case Ma.numeric:case Ma.oid:return f7(t);case Ma.json:case Ma.jsonb:return h7(t);case Ma.timestamp:return p7(t);case Ma.abstime:case Ma.date:case Ma.daterange:case Ma.int4range:case Ma.int8range:case Ma.money:case Ma.reltime:case Ma.text:case Ma.time:case Ma.timestamptz:case Ma.timetz:case Ma.tsrange:case Ma.tstzrange:return g2(t);default:return g2(t)}},g2=e=>e,d7=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},f7=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},h7=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},m7=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,a=e[r];if(e[0]==="{"&&a==="}"){let i;const l=e.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(u=>Sk(t,u))}return e},p7=e=>typeof e=="string"?e.replace(" ","T"):e,Ak=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Yy{constructor(t,r,a={},s=_k){this.channel=t,this.event=r,this.payload=a,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var a;return this._hasReceived(t)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var gS;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(gS||(gS={}));class bp{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bp.syncState(this.state,s,i,l),this.pendingDiffs.forEach(d=>{this.state=bp.syncDiff(this.state,d,i,l)}),this.pendingDiffs=[],u()}),this.channel._on(a.diff,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=bp.syncDiff(this.state,s,i,l),u())}),this.onJoin((s,i,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:l})}),this.onLeave((s,i,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,a,s){const i=this.cloneDeep(t),l=this.transformState(r),u={},d={};return this.map(i,(f,m)=>{l[f]||(d[f]=m)}),this.map(l,(f,m)=>{const g=i[f];if(g){const v=m.map(S=>S.presence_ref),x=g.map(S=>S.presence_ref),j=m.filter(S=>x.indexOf(S.presence_ref)<0),b=g.filter(S=>v.indexOf(S.presence_ref)<0);j.length>0&&(u[f]=j),b.length>0&&(d[f]=b)}else u[f]=m}),this.syncDiff(i,{joins:u,leaves:d},a,s)}static syncDiff(t,r,a,s){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),s||(s=()=>{}),this.map(i,(u,d)=>{var f;const m=(f=t[u])!==null&&f!==void 0?f:[];if(t[u]=this.cloneDeep(d),m.length>0){const g=t[u].map(x=>x.presence_ref),v=m.filter(x=>g.indexOf(x.presence_ref)<0);t[u].unshift(...v)}a(u,m,d)}),this.map(l,(u,d)=>{let f=t[u];if(!f)return;const m=d.map(g=>g.presence_ref);f=f.filter(g=>m.indexOf(g.presence_ref)<0),t[u]=f,s(u,f,d),f.length===0&&delete t[u]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(a=>r(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,a)=>{const s=t[a];return"metas"in s?r[a]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[a]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xS;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(xS||(xS={}));var vS;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(vS||(vS={}));var qc;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(qc||(qc={}));class Fw{constructor(t,r={config:{}},a){this.topic=t,this.params=r,this.socket=a,this.bindings={},this.state=Us.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Yy(this,il.join,this.params,this.timeout),this.rejoinTimer=new Nk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Us.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Us.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Us.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Us.errored,this.rejoinTimer.scheduleTimeout())}),this._on(il.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new bp(this),this.broadcastEndpointURL=Ak(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var a,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Us.closed){const{config:{broadcast:i,presence:l,private:u}}=this.params;this._onError(m=>t==null?void 0:t(qc.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(qc.CLOSED));const d={},f={broadcast:i,presence:l,postgres_changes:(s=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(m=>m.filter))!==null&&s!==void 0?s:[],private:u};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket.setAuth(),m===void 0){t==null||t(qc.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,x=(g=v==null?void 0:v.length)!==null&&g!==void 0?g:0,j=[];for(let b=0;b<x;b++){const S=v[b],{filter:{event:A,schema:E,table:T,filter:D}}=S,R=m&&m[b];if(R&&R.event===A&&R.schema===E&&R.table===T&&R.filter===D)j.push(Object.assign(Object.assign({},S),{id:R.id}));else{this.unsubscribe(),this.state=Us.errored,t==null||t(qc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,t&&t(qc.SUBSCRIBED);return}}).receive("error",m=>{this.state=Us.errored,t==null||t(qc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(qc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,a){return this._on(t,r,a)}async send(t,r={}){var a,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((s=f.body)===null||s===void 0?void 0:s.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,u,d;const f=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),f.receive("ok",()=>i("ok")),f.receive("error",()=>i("error")),f.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Us.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(il.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(s=>{a=new Yy(this,il.leave,{},t),a.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,a){const s=new AbortController,i=setTimeout(()=>s.abort(),a),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),l}_push(t,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Yy(this,t,r,a);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,a){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,a){var s,i;const l=t.toLocaleLowerCase(),{close:u,error:d,leave:f,join:m}=il;if(a&&[u,d,f,m].indexOf(l)>=0&&a!==this._joinRef())return;let v=this._onMessage(l,r,a);if(r&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var j,b,S;return((j=x.filter)===null||j===void 0?void 0:j.event)==="*"||((S=(b=x.filter)===null||b===void 0?void 0:b.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===l}).map(x=>x.callback(v,a)):(i=this.bindings[l])===null||i===void 0||i.filter(x=>{var j,b,S,A,E,T;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const D=x.id,R=(j=x.filter)===null||j===void 0?void 0:j.event;return D&&((b=r.ids)===null||b===void 0?void 0:b.includes(D))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((S=r.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const D=(E=(A=x==null?void 0:x.filter)===null||A===void 0?void 0:A.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return D==="*"||D===((T=r==null?void 0:r.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof v=="object"&&"ids"in v){const j=v.data,{schema:b,table:S,commit_timestamp:A,type:E,errors:T}=j;v=Object.assign(Object.assign({},{schema:b,table:S,commit_timestamp:A,eventType:E,new:{},old:{},errors:T}),this._getPayloadRecords(j))}x.callback(v,a)})}_isClosed(){return this.state===Us.closed}_isJoined(){return this.state===Us.joined}_isJoining(){return this.state===Us.joining}_isLeaving(){return this.state===Us.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,a){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:a};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const a=t.toLocaleLowerCase();return this.bindings[a]=this.bindings[a].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===a&&Fw.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const a in t)if(t[a]!==r[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(il.close,{},t)}_onError(t){this._on(il.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Us.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=pS(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=pS(t.columns,t.old_record)),r}}const yS=()=>{},g7=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class x7{constructor(t,r){var a;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_k,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yS,this.ref=0,this.logger=yS,this.conn=null,this.sendBuffer=[],this.serializer=new c7,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let l;return i?l=i:typeof fetch>"u"?l=(...u)=>So(async()=>{const{default:d}=await Promise.resolve().then(()=>nm);return{default:d}},void 0).then(({default:d})=>d(...u)):l=fetch,(...u)=>l(...u)},this.endPoint=`${t}/${p2.websocket}`,this.httpEndpoint=Ak(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(a=r==null?void 0:r.params)===null||a===void 0?void 0:a.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,l)=>l(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Nk(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=n7),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:o7}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(a=>a.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,a){this.logger(t,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case yp.connecting:return ef.Connecting;case yp.open:return ef.Open;case yp.closing:return ef.Closing;default:return ef.Closed}}isConnected(){return this.connectionState()===ef.Open}channel(t,r={config:{}}){const a=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===a);if(s)return s;{const i=new Fw(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:a,payload:s,ref:i}=t,l=()=>{this.encode(t,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${r} ${a} (${i})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const s={access_token:r,version:i7};r&&a.updateJoinPayload(s),a.joinedOnce&&a._isJoined()&&a._push(il.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(l7,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:a,event:s,payload:i,ref:l}=r;a==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${a} ${s} ${l&&"("+l+")"||""}`,i),Array.from(this.channels).filter(u=>u._isMember(a)).forEach(u=>u._trigger(s,i,l)),this.stateChangeCallbacks.message.forEach(u=>u(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(il.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const a=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${a}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const a=new Blob([g7],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}}class Bw extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ls(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class v7 extends Bw{constructor(t,r,a){super(t),this.name="StorageApiError",this.status=r,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class x2 extends Bw{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var y7=function(e,t,r,a){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(m){try{f(a.next(m))}catch(g){l(g)}}function d(m){try{f(a.throw(m))}catch(g){l(g)}}function f(m){m.done?i(m.value):s(m.value).then(u,d)}f((a=a.apply(e,t||[])).next())})};const Ck=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>So(async()=>{const{default:a}=await Promise.resolve().then(()=>nm);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},b7=()=>y7(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield So(()=>Promise.resolve().then(()=>nm),void 0)).Response:Response}),v2=e=>{if(Array.isArray(e))return e.map(r=>v2(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,a])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=v2(a)}),t},w7=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var jf=function(e,t,r,a){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(m){try{f(a.next(m))}catch(g){l(g)}}function d(m){try{f(a.throw(m))}catch(g){l(g)}}function f(m){m.done?i(m.value):s(m.value).then(u,d)}f((a=a.apply(e,t||[])).next())})};const Xy=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),j7=(e,t,r)=>jf(void 0,void 0,void 0,function*(){const a=yield b7();e instanceof a&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,l=(s==null?void 0:s.statusCode)||i+"";t(new v7(Xy(s),i,l))}).catch(s=>{t(new x2(Xy(s),s))}):t(new x2(Xy(e),e))}),_7=(e,t,r,a)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!a?s:(w7(a)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(a)):s.body=a,Object.assign(Object.assign({},s),r))};function Wp(e,t,r,a,s,i){return jf(this,void 0,void 0,function*(){return new Promise((l,u)=>{e(r,_7(t,a,s,i)).then(d=>{if(!d.ok)throw d;return a!=null&&a.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>j7(d,u,a))})})}function tx(e,t,r,a){return jf(this,void 0,void 0,function*(){return Wp(e,"GET",t,r,a)})}function Fc(e,t,r,a,s){return jf(this,void 0,void 0,function*(){return Wp(e,"POST",t,a,s,r)})}function y2(e,t,r,a,s){return jf(this,void 0,void 0,function*(){return Wp(e,"PUT",t,a,s,r)})}function N7(e,t,r,a){return jf(this,void 0,void 0,function*(){return Wp(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),a)})}function kk(e,t,r,a,s){return jf(this,void 0,void 0,function*(){return Wp(e,"DELETE",t,a,s,r)})}var mi=function(e,t,r,a){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(m){try{f(a.next(m))}catch(g){l(g)}}function d(m){try{f(a.throw(m))}catch(g){l(g)}}function f(m){m.done?i(m.value):s(m.value).then(u,d)}f((a=a.apply(e,t||[])).next())})};const S7={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class A7{constructor(t,r={},a,s){this.url=t,this.headers=r,this.bucketId=a,this.fetch=Ck(s)}uploadOrUpdate(t,r,a,s){return mi(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},bS),s);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&a instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",a)):typeof FormData<"u"&&a instanceof FormData?(i=a,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=a,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const f=this._removeEmptyFolders(r),m=this._getFinalPath(f),g=yield(t=="PUT"?y2:Fc)(this.fetch,`${this.url}/object/${m}`,i,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:f,id:g.Id,fullPath:g.Key},error:null}}catch(i){if(ls(i))return{data:null,error:i};throw i}})}upload(t,r,a){return mi(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,a)})}uploadToSignedUrl(t,r,a,s){return mi(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",r);try{let d;const f=Object.assign({upsert:bS.upsert},s),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&a instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",a)):typeof FormData<"u"&&a instanceof FormData?(d=a,d.append("cacheControl",f.cacheControl)):(d=a,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType);const g=yield y2(this.fetch,u.toString(),d,{headers:m});return{data:{path:i,fullPath:g.Key},error:null}}catch(d){if(ls(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return mi(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Fc(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:s}),l=new URL(this.url+i.url),u=l.searchParams.get("token");if(!u)throw new Bw("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(a){if(ls(a))return{data:null,error:a};throw a}})}update(t,r,a){return mi(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,a)})}move(t,r,a){return mi(this,void 0,void 0,function*(){try{return{data:yield Fc(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(ls(s))return{data:null,error:s};throw s}})}copy(t,r,a){return mi(this,void 0,void 0,function*(){try{return{data:{path:(yield Fc(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(ls(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,a){return mi(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Fc(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const l=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(s){if(ls(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,a){return mi(this,void 0,void 0,function*(){try{const s=yield Fc(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(s){if(ls(s))return{data:null,error:s};throw s}})}download(t,r){return mi(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"";try{const u=this._getFinalPath(t);return{data:yield(yield tx(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(ls(u))return{data:null,error:u};throw u}})}info(t){return mi(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const a=yield tx(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:v2(a),error:null}}catch(a){if(ls(a))return{data:null,error:a};throw a}})}exists(t){return mi(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield N7(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(ls(a)&&a instanceof x2){const s=a.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,r){const a=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&s.push(d);let f=s.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${a}${f}`)}}}remove(t){return mi(this,void 0,void 0,function*(){try{return{data:yield kk(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(ls(r))return{data:null,error:r};throw r}})}list(t,r,a){return mi(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},S7),r),{prefix:t||""});return{data:yield Fc(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},a),error:null}}catch(s){if(ls(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const C7="2.10.4",k7={"X-Client-Info":`storage-js/${C7}`};var xh=function(e,t,r,a){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(m){try{f(a.next(m))}catch(g){l(g)}}function d(m){try{f(a.throw(m))}catch(g){l(g)}}function f(m){m.done?i(m.value):s(m.value).then(u,d)}f((a=a.apply(e,t||[])).next())})};class E7{constructor(t,r={},a,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},k7),r),this.fetch=Ck(a)}listBuckets(){return xh(this,void 0,void 0,function*(){try{return{data:yield tx(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(ls(t))return{data:null,error:t};throw t}})}getBucket(t){return xh(this,void 0,void 0,function*(){try{return{data:yield tx(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(ls(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return xh(this,void 0,void 0,function*(){try{return{data:yield Fc(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(ls(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return xh(this,void 0,void 0,function*(){try{return{data:yield y2(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(ls(a))return{data:null,error:a};throw a}})}emptyBucket(t){return xh(this,void 0,void 0,function*(){try{return{data:yield Fc(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(ls(r))return{data:null,error:r};throw r}})}deleteBucket(t){return xh(this,void 0,void 0,function*(){try{return{data:yield kk(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(ls(r))return{data:null,error:r};throw r}})}}class P7 extends E7{constructor(t,r={},a,s){super(t,r,a,s)}from(t){return new A7(this.url,this.headers,t,this.fetch)}}const T7="2.53.0";let pp="";typeof Deno<"u"?pp="deno":typeof document<"u"?pp="web":typeof navigator<"u"&&navigator.product==="ReactNative"?pp="react-native":pp="node";const O7={"X-Client-Info":`supabase-js-${pp}/${T7}`},D7={headers:O7},R7={schema:"public"},L7={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},M7={};var I7=function(e,t,r,a){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(m){try{f(a.next(m))}catch(g){l(g)}}function d(m){try{f(a.throw(m))}catch(g){l(g)}}function f(m){m.done?i(m.value):s(m.value).then(u,d)}f((a=a.apply(e,t||[])).next())})};const q7=e=>{let t;return e?t=e:typeof fetch>"u"?t=xk:t=fetch,(...r)=>t(...r)},F7=()=>typeof Headers>"u"?vk:Headers,B7=(e,t,r)=>{const a=q7(r),s=F7();return(i,l)=>I7(void 0,void 0,void 0,function*(){var u;const d=(u=yield t())!==null&&u!==void 0?u:e;let f=new s(l==null?void 0:l.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),a(i,Object.assign(Object.assign({},l),{headers:f}))})};var U7=function(e,t,r,a){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(m){try{f(a.next(m))}catch(g){l(g)}}function d(m){try{f(a.throw(m))}catch(g){l(g)}}function f(m){m.done?i(m.value):s(m.value).then(u,d)}f((a=a.apply(e,t||[])).next())})};function $7(e){return e.endsWith("/")?e:e+"/"}function z7(e,t){var r,a;const{db:s,auth:i,realtime:l,global:u}=e,{db:d,auth:f,realtime:m,global:g}=t,v={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},f),i),realtime:Object.assign(Object.assign({},m),l),storage:{},global:Object.assign(Object.assign(Object.assign({},g),u),{headers:Object.assign(Object.assign({},(r=g==null?void 0:g.headers)!==null&&r!==void 0?r:{}),(a=u==null?void 0:u.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>U7(this,void 0,void 0,function*(){return""})};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}const Ek="2.71.1",kh=30*1e3,b2=3,Zy=b2*kh,V7="http://localhost:9999",H7="supabase.auth.token",G7={"X-Client-Info":`gotrue-js/${Ek}`},w2="X-Supabase-Api-Version",Pk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},K7=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,W7=600*1e3;class Uw extends Error{constructor(t,r,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function Pr(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Y7 extends Uw{constructor(t,r,a){super(t,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function X7(e){return Pr(e)&&e.name==="AuthApiError"}class Tk extends Uw{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class gd extends Uw{constructor(t,r,a,s){super(t,a,s),this.name=r,this.status=a}}class Ju extends gd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Z7(e){return Pr(e)&&e.name==="AuthSessionMissingError"}class d0 extends gd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class f0 extends gd{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class h0 extends gd{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function J7(e){return Pr(e)&&e.name==="AuthImplicitGrantRedirectError"}class wS extends gd{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class j2 extends gd{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Jy(e){return Pr(e)&&e.name==="AuthRetryableFetchError"}class jS extends gd{constructor(t,r,a){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}class _2 extends gd{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const rx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_S=` 	
\r=`.split(""),Q7=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<_S.length;t+=1)e[_S[t].charCodeAt(0)]=-2;for(let t=0;t<rx.length;t+=1)e[rx[t].charCodeAt(0)]=t;return e})();function NS(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(rx[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(rx[a]),t.queuedBits-=6}}function Ok(e,t,r){const a=Q7[e];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function SS(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},a={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=l=>{rL(l,a,r)};for(let l=0;l<e.length;l+=1)Ok(e.charCodeAt(l),s,i);return t.join("")}function eL(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function tL(e,t){for(let r=0;r<e.length;r+=1){let a=e.charCodeAt(r);if(a>55295&&a<=56319){const s=(a-55296)*1024&65535;a=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}eL(a,t)}}function rL(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let a=1;a<6;a+=1)if((e>>7-a&1)===0){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function aL(e){const t=[],r={queue:0,queuedBits:0},a=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Ok(e.charCodeAt(s),r,a);return new Uint8Array(t)}function nL(e){const t=[];return tL(e,r=>t.push(r)),new Uint8Array(t)}function sL(e){const t=[],r={queue:0,queuedBits:0},a=s=>{t.push(s)};return e.forEach(s=>NS(s,r,a)),NS(null,r,a),t.join("")}function iL(e){return Math.round(Date.now()/1e3)+e}function oL(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const nl=()=>typeof window<"u"&&typeof document<"u",Gd={tested:!1,writable:!1},Dk=()=>{if(!nl())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Gd.tested)return Gd.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Gd.tested=!0,Gd.writable=!0}catch{Gd.tested=!0,Gd.writable=!1}return Gd.writable};function lL(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((a,s)=>{t[s]=a}),t}const Rk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>So(async()=>{const{default:a}=await Promise.resolve().then(()=>nm);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},cL=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Eh=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Kd=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Hu=async(e,t)=>{await e.removeItem(t)};class Wx{constructor(){this.promise=new Wx.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Wx.promiseConstructor=Promise;function Qy(e){const t=e.split(".");if(t.length!==3)throw new _2("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!K7.test(t[a]))throw new _2("JWT not in base64url format");return{header:JSON.parse(SS(t[0])),payload:JSON.parse(SS(t[1])),signature:aL(t[2]),raw:{header:t[0],payload:t[1]}}}async function uL(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function dL(e,t){return new Promise((a,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){a(l);return}}catch(l){if(!t(i,l)){s(l);return}}})()})}function fL(e){return("0"+e.toString(16)).substr(-2)}function hL(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*a));return s}return crypto.getRandomValues(t),Array.from(t,fL).join("")}async function mL(e){const r=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(a);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function pL(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await mL(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vh(e,t,r=!1){const a=hL();let s=a;r&&(s+="/PASSWORD_RECOVERY"),await Eh(e,`${t}-code-verifier`,s);const i=await pL(a);return[i,a===i?"plain":"s256"]}const gL=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function xL(e){const t=e.headers.get(w2);if(!t||!t.match(gL))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function vL(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function yL(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const bL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yh(e){if(!bL.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function eb(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function AS(e){return JSON.parse(JSON.stringify(e))}var wL=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r};const Yd=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jL=[502,503,504];async function CS(e){var t;if(!cL(e))throw new j2(Yd(e),0);if(jL.includes(e.status))throw new j2(Yd(e),e.status);let r;try{r=await e.json()}catch(i){throw new Tk(Yd(i),i)}let a;const s=xL(e);if(s&&s.getTime()>=Pk["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new jS(Yd(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new Ju}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new jS(Yd(r),e.status,r.weak_password.reasons);throw new Y7(Yd(r),e.status||500,a)}const _L=(e,t,r,a)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(a),Object.assign(Object.assign({},s),r))};async function Br(e,t,r,a){var s;const i=Object.assign({},a==null?void 0:a.headers);i[w2]||(i[w2]=Pk["2024-01-01"].name),a!=null&&a.jwt&&(i.Authorization=`Bearer ${a.jwt}`);const l=(s=a==null?void 0:a.query)!==null&&s!==void 0?s:{};a!=null&&a.redirectTo&&(l.redirect_to=a.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await NL(e,t,r+u,{headers:i,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(d):{data:Object.assign({},d),error:null}}async function NL(e,t,r,a,s,i){const l=_L(t,a,s,i);let u;try{u=await e(r,Object.assign({},l))}catch(d){throw console.error(d),new j2(Yd(d),0)}if(u.ok||await CS(u),a!=null&&a.noResolveJson)return u;try{return await u.json()}catch(d){await CS(d)}}function Ic(e){var t;let r=null;kL(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=iL(e.expires_in)));const a=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:a},error:null}}function kS(e){const t=Ic(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ed(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function SL(e){return{data:e,error:null}}function AL(e){const{action_link:t,email_otp:r,hashed_token:a,redirect_to:s,verification_type:i}=e,l=wL(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:r,hashed_token:a,redirect_to:s,verification_type:i},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function CL(e){return e}function kL(e){return e.access_token&&e.refresh_token&&e.expires_in}const tb=["global","local","others"];var EL=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r};class PL{constructor({url:t="",headers:r={},fetch:a}){this.url=t,this.headers=r,this.fetch=Rk(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=tb[0]){if(tb.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${tb.join(", ")}`);try{return await Br(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(Pr(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,r={}){try{return await Br(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ed})}catch(a){if(Pr(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:r}=t,a=EL(t,["options"]),s=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(s.new_email=a==null?void 0:a.newEmail,delete s.newEmail),await Br(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:AL,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Pr(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Br(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ed})}catch(r){if(Pr(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,a,s,i,l,u,d;try{const f={nextPage:null,lastPage:0,total:0},m=await Br(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:CL});if(m.error)throw m.error;const g=await m.json(),v=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(j=>{const b=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(j.split(";")[1].split("=")[1]);f[`${S}Page`]=b}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(Pr(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){yh(t);try{return await Br(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ed})}catch(r){if(Pr(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){yh(t);try{return await Br(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:ed})}catch(a){if(Pr(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,r=!1){yh(t);try{return await Br(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:ed})}catch(a){if(Pr(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){yh(t.userId);try{const{data:r,error:a}=await Br(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:a}}catch(r){if(Pr(r))return{data:null,error:r};throw r}}async _deleteFactor(t){yh(t.userId),yh(t.id);try{return{data:await Br(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Pr(r))return{data:null,error:r};throw r}}}function ES(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function TL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const bh={debug:!!(globalThis&&Dk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Lk extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class OL extends Lk{}async function DL(e,t,r){bh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),bh.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async s=>{if(s){bh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{bh.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw bh.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new OL(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(bh.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}TL();const RL={url:V7,storageKey:H7,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:G7,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function PS(e,t,r){return await r()}const wh={};class Ap{constructor(t){var r,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ap.nextInstanceID,Ap.nextInstanceID+=1,this.instanceID>0&&nl()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},RL),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new PL({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Rk(s.fetch),this.lock=s.lock||PS,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:nl()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=DL:this.lock=PS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Dk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ES(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=ES(this.memoryStorage)),nl()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=wh[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){wh[this.storageKey]=Object.assign(Object.assign({},wh[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=wh[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){wh[this.storageKey]=Object.assign(Object.assign({},wh[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ek}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=lL(window.location.href);let a="none";if(this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce"),nl()&&this.detectSessionInUrl&&a!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,a);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),J7(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Pr(r)?{error:r}:{error:new Tk("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,a,s;try{const i=await Br(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ic}),{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(i){if(Pr(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,a,s;try{let i;if("email"in t){const{email:m,password:g,options:v}=t;let x=null,j=null;this.flowType==="pkce"&&([x,j]=await vh(this.storage,this.storageKey)),i=await Br(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:m,password:g,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:x,code_challenge_method:j},xform:Ic})}else if("phone"in t){const{phone:m,password:g,options:v}=t;i=await Br(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:g,data:(a=v==null?void 0:v.data)!==null&&a!==void 0?a:{},channel:(s=v==null?void 0:v.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Ic})}else throw new f0("You must provide either an email or phone number and a password");const{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(i){if(Pr(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:l,options:u}=t;r=await Br(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:kS})}else if("phone"in t){const{phone:i,password:l,options:u}=t;r=await Br(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:kS})}else throw new f0("You must provide either an email or phone number and a password");const{data:a,error:s}=r;return s?{data:{user:null,session:null},error:s}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new d0}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:s})}catch(r){if(Pr(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,a,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,a,s,i,l,u,d,f,m,g,v,x;let j,b;if("message"in t)j=t.message,b=t.signature;else{const{chain:S,wallet:A,statement:E,options:T}=t;let D;if(nl())if(typeof A=="object")D=A;else{const B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))D=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(T!=null&&T.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=A}const R=new URL((r=T==null?void 0:T.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in D&&D.signIn){const B=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T==null?void 0:T.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),E?{statement:E}:null));let U;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")U=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)U=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)j=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),b=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${R.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(s=(a=T==null?void 0:T.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=T==null?void 0:T.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((l=T==null?void 0:T.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((u=T==null?void 0:T.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((d=T==null?void 0:T.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((f=T==null?void 0:T.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((g=(m=T==null?void 0:T.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||g===void 0)&&g.length?["Resources",...T.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const B=await D.signMessage(new TextEncoder().encode(j),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=B}}try{const{data:S,error:A}=await Br(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:sL(b)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Ic});if(A)throw A;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new d0}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:A})}catch(S){if(Pr(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(t){const r=await Kd(this.storage,`${this.storageKey}-code-verifier`),[a,s]=(r??"").split("/");try{const{data:i,error:l}=await Br(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:Ic});if(await Hu(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new d0}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:l})}catch(i){if(Pr(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:a,token:s,access_token:i,nonce:l}=t,u=await Br(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:s,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ic}),{data:d,error:f}=u;return f?{data:{user:null,session:null},error:f}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new d0}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:f})}catch(r){if(Pr(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,a,s,i,l;try{if("email"in t){const{email:u,options:d}=t;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await vh(this.storage,this.storageKey));const{error:g}=await Br(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:m},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in t){const{phone:u,options:d}=t,{data:f,error:m}=await Br(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m}}throw new f0("You must provide either an email or phone number.")}catch(u){if(Pr(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var r,a;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:l,error:u}=await Br(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ic});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,f=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(s){if(Pr(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,a,s;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await vh(this.storage,this.storageKey)),await Br(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:SL})}catch(i){if(Pr(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;if(a)throw a;if(!r)throw new Ju;const{error:s}=await Br(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Pr(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:a,type:s,options:i}=t,{error:l}=await Br(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:a,type:s,options:i}=t,{data:l,error:u}=await Br(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new f0("You must provide either an email or phone number and a type")}catch(r){if(Pr(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Kd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<Zy:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.userStorage){const l=await Kd(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=eb()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,f,m)=>(!l&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,f,m))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Br(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ed}):await this._useSession(async r=>{var a,s,i;const{data:l,error:u}=r;if(u)throw u;return!(!((a=l.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ju}:await Br(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:ed})})}catch(r){if(Pr(r))return Z7(r)&&(await this._removeSession(),await Hu(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async a=>{const{data:s,error:i}=a;if(i)throw i;if(!s.session)throw new Ju;const l=s.session;let u=null,d=null;this.flowType==="pkce"&&t.email!=null&&([u,d]=await vh(this.storage,this.storageKey));const{data:f,error:m}=await Br(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:ed});if(m)throw m;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(a){if(Pr(a))return{data:{user:null},error:a};throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ju;const r=Date.now()/1e3;let a=r,s=!0,i=null;const{payload:l}=Qy(t.access_token);if(l.exp&&(a=l.exp,s=a<=r),s){const{session:u,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};i=u}else{const{data:u,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Pr(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var a;if(!t){const{data:l,error:u}=r;if(u)throw u;t=(a=l.session)!==null&&a!==void 0?a:void 0}if(!(t!=null&&t.refresh_token))throw new Ju;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Pr(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!nl())throw new h0("No browser detected.");if(t.error||t.error_description||t.error_code)throw new h0(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new wS("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new h0("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new wS("No code detected.");const{data:E,error:T}=await this._exchangeCodeForSession(t.code);if(T)throw T;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:s,access_token:i,refresh_token:l,expires_in:u,expires_at:d,token_type:f}=t;if(!i||!u||!l||!f)throw new h0("No session defined in URL");const m=Math.round(Date.now()/1e3),g=parseInt(u);let v=m+g;d&&(v=parseInt(d));const x=v-m;x*1e3<=kh&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${g}s`);const j=v-g;m-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,v,m):m-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,v,m);const{data:b,error:S}=await this._getUser(i);if(S)throw S;const A={provider_token:a,provider_refresh_token:s,access_token:i,expires_in:g,expires_at:v,refresh_token:l,token_type:f,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:A,redirectType:t.type},error:null}}catch(a){if(Pr(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Kd(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:s,error:i}=r;if(i)return{error:i};const l=(a=s.session)===null||a===void 0?void 0:a.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(X7(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await Hu(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=oL(),a={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async r=>{var a,s;try{const{data:{session:i},error:l}=r;if(l)throw l;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let a=null,s=null;this.flowType==="pkce"&&([a,s]=await vh(this.storage,this.storageKey,!0));try{return await Br(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Pr(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Pr(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:a,error:s}=await this._useSession(async i=>{var l,u,d,f,m;const{data:g,error:v}=i;if(v)throw v;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Br(this.fetch,"GET",x,{headers:this.headers,jwt:(m=(f=g.session)===null||f===void 0?void 0:f.access_token)!==null&&m!==void 0?m:void 0})});if(s)throw s;return nl()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:t.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(Pr(a))return{data:{provider:t.provider,url:null},error:a};throw a}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var a,s;const{data:i,error:l}=r;if(l)throw l;return await Br(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Pr(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await dL(async s=>(s>0&&await uL(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Br(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ic})),(s,i)=>{const l=200*Math.pow(2,s);return i&&Jy(i)&&Date.now()+l-a<kh})}catch(a){if(this._debug(r,"error",a),Pr(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",a),nl()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t,r;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const s=await Kd(this.storage,this.storageKey);if(s&&this.userStorage){let l=await Kd(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await Eh(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:eb()}else if(s&&!s.user&&!s.user){const l=await Kd(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await Hu(this.storage,this.storageKey+"-user"),await Eh(this.storage,this.storageKey,s)):s.user=eb()}if(this._debug(a,"session from storage",s),!this._isValidSession(s)){this._debug(a,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Zy;if(this._debug(a,`session has${i?"":" not"} expired with margin of ${Zy}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Jy(l)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(a,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(a,"error",s),console.error(s);return}finally{this._debug(a,"end")}}async _callRefreshToken(t){var r,a;if(!t)throw new Ju;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Wx;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new Ju;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const u={session:i.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(i){if(this._debug(s,"error",i),Pr(i)){const l={session:null,error:i};return Jy(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,a=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(l),i.length>0){for(let u=0;u<i.length;u+=1)console.error(i[u]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),a=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&r.user&&await Eh(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=AS(s);await Eh(this.storage,this.storageKey,i)}else{const s=AS(r);await Eh(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Hu(this.storage,this.storageKey),await Hu(this.storage,this.storageKey+"-code-verifier"),await Hu(this.storage,this.storageKey+"-user"),this.userStorage&&await Hu(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&nl()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),kh);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((a.expires_at*1e3-t)/kh);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${kh}ms, refresh threshold is ${b2} ticks`),s<=b2&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Lk)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!nl()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,a){const s=[`provider=${encodeURIComponent(r)}`];if(a!=null&&a.redirectTo&&s.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&s.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[i,l]=await vh(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(a!=null&&a.queryParams){const i=new URLSearchParams(a.queryParams);s.push(i.toString())}return a!=null&&a.skipBrowserRedirect&&s.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var a;const{data:s,error:i}=r;return i?{data:null,error:i}:await Br(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=s==null?void 0:s.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(Pr(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var a,s;const{data:i,error:l}=r;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:d,error:f}=await Br(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});return f?{data:null,error:f}:(t.factorType==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(Pr(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:l,error:u}=await Br(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(a=s==null?void 0:s.session)===null||a===void 0?void 0:a.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(r){if(Pr(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:s,error:i}=r;return i?{data:null,error:i}:await Br(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(a=s==null?void 0:s.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(Pr(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:a}=await this._challenge({factorId:t.factorId});return a?{data:null,error:a}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const a=(t==null?void 0:t.factors)||[],s=a.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=a.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:a,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,a;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Qy(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((a=(r=s.user.factors)===null||r===void 0?void 0:r.filter(g=>g.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(d="aal2");const m=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:m},error:null}}))}async fetchJwk(t,r={keys:[]}){let a=r.keys.find(u=>u.kid===t);if(a)return a;const s=Date.now();if(a=this.jwks.keys.find(u=>u.kid===t),a&&this.jwks_cached_at+W7>s)return a;const{data:i,error:l}=await Br(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,a=i.keys.find(u=>u.kid===t),!a)?null:a}async getClaims(t,r={}){try{let a=t;if(!a){const{data:x,error:j}=await this.getSession();if(j||!x.session)return{data:null,error:j};a=x.session.access_token}const{header:s,payload:i,signature:l,raw:{header:u,payload:d}}=Qy(a);r!=null&&r.allowExpired||vL(i.exp);const f=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!f){const{error:x}=await this.getUser(a);if(x)throw x;return{data:{claims:i,header:s,signature:l},error:null}}const m=yL(s.alg),g=await crypto.subtle.importKey("jwk",f,m,!0,["verify"]);if(!await crypto.subtle.verify(m,g,l,nL(`${u}.${d}`)))throw new _2("Invalid JWT signature");return{data:{claims:i,header:s,signature:l},error:null}}catch(a){if(Pr(a))return{data:null,error:a};throw a}}}Ap.nextInstanceID=0;const LL=Ap;class ML extends LL{constructor(t){super(t)}}var IL=function(e,t,r,a){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(m){try{f(a.next(m))}catch(g){l(g)}}function d(m){try{f(a.throw(m))}catch(g){l(g)}}function f(m){m.done?i(m.value):s(m.value).then(u,d)}f((a=a.apply(e,t||[])).next())})};class qL{constructor(t,r,a){var s,i,l;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const u=$7(t),d=new URL(u);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,m={db:R7,realtime:M7,auth:Object.assign(Object.assign({},L7),{storageKey:f}),global:D7},g=z7(a??{},m);this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=g.global.headers)!==null&&i!==void 0?i:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(v,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=g.auth)!==null&&l!==void 0?l:{},this.headers,g.global.fetch),this.fetch=B7(r,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new r7(new URL("rest/v1",d).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new P7(this.storageUrl.href,this.headers,this.fetch,a==null?void 0:a.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new VR(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},a={}){return this.rest.rpc(t,r,a)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return IL(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(r=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:s,storageKey:i,flowType:l,lock:u,debug:d},f,m){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ML({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),f),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:s,flowType:l,lock:u,debug:d,fetch:m,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new x7(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,a)=>{this._handleTokenChanged(r,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(t,r,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const FL=(e,t,r)=>new qL(e,t,r);function BL(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const e=process.version.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}BL()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const UL={development:{siteUrl:"http://localhost:5173",emailRedirectUrl:"http://localhost:5173/complete-registration",passwordResetUrl:"http://localhost:5173/reset-password",supabaseUrl:"https://dlesebbmlrewsbmqvuza.supabase.co",supabaseAnonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRsZXNlYmJtbHJld3NibXF2dXphIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1NTMxMTcsImV4cCI6MjA3MDEyOTExN30.zFTVSgL5QpVqEDc-nQuKbaG_3egHZEm-V17UvkOpFCQ"},production:{siteUrl:"https://trackmystartup.com",emailRedirectUrl:"https://trackmystartup.com/complete-registration",passwordResetUrl:"https://trackmystartup.com/reset-password",supabaseUrl:"https://dlesebbmlrewsbmqvuza.supabase.co",supabaseAnonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRsZXNlYmJtbHJld3NibXF2dXphIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1NTMxMTcsImV4cCI6MjA3MDEyOTExN30.zFTVSgL5QpVqEDc-nQuKbaG_3egHZEm-V17UvkOpFCQ"}},$L=()=>{if(typeof window<"u"){const e=window.location.hostname;return e==="localhost"||e==="127.0.0.1"?"development":"production"}return"development"},Mk=()=>{const e=$L();return UL[e]},ax=Mk();console.log("Current environment config:",ax);const zL={getItem:e=>{try{return localStorage.getItem(e)}catch(t){return console.warn("Error reading from localStorage:",t),null}},setItem:(e,t)=>{try{localStorage.setItem(e,t)}catch(r){console.warn("Error writing to localStorage:",r)}},removeItem:e=>{try{localStorage.removeItem(e)}catch(t){console.warn("Error removing from localStorage:",t)}}},G=FL(ax.supabaseUrl,ax.supabaseAnonKey,{auth:{persistSession:!0,storageKey:"supabase-auth",autoRefreshToken:!1,detectSessionInUrl:!0,flowType:"pkce",storage:zL,debug:!1},global:{headers:{"X-Client-Info":"supabase-js/2.38.0"}},db:{schema:"public"}});console.log("Supabase client initialized successfully");console.log("Email redirect URL:",ax.emailRedirectUrl);function VL(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t="INV-";for(let r=0;r<6;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function HL(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t="IA-";for(let r=0;r<6;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function Or(e,t="USD",r={}){const{notation:a="standard",minimumFractionDigits:s,maximumFractionDigits:i}=r,l=f=>({USD:"en-US",EUR:"en-EU",GBP:"en-GB",INR:"en-IN",CAD:"en-CA",AUD:"en-AU",JPY:"ja-JP",CHF:"de-CH",SGD:"en-SG",CNY:"zh-CN",BRL:"pt-BR",MXN:"es-MX",KRW:"ko-KR",HKD:"en-HK",NZD:"en-NZ",SEK:"sv-SE",NOK:"nb-NO",DKK:"da-DK",PLN:"pl-PL",CZK:"cs-CZ",HUF:"hu-HU",RUB:"ru-RU",TRY:"tr-TR",ZAR:"en-ZA",ILS:"he-IL",AED:"ar-AE",SAR:"ar-SA",QAR:"ar-QA",KWD:"ar-KW",BHD:"ar-BH",OMR:"ar-OM",JOD:"ar-JO",LBP:"ar-LB",EGP:"ar-EG",MAD:"ar-MA",TND:"ar-TN",DZD:"ar-DZ",LYD:"ar-LY",SDG:"ar-SD",ETB:"am-ET",KES:"sw-KE",UGX:"sw-UG",TZS:"sw-TZ",RWF:"rw-RW",BIF:"rn-BI",DJF:"so-DJ",SOS:"so-SO",ERN:"ti-ER",SSP:"en-SS",CDF:"fr-CD",AOA:"pt-AO",BWP:"en-BW",LSL:"st-LS",SZL:"en-SZ",MZN:"pt-MZ",MWK:"ny-MW",ZMW:"en-ZM",ZWL:"en-ZW",NAD:"en-NA",MGA:"mg-MG",MUR:"en-MU",SCR:"en-SC",KMF:"ar-KM",MVR:"dv-MV",LKR:"si-LK",BDT:"bn-BD",NPR:"ne-NP",BTN:"dz-BT",PKR:"ur-PK",AFN:"fa-AF",IRR:"fa-IR",IQD:"ar-IQ",SYP:"ar-SY",YER:"ar-YE",AMD:"hy-AM",AZN:"az-AZ",GEL:"ka-GE",KZT:"kk-KZ",KGS:"ky-KG",TJS:"tg-TJ",TMT:"tk-TM",UZS:"uz-UZ",MNT:"mn-MN",LAK:"lo-LA",KHR:"km-KH",VND:"vi-VN",THB:"th-TH",MYR:"ms-MY",IDR:"id-ID",PHP:"en-PH",MMK:"my-MM",BND:"ms-BN",FJD:"en-FJ",PGK:"en-PG",SBD:"en-SB",VUV:"bi-VU",WST:"sm-WS",TOP:"to-TO",XPF:"fr-PF",ISK:"is-IS"})[f]||"en-US",u={style:"currency",currency:t,notation:a};s!==void 0&&(u.minimumFractionDigits=s),i!==void 0&&(u.maximumFractionDigits=i);const d=l(t);return new Intl.NumberFormat(d,u).format(e)}function nd(e,t="USD"){return Or(e,t,{notation:"compact"})}function Ik(e){return{"United States":"USD",India:"INR",Bhutan:"BTN",Armenia:"AMD",Belarus:"BYN",Georgia:"GEL",Israel:"ILS",Jordan:"JOD",Nigeria:"NGN",Philippines:"PHP",Russia:"RUB",Singapore:"SGD","Sri Lanka":"LKR","United Kingdom":"GBP",Austria:"EUR",Germany:"EUR","Hong Kong":"HKD",Serbia:"RSD",Brazil:"BRL",Greece:"EUR",Vietnam:"VND",Myanmar:"MMK",Azerbaijan:"AZN",Finland:"EUR",Netherlands:"EUR",Monaco:"EUR",Pakistan:"PKR"}[e]||"USD"}function GL(e){return{US:"USD",IN:"INR",BT:"BTN",AM:"AMD",BY:"BYN",GE:"GEL",IL:"ILS",JO:"JOD",NG:"NGN",PH:"PHP",RU:"RUB",SG:"SGD",LK:"LKR",GB:"GBP",AT:"EUR",DE:"EUR",HK:"HKD",RS:"RSD",BR:"BRL",GR:"EUR",VN:"VND",MM:"MMK",AZ:"AZN",FI:"EUR",NL:"EUR",MC:"EUR",PK:"PKR"}[e]||"USD"}function KL(e){return{AT:{caTitle:"Tax Advisor",csTitle:"Management"},IN:{caTitle:"Chartered Accountant",csTitle:"Company Secretary"},US:{caTitle:"CPA",csTitle:"Corporate Secretary"},GB:{caTitle:"Chartered Accountant",csTitle:"Company Secretary"},DE:{caTitle:"Tax Advisor",csTitle:"Management"},SG:{caTitle:"Chartered Accountant",csTitle:"Company Secretary"},HK:{caTitle:"CPA",csTitle:"Company Secretary"},NL:{caTitle:"Tax Advisor",csTitle:"Management"},FI:{caTitle:"Tax Advisor",csTitle:"Management"},GR:{caTitle:"Tax Advisor",csTitle:"Management"},BR:{caTitle:"CPA",csTitle:"Corporate Secretary"},VN:{caTitle:"CPA",csTitle:"Corporate Secretary"},MM:{caTitle:"CPA",csTitle:"Corporate Secretary"},AZ:{caTitle:"Tax Advisor",csTitle:"Management"},RS:{caTitle:"Tax Advisor",csTitle:"Management"},MC:{caTitle:"Tax Advisor",csTitle:"Management"},PK:{caTitle:"Chartered Accountant",csTitle:"Company Secretary"},PH:{caTitle:"CPA",csTitle:"Corporate Secretary"},NG:{caTitle:"Chartered Accountant",csTitle:"Company Secretary"},JO:{caTitle:"Tax Advisor",csTitle:"Management"},IL:{caTitle:"CPA",csTitle:"Corporate Secretary"},GE:{caTitle:"Tax Advisor",csTitle:"Management"},BY:{caTitle:"Tax Advisor",csTitle:"Management"},AM:{caTitle:"Tax Advisor",csTitle:"Management"},BT:{caTitle:"Chartered Accountant",csTitle:"Company Secretary"},LK:{caTitle:"Chartered Accountant",csTitle:"Company Secretary"},RU:{caTitle:"Tax Advisor",csTitle:"Management"}}[e]||{caTitle:"CA",csTitle:"CS"}}const br={supabase:G,async testAuthConnection(){try{console.log("Testing basic Supabase auth connection...");const{data:e,error:t}=await G.auth.getUser();return t?(console.error("Auth test failed:",t),{success:!1,error:t.message}):(console.log("Auth test successful"),{success:!0})}catch(e){return console.error("Auth test error:",e),{success:!1,error:"Auth connection failed"}}},async sendPasswordResetEmail(e){try{console.log("Sending password reset email to:",e);const r=Mk().passwordResetUrl||`${window.location.origin}/reset-password`;console.log("Using password reset redirect URL:",r);const{error:a}=await G.auth.resetPasswordForEmail(e,{redirectTo:r});return a?(console.error("Password reset error:",a),{success:!1,error:a.message}):(console.log("Password reset email sent successfully"),{success:!0})}catch(t){return console.error("Password reset error:",t),{success:!1,error:"Failed to send password reset email. Please try again."}}},async resetPassword(e){try{console.log("Resetting password...");const{data:{user:t},error:r}=await G.auth.getUser();if(r||!t){console.error("User not authenticated for password reset:",r),console.log("Trying alternative authentication check...");const{data:{session:s},error:i}=await G.auth.getSession();if(i||!(s!=null&&s.user))return console.error("No valid session found:",i),{success:!1,error:"Invalid session. Please request a new password reset link."};console.log("Session found for password reset:",s.user.email)}else console.log("User authenticated for password reset:",t.email);const{error:a}=await G.auth.updateUser({password:e});return a?(console.error("Password update error:",a),{success:!1,error:a.message}):(console.log("Password updated successfully"),{success:!0})}catch(t){return console.error("Password update error:",t),{success:!1,error:"Failed to update password. Please try again."}}},async isProfileComplete(e){try{const{data:t,error:r}=await G.from("users").select("government_id, ca_license, verification_documents").eq("id",e),a=t&&t.length>0?t[0]:null;return r||!a?!1:!!(a.government_id||a.ca_license||a.verification_documents&&a.verification_documents.length>0)}catch(t){return console.error("Error checking profile completion:",t),!1}},async getCurrentUser(){try{const{data:{user:e},error:t}=await G.auth.getUser();if(t||!e)return console.log("No authenticated user found in Supabase auth"),null;console.log("Found user in Supabase auth:",e.email);const r=G.from("users").select("*").eq("id",e.id).single(),a=new Promise((d,f)=>{setTimeout(()=>f(new Error("Profile check timeout after 5 seconds")),5e3)}),{data:s,error:i}=await Promise.race([r,a]);if(i||!s)return console.log("No profile found for user:",e.email),null;console.log("Found user profile:",s.email),console.log("Profile data:",s),console.log("Profile role:",s.role),console.log("Profile role type:",typeof s.role),console.log("Startup name from profile:",s.startup_name),console.log("Profile keys:",Object.keys(s)),console.log("Profile startup_name type:",typeof s.startup_name);const l=await this.isProfileComplete(e.id);console.log("Profile completion status:",l);const u={id:s.id,email:s.email,name:s.name,role:s.role,startup_name:s.startup_name,investor_code:s.investor_code,investment_advisor_code:s.investment_advisor_code,investment_advisor_code_entered:s.investment_advisor_code_entered,ca_code:s.ca_code,cs_code:s.cs_code,registration_date:s.registration_date,phone:s.phone,address:s.address,city:s.city,state:s.state,country:s.country,company:s.company,company_type:s.company_type,government_id:s.government_id,ca_license:s.ca_license,cs_license:s.cs_license,verification_documents:s.verification_documents,profile_photo_url:s.profile_photo_url,logo_url:s.logo_url,proof_of_business_url:s.proof_of_business_url,financial_advisor_license_url:s.financial_advisor_license_url,is_profile_complete:l};return console.log("🔍 Returning user data:",u),console.log("🔍 User role in return data:",u.role),u}catch(e){return console.error("Error getting current user:",e),null}},async signUp(e){var t,r;try{if(console.log("=== SIGNUP START ==="),console.log("Signing up user:",e.email),(await this.checkEmailExists(e.email)).exists)return console.log("Email already exists, preventing signup:",e.email),{user:null,error:"User with this email already exists. Please sign in instead.",confirmationRequired:!1};console.log("Creating Supabase auth user...");const{data:s,error:i}=await G.auth.signUp({email:e.email,password:e.password,options:{data:{name:e.name,role:e.role,startupName:e.startupName,fileUrls:e.fileUrls||{}}}});if(console.log("Auth response received:",{authData:!!s,authError:!!i}),i)return console.error("Auth error:",i),i.message.includes("already registered")||i.message.includes("already exists")||i.message.includes("User already registered")?{user:null,error:"User with this email already exists. Please sign in instead.",confirmationRequired:!1}:{user:null,error:i.message,confirmationRequired:!1};if(console.log("Auth user created successfully, session:",!!s.session),console.log("=== SIGNUP END ==="),s.user&&!s.user.email_confirmed_at)return console.log("Email confirmation required, user not fully authenticated"),{user:null,error:null,confirmationRequired:!0};if(s.user&&s.user.email_confirmed_at){console.log("Creating user profile in database...");const l=e.role==="Investor"?VL():null,u=e.role==="Investment Advisor"?HL():null,{data:d,error:f}=await G.from("users").insert({id:s.user.id,email:s.user.email,name:e.name,role:e.role,startup_name:e.role==="Startup"?e.startupName:null,investor_code:l,investment_advisor_code:u,investment_advisor_code_entered:e.investmentAdvisorCode||null,ca_code:null,registration_date:new Date().toISOString().split("T")[0],government_id:((t=e.fileUrls)==null?void 0:t.governmentId)||null,ca_license:((r=e.fileUrls)==null?void 0:r.roleSpecific)||null,verification_documents:(()=>{var g,v;const m=[];return(g=e.fileUrls)!=null&&g.governmentId&&m.push(e.fileUrls.governmentId),(v=e.fileUrls)!=null&&v.roleSpecific&&m.push(e.fileUrls.roleSpecific),m.length>0?m:null})(),phone:null,address:null,city:null,state:null,country:null,company:null,profile_photo_url:null}).select().single();if(f)return console.error("Profile creation error:",f),{user:null,error:"Failed to create user profile",confirmationRequired:!1};if(console.log("User profile created successfully"),e.role==="Startup"){console.log("Creating startup and founders...");try{let m=null;const{data:g}=await G.from("startups").select("id").eq("name",e.startupName||`${e.name}'s Startup`).single();if(g?m=g:m=(await G.from("startups").insert({name:e.startupName||`${e.name}'s Startup`,investment_type:"Seed",investment_value:0,equity_allocation:0,current_valuation:0,compliance_status:"Pending",sector:"Technology",total_funding:0,total_revenue:0,registration_date:new Date().toISOString().split("T")[0],user_id:s.user.id}).select().single()).data,m&&e.founders&&e.founders.length>0){const v=e.founders.map(j=>({startup_id:m.id,name:j.name,email:j.email})),{error:x}=await G.from("founders").insert(v);x&&console.error("Error adding founders:",x)}}catch(m){console.error("Error creating startup:",m)}}return{user:{id:d.id,email:d.email,name:d.name,role:d.role,startup_name:d.startup_name,investor_code:d.investor_code,ca_code:d.ca_code,cs_code:d.cs_code,registration_date:d.registration_date,phone:d.phone,address:d.address,city:d.city,state:d.state,country:d.country,company:d.company,government_id:d.government_id,ca_license:d.ca_license,verification_documents:d.verification_documents,profile_photo_url:d.profile_photo_url},error:null,confirmationRequired:!1}}return{user:null,error:null,confirmationRequired:!0}}catch(a){return console.error("Error in signUp:",a),{user:null,error:"An unexpected error occurred",confirmationRequired:!1}}},async signInMinimal(e){var t,r;try{console.log("=== MINIMAL SIGNIN START ==="),console.log("Signing in user:",e.email);const{data:a,error:s}=await G.auth.signInWithPassword({email:e.email,password:e.password});return console.log("Minimal auth call completed:",{authData:!!a,error:!!s}),s?(console.error("Sign in error:",s),{user:null,error:s.message}):a.user?(console.log("Minimal auth successful for:",a.user.email),console.log("=== MINIMAL SIGNIN END ==="),{user:{id:a.user.id,email:a.user.email,name:((t=a.user.user_metadata)==null?void 0:t.name)||"Unknown",role:((r=a.user.user_metadata)==null?void 0:r.role)||"Investor",registration_date:new Date().toISOString().split("T")[0]},error:null}):{user:null,error:"No user found"}}catch(a){return console.error("Error in minimal sign in:",a),{user:null,error:"An unexpected error occurred. Please try again."}}},async createProfile(e,t){try{const{data:{user:r},error:a}=await G.auth.getUser();if(a||!r)return{user:null,error:"User not authenticated"};const{data:s,error:i}=await G.from("users").insert({id:r.id,email:r.email,name:e,role:t,registration_date:new Date().toISOString().split("T")[0]}).select().single();return i?(console.error("Profile creation error:",i),{user:null,error:"Failed to create profile"}):{user:{id:s.id,email:s.email,name:s.name,role:s.role,registration_date:s.registration_date},error:null}}catch(r){return console.error("Error creating profile:",r),{user:null,error:"An unexpected error occurred"}}},async signOut(){try{const{error:e}=await G.auth.signOut();return{error:(e==null?void 0:e.message)||null}}catch(e){return console.error("Error signing out:",e),{error:"An unexpected error occurred"}}},async updateProfile(e,t){try{console.log("🔍 Updating user profile:",{userId:e,updates:t});const{data:r,error:a}=await G.from("users").update(t).eq("id",e).select().single();return a?(console.error("❌ Profile update error:",a),{user:null,error:a.message}):(console.log("✅ Profile updated successfully:",r),{user:{id:r.id,email:r.email,name:r.name,role:r.role,registration_date:r.registration_date,phone:r.phone,address:r.address,city:r.city,state:r.state,country:r.country,company:r.company,company_type:r.company_type,profile_photo_url:r.profile_photo_url,government_id:r.government_id,ca_license:r.ca_license,cs_license:r.cs_license,investment_advisor_code:r.investment_advisor_code,investment_advisor_code_entered:r.investment_advisor_code_entered,logo_url:r.logo_url,financial_advisor_license_url:r.financial_advisor_license_url,ca_code:r.ca_code,cs_code:r.cs_code,startup_count:r.startup_count,verification_documents:r.verification_documents},error:null})}catch(r){return console.error("Error updating profile:",r),{user:null,error:"An unexpected error occurred"}}},onAuthStateChange(e){return G.auth.onAuthStateChange(e)},async handleEmailConfirmation(){try{console.log("=== EMAIL CONFIRMATION START ===");const{data:{user:e},error:t}=await G.auth.getUser();if(t||!e)return console.error("User not authenticated:",t),{user:null,error:"User not authenticated"};console.log("User authenticated:",e.email),console.log("User metadata:",e.user_metadata),console.log("Checking if profile exists in database...");const{data:r,error:a}=await G.from("users").select("*").eq("id",e.id).single();if(a){console.log("Profile not found, creating from metadata...");const s=e.user_metadata;if(s!=null&&s.name&&(s!=null&&s.role)){console.log("Creating profile with metadata:",{name:s.name,role:s.role});const{data:i,error:l}=await G.from("users").insert({id:e.id,email:e.email,name:s.name,role:s.role,startup_name:s.startupName||null,registration_date:new Date().toISOString().split("T")[0]}).select().single();if(l)return console.error("Error creating profile from metadata:",l),{user:null,error:"Failed to create profile from metadata"};console.log("Profile created successfully:",i);try{if(s.role==="Startup"&&s.startupName){const{data:u}=await G.from("startups").select("id").eq("name",s.startupName).single();u||await G.from("startups").insert({name:s.startupName,investment_type:"Seed",investment_value:0,equity_allocation:0,current_valuation:0,compliance_status:"Pending",sector:"Technology",total_funding:0,total_revenue:0,registration_date:new Date().toISOString().split("T")[0],user_id:e.id})}}catch(u){console.warn("Failed to ensure startup row during email confirmation (non-blocking):",u)}return console.log("=== EMAIL CONFIRMATION END ==="),{user:{id:i.id,email:i.email,name:i.name,role:i.role,registration_date:i.registration_date},error:null}}else return console.error("No metadata found:",s),{user:null,error:"No metadata found to create profile"}}return console.log("Profile found:",r),console.log("=== EMAIL CONFIRMATION END ==="),{user:{id:r.id,email:r.email,name:r.name,role:r.role,registration_date:r.registration_date},error:null}}catch(e){return console.error("Error handling email confirmation:",e),{user:null,error:"An unexpected error occurred"}}},async refreshSession(){try{const{data:{session:e},error:t}=await G.auth.refreshSession();if(t||!(e!=null&&e.user))return{user:null,error:(t==null?void 0:t.message)||"No session found"};const{data:r,error:a}=await G.from("users").select("*").eq("id",e.user.id).single();return a||!r?{user:null,error:"Profile not found"}:{user:{id:r.id,email:r.email,name:r.name,role:r.role,registration_date:r.registration_date},error:null}}catch(e){return console.error("Error refreshing session:",e),{user:null,error:"An unexpected error occurred"}}},async checkEmailExists(e){try{console.log("Checking if email exists:",e);const{data:t,error:r}=await G.from("users").select("id").eq("email",e);return r?(console.error("Error checking users table:",r),{exists:!1,error:"Unable to check email availability"}):t&&t.length>0?(console.log("Email already exists:",e),{exists:!0}):(console.log("Email is available:",e),{exists:!1})}catch(t){return console.error("Error checking email existence:",t),{exists:!1,error:"Unable to check email availability"}}}},nx={async getCurrentUser(){const{data:{user:e}}=await G.auth.getUser();if(!e)return null;const{data:t,error:r}=await G.from("users").select("*").eq("id",e.id).single();if(r)throw r;return t},async updateUser(e,t){console.log("🔄 userService.updateUser called with:",{userId:e,updates:t});try{const{data:r,error:a}=await G.from("users").update(t).eq("id",e).select().single();if(a)throw console.error("❌ Supabase update error:",a),console.error("Error details:",{message:a.message,code:a.code,details:a.details,hint:a.hint}),a;return console.log("✅ User updated successfully:",r),r}catch(r){throw console.error("❌ userService.updateUser error:",r),r}},async getAllUsers(){console.log("Fetching all users...");try{const{data:e,error:t}=await G.from("users").select("*").order("created_at",{ascending:!1});return t?(console.error("Error fetching users:",t),[]):(console.log("Users fetched successfully:",(e==null?void 0:e.length)||0),e||[])}catch(e){return console.error("Error in getAllUsers:",e),[]}},async getStartupAdditionRequests(){console.log("Fetching startup addition requests...");try{const{data:e,error:t}=await G.from("startup_addition_requests").select("*").order("created_at",{ascending:!1});return t?(console.error("Error fetching startup addition requests:",t),[]):(console.log("Startup addition requests fetched successfully:",(e==null?void 0:e.length)||0),e||[])}catch(e){return console.error("Error in getStartupAdditionRequests:",e),[]}},async acceptInvestmentAdvisorRequest(e,t){console.log("Accepting investment advisor request for user:",e);try{const{data:r,error:a}=await G.from("users").update({advisor_accepted:!0,minimum_investment:t.minimumInvestment,maximum_investment:t.maximumInvestment,success_fee:t.successFee,success_fee_type:t.successFeeType,scouting_fee:t.scoutingFee,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw console.error("Error accepting investment advisor request:",a),a;return console.log("Investment advisor request accepted successfully:",r),r}catch(r){throw console.error("Error in acceptInvestmentAdvisorRequest:",r),r}},async acceptStartupAdvisorRequest(e,t,r){var a;console.log("Accepting startup advisor request for startup:",e,"user:",t),console.log("🔍 Original financial matrix:",r);try{const s={minimum_investment:r.minimumInvestment?parseFloat(r.minimumInvestment):null,maximum_investment:r.maximumInvestment?parseFloat(r.maximumInvestment):null,success_fee:r.successFee?parseFloat(r.successFee):null,success_fee_type:r.successFeeType||null,scouting_fee:r.scoutingFee?parseFloat(r.scoutingFee):null};console.log("🔍 Cleaned financial matrix:",s),console.log("🔍 User ID to update:",t);const i={advisor_accepted:!0,advisor_accepted_date:new Date().toISOString(),minimum_investment:s.minimum_investment,maximum_investment:s.maximum_investment,success_fee:s.success_fee,success_fee_type:s.success_fee_type,scouting_fee:s.scouting_fee,updated_at:new Date().toISOString()};console.log("🔍 Update data being sent:",i);const{data:l,error:u}=await G.from("users").update(i).eq("id",t).select().single();if(u)throw console.error("Error updating user advisor acceptance:",u),u;const{data:d,error:f}=await G.from("investment_advisor_relationships").upsert({investment_advisor_id:(a=(await G.auth.getUser()).data.user)==null?void 0:a.id,startup_id:e,relationship_type:"advisor_startup"},{onConflict:"investment_advisor_id,startup_id,relationship_type"}).select();return f&&console.error("Error creating advisor relationship:",f),console.log("Startup advisor request accepted successfully:",l),l}catch(s){throw console.error("Error in acceptStartupAdvisorRequest:",s),s}}},m0={async getAllStartups(){var e,t;console.log("Fetching startups for current user...");try{const{data:{user:r}}=await G.auth.getUser();if(!r)return console.log("No authenticated user found"),[];const{data:a,error:s}=await G.from("startups").select(`
          *,
          founders (*),
          startup_shares (*)
        `).eq("user_id",r.id).order("created_at",{ascending:!1});if(s)return console.error("Error fetching startups:",s),[];console.log("🚨🚨🚨 DATABASE DEBUGGING - STARTUP DATA 🚨🚨🚨"),console.log("Startups fetched successfully:",(a==null?void 0:a.length)||0),console.log("🔍 Raw startup data with shares:",a),console.log("🔍 First startup founders:",(e=a==null?void 0:a[0])==null?void 0:e.founders),console.log("🔍 First startup startup_shares:",(t=a==null?void 0:a[0])==null?void 0:t.startup_shares),console.log("🚨🚨🚨 END DATABASE DEBUGGING 🚨🚨🚨");const i=(a||[]).map(l=>{var u,d;return{id:l.id,name:l.name,investmentType:l.investment_type||"Unknown",investmentValue:Number(l.investment_value)||0,equityAllocation:Number(l.equity_allocation)||0,currentValuation:Number(l.current_valuation)||0,complianceStatus:l.compliance_status||"Pending",sector:l.sector||"Unknown",totalFunding:Number(l.total_funding)||0,totalRevenue:Number(l.total_revenue)||0,registrationDate:l.registration_date||"",currency:l.currency||"USD",founders:l.founders||[],esopReservedShares:((d=(u=l.startup_shares)==null?void 0:u[0])==null?void 0:d.esop_reserved_shares)||0}});return console.log("🔍 Mapped startup data with ESOP:",i),i}catch(r){return console.error("Error in getAllStartups:",r),[]}},async getAllStartupsForAdmin(){console.log("Fetching all startups for admin...");try{const{data:e,error:t}=await G.from("startups").select(`
          *,
          founders (*),
          startup_shares (*)
        `).order("created_at",{ascending:!1});return t?(console.error("Error fetching all startups:",t),console.error("Error details:",JSON.stringify(t,null,2)),[]):(console.log("All startups fetched successfully:",(e==null?void 0:e.length)||0),console.log("Raw startup data:",e),(e||[]).map(a=>{var s,i;return{id:a.id,name:a.name,investmentType:a.investment_type,investmentValue:a.investment_value,equityAllocation:a.equity_allocation,currentValuation:a.current_valuation,complianceStatus:a.compliance_status,sector:a.sector,totalFunding:a.total_funding,totalRevenue:a.total_revenue,registrationDate:a.registration_date,currency:a.currency||"USD",founders:a.founders||[],esopReservedShares:((i=(s=a.startup_shares)==null?void 0:s[0])==null?void 0:i.esop_reserved_shares)||0}}))}catch(e){return console.error("Error in getAllStartupsForAdmin:",e),[]}},async getAllStartupsForInvestmentAdvisor(){console.log("Fetching all startups for Investment Advisor...");try{const{data:e,error:t}=await G.from("startups").select(`
          *,
          founders (*)
        `).order("created_at",{ascending:!1});return t?(console.error("Error fetching startups for Investment Advisor:",t),console.error("Error details:",JSON.stringify(t,null,2)),[]):(console.log("Startups fetched successfully for Investment Advisor:",(e==null?void 0:e.length)||0),console.log("Raw startup data:",e),(e||[]).map(a=>({id:a.id,name:a.name,user_id:a.user_id,investmentType:a.investment_type,investmentValue:a.investment_value,equityAllocation:a.equity_allocation,currentValuation:a.current_valuation,complianceStatus:a.compliance_status,sector:a.sector,totalFunding:a.total_funding,totalRevenue:a.total_revenue,registrationDate:a.registration_date,founders:a.founders||[]})))}catch(e){return console.error("Error in getAllStartupsForInvestmentAdvisor:",e),[]}},async getStartupsByNames(e){if(!e||e.length===0)return[];try{const{data:t,error:r}=await G.from("startups").select(`
          *,
          founders (*)
        `).in("name",e);return r?(console.error("Error fetching startups by names:",r),[]):(t||[]).map(s=>({id:s.id,name:s.name,investmentType:s.investment_type||"Unknown",investmentValue:Number(s.investment_value)||0,equityAllocation:Number(s.equity_allocation)||0,currentValuation:Number(s.current_valuation)||0,complianceStatus:s.compliance_status||"Pending",sector:s.sector||"Unknown",totalFunding:Number(s.total_funding)||0,totalRevenue:Number(s.total_revenue)||0,registrationDate:s.registration_date||"",founders:s.founders||[]}))}catch(t){return console.error("Error in getStartupsByNames:",t),[]}},async getStartupById(e){const{data:t,error:r}=await G.from("startups").select(`
        *,
        founders (*)
      `).eq("id",e).single();if(r)throw r;return t},async updateCompliance(e,t){console.log(`Updating compliance for startup ${e} to ${t}`);try{const{data:r,error:a}=await G.from("startups").update({compliance_status:t}).eq("id",e).select().single();if(a)throw console.error("Error updating compliance:",a),a;return console.log("Compliance updated successfully"),r}catch(r){throw console.error("Error in updateCompliance:",r),r}},async createStartup(e){const{data:{user:t}}=await G.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:r,error:a}=await G.from("startups").insert({name:e.name,investment_type:e.investment_type,investment_value:e.investment_value,equity_allocation:e.equity_allocation,current_valuation:e.current_valuation,compliance_status:"Pending",sector:e.sector,total_funding:e.total_funding,total_revenue:e.total_revenue,registration_date:e.registration_date,user_id:t.id}).select().single();if(a)throw a;if(e.founders&&e.founders.length>0){const s=e.founders.map(l=>({startup_id:r.id,name:l.name,email:l.email})),{error:i}=await G.from("founders").insert(s);i&&console.error("Error adding founders:",i)}return r},async updateStartup(e,t){const{data:r,error:a}=await G.from("startups").update(t).eq("id",e).select().single();if(a)throw a;return r},async updateStartupFounders(e,t){if(await G.from("founders").delete().eq("startup_id",e),t.length>0){const r=t.map(s=>({startup_id:e,name:s.name,email:s.email})),{error:a}=await G.from("founders").insert(r);if(a)throw a}}},Wn={async getNewInvestments(){console.log("Fetching new investments...");try{let{data:e,error:t}=await G.from("new_investments").select("*").order("created_at",{ascending:!1});if(t)return console.error("Error fetching new investments:",t),[];if(console.log("New investments fetched successfully:",(e==null?void 0:e.length)||0),(!e||e.length===0)&&(console.log("No investments found in database, populating with mock data..."),await this.populateNewInvestments())){const{data:s,error:i}=await G.from("new_investments").select("*").order("created_at",{ascending:!1});if(i)return console.error("Error fetching new investments after population:",i),[];e=s,console.log("New investments fetched after population:",(e==null?void 0:e.length)||0)}return(e||[]).map(a=>({id:a.id,name:a.name,investmentType:a.investment_type,investmentValue:a.investment_value,equityAllocation:a.equity_allocation,sector:a.sector,totalFunding:a.total_funding,totalRevenue:a.total_revenue,registrationDate:a.registration_date,pitchDeckUrl:a.pitch_deck_url,pitchVideoUrl:a.pitch_video_url,complianceStatus:a.compliance_status}))}catch(e){return console.error("Error in getNewInvestments:",e),[]}},async createInvestmentOffer(e){console.log("Creating investment offer with data:",e),console.log("Trying to reference startup_id:",e.startup_id);const{data:t,error:r}=await G.from("startups").select("id").eq("id",e.startup_id).single();if(r||!t)throw console.error("Startup not found in startups table:",e.startup_id),new Error(`Startup with ID ${e.startup_id} not found in startups table`);const{data:a,error:s}=await G.from("investment_offers").select("id, status").eq("investor_email",e.investor_email).eq("startup_id",e.startup_id);if(console.log("Existing offers for this user and investment:",a),a&&a.length>0&&a.find(m=>m.status==="pending"))throw console.error("User already has a pending offer for this startup"),new Error("You already have a pending offer for this startup");const{data:i,error:l}=await G.rpc("create_investment_offer_with_fee",{p_investor_email:e.investor_email,p_startup_name:e.startup_name,p_startup_id:e.startup_id,p_offer_amount:e.offer_amount,p_equity_percentage:e.equity_percentage,p_country:e.country||"United States",p_startup_amount_raised:e.startup_amount_raised||0});if(l)throw console.error("Error creating investment offer:",l),console.error("Error details:",{message:l.message,details:l.details,hint:l.hint,code:l.code}),l;const{data:u,error:d}=await G.from("investment_offers").select("*").eq("id",i).single();if(d)throw console.error("Error fetching created offer:",d),d;return console.log("Investment offer created successfully with scouting fee:",u),u},async getUserOffers(e){const{data:t,error:r}=await G.from("investment_offers").select(`
        *,
        investment:new_investments(*)
      `).eq("investor_email",e).order("created_at",{ascending:!1});if(r)throw r;return t},async updateOfferStatus(e,t){const{error:r}=await G.from("investment_offers").update({status:t}).eq("id",e);if(r)throw r;return!0},async updateInvestmentOffer(e,t,r){const{data:a,error:s}=await G.from("investment_offers").update({offer_amount:t,equity_percentage:r}).eq("id",e).select().single();if(s)throw s;return a},async deleteInvestmentOffer(e){const{error:t}=await G.from("investment_offers").delete().eq("id",e);if(t)throw t;return!0},async getAllInvestmentOffers(){console.log("Fetching all investment offers...");try{const{data:e,error:t}=await G.from("investment_offers").select(`
          *,
          startup:startups(*)
        `).order("created_at",{ascending:!1});if(t)return console.error("Error fetching investment offers:",t),[];console.log("Investment offers fetched successfully:",(e==null?void 0:e.length)||0);const r=[...new Set((e||[]).map(i=>i.investor_email))];let a={};if(r.length>0){const{data:i,error:l}=await G.from("users").select("email, name").in("email",r);!l&&i&&(a=i.reduce((u,d)=>(u[d.email]=d.name,u),{}))}return(e||[]).map(i=>({id:i.id,investorEmail:i.investor_email,investorName:i.investor_name||a[i.investor_email]||void 0,startupName:i.startup_name,startupId:i.startup_id,startup:i.startup?{id:i.startup.id,name:i.startup.name,sector:i.startup.sector,complianceStatus:i.startup.compliance_status,startupNationValidated:i.startup.startup_nation_validated,validationDate:i.startup.validation_date,createdAt:i.startup.created_at}:null,offerAmount:i.offer_amount,equityPercentage:i.equity_percentage,status:i.status,createdAt:i.created_at,startup_scouting_fee_amount:i.startup_scouting_fee_amount||0,investor_scouting_fee_amount:i.investor_scouting_fee_amount||0,startup_scouting_fee_paid:i.startup_scouting_fee_paid||!1,investor_scouting_fee_paid:i.investor_scouting_fee_paid||!1,contact_details_revealed:i.contact_details_revealed||!1,contact_details_revealed_at:i.contact_details_revealed_at,investor_advisor_approval_status:i.investor_advisor_approval_status||"not_required",investor_advisor_approval_at:i.investor_advisor_approval_at,startup_advisor_approval_status:i.startup_advisor_approval_status||"not_required",startup_advisor_approval_at:i.startup_advisor_approval_at}))}catch(e){return console.error("Error in getAllInvestmentOffers:",e),[]}},async approveInvestorAdvisorOffer(e,t){const{data:r,error:a}=await G.rpc("approve_investor_advisor_offer",{p_offer_id:e,p_approval_action:t});if(a)throw a;return r},async approveStartupAdvisorOffer(e,t){const{data:r,error:a}=await G.rpc("approve_startup_advisor_offer",{p_offer_id:e,p_approval_action:t});if(a)throw a;return r},async recommendCoInvestmentOpportunity(e,t,r){const{data:a,error:s}=await G.rpc("recommend_co_investment_opportunity",{p_opportunity_id:e,p_advisor_id:t,p_investor_ids:r});if(s)throw s;return a},async getRecommendedCoInvestmentOpportunities(e){const{data:t,error:r}=await G.rpc("get_recommended_co_investment_opportunities",{p_investor_id:e});if(r)throw r;return t||[]},async updateCoInvestmentRecommendationStatus(e,t){const{data:r,error:a}=await G.rpc("update_co_investment_recommendation_status",{p_recommendation_id:e,p_status:t});if(a)throw a;return r},async getInvestmentAdvisorByCode(e){try{console.log("🔍 Database: Looking for advisor with code:",e);const{data:t,error:r}=await G.from("users").select("id, email, name, role, investment_advisor_code, logo_url").eq("investment_advisor_code",e).eq("role","Investment Advisor").single();return r?(console.error("❌ Database: Error fetching investment advisor:",r),null):(console.log("✅ Database: Found advisor:",t),t)}catch(t){return console.error("❌ Database: Error in getInvestmentAdvisorByCode:",t),null}},async getOffersForStartup(e){try{const{data:t,error:r}=await G.from("investment_offers").select(`
          *,
          startup:startups(*)
        `).eq("startup_id",e).order("created_at",{ascending:!1});if(r)return console.error("Error fetching startup offers:",r),[];const a=[...new Set((t||[]).map(l=>l.investor_email))];let s={};if(a.length>0){const{data:l,error:u}=await G.from("users").select("email, name").in("email",a);!u&&l&&(s=l.reduce((d,f)=>(d[f.email]=f.name,d),{}))}return(t||[]).map(l=>({id:l.id,investorEmail:l.investor_email,investorName:l.investor_name||s[l.investor_email]||void 0,startupName:l.startup_name,startupId:l.startup_id,startup:l.startup?{id:l.startup.id,name:l.startup.name}:null,offerAmount:l.offer_amount,equityPercentage:l.equity_percentage,status:l.status,createdAt:l.created_at}))}catch(t){return console.error("Error in getOffersForStartup:",t),[]}},async acceptOfferWithFee(e,t,r){try{const{data:a,error:s}=await G.rpc("accept_investment_offer_with_fee",{p_offer_id:e,p_country:t,p_startup_amount_raised:r});if(s)throw console.error("Error accepting offer with fee:",s),s;return a}catch(a){throw console.error("Error in acceptOfferWithFee:",a),a}},async acceptOfferSimple(e){try{const{data:t,error:r}=await G.rpc("accept_investment_offer_simple",{p_offer_id:e});if(r)throw console.error("Error accepting offer (simple):",r),r;return t}catch(t){throw console.error("Error in acceptOfferSimple:",t),t}},async rejectOffer(e){try{const{data:t,error:r}=await G.from("investment_offers").update({status:"rejected"}).eq("id",e).select().single();if(r)throw console.error("Error rejecting offer:",r),r;return await G.from("investment_ledger").insert({offer_id:e,activity_type:"offer_rejected",description:"Investment offer rejected by startup"}),t}catch(t){throw console.error("Error in rejectOffer:",t),t}},async revealContactDetails(e){try{const{data:t,error:r}=await G.rpc("reveal_contact_details",{p_offer_id:e});if(r)throw console.error("Error revealing contact details:",r),r;return t}catch(t){throw console.error("Error in revealContactDetails:",t),t}},async getInvestmentLedger(e){try{const{data:t,error:r}=await G.from("investment_ledger").select("*").eq("offer_id",e).order("created_at",{ascending:!0});return r?(console.error("Error getting investment ledger:",r),[]):t||[]}catch(t){return console.error("Error in getInvestmentLedger:",t),[]}},async getAllActiveOffers(){try{const{data:e,error:t}=await G.from("investment_offers").select(`
          *,
          startup:startups(*)
        `).in("status",["pending","accepted"]).order("created_at",{ascending:!1});return t?(console.error("Error getting all active offers:",t),[]):e||[]}catch(e){return console.error("Error in getAllActiveOffers:",e),[]}},async getAllInvestmentLedger(){try{const{data:e,error:t}=await G.from("investment_ledger").select(`
          *,
          offer:investment_offers(*)
        `).order("created_at",{ascending:!1});return t?(console.error("Error getting all investment ledger:",t),[]):e||[]}catch(e){return console.error("Error in getAllInvestmentLedger:",e),[]}},async populateNewInvestments(){console.log("=== POPULATING new_investments table ===");const e=[{id:101,name:"QuantumLeap",investment_type:"Seed",investment_value:15e4,equity_allocation:7,sector:"DeepTech",total_funding:15e4,total_revenue:0,registration_date:"2024-02-01",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=QJ21TaeN9K0",compliance_status:"Compliant"},{id:102,name:"AgroFuture",investment_type:"SeriesA",investment_value:12e5,equity_allocation:18,sector:"AgriTech",total_funding:25e5,total_revenue:4e5,registration_date:"2023-08-15",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=gt_l_4TfG4k",compliance_status:"Pending"},{id:103,name:"CyberGuard",investment_type:"SeriesB",investment_value:3e6,equity_allocation:10,sector:"Cybersecurity",total_funding:5e6,total_revenue:1e6,registration_date:"2022-07-22",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=rok_p26_Z5o",compliance_status:"Compliant"},{id:104,name:"BioSynth",investment_type:"Seed",investment_value:5e5,equity_allocation:15,sector:"BioTech",total_funding:5e5,total_revenue:5e4,registration_date:"2024-01-05",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=8aGhZQkoFbQ",compliance_status:"Compliant"},{id:105,name:"RetailNext",investment_type:"SeriesA",investment_value:25e5,equity_allocation:12,sector:"RetailTech",total_funding:4e6,total_revenue:8e5,registration_date:"2023-05-18",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=Y_N1_Jj9-KA",compliance_status:"Pending"},{id:106,name:"GameOn",investment_type:"Seed",investment_value:75e4,equity_allocation:20,sector:"Gaming",total_funding:75e4,total_revenue:15e4,registration_date:"2023-11-30",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=d_HlPboL_sA",compliance_status:"Compliant"},{id:107,name:"PropTech Pro",investment_type:"PreSeed",investment_value:1e5,equity_allocation:5,sector:"Real Estate",total_funding:1e5,total_revenue:1e4,registration_date:"2024-03-01",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=uK67H2PAmn8",compliance_status:"Pending"},{id:108,name:"LogiChain",investment_type:"SeriesA",investment_value:18e5,equity_allocation:9,sector:"Logistics",total_funding:3e6,total_revenue:6e5,registration_date:"2022-09-10",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=uJg4B5a-a28",compliance_status:"Compliant"},{id:109,name:"EduKids",investment_type:"Seed",investment_value:3e5,equity_allocation:10,sector:"EdTech",total_funding:3e5,total_revenue:6e4,registration_date:"2023-10-25",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=GGlY3g_2Q_E",compliance_status:"NonCompliant"},{id:110,name:"QuantumLeap 2",investment_type:"Seed",investment_value:15e4,equity_allocation:7,sector:"DeepTech",total_funding:15e4,total_revenue:0,registration_date:"2024-02-01",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=P1ww1X2-S1U",compliance_status:"Compliant"},{id:111,name:"SpaceHaul",investment_type:"SeriesB",investment_value:1e7,equity_allocation:15,sector:"Aerospace",total_funding:25e6,total_revenue:5e5,registration_date:"2021-12-01",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=sO-tjb4Edb8",compliance_status:"Compliant"},{id:112,name:"MindWell",investment_type:"Seed",investment_value:4e5,equity_allocation:12,sector:"HealthTech",total_funding:4e5,total_revenue:8e4,registration_date:"2024-04-10",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=4x7_v-2-a3I",compliance_status:"Compliant"},{id:113,name:"CleanPlate",investment_type:"Seed",investment_value:2e5,equity_allocation:8,sector:"FoodTech",total_funding:2e5,total_revenue:4e4,registration_date:"2023-09-05",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=ysz5S6PUM-U",compliance_status:"Pending"},{id:114,name:"Solaris",investment_type:"SeriesA",investment_value:22e5,equity_allocation:11,sector:"GreenTech",total_funding:35e5,total_revenue:7e5,registration_date:"2022-11-20",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=o0u4M6vppCI",compliance_status:"Compliant"},{id:115,name:"LegalEase",investment_type:"PreSeed",investment_value:12e4,equity_allocation:6,sector:"LegalTech",total_funding:12e4,total_revenue:25e3,registration_date:"2024-05-15",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=J132shgI_Ns",compliance_status:"Pending"},{id:116,name:"TravelBug",investment_type:"Seed",investment_value:6e5,equity_allocation:14,sector:"TravelTech",total_funding:6e5,total_revenue:12e4,registration_date:"2023-03-12",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=T_i-T58-S2E",compliance_status:"Compliant"},{id:117,name:"DataWeave",investment_type:"SeriesB",investment_value:45e5,equity_allocation:10,sector:"Data Analytics",total_funding:8e6,total_revenue:15e5,registration_date:"2021-10-01",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=R2vXbFp5C9o",compliance_status:"Compliant"},{id:118,name:"AutoDrive",investment_type:"SeriesA",investment_value:5e6,equity_allocation:18,sector:"Automotive",total_funding:1e7,total_revenue:8e5,registration_date:"2022-06-01",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=uA8X54c_w18",compliance_status:"NonCompliant"}];try{const{error:t}=await G.from("new_investments").delete().neq("id",0);if(t)return console.error("Error clearing new_investments:",t),!1;const{data:r,error:a}=await G.from("new_investments").insert(e);return a?(console.error("Error populating new_investments:",a),!1):(console.log("Successfully populated new_investments with",(r==null?void 0:r.length)||0,"records"),!0)}catch(t){return console.error("Error in populateNewInvestments:",t),!1}},async debugInvestmentOffers(){console.log("=== DEBUG: Checking investment_offers table ===");const{data:e,error:t}=await G.from("investment_offers").select("*").limit(1);console.log("Table structure check:",{structure:e,structureError:t});const{data:r,error:a}=await G.from("investment_offers").select("*");console.log("Existing offers:",{existingOffers:r,offersError:a});const{data:s,error:i}=await G.from("new_investments").select("id, name");console.log("Available investments:",{investments:s,investmentsError:i}),(!s||s.length===0)&&console.warn("WARNING: new_investments table is empty! This will cause foreign key constraint violations.")},async getUserInvestmentOffers(e){console.log("Fetching investment offers for user:",e);try{const{data:t,error:r}=await G.from("investment_offers").select(`
          *,
          startup:startups(*)
        `).eq("investor_email",e).order("created_at",{ascending:!1});return r?(console.error("Error fetching user investment offers:",r),[]):(console.log("User investment offers fetched successfully:",(t==null?void 0:t.length)||0),(t||[]).map(s=>({id:s.id,investorEmail:s.investor_email,investorName:s.investor_name||void 0,startupName:s.startup_name,startupId:s.startup_id,startup:s.startup?{id:s.startup.id,name:s.startup.name,sector:s.startup.sector,complianceStatus:s.startup.compliance_status,startupNationValidated:s.startup.startup_nation_validated,validationDate:s.startup.validation_date,createdAt:s.startup.created_at}:null,offerAmount:s.offer_amount,equityPercentage:s.equity_percentage,status:s.status,createdAt:s.created_at,startup_scouting_fee_amount:s.startup_scouting_fee_amount||0,investor_scouting_fee_amount:s.investor_scouting_fee_amount||0,startup_scouting_fee_paid:s.startup_scouting_fee_paid||!1,investor_scouting_fee_paid:s.investor_scouting_fee_paid||!1,contact_details_revealed:s.contact_details_revealed||!1,contact_details_revealed_at:s.contact_details_revealed_at,investor_advisor_approval_status:s.investor_advisor_approval_status||"not_required",investor_advisor_approval_at:s.investor_advisor_approval_at,startup_advisor_approval_status:s.startup_advisor_approval_status||"not_required",startup_advisor_approval_at:s.startup_advisor_approval_at})))}catch(t){return console.error("Error in getUserInvestmentOffers:",t),[]}}},TS={async getVerificationRequests(){console.log("Fetching verification requests...");try{const{data:e,error:t}=await G.from("verification_requests").select("*").order("created_at",{ascending:!1});return t?(console.error("Error fetching verification requests:",t),[]):(console.log("Verification requests fetched successfully:",(e==null?void 0:e.length)||0),e||[])}catch(e){return console.error("Error in getVerificationRequests:",e),[]}},async processVerification(e,t){console.log(`Processing verification request ${e} with status ${t}`);try{const{data:r,error:a}=await G.from("verification_requests").select("*").eq("id",e).single();if(a)throw console.error("Error fetching verification request:",a),a;const s=t==="approved"?"Compliant":"Non-Compliant",{error:i}=await G.from("startups").update({compliance_status:s}).eq("id",r.startup_id);if(i)throw console.error("Error updating startup compliance:",i),i;const{error:l}=await G.from("verification_requests").delete().eq("id",e);if(l)throw console.error("Error deleting verification request:",l),l;return console.log("Verification processed successfully"),{success:!0,status:t}}catch(r){throw console.error("Error in processVerification:",r),r}},async createVerificationRequest(e){const{data:t,error:r}=await G.from("verification_requests").insert({startup_id:e.startup_id,startup_name:e.startup_name,request_date:new Date().toISOString().split("T")[0]}).select().single();if(r)throw r;return t},async deleteVerificationRequest(e){const{error:t}=await G.from("verification_requests").delete().eq("id",e);if(t)throw t},async verifyDatabaseConnections(){console.log("Verifying database connections...");const e={users:!1,startups:!1,founders:!1,new_investments:!1,investment_offers:!1,verification_requests:!1,startup_addition_requests:!1,financial_records:!1,employees:!1};try{const{data:t,error:r}=await G.from("users").select("count").limit(1);e.users=!r,console.log("Users table:",r?"❌":"✅");const{data:a,error:s}=await G.from("startups").select("count").limit(1);e.startups=!s,console.log("Startups table:",s?"❌":"✅");const{data:i,error:l}=await G.from("founders").select("count").limit(1);e.founders=!l,console.log("Founders table:",l?"❌":"✅");const{data:u,error:d}=await G.from("new_investments").select("count").limit(1);e.new_investments=!d,console.log("New investments table:",d?"❌":"✅");const{data:f,error:m}=await G.from("investment_offers").select("count").limit(1);e.investment_offers=!m,console.log("Investment offers table:",m?"❌":"✅");const{data:g,error:v}=await G.from("verification_requests").select("count").limit(1);e.verification_requests=!v,console.log("Verification requests table:",v?"❌":"✅");const{data:x,error:j}=await G.from("startup_addition_requests").select("count").limit(1);e.startup_addition_requests=!j,console.log("Startup addition requests table:",j?"❌":"✅");const{data:b,error:S}=await G.from("financial_records").select("count").limit(1);e.financial_records=!S,console.log("Financial records table:",S?"❌":"✅");const{data:A,error:E}=await G.from("employees").select("count").limit(1);e.employees=!E,console.log("Employees table:",E?"❌":"✅");const T=Object.values(e).every(D=>D);return console.log(`Database verification complete: ${T?"✅ All tables connected":"❌ Some tables failed"}`),{success:T,results:e}}catch(t){return console.error("Error verifying database connections:",t),{success:!1,error:t.message}}}},N2={async cleanupOrphanedRequests(){var e;console.log("🧹 Cleaning up orphaned startup addition requests...");try{const{data:t,error:r}=await G.from("startup_addition_requests").select("*");if(r)throw r;let a=0;for(const s of t||[]){const{data:i,error:l}=await G.from("investment_records").select("id").eq("investor_code",s.investor_code).eq("startup_id",(e=(await G.from("startups").select("id").eq("name",s.name).single()).data)==null?void 0:e.id).single();if(l&&l.code!=="PGRST116"){console.warn("Error checking investment for request:",l);continue}if(!i){const{error:u}=await G.from("startup_addition_requests").delete().eq("id",s.id);u?console.warn("Could not delete orphaned request:",u):a++}}return console.log(`✅ Cleaned up ${a} orphaned startup addition requests`),a}catch(t){throw console.error("Error cleaning up orphaned requests:",t),t}},async createStartupAdditionRequest(e){console.log("Creating startup addition request:",e);try{const{data:t,error:r}=await G.from("startup_addition_requests").insert({name:e.name,investment_type:e.investment_type,investment_value:e.investment_value,equity_allocation:e.equity_allocation,sector:e.sector,total_funding:e.total_funding,total_revenue:e.total_revenue,registration_date:e.registration_date,investor_code:e.investor_code,status:e.status||"pending"}).select().single();if(r)throw console.error("Error creating startup addition request:",r),r;return console.log("Startup addition request created successfully:",t),t}catch(t){throw console.error("Error in createStartupAdditionRequest:",t),t}},async acceptStartupRequest(e){console.log(`Accepting startup addition request ${e}`);try{const{data:t,error:r}=await G.from("startup_addition_requests").select("*").eq("id",e).single();if(r)throw console.error("Error fetching startup addition request:",r),r;const{data:a,error:s}=await G.from("startups").select("*").eq("name",t.name).single();if(s)throw console.error("Error finding existing startup:",s),new Error(`Startup "${t.name}" not found. Cannot accept request.`);if(!a)throw new Error(`Startup "${t.name}" not found. Cannot accept request.`);console.log("Found existing startup:",a);const{error:i}=await G.from("startup_addition_requests").update({status:"approved"}).eq("id",e);return i&&console.error("Error updating request status:",i),console.log("Startup addition request accepted successfully - linked to existing startup"),a}catch(t){throw console.error("Error in acceptStartupRequest:",t),t}}},Ri={async getCACode(){try{const{data:{user:e}}=await G.auth.getUser();if(!e)return null;const{data:t,error:r}=await G.from("users").select("ca_code").eq("id",e.id).single();if(r)throw r;return(t==null?void 0:t.ca_code)||null}catch(e){return console.error("Error fetching CA code:",e),null}},async getAssignedStartups(){try{const e=await this.getCACode();if(!e)return[];const{data:t,error:r}=await G.rpc("get_ca_startups",{ca_code_param:e});if(r)throw r;const a=t.map(u=>u.startup_id);if(a.length===0)return[];const{data:s,error:i}=await G.from("startups").select("*").in("id",a);if(i)throw i;return t.map(u=>{const d=s.find(f=>f.id===u.startup_id);return{id:u.startup_id,name:u.startup_name,sector:(d==null?void 0:d.sector)||"Unknown",complianceStatus:(d==null?void 0:d.compliance_status)||Ct.Pending,totalFunding:(d==null?void 0:d.total_funding)||0,totalRevenue:(d==null?void 0:d.total_revenue)||0,registrationDate:(d==null?void 0:d.registration_date)||"",assignmentDate:u.assignment_date,assignmentStatus:u.status}})}catch(e){return console.error("Error fetching assigned startups:",e),[]}},async getCAStats(){try{const[e,t]=await Promise.all([this.getAssignedStartups(),this.getAssignmentRequests()]);return{totalStartups:e.length,pendingReview:e.filter(r=>r.complianceStatus===Ct.Pending).length,compliant:e.filter(r=>r.complianceStatus===Ct.Compliant).length,nonCompliant:e.filter(r=>r.complianceStatus===Ct.NonCompliant).length,activeAssignments:e.filter(r=>r.assignmentStatus==="active").length,pendingRequests:t.filter(r=>r.status==="pending").length}}catch(e){return console.error("Error fetching CA stats:",e),{totalStartups:0,pendingReview:0,compliant:0,nonCompliant:0,activeAssignments:0,pendingRequests:0}}},async updateComplianceStatus(e,t){try{const{error:r}=await G.from("startups").update({compliance_status:t}).eq("id",e);if(r)throw r;return!0}catch(r){return console.error("Error updating compliance status:",r),!1}},async assignToStartup(e,t){try{const r=await this.getCACode();if(!r)return!1;const{data:a,error:s}=await G.rpc("assign_ca_to_startup",{ca_code_param:r,startup_id_param:e,notes_param:t});if(s)throw s;return a}catch(r){return console.error("Error assigning CA to startup:",r),!1}},async removeAssignment(e){try{const t=await this.getCACode();if(!t)return!1;const{data:r,error:a}=await G.rpc("remove_ca_assignment",{ca_code_param:t,startup_id_param:e});if(a)throw a;return r}catch(t){return console.error("Error removing CA assignment:",t),!1}},async getAllStartups(){try{const{data:e,error:t}=await G.from("startups").select("*").order("name");if(t)throw t;return e||[]}catch(e){return console.error("Error fetching all startups:",e),[]}},async isAssignedToStartup(e){try{const t=await this.getCACode();if(!t)return!1;const{data:r,error:a}=await G.from("ca_assignments").select("id").eq("ca_code",t).eq("startup_id",e).eq("status","active").single();if(a&&a.code!=="PGRST116")throw a;return!!r}catch(t){return console.error("Error checking CA assignment:",t),!1}},async getAssignmentDetails(e){try{const t=await this.getCACode();if(!t)return null;const{data:r,error:a}=await G.from("ca_assignments").select("*").eq("ca_code",t).eq("startup_id",e).single();if(a&&a.code!=="PGRST116")throw a;return r}catch(t){return console.error("Error fetching assignment details:",t),null}},async getAssignmentRequests(){try{const e=await this.getCACode();if(!e)return[];const{data:t,error:r}=await G.rpc("get_ca_assignment_requests",{ca_code_param:e});if(r)throw r;return(t||[]).map(a=>({id:a.id,startupId:a.startup_id,startupName:a.startup_name,requestDate:a.request_date,status:a.status,notes:a.notes}))}catch(e){return console.error("Error fetching CA assignment requests:",e),[]}},async approveAssignmentRequest(e){try{const t=await this.getCACode();if(!t)return!1;const{data:r,error:a}=await G.rpc("approve_ca_assignment_request",{request_id_param:e,ca_code_param:t});if(a)throw a;return r}catch(t){return console.error("Error approving CA assignment request:",t),!1}},async rejectAssignmentRequest(e,t){try{const r=await this.getCACode();if(!r)return!1;const{data:a,error:s}=await G.rpc("reject_ca_assignment_request",{request_id_param:e,ca_code_param:r,rejection_notes:t});if(s)throw s;return a}catch(r){return console.error("Error rejecting CA assignment request:",r),!1}}};let p0=null,OS=0;const WL=300*1e3,Li={async getCSCode(){try{const e=Date.now();if(p0&&e<OS)return p0;const{data:{user:t}}=await G.auth.getUser();if(!t)return console.log("No authenticated user found"),null;console.log("Getting CS code for user ID:",t.id);const{data:r,error:a}=await G.from("users").select("cs_code, role, name").eq("id",t.id).single();if(a)throw console.error("Database error fetching CS code:",a),a;console.log("User data from database:",r);const s=r==null?void 0:r.cs_code;return console.log("CS code found:",s),p0=s||null,OS=Date.now()+WL,p0}catch(e){return console.error("Error fetching CS code:",e),null}},async getAssignedStartups(){try{const e=await this.getCSCode();if(!e)return console.log("No CS code found for current user"),[];console.log("Fetching assigned startups for CS code:",e);const{data:t,error:r}=await G.rpc("get_cs_startups",{cs_code_param:e});if(r)throw console.error("RPC error:",r),r;console.log("RPC response data:",t);const a=(t||[]).map(d=>d.startup_id);if(a.length===0)return console.log("No assigned startups found"),[];const{data:s,error:i}=await G.from("startups").select("*").in("id",a);if(i)throw i;const u=(t||[]).map(d=>{const f=(s||[]).find(m=>m.id===d.startup_id);return{id:d.startup_id,name:d.startup_name,sector:(f==null?void 0:f.sector)||"Unknown",complianceStatus:(f==null?void 0:f.compliance_status)||Ct.Pending,totalFunding:(f==null?void 0:f.total_funding)||0,totalRevenue:(f==null?void 0:f.total_revenue)||0,registrationDate:(f==null?void 0:f.registration_date)||"",assignmentDate:d.assignment_date,assignmentStatus:d.status}}).filter(d=>d.assignmentStatus==="active");return console.log("Processed assigned startups:",u),u}catch(e){return console.error("Error fetching assigned CS startups:",e),[]}},async requestAssignment(e,t,r){try{const a=await this.getCSCode();if(!a)return{success:!1,error:"CS code not found"};const{error:s}=await G.from("cs_assignments").insert({cs_code:a,startup_id:e,status:"pending",notes:r||`Assignment request from CS ${a}`});if(s)throw s;return{success:!0}}catch(a){return console.error("Error requesting assignment:",a),{success:!1,error:"Failed to request assignment"}}},async getAvailableStartups(){try{const e=await this.getCSCode();if(!e)return console.log("No CS code found for current user"),[];console.log("Fetching startups that requested CS code:",e);const{data:t,error:r}=await G.rpc("get_cs_assignment_requests",{cs_code_param:e});if(r)throw r;if(console.log("CS assignment requests found:",t),!t||t.length===0)return console.log("No pending requests found for this CS"),[];const a=t.map(l=>l.startup_id),{data:s,error:i}=await G.from("startups").select("*").in("id",a);if(i)throw i;return console.log("Startup details found:",s),s||[]}catch(e){return console.error("Error fetching available startups:",e),[]}},async updateComplianceStatus(e,t,r){try{const a=await this.getCSCode();if(!a)return{success:!1,error:"CS code not found"};const{data:s,error:i}=await G.from("cs_assignments").select("*").eq("cs_code",a).eq("startup_id",e).eq("status","active").single();if(i||!s)return{success:!1,error:"Not assigned to this startup"};const{error:l}=await G.from("startups").update({compliance_status:t,cs_verification_date:new Date().toISOString(),cs_verification_notes:r}).eq("id",e);if(l)throw l;return{success:!0}}catch(a){return console.error("Error updating compliance status:",a),{success:!1,error:"Failed to update compliance status"}}},async getCSStats(){try{const[e,t]=await Promise.all([this.getAssignedStartups(),this.getAssignmentRequests()]);return{totalStartups:e.length,pendingReview:e.filter(r=>r.complianceStatus===Ct.Pending).length,compliant:e.filter(r=>r.complianceStatus===Ct.Compliant).length,nonCompliant:e.filter(r=>r.complianceStatus===Ct.NonCompliant).length,activeAssignments:e.filter(r=>r.assignmentStatus==="active").length,pendingRequests:t.filter(r=>r.status==="pending").length}}catch(e){return console.error("Error fetching CS stats:",e),{totalStartups:0,pendingReview:0,compliant:0,nonCompliant:0,activeAssignments:0,pendingRequests:0}}},async assignToStartup(e,t){try{const r=await this.getCSCode();if(!r)return!1;const{data:a,error:s}=await G.rpc("assign_cs_to_startup",{cs_code_param:r,startup_id_param:e,notes_param:t});if(s)throw s;return a}catch(r){return console.error("Error assigning CS to startup:",r),!1}},async getAssignmentRequests(){try{const e=await this.getCSCode();if(!e)return[];const{data:t,error:r}=await G.rpc("get_cs_assignment_requests",{cs_code_param:e});if(r)throw r;return(t||[]).map(a=>({id:a.id,startupId:a.startup_id,startupName:a.startup_name,requestDate:a.request_date,status:a.status,notes:a.notes}))}catch(e){return console.error("Error fetching assignment requests:",e),[]}},async approveAssignmentRequest(e){try{const t=await this.getCSCode();if(console.log("🔍 Approving request:",{requestId:e,csCode:t}),!t)return console.error("❌ No CS code found for current user"),!1;const{data:r,error:a}=await G.rpc("approve_cs_assignment_request",{request_id_param:e,cs_code_param:t,response_notes_param:"Approved via CS dashboard"});if(console.log("🔍 RPC response:",{data:r,error:a}),a)throw console.error("❌ RPC error:",a),a;return console.log("✅ Approval successful:",r),r}catch(t){return console.error("❌ Error approving assignment request:",t),!1}},async rejectAssignmentRequest(e,t){try{const r=await this.getCSCode();if(!r)return!1;const{data:a,error:s}=await G.rpc("reject_cs_assignment_request",{request_id_param:e,cs_code_param:r,response_notes_param:t||"Rejected via CS dashboard"});if(s)throw s;return a}catch(r){return console.error("Error rejecting assignment request:",r),!1}},async removeAssignment(e){try{const t=await this.getCSCode();if(!t)return!1;const{data:r,error:a}=await G.rpc("remove_cs_assignment",{cs_code_param:t,startup_id_param:e});if(a)throw console.error("RPC error:",a),a;return r}catch(t){return console.error("Error removing assignment:",t),!1}},async getAllStartups(){try{const{data:e,error:t}=await G.from("startups").select("*").order("name");if(t)throw t;return e||[]}catch(e){return console.error("Error fetching all startups:",e),[]}},async isAssignedToStartup(e){try{const t=await this.getCSCode();if(!t)return!1;const{data:r,error:a}=await G.from("cs_assignments").select("id").eq("cs_code",t).eq("startup_id",e).eq("status","active").single();if(a&&a.code!=="PGRST116")throw a;return!!r}catch(t){return console.error("Error checking CS assignment:",t),!1}},async getAssignmentDetails(e){try{const t=await this.getCSCode();if(!t)return null;const{data:r,error:a}=await G.from("cs_assignments").select("*").eq("cs_code",t).eq("startup_id",e).single();if(a&&a.code!=="PGRST116")throw a;return r}catch(t){return console.error("Error fetching assignment details:",t),null}}};class YL{async createValidationRequest(t,r){try{console.log("Creating/updating validation request for startup:",{startupId:t,startupName:r});const{data:a,error:s}=await G.from("validation_requests").select("*").eq("startup_id",t).single();if(s&&s.code!=="PGRST116")throw console.error("Error checking existing validation request:",s),s;let i;if(a){console.log("Updating existing validation request:",a.id);const{data:l,error:u}=await G.from("validation_requests").update({startup_name:r,status:"pending",admin_notes:null,updated_at:new Date().toISOString()}).eq("id",a.id).select().single();if(u)throw console.error("Error updating validation request:",u),u;i=l,console.log("Validation request updated successfully:",i)}else{console.log("Creating new validation request");const{data:l,error:u}=await G.from("validation_requests").insert({startup_id:t,startup_name:r,status:"pending"}).select().single();if(u)throw console.error("Error creating validation request:",u),u;i=l,console.log("Validation request created successfully:",i)}return{id:i.id,startupId:i.startup_id,startupName:i.startup_name,requestDate:i.created_at,status:i.status,adminNotes:i.admin_notes,createdAt:i.created_at}}catch(a){throw console.error("Error in createValidationRequest:",a),a}}async getAllValidationRequests(){try{console.log("Fetching all validation requests...");const{data:t,error:r}=await G.from("validation_requests").select("*").order("created_at",{ascending:!1});return r?(console.error("Error fetching validation requests:",r),[]):(console.log("Validation requests fetched successfully:",(t==null?void 0:t.length)||0),(t||[]).map(a=>({id:a.id,startupId:a.startup_id,startupName:a.startup_name,requestDate:a.created_at,status:a.status,adminNotes:a.admin_notes,createdAt:a.created_at})))}catch(t){return console.error("Error in getAllValidationRequests:",t),[]}}async processValidationRequest(t,r,a){try{console.log(`Processing validation request ${t} with status ${r}`);const{data:s,error:i}=await G.from("validation_requests").update({status:r,admin_notes:a}).eq("id",t).select().single();if(i)throw console.error("Error updating validation request:",i),i;if(r==="approved"){const{error:l}=await G.from("startups").update({startup_nation_validated:!0,validation_date:new Date().toISOString()}).eq("id",s.startup_id);if(l)throw console.error("Error updating startup validation status:",l),l}return console.log("Validation request processed successfully"),{id:s.id,startupId:s.startup_id,startupName:s.startup_name,requestDate:s.created_at,status:s.status,adminNotes:s.admin_notes,createdAt:s.created_at}}catch(s){throw console.error("Error in processValidationRequest:",s),s}}async getStartupValidationStatus(t){try{const{data:r,error:a}=await G.from("validation_requests").select("*").eq("startup_id",t).order("created_at",{ascending:!1}).limit(1).single();if(a){if(a.code==="PGRST116")return null;throw console.error("Error fetching startup validation status:",a),a}return{id:r.id,startupId:r.startup_id,startupName:r.startup_name,requestDate:r.created_at,status:r.status,adminNotes:r.admin_notes,createdAt:r.created_at}}catch(r){throw console.error("Error in getStartupValidationStatus:",r),r}}async removeValidationRequest(t){try{console.log("Removing validation request for startup:",t);const{error:r}=await G.from("validation_requests").delete().eq("startup_id",t);if(r)throw console.error("Error removing validation request:",r),r;console.log("Validation request removed successfully")}catch(r){throw console.error("Error in removeValidationRequest:",r),r}}}const sx=new YL,et=({children:e,className:t="",padding:r="md"})=>{const a={none:"",sm:"p-3",md:"p-4 sm:p-6",lg:"p-6 sm:p-8"};return n.jsx("div",{className:`bg-white rounded-xl shadow-md ${a[r]} ${t}`,children:e})},Oe=({children:e,variant:t="primary",size:r="md",className:a="",...s})=>{const i="inline-flex items-center justify-center rounded-md font-semibold focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors duration-200",l={primary:"bg-brand-primary text-white hover:bg-brand-secondary focus:ring-brand-primary",secondary:"bg-slate-200 text-slate-800 hover:bg-slate-300 focus:ring-slate-400",outline:"bg-transparent border border-brand-primary text-brand-primary hover:bg-brand-light focus:ring-brand-primary"},u={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return n.jsx("button",{className:`${i} ${l[t]} ${u[r]} ${a}`,...s,children:e})},Yx=({status:e})=>{const t={[Ct.Compliant]:"bg-green-100 text-status-compliant",[Ct.Pending]:"bg-orange-100 text-status-pending",[Ct.NonCompliant]:"bg-red-100 text-status-noncompliant"};return n.jsx("span",{className:`px-2.5 py-0.5 text-xs font-medium rounded-full inline-block ${t[e]}`,children:e})};function qk(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=qk(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function aa(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=qk(e))&&(a&&(a+=" "),a+=t);return a}var rb={},ab={},DS;function XL(){return DS||(DS=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(ab)),ab}var nb={},RS;function Fk(){return RS||(RS=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(nb)),nb}var sb={},LS;function Bk(){return LS||(LS=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;return typeof r=="string"||typeof r=="symbol"?r:Object.is((a=r==null?void 0:r.valueOf)==null?void 0:a.call(r),-0)?"-0":String(r)}e.toKey=t}(sb)),sb}var ib={},MS;function $w(){return MS||(MS=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const a=[],s=r.length;if(s===0)return a;let i=0,l="",u="",d=!1;for(r.charCodeAt(0)===46&&(a.push(""),i++);i<s;){const f=r[i];u?f==="\\"&&i+1<s?(i++,l+=r[i]):f===u?u="":l+=f:d?f==='"'||f==="'"?u=f:f==="]"?(d=!1,a.push(l),l=""):l+=f:f==="["?(d=!0,l&&(a.push(l),l="")):f==="."?l&&(a.push(l),l=""):l+=f,i++}return l&&a.push(l),a}e.toPath=t}(ib)),ib}var IS;function zw(){return IS||(IS=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XL(),r=Fk(),a=Bk(),s=$w();function i(u,d,f){if(u==null)return f;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return f;const m=u[d];return m===void 0?r.isDeepKey(d)?i(u,s.toPath(d),f):f:m}case"number":case"symbol":{typeof d=="number"&&(d=a.toKey(d));const m=u[d];return m===void 0?f:m}default:{if(Array.isArray(d))return l(u,d,f);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return f;const m=u[d];return m===void 0?f:m}}}function l(u,d,f){if(d.length===0)return f;let m=u;for(let g=0;g<d.length;g++){if(m==null||t.isUnsafeProperty(d[g]))return f;m=m[d[g]]}return m===void 0?f:m}e.get=i}(rb)),rb}var ob,qS;function ZL(){return qS||(qS=1,ob=zw().get),ob}var JL=ZL();const ld=Eo(JL);var lb={exports:{}},Sa={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FS;function QL(){if(FS)return Sa;FS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function j(b){if(typeof b=="object"&&b!==null){var S=b.$$typeof;switch(S){case e:switch(b=b.type,b){case r:case s:case a:case d:case f:case v:return b;default:switch(b=b&&b.$$typeof,b){case l:case u:case g:case m:return b;case i:return b;default:return S}}case t:return S}}}return Sa.ContextConsumer=i,Sa.ContextProvider=l,Sa.Element=e,Sa.ForwardRef=u,Sa.Fragment=r,Sa.Lazy=g,Sa.Memo=m,Sa.Portal=t,Sa.Profiler=s,Sa.StrictMode=a,Sa.Suspense=d,Sa.SuspenseList=f,Sa.isContextConsumer=function(b){return j(b)===i},Sa.isContextProvider=function(b){return j(b)===l},Sa.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===e},Sa.isForwardRef=function(b){return j(b)===u},Sa.isFragment=function(b){return j(b)===r},Sa.isLazy=function(b){return j(b)===g},Sa.isMemo=function(b){return j(b)===m},Sa.isPortal=function(b){return j(b)===t},Sa.isProfiler=function(b){return j(b)===s},Sa.isStrictMode=function(b){return j(b)===a},Sa.isSuspense=function(b){return j(b)===d},Sa.isSuspenseList=function(b){return j(b)===f},Sa.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===r||b===s||b===a||b===d||b===f||typeof b=="object"&&b!==null&&(b.$$typeof===g||b.$$typeof===m||b.$$typeof===l||b.$$typeof===i||b.$$typeof===u||b.$$typeof===x||b.getModuleId!==void 0)},Sa.typeOf=j,Sa}var BS;function eM(){return BS||(BS=1,lb.exports=QL()),lb.exports}var tM=eM(),fs=e=>e===0?0:e>0?1:-1,Gi=e=>typeof e=="number"&&e!=+e,rf=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Wt=e=>(typeof e=="number"||e instanceof Number)&&!Gi(e),ec=e=>Wt(e)||typeof e=="string",rM=0,mf=e=>{var t=++rM;return"".concat(e||"").concat(t)},ri=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Wt(t)&&typeof t!="string")return a;var i;if(rf(t)){if(r==null)return a;var l=t.indexOf("%");i=r*parseFloat(t.slice(0,l))/100}else i=+t;return Gi(i)&&(i=a),s&&r!=null&&i>r&&(i=r),i},Uk=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},a=0;a<t;a++)if(!r[e[a]])r[e[a]]=!0;else return!0;return!1},Bi=(e,t)=>Wt(e)&&Wt(t)?r=>e+r*(t-e):()=>t;function $k(e,t,r){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):ld(a,t))===r)}var Ta=e=>e===null||typeof e>"u",Yp=e=>Ta(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),aM=["viewBox","children"],nM=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],US=["points","pathLength"],cb={svg:aM,polygon:US,polyline:US},Vw=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Hw=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(_.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var a={};return Object.keys(r).forEach(s=>{Vw.includes(s)&&(a[s]=i=>r[s](r,i))}),a},sM=(e,t,r)=>a=>(e(t,r,a),null),Xp=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(s=>{var i=e[s];Vw.includes(s)&&typeof i=="function"&&(a||(a={}),a[s]=sM(i,t,r))}),a},$S=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",zS=null,ub=null,zk=e=>{if(e===zS&&Array.isArray(ub))return ub;var t=[];return _.Children.forEach(e,r=>{Ta(r)||(tM.isFragment(r)?t=t.concat(zk(r.props.children)):t.push(r))}),ub=t,zS=e,t};function Zp(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(s=>$S(s)):a=[$S(t)],zk(e).forEach(s=>{var i=ld(s,"type.displayName")||ld(s,"type.name");a.indexOf(i)!==-1&&r.push(s)}),r}var Vk=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,iM=(e,t,r,a)=>{var s,i=(s=a&&(cb==null?void 0:cb[a]))!==null&&s!==void 0?s:[];return t.startsWith("data-")||typeof e!="function"&&(a&&i.includes(t)||nM.includes(t))||r&&Vw.includes(t)},Kr=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(_.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var s={};return Object.keys(a).forEach(i=>{var l;iM((l=a)===null||l===void 0?void 0:l[i],i,t,r)&&(s[i]=a[i])}),s},oM=["children","width","height","viewBox","className","style","title","desc"];function S2(){return S2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},S2.apply(null,arguments)}function lM(e,t){if(e==null)return{};var r,a,s=cM(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function cM(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Gw=_.forwardRef((e,t)=>{var{children:r,width:a,height:s,viewBox:i,className:l,style:u,title:d,desc:f}=e,m=lM(e,oM),g=i||{width:a,height:s,x:0,y:0},v=aa("recharts-surface",l);return _.createElement("svg",S2({},Kr(m,!0,"svg"),{className:v,width:a,height:s,style:u,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:t}),_.createElement("title",null,d),_.createElement("desc",null,f),r)}),uM=["children","className"];function A2(){return A2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},A2.apply(null,arguments)}function dM(e,t){if(e==null)return{};var r,a,s=fM(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function fM(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var hs=_.forwardRef((e,t)=>{var{children:r,className:a}=e,s=dM(e,uM),i=aa("recharts-layer",a);return _.createElement("g",A2({className:i},Kr(s,!0),{ref:t}),r)}),Hk=pk(),Gk=_.createContext(null),hM=()=>_.useContext(Gk);function Ia(e){return function(){return e}}const Kk=Math.cos,ix=Math.sin,hl=Math.sqrt,ox=Math.PI,Xx=2*ox,C2=Math.PI,k2=2*C2,Xd=1e-6,mM=k2-Xd;function Wk(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function pM(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Wk;const r=10**t;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+a[s]}}class gM{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Wk:pM(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,s){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,r,a,s,i,l){this._append`C${+t},${+r},${+a},${+s},${this._x1=+i},${this._y1=+l}`}arcTo(t,r,a,s,i){if(t=+t,r=+r,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,u=this._y1,d=a-t,f=s-r,m=l-t,g=u-r,v=m*m+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(v>Xd)if(!(Math.abs(g*d-f*m)>Xd)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let x=a-l,j=s-u,b=d*d+f*f,S=x*x+j*j,A=Math.sqrt(b),E=Math.sqrt(v),T=i*Math.tan((C2-Math.acos((b+v-S)/(2*A*E)))/2),D=T/E,R=T/A;Math.abs(D-1)>Xd&&this._append`L${t+D*m},${r+D*g}`,this._append`A${i},${i},0,0,${+(g*x>m*j)},${this._x1=t+R*d},${this._y1=r+R*f}`}}arc(t,r,a,s,i,l){if(t=+t,r=+r,a=+a,l=!!l,a<0)throw new Error(`negative radius: ${a}`);let u=a*Math.cos(s),d=a*Math.sin(s),f=t+u,m=r+d,g=1^l,v=l?s-i:i-s;this._x1===null?this._append`M${f},${m}`:(Math.abs(this._x1-f)>Xd||Math.abs(this._y1-m)>Xd)&&this._append`L${f},${m}`,a&&(v<0&&(v=v%k2+k2),v>mM?this._append`A${a},${a},0,1,${g},${t-u},${r-d}A${a},${a},0,1,${g},${this._x1=f},${this._y1=m}`:v>Xd&&this._append`A${a},${a},0,${+(v>=C2)},${g},${this._x1=t+a*Math.cos(i)},${this._y1=r+a*Math.sin(i)}`)}rect(t,r,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function Kw(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new gM(t)}function Ww(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Yk(e){this._context=e}Yk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Zx(e){return new Yk(e)}function Xk(e){return e[0]}function Zk(e){return e[1]}function Jk(e,t){var r=Ia(!0),a=null,s=Zx,i=null,l=Kw(u);e=typeof e=="function"?e:e===void 0?Xk:Ia(e),t=typeof t=="function"?t:t===void 0?Zk:Ia(t);function u(d){var f,m=(d=Ww(d)).length,g,v=!1,x;for(a==null&&(i=s(x=l())),f=0;f<=m;++f)!(f<m&&r(g=d[f],f,d))===v&&((v=!v)?i.lineStart():i.lineEnd()),v&&i.point(+e(g,f,d),+t(g,f,d));if(x)return i=null,x+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Ia(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Ia(+d),u):t},u.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Ia(!!d),u):r},u.curve=function(d){return arguments.length?(s=d,a!=null&&(i=s(a)),u):s},u.context=function(d){return arguments.length?(d==null?a=i=null:i=s(a=d),u):a},u}function g0(e,t,r){var a=null,s=Ia(!0),i=null,l=Zx,u=null,d=Kw(f);e=typeof e=="function"?e:e===void 0?Xk:Ia(+e),t=typeof t=="function"?t:Ia(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Zk:Ia(+r);function f(g){var v,x,j,b=(g=Ww(g)).length,S,A=!1,E,T=new Array(b),D=new Array(b);for(i==null&&(u=l(E=d())),v=0;v<=b;++v){if(!(v<b&&s(S=g[v],v,g))===A)if(A=!A)x=v,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),j=v-1;j>=x;--j)u.point(T[j],D[j]);u.lineEnd(),u.areaEnd()}A&&(T[v]=+e(S,v,g),D[v]=+t(S,v,g),u.point(a?+a(S,v,g):T[v],r?+r(S,v,g):D[v]))}if(E)return u=null,E+""||null}function m(){return Jk().defined(s).curve(l).context(i)}return f.x=function(g){return arguments.length?(e=typeof g=="function"?g:Ia(+g),a=null,f):e},f.x0=function(g){return arguments.length?(e=typeof g=="function"?g:Ia(+g),f):e},f.x1=function(g){return arguments.length?(a=g==null?null:typeof g=="function"?g:Ia(+g),f):a},f.y=function(g){return arguments.length?(t=typeof g=="function"?g:Ia(+g),r=null,f):t},f.y0=function(g){return arguments.length?(t=typeof g=="function"?g:Ia(+g),f):t},f.y1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:Ia(+g),f):r},f.lineX0=f.lineY0=function(){return m().x(e).y(t)},f.lineY1=function(){return m().x(e).y(r)},f.lineX1=function(){return m().x(a).y(t)},f.defined=function(g){return arguments.length?(s=typeof g=="function"?g:Ia(!!g),f):s},f.curve=function(g){return arguments.length?(l=g,i!=null&&(u=l(i)),f):l},f.context=function(g){return arguments.length?(g==null?i=u=null:u=l(i=g),f):i},f}class Qk{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function xM(e){return new Qk(e,!0)}function vM(e){return new Qk(e,!1)}const Yw={draw(e,t){const r=hl(t/ox);e.moveTo(r,0),e.arc(0,0,r,0,Xx)}},yM={draw(e,t){const r=hl(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},eE=hl(1/3),bM=eE*2,wM={draw(e,t){const r=hl(t/bM),a=r*eE;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},jM={draw(e,t){const r=hl(t),a=-r/2;e.rect(a,a,r,r)}},_M=.8908130915292852,tE=ix(ox/10)/ix(7*ox/10),NM=ix(Xx/10)*tE,SM=-Kk(Xx/10)*tE,AM={draw(e,t){const r=hl(t*_M),a=NM*r,s=SM*r;e.moveTo(0,-r),e.lineTo(a,s);for(let i=1;i<5;++i){const l=Xx*i/5,u=Kk(l),d=ix(l);e.lineTo(d*r,-u*r),e.lineTo(u*a-d*s,d*a+u*s)}e.closePath()}},db=hl(3),CM={draw(e,t){const r=-hl(t/(db*3));e.moveTo(0,r*2),e.lineTo(-db*r,-r),e.lineTo(db*r,-r),e.closePath()}},ho=-.5,mo=hl(3)/2,E2=1/hl(12),kM=(E2/2+1)*3,EM={draw(e,t){const r=hl(t/kM),a=r/2,s=r*E2,i=a,l=r*E2+r,u=-i,d=l;e.moveTo(a,s),e.lineTo(i,l),e.lineTo(u,d),e.lineTo(ho*a-mo*s,mo*a+ho*s),e.lineTo(ho*i-mo*l,mo*i+ho*l),e.lineTo(ho*u-mo*d,mo*u+ho*d),e.lineTo(ho*a+mo*s,ho*s-mo*a),e.lineTo(ho*i+mo*l,ho*l-mo*i),e.lineTo(ho*u+mo*d,ho*d-mo*u),e.closePath()}};function PM(e,t){let r=null,a=Kw(s);e=typeof e=="function"?e:Ia(e||Yw),t=typeof t=="function"?t:Ia(t===void 0?64:+t);function s(){let i;if(r||(r=i=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Ia(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Ia(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function lx(){}function cx(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function rE(e){this._context=e}rE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:cx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:cx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function TM(e){return new rE(e)}function aE(e){this._context=e}aE.prototype={areaStart:lx,areaEnd:lx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:cx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function OM(e){return new aE(e)}function nE(e){this._context=e}nE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:cx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function DM(e){return new nE(e)}function sE(e){this._context=e}sE.prototype={areaStart:lx,areaEnd:lx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function RM(e){return new sE(e)}function VS(e){return e<0?-1:1}function HS(e,t,r){var a=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),l=(r-e._y1)/(s||a<0&&-0),u=(i*s+l*a)/(a+s);return(VS(i)+VS(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(u))||0}function GS(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function fb(e,t,r){var a=e._x0,s=e._y0,i=e._x1,l=e._y1,u=(i-a)/3;e._context.bezierCurveTo(a+u,s+u*t,i-u,l-u*r,i,l)}function ux(e){this._context=e}ux.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fb(this,this._t0,GS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,fb(this,GS(this,r=HS(this,e,t)),r);break;default:fb(this,this._t0,r=HS(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function iE(e){this._context=new oE(e)}(iE.prototype=Object.create(ux.prototype)).point=function(e,t){ux.prototype.point.call(this,t,e)};function oE(e){this._context=e}oE.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,s,i){this._context.bezierCurveTo(t,e,a,r,i,s)}};function LM(e){return new ux(e)}function MM(e){return new iE(e)}function lE(e){this._context=e}lE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=KS(e),s=KS(t),i=0,l=1;l<r;++i,++l)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function KS(e){var t,r=e.length-1,a,s=new Array(r),i=new Array(r),l=new Array(r);for(s[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=s[t]/i[t-1],i[t]-=a,l[t]-=a*l[t-1];for(s[r-1]=l[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(l[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function IM(e){return new lE(e)}function Jx(e,t){this._context=e,this._t=t}Jx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function qM(e){return new Jx(e,.5)}function FM(e){return new Jx(e,0)}function BM(e){return new Jx(e,1)}function Vh(e,t){if((l=e.length)>1)for(var r=1,a,s,i=e[t[0]],l,u=i.length;r<l;++r)for(s=i,i=e[t[r]],a=0;a<u;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function P2(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function UM(e,t){return e[t]}function $M(e){const t=[];return t.key=e,t}function zM(){var e=Ia([]),t=P2,r=Vh,a=UM;function s(i){var l=Array.from(e.apply(this,arguments),$M),u,d=l.length,f=-1,m;for(const g of i)for(u=0,++f;u<d;++u)(l[u][f]=[0,+a(g,l[u].key,f,i)]).data=g;for(u=0,m=Ww(t(l));u<d;++u)l[m[u]].index=u;return r(l,m),l}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Ia(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:Ia(+i),s):a},s.order=function(i){return arguments.length?(t=i==null?P2:typeof i=="function"?i:Ia(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??Vh,s):r},s}function VM(e,t){if((a=e.length)>0){for(var r,a,s=0,i=e[0].length,l;s<i;++s){for(l=r=0;r<a;++r)l+=e[r][s][1]||0;if(l)for(r=0;r<a;++r)e[r][s][1]/=l}Vh(e,t)}}function HM(e,t){if((s=e.length)>0){for(var r=0,a=e[t[0]],s,i=a.length;r<i;++r){for(var l=0,u=0;l<s;++l)u+=e[l][r][1]||0;a[r][1]+=a[r][0]=-u/2}Vh(e,t)}}function GM(e,t){if(!(!((l=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,a=1,s,i,l;a<i;++a){for(var u=0,d=0,f=0;u<l;++u){for(var m=e[t[u]],g=m[a][1]||0,v=m[a-1][1]||0,x=(g-v)/2,j=0;j<u;++j){var b=e[t[j]],S=b[a][1]||0,A=b[a-1][1]||0;x+=S-A}d+=g,f+=x*g}s[a-1][1]+=s[a-1][0]=r,d&&(r-=f/d)}s[a-1][1]+=s[a-1][0]=r,Vh(e,t)}}var KM=["type","size","sizeType"];function T2(){return T2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},T2.apply(null,arguments)}function WS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function YS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WS(Object(r),!0).forEach(function(a){WM(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function WM(e,t,r){return(t=YM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YM(e){var t=XM(e,"string");return typeof t=="symbol"?t:t+""}function XM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZM(e,t){if(e==null)return{};var r,a,s=JM(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function JM(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var cE={symbolCircle:Yw,symbolCross:yM,symbolDiamond:wM,symbolSquare:jM,symbolStar:AM,symbolTriangle:CM,symbolWye:EM},QM=Math.PI/180,eI=e=>{var t="symbol".concat(Yp(e));return cE[t]||Yw},tI=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*QM;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},rI=(e,t)=>{cE["symbol".concat(Yp(e))]=t},Xw=e=>{var{type:t="circle",size:r=64,sizeType:a="area"}=e,s=ZM(e,KM),i=YS(YS({},s),{},{type:t,size:r,sizeType:a}),l=()=>{var g=eI(t),v=PM().type(g).size(tI(r,a,t));return v()},{className:u,cx:d,cy:f}=i,m=Kr(i,!0);return d===+d&&f===+f&&r===+r?_.createElement("path",T2({},m,{className:aa("recharts-symbols",u),transform:"translate(".concat(d,", ").concat(f,")"),d:l()})):null};Xw.registerSymbol=rI;function O2(){return O2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},O2.apply(null,arguments)}function XS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function aI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XS(Object(r),!0).forEach(function(a){Zw(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Zw(e,t,r){return(t=nI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nI(e){var t=sI(e,"string");return typeof t=="symbol"?t:t+""}function sI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var po=32;class Jw extends _.PureComponent{renderIcon(t,r){var{inactiveColor:a}=this.props,s=po/2,i=po/6,l=po/3,u=t.inactive?a:t.color,d=r??t.type;if(d==="none")return null;if(d==="plainline")return _.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:s,x2:po,y2:s,className:"recharts-legend-icon"});if(d==="line")return _.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(po,"M").concat(2*l,",").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(d==="rect")return _.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(po/8,"h").concat(po,"v").concat(po*3/4,"h").concat(-po,"z"),className:"recharts-legend-icon"});if(_.isValidElement(t.legendIcon)){var f=aI({},t);return delete f.legendIcon,_.cloneElement(t.legendIcon,f)}return _.createElement(Xw,{fill:u,cx:s,cy:s,size:po,sizeType:"diameter",type:d})}renderItems(){var{payload:t,iconSize:r,layout:a,formatter:s,inactiveColor:i,iconType:l}=this.props,u={x:0,y:0,width:po,height:po},d={display:a==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((m,g)=>{var v=m.formatter||s,x=aa({"recharts-legend-item":!0,["legend-item-".concat(g)]:!0,inactive:m.inactive});if(m.type==="none")return null;var j=m.inactive?i:m.color,b=v?v(m.value,m,g):m.value;return _.createElement("li",O2({className:x,style:d,key:"legend-item-".concat(g)},Xp(this.props,m,g)),_.createElement(Gw,{width:r,height:r,viewBox:u,style:f,"aria-label":"".concat(b," legend icon")},this.renderIcon(m,l)),_.createElement("span",{className:"recharts-legend-item-text",style:{color:j}},b))})}render(){var{payload:t,layout:r,align:a}=this.props;if(!t||!t.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?a:"left"};return _.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}Zw(Jw,"displayName","Legend");Zw(Jw,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var hb={},mb={},ZS;function iI(){return ZS||(ZS=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){const s=new Map;for(let i=0;i<r.length;i++){const l=r[i],u=a(l);s.has(u)||s.set(u,l)}return Array.from(s.values())}e.uniqBy=t}(mb)),mb}var pb={},JS;function uE(){return JS||(JS=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(pb)),pb}var gb={},xb={},vb={},QS;function oI(){return QS||(QS=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(vb)),vb}var e4;function Qw(){return e4||(e4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oI();function r(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=r}(xb)),xb}var yb={},t4;function lI(){return t4||(t4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(yb)),yb}var r4;function cI(){return r4||(r4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qw(),r=lI();function a(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=a}(gb)),gb}var bb={},wb={},a4;function uI(){return a4||(a4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zw();function r(a){return function(s){return t.get(s,a)}}e.property=r}(wb)),wb}var jb={},_b={},Nb={},Sb={},n4;function dE(){return n4||(n4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(Sb)),Sb}var Ab={},s4;function fE(){return s4||(s4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(Ab)),Ab}var Cb={},i4;function ej(){return i4||(i4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){return r===a||Number.isNaN(r)&&Number.isNaN(a)}e.eq=t}(Cb)),Cb}var o4;function dI(){return o4||(o4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tj(),r=dE(),a=fE(),s=ej();function i(g,v,x){return typeof x!="function"?t.isMatch(g,v):l(g,v,function j(b,S,A,E,T,D){const R=x(b,S,A,E,T,D);return R!==void 0?!!R:l(b,S,j,D)},new Map)}function l(g,v,x,j){if(v===g)return!0;switch(typeof v){case"object":return u(g,v,x,j);case"function":return Object.keys(v).length>0?l(g,{...v},x,j):s.eq(g,v);default:return r.isObject(g)?typeof v=="string"?v==="":!0:s.eq(g,v)}}function u(g,v,x,j){if(v==null)return!0;if(Array.isArray(v))return f(g,v,x,j);if(v instanceof Map)return d(g,v,x,j);if(v instanceof Set)return m(g,v,x,j);const b=Object.keys(v);if(g==null)return b.length===0;if(b.length===0)return!0;if(j&&j.has(v))return j.get(v)===g;j&&j.set(v,g);try{for(let S=0;S<b.length;S++){const A=b[S];if(!a.isPrimitive(g)&&!(A in g)||v[A]===void 0&&g[A]!==void 0||v[A]===null&&g[A]!==null||!x(g[A],v[A],A,g,v,j))return!1}return!0}finally{j&&j.delete(v)}}function d(g,v,x,j){if(v.size===0)return!0;if(!(g instanceof Map))return!1;for(const[b,S]of v.entries()){const A=g.get(b);if(x(A,S,b,g,v,j)===!1)return!1}return!0}function f(g,v,x,j){if(v.length===0)return!0;if(!Array.isArray(g))return!1;const b=new Set;for(let S=0;S<v.length;S++){const A=v[S];let E=!1;for(let T=0;T<g.length;T++){if(b.has(T))continue;const D=g[T];let R=!1;if(x(D,A,S,g,v,j)&&(R=!0),R){b.add(T),E=!0;break}}if(!E)return!1}return!0}function m(g,v,x,j){return v.size===0?!0:g instanceof Set?f([...g],[...v],x,j):!1}e.isMatchWith=i,e.isSetMatch=m}(Nb)),Nb}var l4;function tj(){return l4||(l4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dI();function r(a,s){return t.isMatchWith(a,s,()=>{})}e.isMatch=r}(_b)),_b}var kb={},Eb={},Pb={},c4;function hE(){return c4||(c4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(a=>Object.prototype.propertyIsEnumerable.call(r,a))}e.getSymbols=t}(Pb)),Pb}var Tb={},u4;function rj(){return u4||(u4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(Tb)),Tb}var Ob={},d4;function aj(){return d4||(d4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",a="[object Number]",s="[object Boolean]",i="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",f="[object Set]",m="[object Array]",g="[object Function]",v="[object ArrayBuffer]",x="[object Object]",j="[object Error]",b="[object DataView]",S="[object Uint8Array]",A="[object Uint8ClampedArray]",E="[object Uint16Array]",T="[object Uint32Array]",D="[object BigUint64Array]",R="[object Int8Array]",B="[object Int16Array]",U="[object Int32Array]",I="[object BigInt64Array]",F="[object Float32Array]",pe="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=v,e.arrayTag=m,e.bigInt64ArrayTag=I,e.bigUint64ArrayTag=D,e.booleanTag=s,e.dataViewTag=b,e.dateTag=u,e.errorTag=j,e.float32ArrayTag=F,e.float64ArrayTag=pe,e.functionTag=g,e.int16ArrayTag=B,e.int32ArrayTag=U,e.int8ArrayTag=R,e.mapTag=d,e.numberTag=a,e.objectTag=x,e.regexpTag=t,e.setTag=f,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=E,e.uint32ArrayTag=T,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=A}(Ob)),Ob}var Db={},f4;function fI(){return f4||(f4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(Db)),Db}var h4;function mE(){return h4||(h4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hE(),r=rj(),a=aj(),s=fE(),i=fI();function l(m,g){return u(m,void 0,m,new Map,g)}function u(m,g,v,x=new Map,j=void 0){const b=j==null?void 0:j(m,g,v,x);if(b!=null)return b;if(s.isPrimitive(m))return m;if(x.has(m))return x.get(m);if(Array.isArray(m)){const S=new Array(m.length);x.set(m,S);for(let A=0;A<m.length;A++)S[A]=u(m[A],A,v,x,j);return Object.hasOwn(m,"index")&&(S.index=m.index),Object.hasOwn(m,"input")&&(S.input=m.input),S}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const S=new RegExp(m.source,m.flags);return S.lastIndex=m.lastIndex,S}if(m instanceof Map){const S=new Map;x.set(m,S);for(const[A,E]of m)S.set(A,u(E,A,v,x,j));return S}if(m instanceof Set){const S=new Set;x.set(m,S);for(const A of m)S.add(u(A,void 0,v,x,j));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(i.isTypedArray(m)){const S=new(Object.getPrototypeOf(m)).constructor(m.length);x.set(m,S);for(let A=0;A<m.length;A++)S[A]=u(m[A],A,v,x,j);return S}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const S=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return x.set(m,S),d(S,m,v,x,j),S}if(typeof File<"u"&&m instanceof File){const S=new File([m],m.name,{type:m.type});return x.set(m,S),d(S,m,v,x,j),S}if(m instanceof Blob){const S=new Blob([m],{type:m.type});return x.set(m,S),d(S,m,v,x,j),S}if(m instanceof Error){const S=new m.constructor;return x.set(m,S),S.message=m.message,S.name=m.name,S.stack=m.stack,S.cause=m.cause,d(S,m,v,x,j),S}if(typeof m=="object"&&f(m)){const S=Object.create(Object.getPrototypeOf(m));return x.set(m,S),d(S,m,v,x,j),S}return m}function d(m,g,v=m,x,j){const b=[...Object.keys(g),...t.getSymbols(g)];for(let S=0;S<b.length;S++){const A=b[S],E=Object.getOwnPropertyDescriptor(m,A);(E==null||E.writable)&&(m[A]=u(g[A],A,v,x,j))}}function f(m){switch(r.getTag(m)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=d}(Eb)),Eb}var m4;function hI(){return m4||(m4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mE();function r(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=r}(kb)),kb}var p4;function mI(){return p4||(p4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tj(),r=hI();function a(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=a}(jb)),jb}var Rb={},Lb={},Mb={},g4;function pI(){return g4||(g4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mE(),r=aj();function a(s,i){return t.cloneDeepWith(s,(l,u,d,f)=>{const m=i==null?void 0:i(l,u,d,f);if(m!=null)return m;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const g=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(g,s),g}case r.argumentsTag:{const g={};return t.copyProperties(g,s),g.length=s.length,g[Symbol.iterator]=s[Symbol.iterator],g}default:return}})}e.cloneDeepWith=a}(Mb)),Mb}var x4;function gI(){return x4||(x4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pI();function r(a){return t.cloneDeepWith(a)}e.cloneDeep=r}(Lb)),Lb}var Ib={},qb={},v4;function pE(){return v4||(v4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(a,s=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<s;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=r}(qb)),qb}var Fb={},y4;function xI(){return y4||(y4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rj();function r(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=r}(Fb)),Fb}var b4;function vI(){return b4||(b4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fk(),r=pE(),a=xI(),s=$w();function i(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&(l==null?void 0:l[u])==null?d=s.toPath(u):d=[u],d.length===0)return!1;let f=l;for(let m=0;m<d.length;m++){const g=d[m];if((f==null||!Object.hasOwn(f,g))&&!((Array.isArray(f)||a.isArguments(f))&&r.isIndex(g)&&g<f.length))return!1;f=f[g]}return!0}e.has=i}(Ib)),Ib}var w4;function yI(){return w4||(w4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tj(),r=Bk(),a=gI(),s=zw(),i=vI();function l(u,d){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return d=a.cloneDeep(d),function(f){const m=s.get(f,u);return m===void 0?i.has(f,u):d===void 0?m===void 0:t.isMatch(m,d)}}e.matchesProperty=l}(Rb)),Rb}var j4;function bI(){return j4||(j4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uE(),r=uI(),a=mI(),s=yI();function i(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?s.matchesProperty(l[0],l[1]):a.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=i}(bb)),bb}var _4;function wI(){return _4||(_4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iI(),r=uE(),a=cI(),s=bI();function i(l,u=r.identity){return a.isArrayLikeObject(l)?t.uniqBy(Array.from(l),s.iteratee(u)):[]}e.uniqBy=i}(hb)),hb}var Bb,N4;function jI(){return N4||(N4=1,Bb=wI().uniqBy),Bb}var _I=jI();const S4=Eo(_I);function gE(e,t,r){return t===!0?S4(e,r):typeof t=="function"?S4(e,t):e}var Ub={exports:{}},$b={},zb={exports:{}},Vb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A4;function NI(){if(A4)return Vb;A4=1;var e=am();function t(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var r=typeof Object.is=="function"?Object.is:t,a=e.useState,s=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function u(g,v){var x=v(),j=a({inst:{value:x,getSnapshot:v}}),b=j[0].inst,S=j[1];return i(function(){b.value=x,b.getSnapshot=v,d(b)&&S({inst:b})},[g,x,v]),s(function(){return d(b)&&S({inst:b}),g(function(){d(b)&&S({inst:b})})},[g]),l(x),x}function d(g){var v=g.getSnapshot;g=g.value;try{var x=v();return!r(g,x)}catch{return!0}}function f(g,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return Vb.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,Vb}var C4;function SI(){return C4||(C4=1,zb.exports=NI()),zb.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k4;function AI(){if(k4)return $b;k4=1;var e=am(),t=SI();function r(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var a=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,i=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return $b.useSyncExternalStoreWithSelector=function(f,m,g,v,x){var j=i(null);if(j.current===null){var b={hasValue:!1,value:null};j.current=b}else b=j.current;j=u(function(){function A(B){if(!E){if(E=!0,T=B,B=v(B),x!==void 0&&b.hasValue){var U=b.value;if(x(U,B))return D=U}return D=B}if(U=D,a(T,B))return U;var I=v(B);return x!==void 0&&x(U,I)?(T=B,U):(T=B,D=I)}var E=!1,T,D,R=g===void 0?null:g;return[function(){return A(m())},R===null?void 0:function(){return A(R())}]},[m,g,v,x]);var S=s(f,j[0],j[1]);return l(function(){b.hasValue=!0,b.value=S},[S]),d(S),S},$b}var E4;function CI(){return E4||(E4=1,Ub.exports=AI()),Ub.exports}var kI=CI(),nj=_.createContext(null),EI=e=>e,an=()=>{var e=_.useContext(nj);return e?e.store.dispatch:EI},G0=()=>{},PI=()=>G0,TI=(e,t)=>e===t;function er(e){var t=_.useContext(nj);return kI.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:PI,t?t.store.getState:G0,t?t.store.getState:G0,t?e:G0,TI)}function OI(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function DI(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function RI(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${r}]`)}}var P4=e=>Array.isArray(e)?e:[e];function LI(e){const t=Array.isArray(e[0])?e[0]:e;return RI(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function MI(e,t){const r=[],{length:a}=e;for(let s=0;s<a;s++)r.push(e[s].apply(null,t));return r}var II=class{constructor(e){this.value=e}deref(){return this.value}},qI=typeof WeakRef<"u"?WeakRef:II,FI=0,T4=1;function x0(){return{s:FI,v:void 0,o:null,p:null}}function xE(e,t={}){let r=x0();const{resultEqualityCheck:a}=t;let s,i=0;function l(){var g;let u=r;const{length:d}=arguments;for(let v=0,x=d;v<x;v++){const j=arguments[v];if(typeof j=="function"||typeof j=="object"&&j!==null){let b=u.o;b===null&&(u.o=b=new WeakMap);const S=b.get(j);S===void 0?(u=x0(),b.set(j,u)):u=S}else{let b=u.p;b===null&&(u.p=b=new Map);const S=b.get(j);S===void 0?(u=x0(),b.set(j,u)):u=S}}const f=u;let m;if(u.s===T4)m=u.v;else if(m=e.apply(null,arguments),i++,a){const v=((g=s==null?void 0:s.deref)==null?void 0:g.call(s))??s;v!=null&&a(v,m)&&(m=v,i!==0&&i--),s=typeof m=="object"&&m!==null||typeof m=="function"?new qI(m):m}return f.s=T4,f.v=m,m}return l.clearCache=()=>{r=x0(),l.resetResultsCount()},l.resultsCount=()=>i,l.resetResultsCount=()=>{i=0},l}function BI(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...s)=>{let i=0,l=0,u,d={},f=s.pop();typeof f=="object"&&(d=f,f=s.pop()),OI(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const m={...r,...d},{memoize:g,memoizeOptions:v=[],argsMemoize:x=xE,argsMemoizeOptions:j=[]}=m,b=P4(v),S=P4(j),A=LI(s),E=g(function(){return i++,f.apply(null,arguments)},...b),T=x(function(){l++;const R=MI(A,arguments);return u=E.apply(null,R),u},...S);return Object.assign(T,{resultFunc:f,memoizedResultFunc:E,dependencies:A,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:g,argsMemoize:x})};return Object.assign(a,{withTypes:()=>a}),a}var nt=BI(xE),UI=Object.assign((e,t=nt)=>{DI(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),a=r.map(i=>e[i]);return t(a,(...i)=>i.reduce((l,u,d)=>(l[r[d]]=u,l),{}))},{withTypes:()=>UI}),Hb={},Gb={},Kb={},O4;function $I(){return O4||(O4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const r=(a,s,i)=>{if(a!==s){const l=t(a),u=t(s);if(l===u&&l===0){if(a<s)return i==="desc"?1:-1;if(a>s)return i==="desc"?-1:1}return i==="desc"?u-l:l-u}return 0};e.compareValues=r}(Kb)),Kb}var Wb={},Yb={},D4;function vE(){return D4||(D4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(Yb)),Yb}var R4;function zI(){return R4||(R4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vE(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(i,l){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(a.test(i)||!r.test(i))||l!=null&&Object.hasOwn(l,i)}e.isKey=s}(Wb)),Wb}var L4;function VI(){return L4||(L4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$I(),r=zI(),a=$w();function s(i,l,u,d){if(i==null)return[];u=d?void 0:u,Array.isArray(i)||(i=Object.values(i)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const f=(x,j)=>{let b=x;for(let S=0;S<j.length&&b!=null;++S)b=b[j[S]];return b},m=(x,j)=>j==null||x==null?j:typeof x=="object"&&"key"in x?Object.hasOwn(j,x.key)?j[x.key]:f(j,x.path):typeof x=="function"?x(j):Array.isArray(x)?f(j,x):typeof j=="object"?j[x]:j,g=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:a.toPath(x)}));return i.map(x=>({original:x,criteria:g.map(j=>m(j,x))})).slice().sort((x,j)=>{for(let b=0;b<g.length;b++){const S=t.compareValues(x.criteria[b],j.criteria[b],u[b]);if(S!==0)return S}return 0}).map(x=>x.original)}e.orderBy=s}(Gb)),Gb}var Xb={},M4;function HI(){return M4||(M4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a=1){const s=[],i=Math.floor(a),l=(u,d)=>{for(let f=0;f<u.length;f++){const m=u[f];Array.isArray(m)&&d<i?l(m,d+1):s.push(m)}};return l(r,0),s}e.flatten=t}(Xb)),Xb}var Zb={},I4;function yE(){return I4||(I4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pE(),r=Qw(),a=dE(),s=ej();function i(l,u,d){return a.isObject(d)&&(typeof u=="number"&&r.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?s.eq(d[u],l):!1}e.isIterateeCall=i}(Zb)),Zb}var q4;function GI(){return q4||(q4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VI(),r=HI(),a=yE();function s(i,...l){const u=l.length;return u>1&&a.isIterateeCall(i,l[0],l[1])?l=[]:u>2&&a.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(i,r.flatten(l),["asc"])}e.sortBy=s}(Hb)),Hb}var Jb,F4;function KI(){return F4||(F4=1,Jb=GI().sortBy),Jb}var WI=KI();const Qx=Eo(WI);var bE=e=>e.legend.settings,YI=e=>e.legend.size,XI=e=>e.legend.payload,ZI=nt([XI,bE],(e,t)=>{var{itemSorter:r}=t,a=e.flat(1);return r?Qx(a,r):a});function JI(){return er(ZI)}var v0=1;function wE(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=_.useState({height:0,left:0,top:0,width:0}),a=_.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),l={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(l.height-t.height)>v0||Math.abs(l.left-t.left)>v0||Math.abs(l.top-t.top)>v0||Math.abs(l.width-t.width)>v0)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function As(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var QI=typeof Symbol=="function"&&Symbol.observable||"@@observable",B4=QI,Qb=()=>Math.random().toString(36).substring(7).split("").join("."),eq={INIT:`@@redux/INIT${Qb()}`,REPLACE:`@@redux/REPLACE${Qb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Qb()}`},dx=eq;function sj(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function jE(e,t,r){if(typeof e!="function")throw new Error(As(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(As(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(As(1));return r(jE)(e,t)}let a=e,s=t,i=new Map,l=i,u=0,d=!1;function f(){l===i&&(l=new Map,i.forEach((S,A)=>{l.set(A,S)}))}function m(){if(d)throw new Error(As(3));return s}function g(S){if(typeof S!="function")throw new Error(As(4));if(d)throw new Error(As(5));let A=!0;f();const E=u++;return l.set(E,S),function(){if(A){if(d)throw new Error(As(6));A=!1,f(),l.delete(E),i=null}}}function v(S){if(!sj(S))throw new Error(As(7));if(typeof S.type>"u")throw new Error(As(8));if(typeof S.type!="string")throw new Error(As(17));if(d)throw new Error(As(9));try{d=!0,s=a(s,S)}finally{d=!1}return(i=l).forEach(E=>{E()}),S}function x(S){if(typeof S!="function")throw new Error(As(10));a=S,v({type:dx.REPLACE})}function j(){const S=g;return{subscribe(A){if(typeof A!="object"||A===null)throw new Error(As(11));function E(){const D=A;D.next&&D.next(m())}return E(),{unsubscribe:S(E)}},[B4](){return this}}}return v({type:dx.INIT}),{dispatch:v,subscribe:g,getState:m,replaceReducer:x,[B4]:j}}function tq(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:dx.INIT})>"u")throw new Error(As(12));if(typeof r(void 0,{type:dx.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(As(13))})}function _E(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const l=t[i];typeof e[l]=="function"&&(r[l]=e[l])}const a=Object.keys(r);let s;try{tq(r)}catch(i){s=i}return function(l={},u){if(s)throw s;let d=!1;const f={};for(let m=0;m<a.length;m++){const g=a[m],v=r[g],x=l[g],j=v(x,u);if(typeof j>"u")throw u&&u.type,new Error(As(14));f[g]=j,d=d||j!==x}return d=d||a.length!==Object.keys(l).length,d?f:l}}function fx(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...a)=>t(r(...a)))}function rq(...e){return t=>(r,a)=>{const s=t(r,a);let i=()=>{throw new Error(As(15))};const l={getState:s.getState,dispatch:(d,...f)=>i(d,...f)},u=e.map(d=>d(l));return i=fx(...u)(s.dispatch),{...s,dispatch:i}}}function NE(e){return sj(e)&&"type"in e&&typeof e.type=="string"}var SE=Symbol.for("immer-nothing"),U4=Symbol.for("immer-draftable"),Ki=Symbol.for("immer-state");function ll(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Hh=Object.getPrototypeOf;function pf(e){return!!e&&!!e[Ki]}function Yc(e){var t;return e?AE(e)||Array.isArray(e)||!!e[U4]||!!((t=e.constructor)!=null&&t[U4])||tv(e)||rv(e):!1}var aq=Object.prototype.constructor.toString();function AE(e){if(!e||typeof e!="object")return!1;const t=Hh(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===aq}function hx(e,t){ev(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,a)=>t(a,r,e))}function ev(e){const t=e[Ki];return t?t.type_:Array.isArray(e)?1:tv(e)?2:rv(e)?3:0}function D2(e,t){return ev(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function CE(e,t,r){const a=ev(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function nq(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function tv(e){return e instanceof Map}function rv(e){return e instanceof Set}function Zd(e){return e.copy_||e.base_}function R2(e,t){if(tv(e))return new Map(e);if(rv(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=AE(e);if(t===!0||t==="class_only"&&!r){const a=Object.getOwnPropertyDescriptors(e);delete a[Ki];let s=Reflect.ownKeys(a);for(let i=0;i<s.length;i++){const l=s[i],u=a[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(a[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Hh(e),a)}else{const a=Hh(e);if(a!==null&&r)return{...e};const s=Object.create(a);return Object.assign(s,e)}}function ij(e,t=!1){return av(e)||pf(e)||!Yc(e)||(ev(e)>1&&(e.set=e.add=e.clear=e.delete=sq),Object.freeze(e),t&&Object.entries(e).forEach(([r,a])=>ij(a,!0))),e}function sq(){ll(2)}function av(e){return Object.isFrozen(e)}var iq={};function gf(e){const t=iq[e];return t||ll(0,e),t}var Cp;function kE(){return Cp}function oq(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function $4(e,t){t&&(gf("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function L2(e){M2(e),e.drafts_.forEach(lq),e.drafts_=null}function M2(e){e===Cp&&(Cp=e.parent_)}function z4(e){return Cp=oq(Cp,e)}function lq(e){const t=e[Ki];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function V4(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Ki].modified_&&(L2(t),ll(4)),Yc(e)&&(e=mx(t,e),t.parent_||px(t,e)),t.patches_&&gf("Patches").generateReplacementPatches_(r[Ki].base_,e,t.patches_,t.inversePatches_)):e=mx(t,r,[]),L2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==SE?e:void 0}function mx(e,t,r){if(av(t))return t;const a=t[Ki];if(!a)return hx(t,(s,i)=>H4(e,a,t,s,i,r)),t;if(a.scope_!==e)return t;if(!a.modified_)return px(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let i=s,l=!1;a.type_===3&&(i=new Set(s),s.clear(),l=!0),hx(i,(u,d)=>H4(e,a,s,u,d,r,l)),px(e,s,!1),r&&e.patches_&&gf("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function H4(e,t,r,a,s,i,l){if(pf(s)){const u=i&&t&&t.type_!==3&&!D2(t.assigned_,a)?i.concat(a):void 0,d=mx(e,s,u);if(CE(r,a,d),pf(d))e.canAutoFreeze_=!1;else return}else l&&r.add(s);if(Yc(s)&&!av(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;mx(e,s),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,a)&&px(e,s)}}function px(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ij(t,r)}function cq(e,t){const r=Array.isArray(e),a={type_:r?1:0,scope_:t?t.scope_:kE(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=a,i=oj;r&&(s=[a],i=kp);const{revoke:l,proxy:u}=Proxy.revocable(s,i);return a.draft_=u,a.revoke_=l,u}var oj={get(e,t){if(t===Ki)return e;const r=Zd(e);if(!D2(r,t))return uq(e,r,t);const a=r[t];return e.finalized_||!Yc(a)?a:a===e1(e.base_,t)?(t1(e),e.copy_[t]=q2(a,e)):a},has(e,t){return t in Zd(e)},ownKeys(e){return Reflect.ownKeys(Zd(e))},set(e,t,r){const a=EE(Zd(e),t);if(a!=null&&a.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const s=e1(Zd(e),t),i=s==null?void 0:s[Ki];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(nq(r,s)&&(r!==void 0||D2(e.base_,t)))return!0;t1(e),I2(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return e1(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,t1(e),I2(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Zd(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty(){ll(11)},getPrototypeOf(e){return Hh(e.base_)},setPrototypeOf(){ll(12)}},kp={};hx(oj,(e,t)=>{kp[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});kp.deleteProperty=function(e,t){return kp.set.call(this,e,t,void 0)};kp.set=function(e,t,r){return oj.set.call(this,e[0],t,r,e[0])};function e1(e,t){const r=e[Ki];return(r?Zd(r):e)[t]}function uq(e,t,r){var s;const a=EE(t,r);return a?"value"in a?a.value:(s=a.get)==null?void 0:s.call(e.draft_):void 0}function EE(e,t){if(!(t in e))return;let r=Hh(e);for(;r;){const a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=Hh(r)}}function I2(e){e.modified_||(e.modified_=!0,e.parent_&&I2(e.parent_))}function t1(e){e.copy_||(e.copy_=R2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var dq=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,a)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const l=this;return function(d=i,...f){return l.produce(d,m=>r.call(this,m,...f))}}typeof r!="function"&&ll(6),a!==void 0&&typeof a!="function"&&ll(7);let s;if(Yc(t)){const i=z4(this),l=q2(t,void 0);let u=!0;try{s=r(l),u=!1}finally{u?L2(i):M2(i)}return $4(i,a),V4(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===SE&&(s=void 0),this.autoFreeze_&&ij(s,!0),a){const i=[],l=[];gf("Patches").generateReplacementPatches_(t,s,i,l),a(i,l)}return s}else ll(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let a,s;return[this.produce(t,r,(l,u)=>{a=l,s=u}),a,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Yc(e)||ll(8),pf(e)&&(e=Kc(e));const t=z4(this),r=q2(e,void 0);return r[Ki].isManual_=!0,M2(t),r}finishDraft(e,t){const r=e&&e[Ki];(!r||!r.isManual_)&&ll(9);const{scope_:a}=r;return $4(a,t),V4(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const a=gf("Patches").applyPatches_;return pf(e)?a(e,t):this.produce(e,s=>a(s,t))}};function q2(e,t){const r=tv(e)?gf("MapSet").proxyMap_(e,t):rv(e)?gf("MapSet").proxySet_(e,t):cq(e,t);return(t?t.scope_:kE()).drafts_.push(r),r}function Kc(e){return pf(e)||ll(10,e),PE(e)}function PE(e){if(!Yc(e)||av(e))return e;const t=e[Ki];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=R2(e,t.scope_.immer_.useStrictShallowCopy_)}else r=R2(e,!0);return hx(r,(a,s)=>{CE(r,a,PE(s))}),t&&(t.finalized_=!1),r}var Wi=new dq,TE=Wi.produce;Wi.produceWithPatches.bind(Wi);Wi.setAutoFreeze.bind(Wi);Wi.setUseStrictShallowCopy.bind(Wi);Wi.applyPatches.bind(Wi);Wi.createDraft.bind(Wi);Wi.finishDraft.bind(Wi);function OE(e){return({dispatch:r,getState:a})=>s=>i=>typeof i=="function"?i(r,a,e):s(i)}var fq=OE(),hq=OE,mq=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?fx:fx.apply(null,arguments)};function Ao(e,t){function r(...a){if(t){let s=t(...a);if(!s)throw new Error(Hi(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:a[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=a=>NE(a)&&a.type===e,r}var DE=class gp extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,gp.prototype)}static get[Symbol.species](){return gp}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new gp(...t[0].concat(this)):new gp(...t.concat(this))}};function G4(e){return Yc(e)?TE(e,()=>{}):e}function y0(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function pq(e){return typeof e=="boolean"}var gq=()=>function(t){const{thunk:r=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let l=new DE;return r&&(pq(r)?l.push(fq):l.push(hq(r.extraArgument))),l},xq="RTK_autoBatch",K4=e=>t=>{setTimeout(t,e)},vq=(e={type:"raf"})=>t=>(...r)=>{const a=t(...r);let s=!0,i=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:K4(10):e.type==="callback"?e.queueNotification:K4(e.timeout),f=()=>{l=!1,i&&(i=!1,u.forEach(m=>m()))};return Object.assign({},a,{subscribe(m){const g=()=>s&&m(),v=a.subscribe(g);return u.add(m),()=>{v(),u.delete(m)}},dispatch(m){var g;try{return s=!((g=m==null?void 0:m.meta)!=null&&g[xq]),i=!s,i&&(l||(l=!0,d(f))),a.dispatch(m)}finally{s=!0}}})},yq=e=>function(r){const{autoBatch:a=!0}=r??{};let s=new DE(e);return a&&s.push(vq(typeof a=="object"?a:void 0)),s};function bq(e){const t=gq(),{reducer:r=void 0,middleware:a,devTools:s=!0,preloadedState:i=void 0,enhancers:l=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(sj(r))u=_E(r);else throw new Error(Hi(1));let d;typeof a=="function"?d=a(t):d=t();let f=fx;s&&(f=mq({trace:!1,...typeof s=="object"&&s}));const m=rq(...d),g=yq(m);let v=typeof l=="function"?l(g):g();const x=f(...v);return jE(u,i,x)}function RE(e){const t={},r=[];let a;const s={addCase(i,l){const u=typeof i=="string"?i:i.type;if(!u)throw new Error(Hi(28));if(u in t)throw new Error(Hi(29));return t[u]=l,s},addMatcher(i,l){return r.push({matcher:i,reducer:l}),s},addDefaultCase(i){return a=i,s}};return e(s),[t,r,a]}function wq(e){return typeof e=="function"}function jq(e,t){let[r,a,s]=RE(t),i;if(wq(e))i=()=>G4(e());else{const u=G4(e);i=()=>u}function l(u=i(),d){let f=[r[d.type],...a.filter(({matcher:m})=>m(d)).map(({reducer:m})=>m)];return f.filter(m=>!!m).length===0&&(f=[s]),f.reduce((m,g)=>{if(g)if(pf(m)){const x=g(m,d);return x===void 0?m:x}else{if(Yc(m))return TE(m,v=>g(v,d));{const v=g(m,d);if(v===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return m},u)}return l.getInitialState=i,l}var _q="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Nq=(e=21)=>{let t="",r=e;for(;r--;)t+=_q[Math.random()*64|0];return t},Sq=Symbol.for("rtk-slice-createasyncthunk");function Aq(e,t){return`${e}/${t}`}function Cq({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[Sq];return function(s){const{name:i,reducerPath:l=i}=s;if(!i)throw new Error(Hi(11));const u=(typeof s.reducers=="function"?s.reducers(Eq()):s.reducers)||{},d=Object.keys(u),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(D,R){const B=typeof D=="string"?D:D.type;if(!B)throw new Error(Hi(12));if(B in f.sliceCaseReducersByType)throw new Error(Hi(13));return f.sliceCaseReducersByType[B]=R,m},addMatcher(D,R){return f.sliceMatchers.push({matcher:D,reducer:R}),m},exposeAction(D,R){return f.actionCreators[D]=R,m},exposeCaseReducer(D,R){return f.sliceCaseReducersByName[D]=R,m}};d.forEach(D=>{const R=u[D],B={reducerName:D,type:Aq(i,D),createNotation:typeof s.reducers=="function"};Tq(R)?Dq(B,R,m,t):Pq(B,R,m)});function g(){const[D={},R=[],B=void 0]=typeof s.extraReducers=="function"?RE(s.extraReducers):[s.extraReducers],U={...D,...f.sliceCaseReducersByType};return jq(s.initialState,I=>{for(let F in U)I.addCase(F,U[F]);for(let F of f.sliceMatchers)I.addMatcher(F.matcher,F.reducer);for(let F of R)I.addMatcher(F.matcher,F.reducer);B&&I.addDefaultCase(B)})}const v=D=>D,x=new Map,j=new WeakMap;let b;function S(D,R){return b||(b=g()),b(D,R)}function A(){return b||(b=g()),b.getInitialState()}function E(D,R=!1){function B(I){let F=I[D];return typeof F>"u"&&R&&(F=y0(j,B,A)),F}function U(I=v){const F=y0(x,R,()=>new WeakMap);return y0(F,I,()=>{const pe={};for(const[L,q]of Object.entries(s.selectors??{}))pe[L]=kq(q,I,()=>y0(j,I,A),R);return pe})}return{reducerPath:D,getSelectors:U,get selectors(){return U(B)},selectSlice:B}}const T={name:i,reducer:S,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:A,...E(l),injectInto(D,{reducerPath:R,...B}={}){const U=R??l;return D.inject({reducerPath:U,reducer:S},B),{...T,...E(U,!0)}}};return T}}function kq(e,t,r,a){function s(i,...l){let u=t(i);return typeof u>"u"&&a&&(u=r()),e(u,...l)}return s.unwrapped=e,s}var Po=Cq();function Eq(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Pq({type:e,reducerName:t,createNotation:r},a,s){let i,l;if("reducer"in a){if(r&&!Oq(a))throw new Error(Hi(17));i=a.reducer,l=a.prepare}else i=a;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,l?Ao(e,l):Ao(e))}function Tq(e){return e._reducerDefinitionType==="asyncThunk"}function Oq(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Dq({type:e,reducerName:t},r,a,s){if(!s)throw new Error(Hi(18));const{payloadCreator:i,fulfilled:l,pending:u,rejected:d,settled:f,options:m}=r,g=s(e,i,m);a.exposeAction(t,g),l&&a.addCase(g.fulfilled,l),u&&a.addCase(g.pending,u),d&&a.addCase(g.rejected,d),f&&a.addMatcher(g.settled,f),a.exposeCaseReducer(t,{fulfilled:l||b0,pending:u||b0,rejected:d||b0,settled:f||b0})}function b0(){}var Rq="task",LE="listener",ME="completed",lj="cancelled",Lq=`task-${lj}`,Mq=`task-${ME}`,F2=`${LE}-${lj}`,Iq=`${LE}-${ME}`,nv=class{constructor(e){ca(this,"name","TaskAbortError");ca(this,"message");this.code=e,this.message=`${Rq} ${lj} (reason: ${e})`}},cj=(e,t)=>{if(typeof e!="function")throw new TypeError(Hi(32))},gx=()=>{},IE=(e,t=gx)=>(e.catch(t),e),qE=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),cf=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},uf=e=>{if(e.aborted){const{reason:t}=e;throw new nv(t)}};function FE(e,t){let r=gx;return new Promise((a,s)=>{const i=()=>s(new nv(e.reason));if(e.aborted){i();return}r=qE(e,i),t.finally(()=>r()).then(a,s)}).finally(()=>{r=gx})}var qq=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof nv?"cancelled":"rejected",error:r}}finally{t==null||t()}},xx=e=>t=>IE(FE(e,t).then(r=>(uf(e),r))),BE=e=>{const t=xx(e);return r=>t(new Promise(a=>setTimeout(a,r)))},{assign:Mh}=Object,W4={},sv="listenerMiddleware",Fq=(e,t)=>{const r=a=>qE(e,()=>cf(a,e.reason));return(a,s)=>{cj(a);const i=new AbortController;r(i);const l=qq(async()=>{uf(e),uf(i.signal);const u=await a({pause:xx(i.signal),delay:BE(i.signal),signal:i.signal});return uf(i.signal),u},()=>cf(i,Mq));return s!=null&&s.autoJoin&&t.push(l.catch(gx)),{result:xx(e)(l),cancel(){cf(i,Lq)}}}},Bq=(e,t)=>{const r=async(a,s)=>{uf(t);let i=()=>{};const u=[new Promise((d,f)=>{let m=e({predicate:a,effect:(g,v)=>{v.unsubscribe(),d([g,v.getState(),v.getOriginalState()])}});i=()=>{m(),f()}})];s!=null&&u.push(new Promise(d=>setTimeout(d,s,null)));try{const d=await FE(t,Promise.race(u));return uf(t),d}finally{i()}};return(a,s)=>IE(r(a,s))},UE=e=>{let{type:t,actionCreator:r,matcher:a,predicate:s,effect:i}=e;if(t)s=Ao(t).match;else if(r)t=r.type,s=r.match;else if(a)s=a;else if(!s)throw new Error(Hi(21));return cj(i),{predicate:s,type:t,effect:i}},$E=Mh(e=>{const{type:t,predicate:r,effect:a}=UE(e);return{id:Nq(),effect:a,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Hi(22))}}},{withTypes:()=>$E}),Y4=(e,t)=>{const{type:r,effect:a,predicate:s}=UE(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===a)},B2=e=>{e.pending.forEach(t=>{cf(t,F2)})},Uq=e=>()=>{e.forEach(B2),e.clear()},X4=(e,t,r)=>{try{e(t,r)}catch(a){setTimeout(()=>{throw a},0)}},zE=Mh(Ao(`${sv}/add`),{withTypes:()=>zE}),$q=Ao(`${sv}/removeAll`),VE=Mh(Ao(`${sv}/remove`),{withTypes:()=>VE}),zq=(...e)=>{console.error(`${sv}/error`,...e)},Jp=(e={})=>{const t=new Map,{extra:r,onError:a=zq}=e;cj(a);const s=m=>(m.unsubscribe=()=>t.delete(m.id),t.set(m.id,m),g=>{m.unsubscribe(),g!=null&&g.cancelActive&&B2(m)}),i=m=>{const g=Y4(t,m)??$E(m);return s(g)};Mh(i,{withTypes:()=>i});const l=m=>{const g=Y4(t,m);return g&&(g.unsubscribe(),m.cancelActive&&B2(g)),!!g};Mh(l,{withTypes:()=>l});const u=async(m,g,v,x)=>{const j=new AbortController,b=Bq(i,j.signal),S=[];try{m.pending.add(j),await Promise.resolve(m.effect(g,Mh({},v,{getOriginalState:x,condition:(A,E)=>b(A,E).then(Boolean),take:b,delay:BE(j.signal),pause:xx(j.signal),extra:r,signal:j.signal,fork:Fq(j.signal,S),unsubscribe:m.unsubscribe,subscribe:()=>{t.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((A,E,T)=>{A!==j&&(cf(A,F2),T.delete(A))})},cancel:()=>{cf(j,F2),m.pending.delete(j)},throwIfCancelled:()=>{uf(j.signal)}})))}catch(A){A instanceof nv||X4(a,A,{raisedBy:"effect"})}finally{await Promise.all(S),cf(j,Iq),m.pending.delete(j)}},d=Uq(t);return{middleware:m=>g=>v=>{if(!NE(v))return g(v);if(zE.match(v))return i(v.payload);if($q.match(v)){d();return}if(VE.match(v))return l(v.payload);let x=m.getState();const j=()=>{if(x===W4)throw new Error(Hi(23));return x};let b;try{if(b=g(v),t.size>0){const S=m.getState(),A=Array.from(t.values());for(const E of A){let T=!1;try{T=E.predicate(v,S,x)}catch(D){T=!1,X4(a,D,{raisedBy:"predicate"})}T&&u(E,v,m,j)}}}finally{x=W4}return b},startListening:i,stopListening:l,clearListeners:d}};function Hi(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Vq={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},HE=Po({name:"chartLayout",initialState:Vq,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:Hq,setLayout:Gq,setChartSize:Kq,setScale:Wq}=HE.actions,Yq=HE.reducer;function Z4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function J4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z4(Object(r),!0).forEach(function(a){Xq(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Xq(e,t,r){return(t=Zq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zq(e){var t=Jq(e,"string");return typeof t=="symbol"?t:t+""}function Jq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vx=Math.PI/180,Qq=e=>e*180/Math.PI,Fn=(e,t,r,a)=>({x:e+Math.cos(-vx*a)*r,y:t+Math.sin(-vx*a)*r}),GE=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(r-(a.top||0)-(a.bottom||0)))/2},eF=(e,t)=>{var{x:r,y:a}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(a-i)**2)},tF=(e,t)=>{var{x:r,y:a}=e,{cx:s,cy:i}=t,l=eF({x:r,y:a},{x:s,y:i});if(l<=0)return{radius:l,angle:0};var u=(r-s)/l,d=Math.acos(u);return a>i&&(d=2*Math.PI-d),{radius:l,angle:Qq(d),angleInRadian:d}},rF=e=>{var{startAngle:t,endAngle:r}=e,a=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(a,s);return{startAngle:t-i*360,endAngle:r-i*360}},aF=(e,t)=>{var{startAngle:r,endAngle:a}=t,s=Math.floor(r/360),i=Math.floor(a/360),l=Math.min(s,i);return e+l*360},nF=(e,t)=>{var{x:r,y:a}=e,{radius:s,angle:i}=tF({x:r,y:a},t),{innerRadius:l,outerRadius:u}=t;if(s<l||s>u||s===0)return null;var{startAngle:d,endAngle:f}=rF(t),m=i,g;if(d<=f){for(;m>f;)m-=360;for(;m<d;)m+=360;g=m>=d&&m<=f}else{for(;m>d;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=d}return g?J4(J4({},t),{},{radius:s,angle:aF(m,t)}):null};function Q4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function vo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q4(Object(r),!0).forEach(function(a){sF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function sF(e,t,r){return(t=iF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iF(e){var t=oF(e,"string");return typeof t=="symbol"?t:t+""}function oF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Va(e,t,r){return Ta(e)||Ta(t)?r:ec(t)?ld(e,t,r):typeof t=="function"?t(e):r}var lF=(e,t,r,a,s)=>{var i,l=-1,u=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(u<=1||e==null)return 0;if(a==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var d=0;d<u;d++){var f=d>0?r[d-1].coordinate:r[u-1].coordinate,m=r[d].coordinate,g=d>=u-1?r[0].coordinate:r[d+1].coordinate,v=void 0;if(fs(m-f)!==fs(g-m)){var x=[];if(fs(g-m)===fs(s[1]-s[0])){v=g;var j=m+s[1]-s[0];x[0]=Math.min(j,(j+f)/2),x[1]=Math.max(j,(j+f)/2)}else{v=f;var b=g+s[1]-s[0];x[0]=Math.min(m,(b+m)/2),x[1]=Math.max(m,(b+m)/2)}var S=[Math.min(m,(v+m)/2),Math.max(m,(v+m)/2)];if(e>S[0]&&e<=S[1]||e>=x[0]&&e<=x[1]){({index:l}=r[d]);break}}else{var A=Math.min(f,g),E=Math.max(f,g);if(e>(A+m)/2&&e<=(E+m)/2){({index:l}=r[d]);break}}}else if(t){for(var T=0;T<u;T++)if(T===0&&e<=(t[T].coordinate+t[T+1].coordinate)/2||T>0&&T<u-1&&e>(t[T].coordinate+t[T-1].coordinate)/2&&e<=(t[T].coordinate+t[T+1].coordinate)/2||T===u-1&&e>(t[T].coordinate+t[T-1].coordinate)/2){({index:l}=t[T]);break}}return l},cF=(e,t,r)=>{if(t&&r){var{width:a,height:s}=r,{align:i,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&i!=="center"&&Wt(e[i]))return vo(vo({},e),{},{[i]:e[i]+(a||0)});if((u==="horizontal"||u==="vertical"&&i==="center")&&l!=="middle"&&Wt(e[l]))return vo(vo({},e),{},{[l]:e[l]+(s||0)})}return e},xd=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",KE=(e,t,r,a)=>{if(a)return e.map(u=>u.coordinate);var s,i,l=e.map(u=>(u.coordinate===t&&(s=!0),u.coordinate===r&&(i=!0),u.coordinate));return s||l.push(t),i||l.push(r),l},WE=(e,t,r)=>{if(!e)return null;var{duplicateDomain:a,type:s,range:i,scale:l,realScaleType:u,isCategorical:d,categoricalDomain:f,tickCount:m,ticks:g,niceTicks:v,axisType:x}=e;if(!l)return null;var j=u==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,b=s==="category"&&l.bandwidth?l.bandwidth()/j:0;if(b=x==="angleAxis"&&i&&i.length>=2?fs(i[0]-i[1])*2*b:b,g||v){var S=(g||v||[]).map((A,E)=>{var T=a?a.indexOf(A):A;return{coordinate:l(T)+b,value:A,offset:b,index:E}});return S.filter(A=>!Gi(A.coordinate))}return d&&f?f.map((A,E)=>({coordinate:l(A)+b,value:A,index:E,offset:b})):l.ticks&&m!=null?l.ticks(m).map((A,E)=>({coordinate:l(A)+b,value:A,offset:b,index:E})):l.domain().map((A,E)=>({coordinate:l(A)+b,value:a?a[A]:A,index:E,offset:b}))},e3=1e-4,uF=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,a=e.range(),s=Math.min(a[0],a[1])-e3,i=Math.max(a[0],a[1])+e3,l=e(t[0]),u=e(t[r-1]);(l<s||l>i||u<s||u>i)&&e.domain([t[0],t[r-1]])}},dF=(e,t)=>{if(!t||t.length!==2||!Wt(t[0])||!Wt(t[1]))return e;var r=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!Wt(e[0])||e[0]<r)&&(s[0]=r),(!Wt(e[1])||e[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<r&&(s[1]=r),s},fF=e=>{var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var s=0,i=0,l=0;l<t;++l){var u=Gi(e[l][r][1])?e[l][r][0]:e[l][r][1];u>=0?(e[l][r][0]=s,e[l][r][1]=s+u,s=e[l][r][1]):(e[l][r][0]=i,e[l][r][1]=i+u,i=e[l][r][1])}},hF=e=>{var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var s=0,i=0;i<t;++i){var l=Gi(e[i][r][1])?e[i][r][0]:e[i][r][1];l>=0?(e[i][r][0]=s,e[i][r][1]=s+l,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},mF={sign:fF,expand:VM,none:Vh,silhouette:HM,wiggle:GM,positive:hF},pF=(e,t,r)=>{var a=mF[r],s=zM().keys(t).value((i,l)=>+Va(i,l,0)).order(P2).offset(a);return s(e)};function YE(e){return e==null?void 0:String(e)}function t3(e){var{axis:t,ticks:r,bandSize:a,entry:s,index:i,dataKey:l}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ta(s[t.dataKey])){var u=$k(r,"value",s[t.dataKey]);if(u)return u.coordinate+a/2}return r[i]?r[i].coordinate+a/2:null}var d=Va(s,Ta(l)?t.dataKey:l);return Ta(d)?null:t.scale(d)}var r3=e=>{var{axis:t,ticks:r,offset:a,bandSize:s,entry:i,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+a:null;var u=Va(i,t.dataKey,t.scale.domain()[l]);return Ta(u)?null:t.scale(u)-s/2+a},gF=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return a<=0&&s>=0?0:s<0?s:a}return r[0]},xF=e=>{var t=e.flat(2).filter(Wt);return[Math.min(...t),Math.max(...t)]},vF=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],yF=(e,t,r)=>{if(e!=null)return vF(Object.keys(e).reduce((a,s)=>{var i=e[s],{stackedData:l}=i,u=l.reduce((d,f)=>{var m=xF(f.slice(t,r+1));return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(u[0],a[0]),Math.max(u[1],a[1])]},[1/0,-1/0]))},a3=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,n3=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ep=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!r||a>0)return a}if(e&&t&&t.length>=2){for(var s=Qx(t,m=>m.coordinate),i=1/0,l=1,u=s.length;l<u;l++){var d=s[l],f=s[l-1];i=Math.min((d.coordinate||0)-(f.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function s3(e){var{tooltipEntrySettings:t,dataKey:r,payload:a,value:s,name:i}=e;return vo(vo({},t),{},{dataKey:r,payload:a,value:s,name:i})}function sm(e,t){if(e)return String(e);if(typeof t=="string")return t}function bF(e,t,r,a,s){if(r==="horizontal"||r==="vertical"){var i=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return i?{x:e,y:t}:null}return a?nF({x:e,y:t},a):null}var wF=(e,t,r,a)=>{var s=t.find(f=>f&&f.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,{radius:l}=a;return vo(vo(vo({},a),Fn(a.cx,a.cy,l,i)),{},{angle:i,radius:l})}var u=s.coordinate,{angle:d}=a;return vo(vo(vo({},a),Fn(a.cx,a.cy,u,d)),{},{angle:d,radius:u})}return{x:0,y:0}},jF=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,nu=e=>e.layout.width,su=e=>e.layout.height,_F=e=>e.layout.scale,XE=e=>e.layout.margin,uj=nt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),dj=nt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),ZE="data-recharts-item-index",JE="data-recharts-item-data-key",iv=60;function i3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Gu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i3(Object(r),!0).forEach(function(a){NF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function NF(e,t,r){return(t=SF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SF(e){var t=AF(e,"string");return typeof t=="symbol"?t:t+""}function AF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CF=e=>e.brush.height,Xn=nt([nu,su,XE,CF,uj,dj,bE,YI],(e,t,r,a,s,i,l,u)=>{var d=i.reduce((j,b)=>{var{orientation:S}=b;if(!b.mirror&&!b.hide){var A=typeof b.width=="number"?b.width:iv;return Gu(Gu({},j),{},{[S]:j[S]+A})}return j},{left:r.left||0,right:r.right||0}),f=s.reduce((j,b)=>{var{orientation:S}=b;return!b.mirror&&!b.hide?Gu(Gu({},j),{},{[S]:ld(j,"".concat(S))+b.height}):j},{top:r.top||0,bottom:r.bottom||0}),m=Gu(Gu({},f),d),g=m.bottom;m.bottom+=a,m=cF(m,l,u);var v=e-m.left-m.right,x=t-m.top-m.bottom;return Gu(Gu({brushBottom:g},m),{},{width:Math.max(v,0),height:Math.max(x,0)})}),kF=nt(Xn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),QE=nt(nu,su,(e,t)=>({x:0,y:0,width:e,height:t})),EF=_.createContext(null),ai=()=>_.useContext(EF)!=null,ov=e=>e.brush,lv=nt([ov,Xn,XE],(e,t,r)=>({height:e.height,x:Wt(e.x)?e.x:t.left,y:Wt(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Wt(e.width)?e.width:t.width})),fj=()=>{var e,t=ai(),r=er(kF),a=er(lv),s=(e=er(ov))===null||e===void 0?void 0:e.padding;return!t||!a||!s?r:{width:a.width-s.left-s.right,height:a.height-s.top-s.bottom,x:s.left,y:s.top}},PF={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},eP=()=>{var e;return(e=er(Xn))!==null&&e!==void 0?e:PF},hj=()=>er(nu),mj=()=>er(su),TF={top:0,right:0,bottom:0,left:0},OF=()=>{var e;return(e=er(t=>t.layout.margin))!==null&&e!==void 0?e:TF},da=e=>e.layout.layoutType,cv=()=>er(da),DF={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},tP=Po({name:"legend",initialState:DF,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=Kc(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:o3,setLegendSettings:RF,addLegendPayload:rP,removeLegendPayload:aP}=tP.actions,LF=tP.reducer,MF=["contextPayload"];function U2(){return U2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},U2.apply(null,arguments)}function l3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Gh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l3(Object(r),!0).forEach(function(a){pj(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function pj(e,t,r){return(t=IF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IF(e){var t=qF(e,"string");return typeof t=="symbol"?t:t+""}function qF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FF(e,t){if(e==null)return{};var r,a,s=BF(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function BF(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function UF(e){return e.value}function $F(e){var{contextPayload:t}=e,r=FF(e,MF),a=gE(t,e.payloadUniqBy,UF),s=Gh(Gh({},r),{},{payload:a});return _.isValidElement(e.content)?_.cloneElement(e.content,s):typeof e.content=="function"?_.createElement(e.content,s):_.createElement(Jw,s)}function zF(e,t,r,a,s,i){var{layout:l,align:u,verticalAlign:d}=t,f,m;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&l==="vertical"?f={left:((a||0)-i.width)/2}:f=u==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(d==="middle"?m={top:((s||0)-i.height)/2}:m=d==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Gh(Gh({},f),m)}function VF(e){var t=an();return _.useEffect(()=>{t(RF(e))},[t,e]),null}function HF(e){var t=an();return _.useEffect(()=>(t(o3(e)),()=>{t(o3({width:0,height:0}))}),[t,e]),null}function GF(e){var t=JI(),r=hM(),a=OF(),{width:s,height:i,wrapperStyle:l,portal:u}=e,[d,f]=wE([t]),m=hj(),g=mj(),v=m-(a.left||0)-(a.right||0),x=Es.getWidthOrHeight(e.layout,i,s,v),j=u?l:Gh(Gh({position:"absolute",width:(x==null?void 0:x.width)||s||"auto",height:(x==null?void 0:x.height)||i||"auto"},zF(l,e,a,m,g,d)),l),b=u??r;if(b==null)return null;var S=_.createElement("div",{className:"recharts-legend-wrapper",style:j,ref:f},_.createElement(VF,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),_.createElement(HF,{width:d.width,height:d.height}),_.createElement($F,U2({},e,x,{margin:a,chartWidth:m,chartHeight:g,contextPayload:t})));return Hk.createPortal(S,b)}class Es extends _.PureComponent{static getWidthOrHeight(t,r,a,s){return t==="vertical"&&Wt(r)?{height:r}:t==="horizontal"?{width:a||s}:null}render(){return _.createElement(GF,this.props)}}pj(Es,"displayName","Legend");pj(Es,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function $2(){return $2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},$2.apply(null,arguments)}function c3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function r1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c3(Object(r),!0).forEach(function(a){KF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function KF(e,t,r){return(t=WF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WF(e){var t=YF(e,"string");return typeof t=="symbol"?t:t+""}function YF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XF(e){return Array.isArray(e)&&ec(e[0])&&ec(e[1])?e.join(" ~ "):e}var ZF=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:a={},labelStyle:s={},payload:i,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:f,label:m,labelFormatter:g,accessibilityLayer:v=!1}=e,x=()=>{if(i&&i.length){var R={padding:0,margin:0},B=(u?Qx(i,u):i).map((U,I)=>{if(U.type==="none")return null;var F=U.formatter||l||XF,{value:pe,name:L}=U,q=pe,z=L;if(F){var V=F(pe,L,U,I,i);if(Array.isArray(V))[q,z]=V;else if(V!=null)q=V;else return null}var de=r1({display:"block",paddingTop:4,paddingBottom:4,color:U.color||"#000"},a);return _.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:de},ec(z)?_.createElement("span",{className:"recharts-tooltip-item-name"},z):null,ec(z)?_.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,_.createElement("span",{className:"recharts-tooltip-item-value"},q),_.createElement("span",{className:"recharts-tooltip-item-unit"},U.unit||""))});return _.createElement("ul",{className:"recharts-tooltip-item-list",style:R},B)}return null},j=r1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),b=r1({margin:0},s),S=!Ta(m),A=S?m:"",E=aa("recharts-default-tooltip",d),T=aa("recharts-tooltip-label",f);S&&g&&i!==void 0&&i!==null&&(A=g(m,i));var D=v?{role:"status","aria-live":"assertive"}:{};return _.createElement("div",$2({className:E,style:j},D),_.createElement("p",{className:T,style:b},_.isValidElement(A)?A:"".concat(A)),x())},sp="recharts-tooltip-wrapper",JF={visibility:"hidden"};function QF(e){var{coordinate:t,translateX:r,translateY:a}=e;return aa(sp,{["".concat(sp,"-right")]:Wt(r)&&t&&Wt(t.x)&&r>=t.x,["".concat(sp,"-left")]:Wt(r)&&t&&Wt(t.x)&&r<t.x,["".concat(sp,"-bottom")]:Wt(a)&&t&&Wt(t.y)&&a>=t.y,["".concat(sp,"-top")]:Wt(a)&&t&&Wt(t.y)&&a<t.y})}function u3(e){var{allowEscapeViewBox:t,coordinate:r,key:a,offsetTopLeft:s,position:i,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:f}=e;if(i&&Wt(i[a]))return i[a];var m=r[a]-u-(s>0?s:0),g=r[a]+s;if(t[a])return l[a]?m:g;var v=d[a];if(v==null)return 0;if(l[a]){var x=m,j=v;return x<j?Math.max(g,v):Math.max(m,v)}if(f==null)return 0;var b=g+u,S=v+f;return b>S?Math.max(m,v):Math.max(g,v)}function e9(e){var{translateX:t,translateY:r,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function t9(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:a,position:s,reverseDirection:i,tooltipBox:l,useTranslate3d:u,viewBox:d}=e,f,m,g;return l.height>0&&l.width>0&&r?(m=u3({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),g=u3({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),f=e9({translateX:m,translateY:g,useTranslate3d:u})):f=JF,{cssProperties:f,cssClasses:QF({translateX:m,translateY:g,coordinate:r})}}function d3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function w0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d3(Object(r),!0).forEach(function(a){z2(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function z2(e,t,r){return(t=r9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r9(e){var t=a9(e,"string");return typeof t=="symbol"?t:t+""}function a9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class n9 extends _.PureComponent{constructor(){super(...arguments),z2(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),z2(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,a,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:a,animationEasing:s,children:i,coordinate:l,hasPayload:u,isAnimationActive:d,offset:f,position:m,reverseDirection:g,useTranslate3d:v,viewBox:x,wrapperStyle:j,lastBoundingBox:b,innerRef:S,hasPortalFromProps:A}=this.props,{cssClasses:E,cssProperties:T}=t9({allowEscapeViewBox:r,coordinate:l,offsetTopLeft:f,position:m,reverseDirection:g,tooltipBox:{height:b.height,width:b.width},useTranslate3d:v,viewBox:x}),D=A?{}:w0(w0({transition:d&&t?"transform ".concat(a,"ms ").concat(s):void 0},T),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),R=w0(w0({},D),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},j);return _.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:E,style:R,ref:S},i)}}var s9=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),_f={isSsr:s9()},nP=()=>er(e=>e.rootProps.accessibilityLayer);function Yi(e){return Number.isFinite(e)}function Kh(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function V2(){return V2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},V2.apply(null,arguments)}function f3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function h3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f3(Object(r),!0).forEach(function(a){i9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function i9(e,t,r){return(t=o9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o9(e){var t=l9(e,"string");return typeof t=="symbol"?t:t+""}function l9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var m3={curveBasisClosed:OM,curveBasisOpen:DM,curveBasis:TM,curveBumpX:xM,curveBumpY:vM,curveLinearClosed:RM,curveLinear:Zx,curveMonotoneX:LM,curveMonotoneY:MM,curveNatural:IM,curveStep:qM,curveStepAfter:BM,curveStepBefore:FM},j0=e=>Yi(e.x)&&Yi(e.y),ip=e=>e.x,op=e=>e.y,c9=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Yp(e));return(r==="curveMonotone"||r==="curveBump")&&t?m3["".concat(r).concat(t==="vertical"?"Y":"X")]:m3[r]||Zx},u9=e=>{var{type:t="linear",points:r=[],baseLine:a,layout:s,connectNulls:i=!1}=e,l=c9(t,s),u=i?r.filter(j0):r,d;if(Array.isArray(a)){var f=i?a.filter(g=>j0(g)):a,m=u.map((g,v)=>h3(h3({},g),{},{base:f[v]}));return s==="vertical"?d=g0().y(op).x1(ip).x0(g=>g.base.x):d=g0().x(ip).y1(op).y0(g=>g.base.y),d.defined(j0).curve(l),d(m)}return s==="vertical"&&Wt(a)?d=g0().y(op).x1(ip).x0(a):Wt(a)?d=g0().x(ip).y1(op).y0(a):d=Jk().x(ip).y(op),d.defined(j0).curve(l),d(u)},gj=e=>{var{className:t,points:r,path:a,pathRef:s}=e;if((!r||!r.length)&&!a)return null;var i=r&&r.length?u9(e):a;return _.createElement("path",V2({},Kr(e,!1),Hw(e),{className:aa("recharts-curve",t),d:i===null?void 0:i,ref:s}))},d9=["x","y","top","left","width","height","className"];function H2(){return H2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},H2.apply(null,arguments)}function p3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function f9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p3(Object(r),!0).forEach(function(a){h9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function h9(e,t,r){return(t=m9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m9(e){var t=p9(e,"string");return typeof t=="symbol"?t:t+""}function p9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function g9(e,t){if(e==null)return{};var r,a,s=x9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function x9(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var v9=(e,t,r,a,s,i)=>"M".concat(e,",").concat(s,"v").concat(a,"M").concat(i,",").concat(t,"h").concat(r),y9=e=>{var{x:t=0,y:r=0,top:a=0,left:s=0,width:i=0,height:l=0,className:u}=e,d=g9(e,d9),f=f9({x:t,y:r,top:a,left:s,width:i,height:l},d);return!Wt(t)||!Wt(r)||!Wt(i)||!Wt(l)||!Wt(a)||!Wt(s)?null:_.createElement("path",H2({},Kr(f,!0),{className:aa("recharts-cross",u),d:v9(t,r,i,l,a,s)}))};function b9(e,t,r,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function g3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function w9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g3(Object(r),!0).forEach(function(a){j9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function j9(e,t,r){return(t=_9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _9(e){var t=N9(e,"string");return typeof t=="symbol"?t:t+""}function N9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function To(e,t){var r=w9({},e),a=t,s=Object.keys(t),i=s.reduce((l,u)=>(l[u]===void 0&&a[u]!==void 0&&(l[u]=a[u]),l),r);return i}var a1={},n1={},s1={},x3;function S9(){return x3||(x3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const a=Object.getPrototypeOf(r);return a===null||a===Object.prototype||Object.getPrototypeOf(a)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(s1)),s1}var v3;function A9(){return v3||(v3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S9(),r=hE(),a=rj(),s=aj(),i=ej();function l(f,m,g){return u(f,m,void 0,void 0,void 0,void 0,g)}function u(f,m,g,v,x,j,b){const S=b(f,m,g,v,x,j);if(S!==void 0)return S;if(typeof f==typeof m)switch(typeof f){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return f===m;case"number":return f===m||Object.is(f,m);case"function":return f===m;case"object":return d(f,m,j,b)}return d(f,m,j,b)}function d(f,m,g,v){if(Object.is(f,m))return!0;let x=a.getTag(f),j=a.getTag(m);if(x===s.argumentsTag&&(x=s.objectTag),j===s.argumentsTag&&(j=s.objectTag),x!==j)return!1;switch(x){case s.stringTag:return f.toString()===m.toString();case s.numberTag:{const A=f.valueOf(),E=m.valueOf();return i.eq(A,E)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(f.valueOf(),m.valueOf());case s.regexpTag:return f.source===m.source&&f.flags===m.flags;case s.functionTag:return f===m}g=g??new Map;const b=g.get(f),S=g.get(m);if(b!=null&&S!=null)return b===m;g.set(f,m),g.set(m,f);try{switch(x){case s.mapTag:{if(f.size!==m.size)return!1;for(const[A,E]of f.entries())if(!m.has(A)||!u(E,m.get(A),A,f,m,g,v))return!1;return!0}case s.setTag:{if(f.size!==m.size)return!1;const A=Array.from(f.values()),E=Array.from(m.values());for(let T=0;T<A.length;T++){const D=A[T],R=E.findIndex(B=>u(D,B,void 0,f,m,g,v));if(R===-1)return!1;E.splice(R,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(f)!==Buffer.isBuffer(m)||f.length!==m.length)return!1;for(let A=0;A<f.length;A++)if(!u(f[A],m[A],A,f,m,g,v))return!1;return!0}case s.arrayBufferTag:return f.byteLength!==m.byteLength?!1:d(new Uint8Array(f),new Uint8Array(m),g,v);case s.dataViewTag:return f.byteLength!==m.byteLength||f.byteOffset!==m.byteOffset?!1:d(new Uint8Array(f),new Uint8Array(m),g,v);case s.errorTag:return f.name===m.name&&f.message===m.message;case s.objectTag:{if(!(d(f.constructor,m.constructor,g,v)||t.isPlainObject(f)&&t.isPlainObject(m)))return!1;const E=[...Object.keys(f),...r.getSymbols(f)],T=[...Object.keys(m),...r.getSymbols(m)];if(E.length!==T.length)return!1;for(let D=0;D<E.length;D++){const R=E[D],B=f[R];if(!Object.hasOwn(m,R))return!1;const U=m[R];if(!u(B,U,R,f,m,g,v))return!1}return!0}default:return!1}}finally{g.delete(f),g.delete(m)}}e.isEqualWith=l}(n1)),n1}var i1={},y3;function C9(){return y3||(y3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(i1)),i1}var b3;function k9(){return b3||(b3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A9(),r=C9();function a(s,i){return t.isEqualWith(s,i,r.noop)}e.isEqual=a}(a1)),a1}var o1,w3;function E9(){return w3||(w3=1,o1=k9().isEqual),o1}var P9=E9();const T9=Eo(P9);function O9(e){var t={},r=()=>null,a=!1,s=null,i=l=>{if(!a){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...f]=u;if(typeof d=="number"){s=e.setTimeout(i.bind(null,f),d);return}i(d),s=e.setTimeout(i.bind(null,f));return}typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{a=!0},start:l=>{a=!1,s&&(s(),s=null),i(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}var yx=1e-4,sP=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],iP=(e,t)=>e.map((r,a)=>r*t**a).reduce((r,a)=>r+a),j3=(e,t)=>r=>{var a=sP(e,t);return iP(a,r)},D9=(e,t)=>r=>{var a=sP(e,t),s=[...a.map((i,l)=>i*l).slice(1),0];return iP(s,r)},_3=function(){for(var t,r,a,s,i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];if(l.length===1)switch(l[0]){case"linear":[t,a,r,s]=[0,0,1,1];break;case"ease":[t,a,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,a,r,s]=[.42,0,1,1];break;case"ease-out":[t,a,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,a,r,s]=[0,0,.58,1];break;default:{var d=l[0].split("(");d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4&&([t,a,r,s]=d[1].split(")")[0].split(",").map(j=>parseFloat(j)))}}else l.length===4&&([t,a,r,s]=l);var f=j3(t,r),m=j3(a,s),g=D9(t,r),v=j=>j>1?1:j<0?0:j,x=j=>{for(var b=j>1?1:j,S=b,A=0;A<8;++A){var E=f(S)-b,T=g(S);if(Math.abs(E-b)<yx||T<yx)return m(S);S=v(S-E/T)}return m(S)};return x.isStepper=!1,x},R9=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:a=8,dt:s=17}=t,i=(l,u,d)=>{var f=-(l-u)*r,m=d*a,g=d+(f-m)*s/1e3,v=d*s/1e3+l;return Math.abs(v-u)<yx&&Math.abs(g)<yx?[u,0]:[v,g]};return i.isStepper=!0,i.dt=s,i},L9=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return _3(e);case"spring":return R9();default:if(e.split("(")[0]==="cubic-bezier")return _3(e)}return typeof e=="function"?e:null};function N3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function S3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N3(Object(r),!0).forEach(function(a){M9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function M9(e,t,r){return(t=I9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I9(e){var t=q9(e,"string");return typeof t=="symbol"?t:t+""}function q9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var F9=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),B9=(e,t,r)=>e.map(a=>"".concat(F9(a)," ").concat(t,"ms ").concat(r)).join(","),U9=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,a)=>r.filter(s=>a.includes(s))),Pp=(e,t)=>Object.keys(t).reduce((r,a)=>S3(S3({},r),{},{[a]:e(a,t[a])}),{});function A3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ks(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A3(Object(r),!0).forEach(function(a){$9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function $9(e,t,r){return(t=z9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z9(e){var t=V9(e,"string");return typeof t=="symbol"?t:t+""}function V9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bx=(e,t,r)=>e+(t-e)*r,G2=e=>{var{from:t,to:r}=e;return t!==r},oP=(e,t,r)=>{var a=Pp((s,i)=>{if(G2(i)){var[l,u]=e(i.from,i.to,i.velocity);return ks(ks({},i),{},{from:l,velocity:u})}return i},t);return r<1?Pp((s,i)=>G2(i)?ks(ks({},i),{},{velocity:bx(i.velocity,a[s].velocity,r),from:bx(i.from,a[s].from,r)}):i,t):oP(e,a,r-1)};function H9(e,t,r,a,s,i){var l,u=a.reduce((v,x)=>ks(ks({},v),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),d=()=>Pp((v,x)=>x.from,u),f=()=>!Object.values(u).filter(G2).length,m=null,g=v=>{l||(l=v);var x=v-l,j=x/r.dt;u=oP(r,u,j),s(ks(ks(ks({},e),t),d())),l=v,f()||(m=i.setTimeout(g))};return()=>(m=i.setTimeout(g),()=>{m()})}function G9(e,t,r,a,s,i,l){var u=null,d=s.reduce((g,v)=>ks(ks({},g),{},{[v]:[e[v],t[v]]}),{}),f,m=g=>{f||(f=g);var v=(g-f)/a,x=Pp((b,S)=>bx(...S,r(v)),d);if(i(ks(ks(ks({},e),t),x)),v<1)u=l.setTimeout(m);else{var j=Pp((b,S)=>bx(...S,r(1)),d);i(ks(ks(ks({},e),t),j))}};return()=>(u=l.setTimeout(m),()=>{u()})}const K9=(e,t,r,a,s,i)=>{var l=U9(e,t);return r.isStepper===!0?H9(e,t,r,l,s,i):G9(e,t,r,a,l,s,i)};class W9{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),s=null,i=l=>{l-a>=r?t(l):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}var Y9=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function K2(){return K2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},K2.apply(null,arguments)}function X9(e,t){if(e==null)return{};var r,a,s=Z9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Z9(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function C3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ku(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C3(Object(r),!0).forEach(function(a){af(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function af(e,t,r){return(t=J9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J9(e){var t=Q9(e,"string");return typeof t=="symbol"?t:t+""}function Q9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eB(){return O9(new W9)}class xj extends _.PureComponent{constructor(t,r){super(t,r),af(this,"mounted",!1),af(this,"manager",null),af(this,"stopJSAnimation",null),af(this,"unSubscribe",null);var{isActive:a,attributeName:s,from:i,to:l,children:u,duration:d,animationManager:f}=this.props;if(this.manager=f,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!a||d<=0){this.state={style:{}},typeof u=="function"&&(this.state={style:l});return}if(i){if(typeof u=="function"){this.state={style:i};return}this.state={style:s?{[s]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:a,attributeName:s,shouldReAnimate:i,to:l,from:u}=this.props,{style:d}=this.state;if(a){if(!r){var f={style:s?{[s]:l}:l};this.state&&d&&(s&&d[s]!==l||!s&&d!==l)&&this.setState(f);return}if(!(T9(t.to,l)&&t.canBegin&&t.isActive)){var m=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=m||i?u:t.to;if(this.state&&d){var v={style:s?{[s]:g}:g};(s&&d[s]!==g||!s&&d!==g)&&this.setState(v)}this.runAnimation(Ku(Ku({},this.props),{},{from:g,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:a,duration:s,easing:i,begin:l,onAnimationEnd:u,onAnimationStart:d}=t,f=K9(r,a,L9(i),s,this.changeStyle,this.manager.getTimeoutController()),m=()=>{this.stopJSAnimation=f()};this.manager.start([d,l,m,s,u])}runAnimation(t){var{begin:r,duration:a,attributeName:s,to:i,easing:l,onAnimationStart:u,onAnimationEnd:d,children:f}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof l=="function"||typeof f=="function"||l==="spring"){this.runJSAnimation(t);return}var m=s?{[s]:i}:i,g=B9(Object.keys(m),a,l);this.manager.start([u,r,Ku(Ku({},m),{},{transition:g}),a,d])}render(){var t=this.props,{children:r,begin:a,duration:s,attributeName:i,easing:l,isActive:u,from:d,to:f,canBegin:m,onAnimationEnd:g,shouldReAnimate:v,onAnimationReStart:x,animationManager:j}=t,b=X9(t,Y9),S=_.Children.count(r),A=this.state.style;if(typeof r=="function")return r(A);if(!u||S===0||s<=0)return r;var E=T=>{var{style:D={},className:R}=T.props,B=_.cloneElement(T,Ku(Ku({},b),{},{style:Ku(Ku({},D),A),className:R}));return B};return S===1?E(_.Children.only(r)):_.createElement("div",null,_.Children.map(r,T=>E(T)))}}af(xj,"displayName","Animate");af(xj,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var tB=_.createContext(null);function cd(e){var t,r,a=_.useContext(tB);return _.createElement(xj,K2({},e,{animationManager:(t=(r=e.animationManager)!==null&&r!==void 0?r:a)!==null&&t!==void 0?t:eB()}))}function wx(){return wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},wx.apply(null,arguments)}var k3=(e,t,r,a,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(a)/2),l=a>=0?1:-1,u=r>=0?1:-1,d=a>=0&&r>=0||a<0&&r<0?1:0,f;if(i>0&&s instanceof Array){for(var m=[0,0,0,0],g=0,v=4;g<v;g++)m[g]=s[g]>i?i:s[g];f="M".concat(e,",").concat(t+l*m[0]),m[0]>0&&(f+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(d,",").concat(e+u*m[0],",").concat(t)),f+="L ".concat(e+r-u*m[1],",").concat(t),m[1]>0&&(f+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+l*m[1])),f+="L ".concat(e+r,",").concat(t+a-l*m[2]),m[2]>0&&(f+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(d,`,
        `).concat(e+r-u*m[2],",").concat(t+a)),f+="L ".concat(e+u*m[3],",").concat(t+a),m[3]>0&&(f+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+a-l*m[3])),f+="Z"}else if(i>0&&s===+s&&s>0){var x=Math.min(i,s);f="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+r-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r,",").concat(t+l*x,`
            L `).concat(e+r,",").concat(t+a-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r-u*x,",").concat(t+a,`
            L `).concat(e+u*x,",").concat(t+a,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(t+a-l*x," Z")}else f="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return f},rB={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},lP=e=>{var t=To(e,rB),r=_.useRef(null),[a,s]=_.useState(-1);_.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&s(A)}catch{}},[]);var{x:i,y:l,width:u,height:d,radius:f,className:m}=t,{animationEasing:g,animationDuration:v,animationBegin:x,isAnimationActive:j,isUpdateAnimationActive:b}=t;if(i!==+i||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var S=aa("recharts-rectangle",m);return b?_.createElement(cd,{canBegin:a>0,from:{width:u,height:d,x:i,y:l},to:{width:u,height:d,x:i,y:l},duration:v,animationEasing:g,isActive:b},A=>{var{width:E,height:T,x:D,y:R}=A;return _.createElement(cd,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,isActive:j,easing:g},_.createElement("path",wx({},Kr(t,!0),{className:S,d:k3(D,R,E,T,f),ref:r})))}):_.createElement("path",wx({},Kr(t,!0),{className:S,d:k3(i,l,u,d,f)}))};function cP(e){var{cx:t,cy:r,radius:a,startAngle:s,endAngle:i}=e,l=Fn(t,r,a,s),u=Fn(t,r,a,i);return{points:[l,u],cx:t,cy:r,radius:a,startAngle:s,endAngle:i}}function W2(){return W2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},W2.apply(null,arguments)}var aB=(e,t)=>{var r=fs(t-e),a=Math.min(Math.abs(t-e),359.999);return r*a},_0=e=>{var{cx:t,cy:r,radius:a,angle:s,sign:i,isExternal:l,cornerRadius:u,cornerIsExternal:d}=e,f=u*(l?1:-1)+a,m=Math.asin(u/f)/vx,g=d?s:s+i*m,v=Fn(t,r,f,g),x=Fn(t,r,a,g),j=d?s-i*m:s,b=Fn(t,r,f*Math.cos(m*vx),j);return{center:v,circleTangency:x,lineTangency:b,theta:m}},uP=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:s,startAngle:i,endAngle:l}=e,u=aB(i,l),d=i+u,f=Fn(t,r,s,i),m=Fn(t,r,s,d),g="M ".concat(f.x,",").concat(f.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(i>d),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(a>0){var v=Fn(t,r,a,i),x=Fn(t,r,a,d);g+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(i<=d),`,
            `).concat(v.x,",").concat(v.y," Z")}else g+="L ".concat(t,",").concat(r," Z");return g},nB=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:f}=e,m=fs(f-d),{circleTangency:g,lineTangency:v,theta:x}=_0({cx:t,cy:r,radius:s,angle:d,sign:m,cornerRadius:i,cornerIsExternal:u}),{circleTangency:j,lineTangency:b,theta:S}=_0({cx:t,cy:r,radius:s,angle:f,sign:-m,cornerRadius:i,cornerIsExternal:u}),A=u?Math.abs(d-f):Math.abs(d-f)-x-S;if(A<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):uP({cx:t,cy:r,innerRadius:a,outerRadius:s,startAngle:d,endAngle:f});var E="M ".concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(A>180),",").concat(+(m<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var{circleTangency:T,lineTangency:D,theta:R}=_0({cx:t,cy:r,radius:a,angle:d,sign:m,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),{circleTangency:B,lineTangency:U,theta:I}=_0({cx:t,cy:r,radius:a,angle:f,sign:-m,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),F=u?Math.abs(d-f):Math.abs(d-f)-R-I;if(F<0&&i===0)return"".concat(E,"L").concat(t,",").concat(r,"Z");E+="L".concat(U.x,",").concat(U.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(B.x,",").concat(B.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(F>180),",").concat(+(m>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(D.x,",").concat(D.y,"Z")}else E+="L".concat(t,",").concat(r,"Z");return E},sB={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},dP=e=>{var t=To(e,sB),{cx:r,cy:a,innerRadius:s,outerRadius:i,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:f,endAngle:m,className:g}=t;if(i<s||f===m)return null;var v=aa("recharts-sector",g),x=i-s,j=ri(l,x,0,!0),b;return j>0&&Math.abs(f-m)<360?b=nB({cx:r,cy:a,innerRadius:s,outerRadius:i,cornerRadius:Math.min(j,x/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:f,endAngle:m}):b=uP({cx:r,cy:a,innerRadius:s,outerRadius:i,startAngle:f,endAngle:m}),_.createElement("path",W2({},Kr(t,!0),{className:v,d:b}))};function iB(e,t,r){var a,s,i,l;if(e==="horizontal")a=t.x,i=a,s=r.top,l=r.top+r.height;else if(e==="vertical")s=t.y,l=s,a=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:u,cy:d,innerRadius:f,outerRadius:m,angle:g}=t,v=Fn(u,d,f,g),x=Fn(u,d,m,g);a=v.x,s=v.y,i=x.x,l=x.y}else return cP(t);return[{x:a,y:s},{x:i,y:l}]}var l1={},c1={},u1={},E3;function oB(){return E3||(E3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vE();function r(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=r}(u1)),u1}var P3;function lB(){return P3||(P3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oB();function r(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=r}(c1)),c1}var T3;function cB(){return T3||(T3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yE(),r=lB();function a(s,i,l){l&&typeof l!="number"&&t.isIterateeCall(s,i,l)&&(i=l=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),l=l===void 0?s<i?1:-1:r.toFinite(l);const u=Math.max(Math.ceil((i-s)/(l||1)),0),d=new Array(u);for(let f=0;f<u;f++)d[f]=s,s+=l;return d}e.range=a}(l1)),l1}var d1,O3;function uB(){return O3||(O3=1,d1=cB().range),d1}var dB=uB();const fP=Eo(dB);function sd(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function fB(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function vj(e){let t,r,a;e.length!==2?(t=sd,r=(u,d)=>sd(e(u),d),a=(u,d)=>e(u)-d):(t=e===sd||e===fB?e:hB,r=e,a=e);function s(u,d,f=0,m=u.length){if(f<m){if(t(d,d)!==0)return m;do{const g=f+m>>>1;r(u[g],d)<0?f=g+1:m=g}while(f<m)}return f}function i(u,d,f=0,m=u.length){if(f<m){if(t(d,d)!==0)return m;do{const g=f+m>>>1;r(u[g],d)<=0?f=g+1:m=g}while(f<m)}return f}function l(u,d,f=0,m=u.length){const g=s(u,d,f,m-1);return g>f&&a(u[g-1],d)>-a(u[g],d)?g-1:g}return{left:s,center:l,right:i}}function hB(){return 0}function hP(e){return e===null?NaN:+e}function*mB(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const pB=vj(sd),Qp=pB.right;vj(hP).center;class D3 extends Map{constructor(t,r=vB){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(R3(this,t))}has(t){return super.has(R3(this,t))}set(t,r){return super.set(gB(this,t),r)}delete(t){return super.delete(xB(this,t))}}function R3({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function gB({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function xB({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function vB(e){return e!==null&&typeof e=="object"?e.valueOf():e}function yB(e=sd){if(e===sd)return mP;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function mP(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const bB=Math.sqrt(50),wB=Math.sqrt(10),jB=Math.sqrt(2);function jx(e,t,r){const a=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),l=i>=bB?10:i>=wB?5:i>=jB?2:1;let u,d,f;return s<0?(f=Math.pow(10,-s)/l,u=Math.round(e*f),d=Math.round(t*f),u/f<e&&++u,d/f>t&&--d,f=-f):(f=Math.pow(10,s)*l,u=Math.round(e/f),d=Math.round(t/f),u*f<e&&++u,d*f>t&&--d),d<u&&.5<=r&&r<2?jx(e,t,r*2):[u,d,f]}function Y2(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[s,i,l]=a?jx(t,e,r):jx(e,t,r);if(!(i>=s))return[];const u=i-s+1,d=new Array(u);if(a)if(l<0)for(let f=0;f<u;++f)d[f]=(i-f)/-l;else for(let f=0;f<u;++f)d[f]=(i-f)*l;else if(l<0)for(let f=0;f<u;++f)d[f]=(s+f)/-l;else for(let f=0;f<u;++f)d[f]=(s+f)*l;return d}function X2(e,t,r){return t=+t,e=+e,r=+r,jx(e,t,r)[2]}function Z2(e,t,r){t=+t,e=+e,r=+r;const a=t<e,s=a?X2(t,e,r):X2(e,t,r);return(a?-1:1)*(s<0?1/-s:s)}function L3(e,t){let r;for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function M3(e,t){let r;for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function pP(e,t,r=0,a=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(s=s===void 0?mP:yB(s);a>r;){if(a-r>600){const d=a-r+1,f=t-r+1,m=Math.log(d),g=.5*Math.exp(2*m/3),v=.5*Math.sqrt(m*g*(d-g)/d)*(f-d/2<0?-1:1),x=Math.max(r,Math.floor(t-f*g/d+v)),j=Math.min(a,Math.floor(t+(d-f)*g/d+v));pP(e,t,x,j,s)}const i=e[t];let l=r,u=a;for(lp(e,r,t),s(e[a],i)>0&&lp(e,r,a);l<u;){for(lp(e,l,u),++l,--u;s(e[l],i)<0;)++l;for(;s(e[u],i)>0;)--u}s(e[r],i)===0?lp(e,r,u):(++u,lp(e,u,a)),u<=t&&(r=u+1),t<=u&&(a=u-1)}return e}function lp(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function _B(e,t,r){if(e=Float64Array.from(mB(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return M3(e);if(t>=1)return L3(e);var a,s=(a-1)*t,i=Math.floor(s),l=L3(pP(e,i).subarray(0,i+1)),u=M3(e.subarray(i+1));return l+(u-l)*(s-i)}}function NB(e,t,r=hP){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,s=(a-1)*t,i=Math.floor(s),l=+r(e[i],i,e),u=+r(e[i+1],i+1,e);return l+(u-l)*(s-i)}}function SB(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++a<s;)i[a]=e+a*r;return i}function Oo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function iu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const J2=Symbol("implicit");function yj(){var e=new D3,t=[],r=[],a=J2;function s(i){let l=e.get(i);if(l===void 0){if(a!==J2)return a;e.set(i,l=t.push(i)-1)}return r[l%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new D3;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return yj(t,r).unknown(a)},Oo.apply(s,arguments),s}function bj(){var e=yj().unknown(void 0),t=e.domain,r=e.range,a=0,s=1,i,l,u=!1,d=0,f=0,m=.5;delete e.unknown;function g(){var v=t().length,x=s<a,j=x?s:a,b=x?a:s;i=(b-j)/Math.max(1,v-d+f*2),u&&(i=Math.floor(i)),j+=(b-j-i*(v-d))*m,l=i*(1-d),u&&(j=Math.round(j),l=Math.round(l));var S=SB(v).map(function(A){return j+i*A});return r(x?S.reverse():S)}return e.domain=function(v){return arguments.length?(t(v),g()):t()},e.range=function(v){return arguments.length?([a,s]=v,a=+a,s=+s,g()):[a,s]},e.rangeRound=function(v){return[a,s]=v,a=+a,s=+s,u=!0,g()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(v){return arguments.length?(u=!!v,g()):u},e.padding=function(v){return arguments.length?(d=Math.min(1,f=+v),g()):d},e.paddingInner=function(v){return arguments.length?(d=Math.min(1,v),g()):d},e.paddingOuter=function(v){return arguments.length?(f=+v,g()):f},e.align=function(v){return arguments.length?(m=Math.max(0,Math.min(1,v)),g()):m},e.copy=function(){return bj(t(),[a,s]).round(u).paddingInner(d).paddingOuter(f).align(m)},Oo.apply(g(),arguments)}function gP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return gP(t())},e}function AB(){return gP(bj.apply(null,arguments).paddingInner(1))}function wj(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function xP(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function eg(){}var Tp=.7,_x=1/Tp,Ih="\\s*([+-]?\\d+)\\s*",Op="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",CB=/^#([0-9a-f]{3,8})$/,kB=new RegExp(`^rgb\\(${Ih},${Ih},${Ih}\\)$`),EB=new RegExp(`^rgb\\(${Zl},${Zl},${Zl}\\)$`),PB=new RegExp(`^rgba\\(${Ih},${Ih},${Ih},${Op}\\)$`),TB=new RegExp(`^rgba\\(${Zl},${Zl},${Zl},${Op}\\)$`),OB=new RegExp(`^hsl\\(${Op},${Zl},${Zl}\\)$`),DB=new RegExp(`^hsla\\(${Op},${Zl},${Zl},${Op}\\)$`),I3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wj(eg,Dp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:q3,formatHex:q3,formatHex8:RB,formatHsl:LB,formatRgb:F3,toString:F3});function q3(){return this.rgb().formatHex()}function RB(){return this.rgb().formatHex8()}function LB(){return vP(this).formatHsl()}function F3(){return this.rgb().formatRgb()}function Dp(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=CB.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?B3(t):r===3?new vi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?N0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?N0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=kB.exec(e))?new vi(t[1],t[2],t[3],1):(t=EB.exec(e))?new vi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=PB.exec(e))?N0(t[1],t[2],t[3],t[4]):(t=TB.exec(e))?N0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=OB.exec(e))?z3(t[1],t[2]/100,t[3]/100,1):(t=DB.exec(e))?z3(t[1],t[2]/100,t[3]/100,t[4]):I3.hasOwnProperty(e)?B3(I3[e]):e==="transparent"?new vi(NaN,NaN,NaN,0):null}function B3(e){return new vi(e>>16&255,e>>8&255,e&255,1)}function N0(e,t,r,a){return a<=0&&(e=t=r=NaN),new vi(e,t,r,a)}function MB(e){return e instanceof eg||(e=Dp(e)),e?(e=e.rgb(),new vi(e.r,e.g,e.b,e.opacity)):new vi}function Q2(e,t,r,a){return arguments.length===1?MB(e):new vi(e,t,r,a??1)}function vi(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}wj(vi,Q2,xP(eg,{brighter(e){return e=e==null?_x:Math.pow(_x,e),new vi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Tp:Math.pow(Tp,e),new vi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new vi(df(this.r),df(this.g),df(this.b),Nx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:U3,formatHex:U3,formatHex8:IB,formatRgb:$3,toString:$3}));function U3(){return`#${nf(this.r)}${nf(this.g)}${nf(this.b)}`}function IB(){return`#${nf(this.r)}${nf(this.g)}${nf(this.b)}${nf((isNaN(this.opacity)?1:this.opacity)*255)}`}function $3(){const e=Nx(this.opacity);return`${e===1?"rgb(":"rgba("}${df(this.r)}, ${df(this.g)}, ${df(this.b)}${e===1?")":`, ${e})`}`}function Nx(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function df(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function nf(e){return e=df(e),(e<16?"0":"")+e.toString(16)}function z3(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new cl(e,t,r,a)}function vP(e){if(e instanceof cl)return new cl(e.h,e.s,e.l,e.opacity);if(e instanceof eg||(e=Dp(e)),!e)return new cl;if(e instanceof cl)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,s=Math.min(t,r,a),i=Math.max(t,r,a),l=NaN,u=i-s,d=(i+s)/2;return u?(t===i?l=(r-a)/u+(r<a)*6:r===i?l=(a-t)/u+2:l=(t-r)/u+4,u/=d<.5?i+s:2-i-s,l*=60):u=d>0&&d<1?0:l,new cl(l,u,d,e.opacity)}function qB(e,t,r,a){return arguments.length===1?vP(e):new cl(e,t,r,a??1)}function cl(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}wj(cl,qB,xP(eg,{brighter(e){return e=e==null?_x:Math.pow(_x,e),new cl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Tp:Math.pow(Tp,e),new cl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,s=2*r-a;return new vi(f1(e>=240?e-240:e+120,s,a),f1(e,s,a),f1(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new cl(V3(this.h),S0(this.s),S0(this.l),Nx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Nx(this.opacity);return`${e===1?"hsl(":"hsla("}${V3(this.h)}, ${S0(this.s)*100}%, ${S0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function V3(e){return e=(e||0)%360,e<0?e+360:e}function S0(e){return Math.max(0,Math.min(1,e||0))}function f1(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const jj=e=>()=>e;function FB(e,t){return function(r){return e+r*t}}function BB(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function UB(e){return(e=+e)==1?yP:function(t,r){return r-t?BB(t,r,e):jj(isNaN(t)?r:t)}}function yP(e,t){var r=t-e;return r?FB(e,r):jj(isNaN(e)?t:e)}const H3=function e(t){var r=UB(t);function a(s,i){var l=r((s=Q2(s)).r,(i=Q2(i)).r),u=r(s.g,i.g),d=r(s.b,i.b),f=yP(s.opacity,i.opacity);return function(m){return s.r=l(m),s.g=u(m),s.b=d(m),s.opacity=f(m),s+""}}return a.gamma=e,a}(1);function $B(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(i){for(s=0;s<r;++s)a[s]=e[s]*(1-i)+t[s]*i;return a}}function zB(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function VB(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,s=new Array(a),i=new Array(r),l;for(l=0;l<a;++l)s[l]=im(e[l],t[l]);for(;l<r;++l)i[l]=t[l];return function(u){for(l=0;l<a;++l)i[l]=s[l](u);return i}}function HB(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function Sx(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function GB(e,t){var r={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=im(e[s],t[s]):a[s]=t[s];return function(i){for(s in r)a[s]=r[s](i);return a}}var ew=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,h1=new RegExp(ew.source,"g");function KB(e){return function(){return e}}function WB(e){return function(t){return e(t)+""}}function YB(e,t){var r=ew.lastIndex=h1.lastIndex=0,a,s,i,l=-1,u=[],d=[];for(e=e+"",t=t+"";(a=ew.exec(e))&&(s=h1.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),u[l]?u[l]+=i:u[++l]=i),(a=a[0])===(s=s[0])?u[l]?u[l]+=s:u[++l]=s:(u[++l]=null,d.push({i:l,x:Sx(a,s)})),r=h1.lastIndex;return r<t.length&&(i=t.slice(r),u[l]?u[l]+=i:u[++l]=i),u.length<2?d[0]?WB(d[0].x):KB(t):(t=d.length,function(f){for(var m=0,g;m<t;++m)u[(g=d[m]).i]=g.x(f);return u.join("")})}function im(e,t){var r=typeof t,a;return t==null||r==="boolean"?jj(t):(r==="number"?Sx:r==="string"?(a=Dp(t))?(t=a,H3):YB:t instanceof Dp?H3:t instanceof Date?HB:zB(t)?$B:Array.isArray(t)?VB:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?GB:Sx)(e,t)}function _j(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function XB(e,t){t===void 0&&(t=e,e=im);for(var r=0,a=t.length-1,s=t[0],i=new Array(a<0?0:a);r<a;)i[r]=e(s,s=t[++r]);return function(l){var u=Math.max(0,Math.min(a-1,Math.floor(l*=a)));return i[u](l-u)}}function ZB(e){return function(){return e}}function Ax(e){return+e}var G3=[0,1];function Qs(e){return e}function tw(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:ZB(isNaN(t)?NaN:.5)}function JB(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function QB(e,t,r){var a=e[0],s=e[1],i=t[0],l=t[1];return s<a?(a=tw(s,a),i=r(l,i)):(a=tw(a,s),i=r(i,l)),function(u){return i(a(u))}}function eU(e,t,r){var a=Math.min(e.length,t.length)-1,s=new Array(a),i=new Array(a),l=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<a;)s[l]=tw(e[l],e[l+1]),i[l]=r(t[l],t[l+1]);return function(u){var d=Qp(e,u,1,a)-1;return i[d](s[d](u))}}function tg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function uv(){var e=G3,t=G3,r=im,a,s,i,l=Qs,u,d,f;function m(){var v=Math.min(e.length,t.length);return l!==Qs&&(l=JB(e[0],e[v-1])),u=v>2?eU:QB,d=f=null,g}function g(v){return v==null||isNaN(v=+v)?i:(d||(d=u(e.map(a),t,r)))(a(l(v)))}return g.invert=function(v){return l(s((f||(f=u(t,e.map(a),Sx)))(v)))},g.domain=function(v){return arguments.length?(e=Array.from(v,Ax),m()):e.slice()},g.range=function(v){return arguments.length?(t=Array.from(v),m()):t.slice()},g.rangeRound=function(v){return t=Array.from(v),r=_j,m()},g.clamp=function(v){return arguments.length?(l=v?!0:Qs,m()):l!==Qs},g.interpolate=function(v){return arguments.length?(r=v,m()):r},g.unknown=function(v){return arguments.length?(i=v,g):i},function(v,x){return a=v,s=x,m()}}function Nj(){return uv()(Qs,Qs)}function tU(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Cx(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function Wh(e){return e=Cx(Math.abs(e)),e?e[1]:NaN}function rU(e,t){return function(r,a){for(var s=r.length,i=[],l=0,u=e[0],d=0;s>0&&u>0&&(d+u+1>a&&(u=Math.max(1,a-d)),i.push(r.substring(s-=u,s+u)),!((d+=u+1)>a));)u=e[l=(l+1)%e.length];return i.reverse().join(t)}}function aU(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var nU=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Rp(e){if(!(t=nU.exec(e)))throw new Error("invalid format: "+e);var t;return new Sj({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Rp.prototype=Sj.prototype;function Sj(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Sj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function sU(e){e:for(var t=e.length,r=1,a=-1,s;r<t;++r)switch(e[r]){case".":a=s=r;break;case"0":a===0&&(a=r),s=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var bP;function iU(e,t){var r=Cx(e,t);if(!r)return e+"";var a=r[0],s=r[1],i=s-(bP=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=a.length;return i===l?a:i>l?a+new Array(i-l+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+Cx(e,Math.max(0,t+i-1))[0]}function K3(e,t){var r=Cx(e,t);if(!r)return e+"";var a=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const W3={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:tU,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>K3(e*100,t),r:K3,s:iU,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Y3(e){return e}var X3=Array.prototype.map,Z3=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function oU(e){var t=e.grouping===void 0||e.thousands===void 0?Y3:rU(X3.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Y3:aU(X3.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function f(g){g=Rp(g);var v=g.fill,x=g.align,j=g.sign,b=g.symbol,S=g.zero,A=g.width,E=g.comma,T=g.precision,D=g.trim,R=g.type;R==="n"?(E=!0,R="g"):W3[R]||(T===void 0&&(T=12),D=!0,R="g"),(S||v==="0"&&x==="=")&&(S=!0,v="0",x="=");var B=b==="$"?r:b==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",U=b==="$"?a:/[%p]/.test(R)?l:"",I=W3[R],F=/[defgprs%]/.test(R);T=T===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function pe(L){var q=B,z=U,V,de,se;if(R==="c")z=I(L)+z,L="";else{L=+L;var fe=L<0||1/L<0;if(L=isNaN(L)?d:I(Math.abs(L),T),D&&(L=sU(L)),fe&&+L==0&&j!=="+"&&(fe=!1),q=(fe?j==="("?j:u:j==="-"||j==="("?"":j)+q,z=(R==="s"?Z3[8+bP/3]:"")+z+(fe&&j==="("?")":""),F){for(V=-1,de=L.length;++V<de;)if(se=L.charCodeAt(V),48>se||se>57){z=(se===46?s+L.slice(V+1):L.slice(V))+z,L=L.slice(0,V);break}}}E&&!S&&(L=t(L,1/0));var oe=q.length+L.length+z.length,Se=oe<A?new Array(A-oe+1).join(v):"";switch(E&&S&&(L=t(Se+L,Se.length?A-z.length:1/0),Se=""),x){case"<":L=q+L+z+Se;break;case"=":L=q+Se+L+z;break;case"^":L=Se.slice(0,oe=Se.length>>1)+q+L+z+Se.slice(oe);break;default:L=Se+q+L+z;break}return i(L)}return pe.toString=function(){return g+""},pe}function m(g,v){var x=f((g=Rp(g),g.type="f",g)),j=Math.max(-8,Math.min(8,Math.floor(Wh(v)/3)))*3,b=Math.pow(10,-j),S=Z3[8+j/3];return function(A){return x(b*A)+S}}return{format:f,formatPrefix:m}}var A0,Aj,wP;lU({thousands:",",grouping:[3],currency:["$",""]});function lU(e){return A0=oU(e),Aj=A0.format,wP=A0.formatPrefix,A0}function cU(e){return Math.max(0,-Wh(Math.abs(e)))}function uU(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Wh(t)/3)))*3-Wh(Math.abs(e)))}function dU(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Wh(t)-Wh(e))+1}function jP(e,t,r,a){var s=Z2(e,t,r),i;switch(a=Rp(a??",f"),a.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=uU(s,l))&&(a.precision=i),wP(a,l)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=dU(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=cU(s))&&(a.precision=i-(a.type==="%")*2);break}}return Aj(a)}function vd(e){var t=e.domain;return e.ticks=function(r){var a=t();return Y2(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var s=t();return jP(s[0],s[s.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),s=0,i=a.length-1,l=a[s],u=a[i],d,f,m=10;for(u<l&&(f=l,l=u,u=f,f=s,s=i,i=f);m-- >0;){if(f=X2(l,u,r),f===d)return a[s]=l,a[i]=u,t(a);if(f>0)l=Math.floor(l/f)*f,u=Math.ceil(u/f)*f;else if(f<0)l=Math.ceil(l*f)/f,u=Math.floor(u*f)/f;else break;d=f}return e},e}function _P(){var e=Nj();return e.copy=function(){return tg(e,_P())},Oo.apply(e,arguments),vd(e)}function NP(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,Ax),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return NP(e).unknown(t)},e=arguments.length?Array.from(e,Ax):[0,1],vd(r)}function SP(e,t){e=e.slice();var r=0,a=e.length-1,s=e[r],i=e[a],l;return i<s&&(l=r,r=a,a=l,l=s,s=i,i=l),e[r]=t.floor(s),e[a]=t.ceil(i),e}function J3(e){return Math.log(e)}function Q3(e){return Math.exp(e)}function fU(e){return-Math.log(-e)}function hU(e){return-Math.exp(-e)}function mU(e){return isFinite(e)?+("1e"+e):e<0?0:e}function pU(e){return e===10?mU:e===Math.E?Math.exp:t=>Math.pow(e,t)}function gU(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function eA(e){return(t,r)=>-e(-t,r)}function Cj(e){const t=e(J3,Q3),r=t.domain;let a=10,s,i;function l(){return s=gU(a),i=pU(a),r()[0]<0?(s=eA(s),i=eA(i),e(fU,hU)):e(J3,Q3),t}return t.base=function(u){return arguments.length?(a=+u,l()):a},t.domain=function(u){return arguments.length?(r(u),l()):r()},t.ticks=u=>{const d=r();let f=d[0],m=d[d.length-1];const g=m<f;g&&([f,m]=[m,f]);let v=s(f),x=s(m),j,b;const S=u==null?10:+u;let A=[];if(!(a%1)&&x-v<S){if(v=Math.floor(v),x=Math.ceil(x),f>0){for(;v<=x;++v)for(j=1;j<a;++j)if(b=v<0?j/i(-v):j*i(v),!(b<f)){if(b>m)break;A.push(b)}}else for(;v<=x;++v)for(j=a-1;j>=1;--j)if(b=v>0?j/i(-v):j*i(v),!(b<f)){if(b>m)break;A.push(b)}A.length*2<S&&(A=Y2(f,m,S))}else A=Y2(v,x,Math.min(x-v,S)).map(i);return g?A.reverse():A},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=a===10?"s":","),typeof d!="function"&&(!(a%1)&&(d=Rp(d)).precision==null&&(d.trim=!0),d=Aj(d)),u===1/0)return d;const f=Math.max(1,a*u/t.ticks().length);return m=>{let g=m/i(Math.round(s(m)));return g*a<a-.5&&(g*=a),g<=f?d(m):""}},t.nice=()=>r(SP(r(),{floor:u=>i(Math.floor(s(u))),ceil:u=>i(Math.ceil(s(u)))})),t}function AP(){const e=Cj(uv()).domain([1,10]);return e.copy=()=>tg(e,AP()).base(e.base()),Oo.apply(e,arguments),e}function tA(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function rA(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function kj(e){var t=1,r=e(tA(t),rA(t));return r.constant=function(a){return arguments.length?e(tA(t=+a),rA(t)):t},vd(r)}function CP(){var e=kj(uv());return e.copy=function(){return tg(e,CP()).constant(e.constant())},Oo.apply(e,arguments)}function aA(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function xU(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function vU(e){return e<0?-e*e:e*e}function Ej(e){var t=e(Qs,Qs),r=1;function a(){return r===1?e(Qs,Qs):r===.5?e(xU,vU):e(aA(r),aA(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,a()):r},vd(t)}function Pj(){var e=Ej(uv());return e.copy=function(){return tg(e,Pj()).exponent(e.exponent())},Oo.apply(e,arguments),e}function yU(){return Pj.apply(null,arguments).exponent(.5)}function nA(e){return Math.sign(e)*e*e}function bU(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function kP(){var e=Nj(),t=[0,1],r=!1,a;function s(i){var l=bU(e(i));return isNaN(l)?a:r?Math.round(l):l}return s.invert=function(i){return e.invert(nA(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,Ax)).map(nA)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return kP(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},Oo.apply(s,arguments),vd(s)}function EP(){var e=[],t=[],r=[],a;function s(){var l=0,u=Math.max(1,t.length);for(r=new Array(u-1);++l<u;)r[l-1]=NB(e,l/u);return i}function i(l){return l==null||isNaN(l=+l)?a:t[Qp(r,l)]}return i.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(sd),s()},i.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},i.unknown=function(l){return arguments.length?(a=l,i):a},i.quantiles=function(){return r.slice()},i.copy=function(){return EP().domain(e).range(t).unknown(a)},Oo.apply(i,arguments)}function PP(){var e=0,t=1,r=1,a=[.5],s=[0,1],i;function l(d){return d!=null&&d<=d?s[Qp(a,d,0,r)]:i}function u(){var d=-1;for(a=new Array(r);++d<r;)a[d]=((d+1)*t-(d-r)*e)/(r+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},l.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,u()):s.slice()},l.invertExtent=function(d){var f=s.indexOf(d);return f<0?[NaN,NaN]:f<1?[e,a[0]]:f>=r?[a[r-1],t]:[a[f-1],a[f]]},l.unknown=function(d){return arguments.length&&(i=d),l},l.thresholds=function(){return a.slice()},l.copy=function(){return PP().domain([e,t]).range(s).unknown(i)},Oo.apply(vd(l),arguments)}function TP(){var e=[.5],t=[0,1],r,a=1;function s(i){return i!=null&&i<=i?t[Qp(e,i,0,a)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return TP().domain(e).range(t).unknown(r)},Oo.apply(s,arguments)}const m1=new Date,p1=new Date;function Zn(e,t,r,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const l=s(i),u=s.ceil(i);return i-l<u-i?l:u},s.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),s.range=(i,l,u)=>{const d=[];if(i=s.ceil(i),u=u==null?1:Math.floor(u),!(i<l)||!(u>0))return d;let f;do d.push(f=new Date(+i)),t(i,u),e(i);while(f<i&&i<l);return d},s.filter=i=>Zn(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!i(l););else for(;--u>=0;)for(;t(l,1),!i(l););}),r&&(s.count=(i,l)=>(m1.setTime(+i),p1.setTime(+l),e(m1),e(p1),Math.floor(r(m1,p1))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?l=>a(l)%i===0:l=>s.count(0,l)%i===0):s)),s}const kx=Zn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);kx.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Zn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):kx);kx.range;const Hc=1e3,jo=Hc*60,Gc=jo*60,Xc=Gc*24,Tj=Xc*7,sA=Xc*30,g1=Xc*365,sf=Zn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Hc)},(e,t)=>(t-e)/Hc,e=>e.getUTCSeconds());sf.range;const Oj=Zn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Hc)},(e,t)=>{e.setTime(+e+t*jo)},(e,t)=>(t-e)/jo,e=>e.getMinutes());Oj.range;const Dj=Zn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*jo)},(e,t)=>(t-e)/jo,e=>e.getUTCMinutes());Dj.range;const Rj=Zn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Hc-e.getMinutes()*jo)},(e,t)=>{e.setTime(+e+t*Gc)},(e,t)=>(t-e)/Gc,e=>e.getHours());Rj.range;const Lj=Zn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Gc)},(e,t)=>(t-e)/Gc,e=>e.getUTCHours());Lj.range;const rg=Zn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*jo)/Xc,e=>e.getDate()-1);rg.range;const dv=Zn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xc,e=>e.getUTCDate()-1);dv.range;const OP=Zn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xc,e=>Math.floor(e/Xc));OP.range;function Nf(e){return Zn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*jo)/Tj)}const fv=Nf(0),Ex=Nf(1),wU=Nf(2),jU=Nf(3),Yh=Nf(4),_U=Nf(5),NU=Nf(6);fv.range;Ex.range;wU.range;jU.range;Yh.range;_U.range;NU.range;function Sf(e){return Zn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Tj)}const hv=Sf(0),Px=Sf(1),SU=Sf(2),AU=Sf(3),Xh=Sf(4),CU=Sf(5),kU=Sf(6);hv.range;Px.range;SU.range;AU.range;Xh.range;CU.range;kU.range;const Mj=Zn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Mj.range;const Ij=Zn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ij.range;const Zc=Zn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Zc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Zn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Zc.range;const Jc=Zn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Jc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Zn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Jc.range;function DP(e,t,r,a,s,i){const l=[[sf,1,Hc],[sf,5,5*Hc],[sf,15,15*Hc],[sf,30,30*Hc],[i,1,jo],[i,5,5*jo],[i,15,15*jo],[i,30,30*jo],[s,1,Gc],[s,3,3*Gc],[s,6,6*Gc],[s,12,12*Gc],[a,1,Xc],[a,2,2*Xc],[r,1,Tj],[t,1,sA],[t,3,3*sA],[e,1,g1]];function u(f,m,g){const v=m<f;v&&([f,m]=[m,f]);const x=g&&typeof g.range=="function"?g:d(f,m,g),j=x?x.range(f,+m+1):[];return v?j.reverse():j}function d(f,m,g){const v=Math.abs(m-f)/g,x=vj(([,,S])=>S).right(l,v);if(x===l.length)return e.every(Z2(f/g1,m/g1,g));if(x===0)return kx.every(Math.max(Z2(f,m,g),1));const[j,b]=l[v/l[x-1][2]<l[x][2]/v?x-1:x];return j.every(b)}return[u,d]}const[EU,PU]=DP(Jc,Ij,hv,OP,Lj,Dj),[TU,OU]=DP(Zc,Mj,fv,rg,Rj,Oj);function x1(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function v1(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function cp(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function DU(e){var t=e.dateTime,r=e.date,a=e.time,s=e.periods,i=e.days,l=e.shortDays,u=e.months,d=e.shortMonths,f=up(s),m=dp(s),g=up(i),v=dp(i),x=up(l),j=dp(l),b=up(u),S=dp(u),A=up(d),E=dp(d),T={a:fe,A:oe,b:Se,B:Y,c:null,d:dA,e:dA,f:r$,g:f$,G:m$,H:QU,I:e$,j:t$,L:RP,m:a$,M:n$,p:ye,q:P,Q:mA,s:pA,S:s$,u:i$,U:o$,V:l$,w:c$,W:u$,x:null,X:null,y:d$,Y:h$,Z:p$,"%":hA},D={a:K,A:le,b:ee,B:me,c:null,d:fA,e:fA,f:y$,g:E$,G:T$,H:g$,I:x$,j:v$,L:MP,m:b$,M:w$,p:ke,q:Ae,Q:mA,s:pA,S:j$,u:_$,U:N$,V:S$,w:A$,W:C$,x:null,X:null,y:k$,Y:P$,Z:O$,"%":hA},R={a:pe,A:L,b:q,B:z,c:V,d:cA,e:cA,f:YU,g:lA,G:oA,H:uA,I:uA,j:HU,L:WU,m:VU,M:GU,p:F,q:zU,Q:ZU,s:JU,S:KU,u:qU,U:FU,V:BU,w:IU,W:UU,x:de,X:se,y:lA,Y:oA,Z:$U,"%":XU};T.x=B(r,T),T.X=B(a,T),T.c=B(t,T),D.x=B(r,D),D.X=B(a,D),D.c=B(t,D);function B(xe,De){return function(ve){var Z=[],te=-1,re=0,$=xe.length,ne,W,be;for(ve instanceof Date||(ve=new Date(+ve));++te<$;)xe.charCodeAt(te)===37&&(Z.push(xe.slice(re,te)),(W=iA[ne=xe.charAt(++te)])!=null?ne=xe.charAt(++te):W=ne==="e"?" ":"0",(be=De[ne])&&(ne=be(ve,W)),Z.push(ne),re=te+1);return Z.push(xe.slice(re,te)),Z.join("")}}function U(xe,De){return function(ve){var Z=cp(1900,void 0,1),te=I(Z,xe,ve+="",0),re,$;if(te!=ve.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(De&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(re=v1(cp(Z.y,0,1)),$=re.getUTCDay(),re=$>4||$===0?Px.ceil(re):Px(re),re=dv.offset(re,(Z.V-1)*7),Z.y=re.getUTCFullYear(),Z.m=re.getUTCMonth(),Z.d=re.getUTCDate()+(Z.w+6)%7):(re=x1(cp(Z.y,0,1)),$=re.getDay(),re=$>4||$===0?Ex.ceil(re):Ex(re),re=rg.offset(re,(Z.V-1)*7),Z.y=re.getFullYear(),Z.m=re.getMonth(),Z.d=re.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),$="Z"in Z?v1(cp(Z.y,0,1)).getUTCDay():x1(cp(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-($+5)%7:Z.w+Z.U*7-($+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,v1(Z)):x1(Z)}}function I(xe,De,ve,Z){for(var te=0,re=De.length,$=ve.length,ne,W;te<re;){if(Z>=$)return-1;if(ne=De.charCodeAt(te++),ne===37){if(ne=De.charAt(te++),W=R[ne in iA?De.charAt(te++):ne],!W||(Z=W(xe,ve,Z))<0)return-1}else if(ne!=ve.charCodeAt(Z++))return-1}return Z}function F(xe,De,ve){var Z=f.exec(De.slice(ve));return Z?(xe.p=m.get(Z[0].toLowerCase()),ve+Z[0].length):-1}function pe(xe,De,ve){var Z=x.exec(De.slice(ve));return Z?(xe.w=j.get(Z[0].toLowerCase()),ve+Z[0].length):-1}function L(xe,De,ve){var Z=g.exec(De.slice(ve));return Z?(xe.w=v.get(Z[0].toLowerCase()),ve+Z[0].length):-1}function q(xe,De,ve){var Z=A.exec(De.slice(ve));return Z?(xe.m=E.get(Z[0].toLowerCase()),ve+Z[0].length):-1}function z(xe,De,ve){var Z=b.exec(De.slice(ve));return Z?(xe.m=S.get(Z[0].toLowerCase()),ve+Z[0].length):-1}function V(xe,De,ve){return I(xe,t,De,ve)}function de(xe,De,ve){return I(xe,r,De,ve)}function se(xe,De,ve){return I(xe,a,De,ve)}function fe(xe){return l[xe.getDay()]}function oe(xe){return i[xe.getDay()]}function Se(xe){return d[xe.getMonth()]}function Y(xe){return u[xe.getMonth()]}function ye(xe){return s[+(xe.getHours()>=12)]}function P(xe){return 1+~~(xe.getMonth()/3)}function K(xe){return l[xe.getUTCDay()]}function le(xe){return i[xe.getUTCDay()]}function ee(xe){return d[xe.getUTCMonth()]}function me(xe){return u[xe.getUTCMonth()]}function ke(xe){return s[+(xe.getUTCHours()>=12)]}function Ae(xe){return 1+~~(xe.getUTCMonth()/3)}return{format:function(xe){var De=B(xe+="",T);return De.toString=function(){return xe},De},parse:function(xe){var De=U(xe+="",!1);return De.toString=function(){return xe},De},utcFormat:function(xe){var De=B(xe+="",D);return De.toString=function(){return xe},De},utcParse:function(xe){var De=U(xe+="",!0);return De.toString=function(){return xe},De}}}var iA={"-":"",_:" ",0:"0"},ms=/^\s*\d+/,RU=/^%/,LU=/[\\^$*+?|[\]().{}]/g;function na(e,t,r){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<r?new Array(r-i+1).join(t)+s:s)}function MU(e){return e.replace(LU,"\\$&")}function up(e){return new RegExp("^(?:"+e.map(MU).join("|")+")","i")}function dp(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function IU(e,t,r){var a=ms.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function qU(e,t,r){var a=ms.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function FU(e,t,r){var a=ms.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function BU(e,t,r){var a=ms.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function UU(e,t,r){var a=ms.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function oA(e,t,r){var a=ms.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function lA(e,t,r){var a=ms.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function $U(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function zU(e,t,r){var a=ms.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function VU(e,t,r){var a=ms.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function cA(e,t,r){var a=ms.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function HU(e,t,r){var a=ms.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function uA(e,t,r){var a=ms.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function GU(e,t,r){var a=ms.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function KU(e,t,r){var a=ms.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function WU(e,t,r){var a=ms.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function YU(e,t,r){var a=ms.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function XU(e,t,r){var a=RU.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function ZU(e,t,r){var a=ms.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function JU(e,t,r){var a=ms.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function dA(e,t){return na(e.getDate(),t,2)}function QU(e,t){return na(e.getHours(),t,2)}function e$(e,t){return na(e.getHours()%12||12,t,2)}function t$(e,t){return na(1+rg.count(Zc(e),e),t,3)}function RP(e,t){return na(e.getMilliseconds(),t,3)}function r$(e,t){return RP(e,t)+"000"}function a$(e,t){return na(e.getMonth()+1,t,2)}function n$(e,t){return na(e.getMinutes(),t,2)}function s$(e,t){return na(e.getSeconds(),t,2)}function i$(e){var t=e.getDay();return t===0?7:t}function o$(e,t){return na(fv.count(Zc(e)-1,e),t,2)}function LP(e){var t=e.getDay();return t>=4||t===0?Yh(e):Yh.ceil(e)}function l$(e,t){return e=LP(e),na(Yh.count(Zc(e),e)+(Zc(e).getDay()===4),t,2)}function c$(e){return e.getDay()}function u$(e,t){return na(Ex.count(Zc(e)-1,e),t,2)}function d$(e,t){return na(e.getFullYear()%100,t,2)}function f$(e,t){return e=LP(e),na(e.getFullYear()%100,t,2)}function h$(e,t){return na(e.getFullYear()%1e4,t,4)}function m$(e,t){var r=e.getDay();return e=r>=4||r===0?Yh(e):Yh.ceil(e),na(e.getFullYear()%1e4,t,4)}function p$(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+na(t/60|0,"0",2)+na(t%60,"0",2)}function fA(e,t){return na(e.getUTCDate(),t,2)}function g$(e,t){return na(e.getUTCHours(),t,2)}function x$(e,t){return na(e.getUTCHours()%12||12,t,2)}function v$(e,t){return na(1+dv.count(Jc(e),e),t,3)}function MP(e,t){return na(e.getUTCMilliseconds(),t,3)}function y$(e,t){return MP(e,t)+"000"}function b$(e,t){return na(e.getUTCMonth()+1,t,2)}function w$(e,t){return na(e.getUTCMinutes(),t,2)}function j$(e,t){return na(e.getUTCSeconds(),t,2)}function _$(e){var t=e.getUTCDay();return t===0?7:t}function N$(e,t){return na(hv.count(Jc(e)-1,e),t,2)}function IP(e){var t=e.getUTCDay();return t>=4||t===0?Xh(e):Xh.ceil(e)}function S$(e,t){return e=IP(e),na(Xh.count(Jc(e),e)+(Jc(e).getUTCDay()===4),t,2)}function A$(e){return e.getUTCDay()}function C$(e,t){return na(Px.count(Jc(e)-1,e),t,2)}function k$(e,t){return na(e.getUTCFullYear()%100,t,2)}function E$(e,t){return e=IP(e),na(e.getUTCFullYear()%100,t,2)}function P$(e,t){return na(e.getUTCFullYear()%1e4,t,4)}function T$(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Xh(e):Xh.ceil(e),na(e.getUTCFullYear()%1e4,t,4)}function O$(){return"+0000"}function hA(){return"%"}function mA(e){return+e}function pA(e){return Math.floor(+e/1e3)}var jh,qP,FP;D$({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function D$(e){return jh=DU(e),qP=jh.format,jh.parse,FP=jh.utcFormat,jh.utcParse,jh}function R$(e){return new Date(e)}function L$(e){return e instanceof Date?+e:+new Date(+e)}function qj(e,t,r,a,s,i,l,u,d,f){var m=Nj(),g=m.invert,v=m.domain,x=f(".%L"),j=f(":%S"),b=f("%I:%M"),S=f("%I %p"),A=f("%a %d"),E=f("%b %d"),T=f("%B"),D=f("%Y");function R(B){return(d(B)<B?x:u(B)<B?j:l(B)<B?b:i(B)<B?S:a(B)<B?s(B)<B?A:E:r(B)<B?T:D)(B)}return m.invert=function(B){return new Date(g(B))},m.domain=function(B){return arguments.length?v(Array.from(B,L$)):v().map(R$)},m.ticks=function(B){var U=v();return e(U[0],U[U.length-1],B??10)},m.tickFormat=function(B,U){return U==null?R:f(U)},m.nice=function(B){var U=v();return(!B||typeof B.range!="function")&&(B=t(U[0],U[U.length-1],B??10)),B?v(SP(U,B)):m},m.copy=function(){return tg(m,qj(e,t,r,a,s,i,l,u,d,f))},m}function M$(){return Oo.apply(qj(TU,OU,Zc,Mj,fv,rg,Rj,Oj,sf,qP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function I$(){return Oo.apply(qj(EU,PU,Jc,Ij,hv,dv,Lj,Dj,sf,FP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function mv(){var e=0,t=1,r,a,s,i,l=Qs,u=!1,d;function f(g){return g==null||isNaN(g=+g)?d:l(s===0?.5:(g=(i(g)-r)*s,u?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([e,t]=g,r=i(e=+e),a=i(t=+t),s=r===a?0:1/(a-r),f):[e,t]},f.clamp=function(g){return arguments.length?(u=!!g,f):u},f.interpolator=function(g){return arguments.length?(l=g,f):l};function m(g){return function(v){var x,j;return arguments.length?([x,j]=v,l=g(x,j),f):[l(0),l(1)]}}return f.range=m(im),f.rangeRound=m(_j),f.unknown=function(g){return arguments.length?(d=g,f):d},function(g){return i=g,r=g(e),a=g(t),s=r===a?0:1/(a-r),f}}function yd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function BP(){var e=vd(mv()(Qs));return e.copy=function(){return yd(e,BP())},iu.apply(e,arguments)}function UP(){var e=Cj(mv()).domain([1,10]);return e.copy=function(){return yd(e,UP()).base(e.base())},iu.apply(e,arguments)}function $P(){var e=kj(mv());return e.copy=function(){return yd(e,$P()).constant(e.constant())},iu.apply(e,arguments)}function Fj(){var e=Ej(mv());return e.copy=function(){return yd(e,Fj()).exponent(e.exponent())},iu.apply(e,arguments)}function q$(){return Fj.apply(null,arguments).exponent(.5)}function zP(){var e=[],t=Qs;function r(a){if(a!=null&&!isNaN(a=+a))return t((Qp(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(sd),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(s,i)=>_B(e,i/a))},r.copy=function(){return zP(t).domain(e)},iu.apply(r,arguments)}function pv(){var e=0,t=.5,r=1,a=1,s,i,l,u,d,f=Qs,m,g=!1,v;function x(b){return isNaN(b=+b)?v:(b=.5+((b=+m(b))-i)*(a*b<a*i?u:d),f(g?Math.max(0,Math.min(1,b)):b))}x.domain=function(b){return arguments.length?([e,t,r]=b,s=m(e=+e),i=m(t=+t),l=m(r=+r),u=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),a=i<s?-1:1,x):[e,t,r]},x.clamp=function(b){return arguments.length?(g=!!b,x):g},x.interpolator=function(b){return arguments.length?(f=b,x):f};function j(b){return function(S){var A,E,T;return arguments.length?([A,E,T]=S,f=XB(b,[A,E,T]),x):[f(0),f(.5),f(1)]}}return x.range=j(im),x.rangeRound=j(_j),x.unknown=function(b){return arguments.length?(v=b,x):v},function(b){return m=b,s=b(e),i=b(t),l=b(r),u=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),a=i<s?-1:1,x}}function VP(){var e=vd(pv()(Qs));return e.copy=function(){return yd(e,VP())},iu.apply(e,arguments)}function HP(){var e=Cj(pv()).domain([.1,1,10]);return e.copy=function(){return yd(e,HP()).base(e.base())},iu.apply(e,arguments)}function GP(){var e=kj(pv());return e.copy=function(){return yd(e,GP()).constant(e.constant())},iu.apply(e,arguments)}function Bj(){var e=Ej(pv());return e.copy=function(){return yd(e,Bj()).exponent(e.exponent())},iu.apply(e,arguments)}function F$(){return Bj.apply(null,arguments).exponent(.5)}const xp=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:bj,scaleDiverging:VP,scaleDivergingLog:HP,scaleDivergingPow:Bj,scaleDivergingSqrt:F$,scaleDivergingSymlog:GP,scaleIdentity:NP,scaleImplicit:J2,scaleLinear:_P,scaleLog:AP,scaleOrdinal:yj,scalePoint:AB,scalePow:Pj,scaleQuantile:EP,scaleQuantize:PP,scaleRadial:kP,scaleSequential:BP,scaleSequentialLog:UP,scaleSequentialPow:Fj,scaleSequentialQuantile:zP,scaleSequentialSqrt:q$,scaleSequentialSymlog:$P,scaleSqrt:yU,scaleSymlog:CP,scaleThreshold:TP,scaleTime:M$,scaleUtc:I$,tickFormat:jP},Symbol.toStringTag,{value:"Module"}));var Af=e=>e.chartData,Uj=nt([Af],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),$j=(e,t,r,a)=>a?Uj(e):Af(e);function Zh(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Yi(t)&&Yi(r))return!0}return!1}function gA(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function B$(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,a]=e,s,i;if(Yi(r))s=r;else if(typeof r=="function")return;if(Yi(a))i=a;else if(typeof a=="function")return;var l=[s,i];if(Zh(l))return l}}function U$(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,r);if(Zh(a))return gA(a,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,l,u;if(s==="auto")t!=null&&(l=Math.min(...t));else if(Wt(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&a3.test(s)){var d=a3.exec(s);if(d==null||t==null)l=void 0;else{var f=+d[1];l=t[0]-f}}else l=t==null?void 0:t[0];if(i==="auto")t!=null&&(u=Math.max(...t));else if(Wt(i))u=i;else if(typeof i=="function")try{t!=null&&(u=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&n3.test(i)){var m=n3.exec(i);if(m==null||t==null)u=void 0;else{var g=+m[1];u=t[1]+g}}else u=t==null?void 0:t[1];var v=[l,u];if(Zh(v))return t==null?v:gA(v,t,r)}}}var om=1e9,$$={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Vj,rn=!0,Co="[DecimalError] ",ff=Co+"Invalid argument: ",zj=Co+"Exponent out of range: ",lm=Math.floor,Jd=Math.pow,z$=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,$i,cs=1e7,za=7,KP=9007199254740991,Tx=lm(KP/za),Yt={};Yt.absoluteValue=Yt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Yt.comparedTo=Yt.cmp=function(e){var t,r,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,t=0,r=a<s?a:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};Yt.decimalPlaces=Yt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*za;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Yt.dividedBy=Yt.div=function(e){return Wc(this,new this.constructor(e))};Yt.dividedToIntegerBy=Yt.idiv=function(e){var t=this,r=t.constructor;return Pa(Wc(t,new r(e),0,1),r.precision)};Yt.equals=Yt.eq=function(e){return!this.cmp(e)};Yt.exponent=function(){return Bn(this)};Yt.greaterThan=Yt.gt=function(e){return this.cmp(e)>0};Yt.greaterThanOrEqualTo=Yt.gte=function(e){return this.cmp(e)>=0};Yt.isInteger=Yt.isint=function(){return this.e>this.d.length-2};Yt.isNegative=Yt.isneg=function(){return this.s<0};Yt.isPositive=Yt.ispos=function(){return this.s>0};Yt.isZero=function(){return this.s===0};Yt.lessThan=Yt.lt=function(e){return this.cmp(e)<0};Yt.lessThanOrEqualTo=Yt.lte=function(e){return this.cmp(e)<1};Yt.logarithm=Yt.log=function(e){var t,r=this,a=r.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq($i))throw Error(Co+"NaN");if(r.s<1)throw Error(Co+(r.s?"NaN":"-Infinity"));return r.eq($i)?new a(0):(rn=!1,t=Wc(Lp(r,i),Lp(e,i),i),rn=!0,Pa(t,s))};Yt.minus=Yt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?XP(t,e):WP(t,(e.s=-e.s,e))};Yt.modulo=Yt.mod=function(e){var t,r=this,a=r.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(Co+"NaN");return r.s?(rn=!1,t=Wc(r,e,0,1).times(e),rn=!0,r.minus(t)):Pa(new a(r),s)};Yt.naturalExponential=Yt.exp=function(){return YP(this)};Yt.naturalLogarithm=Yt.ln=function(){return Lp(this)};Yt.negated=Yt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Yt.plus=Yt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?WP(t,e):XP(t,(e.s=-e.s,e))};Yt.precision=Yt.sd=function(e){var t,r,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ff+e);if(t=Bn(s)+1,a=s.d.length-1,r=a*za+1,a=s.d[a],a){for(;a%10==0;a/=10)r--;for(a=s.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};Yt.squareRoot=Yt.sqrt=function(){var e,t,r,a,s,i,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(Co+"NaN")}for(e=Bn(u),rn=!1,s=Math.sqrt(+u),s==0||s==1/0?(t=Kl(u.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=lm((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new d(t)):a=new d(s.toString()),r=d.precision,s=l=r+3;;)if(i=a,a=i.plus(Wc(u,i,l+2)).times(.5),Kl(i.d).slice(0,l)===(t=Kl(a.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if(Pa(i,r+1,0),i.times(i).eq(u)){a=i;break}}else if(t!="9999")break;l+=4}return rn=!0,Pa(a,r)};Yt.times=Yt.mul=function(e){var t,r,a,s,i,l,u,d,f,m=this,g=m.constructor,v=m.d,x=(e=new g(e)).d;if(!m.s||!e.s)return new g(0);for(e.s*=m.s,r=m.e+e.e,d=v.length,f=x.length,d<f&&(i=v,v=x,x=i,l=d,d=f,f=l),i=[],l=d+f,a=l;a--;)i.push(0);for(a=f;--a>=0;){for(t=0,s=d+a;s>a;)u=i[s]+x[a]*v[s-a-1]+t,i[s--]=u%cs|0,t=u/cs|0;i[s]=(i[s]+t)%cs|0}for(;!i[--l];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,rn?Pa(e,g.precision):e};Yt.toDecimalPlaces=Yt.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(tc(e,0,om),t===void 0?t=a.rounding:tc(t,0,8),Pa(r,e+Bn(r)+1,t))};Yt.toExponential=function(e,t){var r,a=this,s=a.constructor;return e===void 0?r=xf(a,!0):(tc(e,0,om),t===void 0?t=s.rounding:tc(t,0,8),a=Pa(new s(a),e+1,t),r=xf(a,!0,e+1)),r};Yt.toFixed=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?xf(s):(tc(e,0,om),t===void 0?t=i.rounding:tc(t,0,8),a=Pa(new i(s),e+Bn(s)+1,t),r=xf(a.abs(),!1,e+Bn(a)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Yt.toInteger=Yt.toint=function(){var e=this,t=e.constructor;return Pa(new t(e),Bn(e)+1,t.rounding)};Yt.toNumber=function(){return+this};Yt.toPower=Yt.pow=function(e){var t,r,a,s,i,l,u=this,d=u.constructor,f=12,m=+(e=new d(e));if(!e.s)return new d($i);if(u=new d(u),!u.s){if(e.s<1)throw Error(Co+"Infinity");return u}if(u.eq($i))return u;if(a=d.precision,e.eq($i))return Pa(u,a);if(t=e.e,r=e.d.length-1,l=t>=r,i=u.s,l){if((r=m<0?-m:m)<=KP){for(s=new d($i),t=Math.ceil(a/za+4),rn=!1;r%2&&(s=s.times(u),vA(s.d,t)),r=lm(r/2),r!==0;)u=u.times(u),vA(u.d,t);return rn=!0,e.s<0?new d($i).div(s):Pa(s,a)}}else if(i<0)throw Error(Co+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,rn=!1,s=e.times(Lp(u,a+f)),rn=!0,s=YP(s),s.s=i,s};Yt.toPrecision=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?(r=Bn(s),a=xf(s,r<=i.toExpNeg||r>=i.toExpPos)):(tc(e,1,om),t===void 0?t=i.rounding:tc(t,0,8),s=Pa(new i(s),e,t),r=Bn(s),a=xf(s,e<=r||r<=i.toExpNeg,e)),a};Yt.toSignificantDigits=Yt.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(tc(e,1,om),t===void 0?t=a.rounding:tc(t,0,8)),Pa(new a(r),e,t)};Yt.toString=Yt.valueOf=Yt.val=Yt.toJSON=Yt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Bn(e),r=e.constructor;return xf(e,t<=r.toExpNeg||t>=r.toExpPos)};function WP(e,t){var r,a,s,i,l,u,d,f,m=e.constructor,g=m.precision;if(!e.s||!t.s)return t.s||(t=new m(e)),rn?Pa(t,g):t;if(d=e.d,f=t.d,l=e.e,s=t.e,d=d.slice(),i=l-s,i){for(i<0?(a=d,i=-i,u=f.length):(a=f,s=l,u=d.length),l=Math.ceil(g/za),u=l>u?l+1:u+1,i>u&&(i=u,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(u=d.length,i=f.length,u-i<0&&(i=u,a=f,f=d,d=a),r=0;i;)r=(d[--i]=d[i]+f[i]+r)/cs|0,d[i]%=cs;for(r&&(d.unshift(r),++s),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=s,rn?Pa(t,g):t}function tc(e,t,r){if(e!==~~e||e<t||e>r)throw Error(ff+e)}function Kl(e){var t,r,a,s=e.length-1,i="",l=e[0];if(s>0){for(i+=l,t=1;t<s;t++)a=e[t]+"",r=za-a.length,r&&(i+=Qu(r)),i+=a;l=e[t],a=l+"",r=za-a.length,r&&(i+=Qu(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var Wc=function(){function e(a,s){var i,l=0,u=a.length;for(a=a.slice();u--;)i=a[u]*s+l,a[u]=i%cs|0,l=i/cs|0;return l&&a.unshift(l),a}function t(a,s,i,l){var u,d;if(i!=l)d=i>l?1:-1;else for(u=d=0;u<i;u++)if(a[u]!=s[u]){d=a[u]>s[u]?1:-1;break}return d}function r(a,s,i){for(var l=0;i--;)a[i]-=l,l=a[i]<s[i]?1:0,a[i]=l*cs+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,l){var u,d,f,m,g,v,x,j,b,S,A,E,T,D,R,B,U,I,F=a.constructor,pe=a.s==s.s?1:-1,L=a.d,q=s.d;if(!a.s)return new F(a);if(!s.s)throw Error(Co+"Division by zero");for(d=a.e-s.e,U=q.length,R=L.length,x=new F(pe),j=x.d=[],f=0;q[f]==(L[f]||0);)++f;if(q[f]>(L[f]||0)&&--d,i==null?E=i=F.precision:l?E=i+(Bn(a)-Bn(s))+1:E=i,E<0)return new F(0);if(E=E/za+2|0,f=0,U==1)for(m=0,q=q[0],E++;(f<R||m)&&E--;f++)T=m*cs+(L[f]||0),j[f]=T/q|0,m=T%q|0;else{for(m=cs/(q[0]+1)|0,m>1&&(q=e(q,m),L=e(L,m),U=q.length,R=L.length),D=U,b=L.slice(0,U),S=b.length;S<U;)b[S++]=0;I=q.slice(),I.unshift(0),B=q[0],q[1]>=cs/2&&++B;do m=0,u=t(q,b,U,S),u<0?(A=b[0],U!=S&&(A=A*cs+(b[1]||0)),m=A/B|0,m>1?(m>=cs&&(m=cs-1),g=e(q,m),v=g.length,S=b.length,u=t(g,b,v,S),u==1&&(m--,r(g,U<v?I:q,v))):(m==0&&(u=m=1),g=q.slice()),v=g.length,v<S&&g.unshift(0),r(b,g,S),u==-1&&(S=b.length,u=t(q,b,U,S),u<1&&(m++,r(b,U<S?I:q,S))),S=b.length):u===0&&(m++,b=[0]),j[f++]=m,u&&b[0]?b[S++]=L[D]||0:(b=[L[D]],S=1);while((D++<R||b[0]!==void 0)&&E--)}return j[0]||j.shift(),x.e=d,Pa(x,l?i+Bn(x)+1:i)}}();function YP(e,t){var r,a,s,i,l,u,d=0,f=0,m=e.constructor,g=m.precision;if(Bn(e)>16)throw Error(zj+Bn(e));if(!e.s)return new m($i);for(rn=!1,u=g,l=new m(.03125);e.abs().gte(.1);)e=e.times(l),f+=5;for(a=Math.log(Jd(2,f))/Math.LN10*2+5|0,u+=a,r=s=i=new m($i),m.precision=u;;){if(s=Pa(s.times(e),u),r=r.times(++d),l=i.plus(Wc(s,r,u)),Kl(l.d).slice(0,u)===Kl(i.d).slice(0,u)){for(;f--;)i=Pa(i.times(i),u);return m.precision=g,t==null?(rn=!0,Pa(i,g)):i}i=l}}function Bn(e){for(var t=e.e*za,r=e.d[0];r>=10;r/=10)t++;return t}function y1(e,t,r){if(t>e.LN10.sd())throw rn=!0,r&&(e.precision=r),Error(Co+"LN10 precision limit exceeded");return Pa(new e(e.LN10),t)}function Qu(e){for(var t="";e--;)t+="0";return t}function Lp(e,t){var r,a,s,i,l,u,d,f,m,g=1,v=10,x=e,j=x.d,b=x.constructor,S=b.precision;if(x.s<1)throw Error(Co+(x.s?"NaN":"-Infinity"));if(x.eq($i))return new b(0);if(t==null?(rn=!1,f=S):f=t,x.eq(10))return t==null&&(rn=!0),y1(b,f);if(f+=v,b.precision=f,r=Kl(j),a=r.charAt(0),i=Bn(x),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)x=x.times(e),r=Kl(x.d),a=r.charAt(0),g++;i=Bn(x),a>1?(x=new b("0."+r),i++):x=new b(a+"."+r.slice(1))}else return d=y1(b,f+2,S).times(i+""),x=Lp(new b(a+"."+r.slice(1)),f-v).plus(d),b.precision=S,t==null?(rn=!0,Pa(x,S)):x;for(u=l=x=Wc(x.minus($i),x.plus($i),f),m=Pa(x.times(x),f),s=3;;){if(l=Pa(l.times(m),f),d=u.plus(Wc(l,new b(s),f)),Kl(d.d).slice(0,f)===Kl(u.d).slice(0,f))return u=u.times(2),i!==0&&(u=u.plus(y1(b,f+2,S).times(i+""))),u=Wc(u,new b(g),f),b.precision=S,t==null?(rn=!0,Pa(u,S)):u;u=d,s+=2}}function xA(e,t){var r,a,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,r=r-a-1,e.e=lm(r/za),e.d=[],a=(r+1)%za,r<0&&(a+=za),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=za;a<s;)e.d.push(+t.slice(a,a+=za));t=t.slice(a),a=za-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),rn&&(e.e>Tx||e.e<-Tx))throw Error(zj+r)}else e.s=0,e.e=0,e.d=[0];return e}function Pa(e,t,r){var a,s,i,l,u,d,f,m,g=e.d;for(l=1,i=g[0];i>=10;i/=10)l++;if(a=t-l,a<0)a+=za,s=t,f=g[m=0];else{if(m=Math.ceil((a+1)/za),i=g.length,m>=i)return e;for(f=i=g[m],l=1;i>=10;i/=10)l++;a%=za,s=a-za+l}if(r!==void 0&&(i=Jd(10,l-s-1),u=f/i%10|0,d=t<0||g[m+1]!==void 0||f%i,d=r<4?(u||d)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||d||r==6&&(a>0?s>0?f/Jd(10,l-s):0:g[m-1])%10&1||r==(e.s<0?8:7))),t<1||!g[0])return d?(i=Bn(e),g.length=1,t=t-i-1,g[0]=Jd(10,(za-t%za)%za),e.e=lm(-t/za)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(a==0?(g.length=m,i=1,m--):(g.length=m+1,i=Jd(10,za-a),g[m]=s>0?(f/Jd(10,l-s)%Jd(10,s)|0)*i:0),d)for(;;)if(m==0){(g[0]+=i)==cs&&(g[0]=1,++e.e);break}else{if(g[m]+=i,g[m]!=cs)break;g[m--]=0,i=1}for(a=g.length;g[--a]===0;)g.pop();if(rn&&(e.e>Tx||e.e<-Tx))throw Error(zj+Bn(e));return e}function XP(e,t){var r,a,s,i,l,u,d,f,m,g,v=e.constructor,x=v.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new v(e),rn?Pa(t,x):t;if(d=e.d,g=t.d,a=t.e,f=e.e,d=d.slice(),l=f-a,l){for(m=l<0,m?(r=d,l=-l,u=g.length):(r=g,a=f,u=d.length),s=Math.max(Math.ceil(x/za),u)+2,l>s&&(l=s,r.length=1),r.reverse(),s=l;s--;)r.push(0);r.reverse()}else{for(s=d.length,u=g.length,m=s<u,m&&(u=s),s=0;s<u;s++)if(d[s]!=g[s]){m=d[s]<g[s];break}l=0}for(m&&(r=d,d=g,g=r,t.s=-t.s),u=d.length,s=g.length-u;s>0;--s)d[u++]=0;for(s=g.length;s>l;){if(d[--s]<g[s]){for(i=s;i&&d[--i]===0;)d[i]=cs-1;--d[i],d[s]+=cs}d[s]-=g[s]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--a;return d[0]?(t.d=d,t.e=a,rn?Pa(t,x):t):new v(0)}function xf(e,t,r){var a,s=Bn(e),i=Kl(e.d),l=i.length;return t?(r&&(a=r-l)>0?i=i.charAt(0)+"."+i.slice(1)+Qu(a):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Qu(-s-1)+i,r&&(a=r-l)>0&&(i+=Qu(a))):s>=l?(i+=Qu(s+1-l),r&&(a=r-s-1)>0&&(i=i+"."+Qu(a))):((a=s+1)<l&&(i=i.slice(0,a)+"."+i.slice(a)),r&&(a=r-l)>0&&(s+1===l&&(i+="."),i+=Qu(a))),e.s<0?"-"+i:i}function vA(e,t){if(e.length>t)return e.length=t,!0}function ZP(e){var t,r,a;function s(i){var l=this;if(!(l instanceof s))return new s(i);if(l.constructor=s,i instanceof s){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(ff+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return xA(l,i.toString())}else if(typeof i!="string")throw Error(ff+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,z$.test(i))xA(l,i);else throw Error(ff+i)}if(s.prototype=Yt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=ZP,s.config=s.set=V$,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return s.config(e),s}function V$(e){if(!e||typeof e!="object")throw Error(Co+"Object expected");var t,r,a,s=["precision",1,om,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[r=s[t]])!==void 0)if(lm(a)===a&&a>=s[t+1]&&a<=s[t+2])this[r]=a;else throw Error(ff+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(ff+r+": "+a);return this}var Vj=ZP($$);$i=new Vj(1);const ya=Vj;var H$=e=>e,JP={},QP=e=>e===JP,yA=e=>function t(){return arguments.length===0||arguments.length===1&&QP(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},eT=(e,t)=>e===1?t:yA(function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var i=a.filter(l=>l!==JP).length;return i>=e?t(...a):eT(e-i,yA(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var f=a.map(m=>QP(m)?u.shift():m);return t(...f,...u)}))}),gv=e=>eT(e.length,e),rw=(e,t)=>{for(var r=[],a=e;a<t;++a)r[a-e]=a;return r},G$=gv((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),K$=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return H$;var s=r.reverse(),i=s[0],l=s.slice(1);return function(){return l.reduce((u,d)=>d(u),i(...arguments))}},aw=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),tT=e=>{var t=null,r=null;return function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return t&&s.every((l,u)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[u])})||(t=s,r=e(...s)),r}};function rT(e){var t;return e===0?t=1:t=Math.floor(new ya(e).abs().log(10).toNumber())+1,t}function aT(e,t,r){for(var a=new ya(e),s=0,i=[];a.lt(t)&&s<1e5;)i.push(a.toNumber()),a=a.add(r),s++;return i}gv((e,t,r)=>{var a=+e,s=+t;return a+r*(s-a)});gv((e,t,r)=>{var a=t-+e;return a=a||1/0,(r-e)/a});gv((e,t,r)=>{var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))});var nT=e=>{var[t,r]=e,[a,s]=[t,r];return t>r&&([a,s]=[r,t]),[a,s]},sT=(e,t,r)=>{if(e.lte(0))return new ya(0);var a=rT(e.toNumber()),s=new ya(10).pow(a),i=e.div(s),l=a!==1?.05:.1,u=new ya(Math.ceil(i.div(l).toNumber())).add(r).mul(l),d=u.mul(s);return t?new ya(d.toNumber()):new ya(Math.ceil(d.toNumber()))},W$=(e,t,r)=>{var a=new ya(1),s=new ya(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(a=new ya(10).pow(rT(e)-1),s=new ya(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new ya(Math.floor(e)))}else e===0?s=new ya(Math.floor((t-1)/2)):r||(s=new ya(Math.floor(e)));var l=Math.floor((t-1)/2),u=K$(G$(d=>s.add(new ya(d-l).mul(a)).toNumber()),rw);return u(0,t)},iT=function(t,r,a,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(a-1)))return{step:new ya(0),tickMin:new ya(0),tickMax:new ya(0)};var l=sT(new ya(r).sub(t).div(a-1),s,i),u;t<=0&&r>=0?u=new ya(0):(u=new ya(t).add(r).div(2),u=u.sub(new ya(u).mod(l)));var d=Math.ceil(u.sub(t).div(l).toNumber()),f=Math.ceil(new ya(r).sub(u).div(l).toNumber()),m=d+f+1;return m>a?iT(t,r,a,s,i+1):(m<a&&(f=r>0?f+(a-m):f,d=r>0?d:d+(a-m)),{step:l,tickMin:u.sub(new ya(d).mul(l)),tickMax:u.add(new ya(f).mul(l))})};function Y$(e){var[t,r]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(a,2),[l,u]=nT([t,r]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...rw(0,a-1).map(()=>1/0)]:[...rw(0,a-1).map(()=>-1/0),u];return t>r?aw(d):d}if(l===u)return W$(l,a,s);var{step:f,tickMin:m,tickMax:g}=iT(l,u,i,s,0),v=aT(m,g.add(new ya(.1).mul(f)),f);return t>r?aw(v):v}function X$(e,t){var[r,a]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,l]=nT([r,a]);if(i===-1/0||l===1/0)return[r,a];if(i===l)return[i];var u=Math.max(t,2),d=sT(new ya(l).sub(i).div(u-1),s,0),f=[...aT(new ya(i),new ya(l),d),l];return s===!1&&(f=f.map(m=>Math.round(m))),r>a?aw(f):f}var Z$=tT(Y$),J$=tT(X$),oT=e=>e.rootProps.maxBarSize,Q$=e=>e.rootProps.barGap,lT=e=>e.rootProps.barCategoryGap,ez=e=>e.rootProps.barSize,ag=e=>e.rootProps.stackOffset,Hj=e=>e.options.chartName,Gj=e=>e.rootProps.syncId,cT=e=>e.rootProps.syncMethod,Kj=e=>e.options.eventEmitter,Uc={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Fi={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},xv=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},tz={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Uc.angleAxisId,includeHidden:!1,name:void 0,reversed:Uc.reversed,scale:Uc.scale,tick:Uc.tick,tickCount:void 0,ticks:void 0,type:Uc.type,unit:void 0},rz={allowDataOverflow:Fi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Fi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Fi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Fi.scale,tick:Fi.tick,tickCount:Fi.tickCount,ticks:void 0,type:Fi.type,unit:void 0},az={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Uc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Uc.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Uc.scale,tick:Uc.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},nz={allowDataOverflow:Fi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Fi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Fi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Fi.scale,tick:Fi.tick,tickCount:Fi.tickCount,ticks:void 0,type:"category",unit:void 0},Wj=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?az:tz,Yj=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?nz:rz,vv=e=>e.polarOptions,Xj=nt([nu,su,Xn],GE),uT=nt([vv,Xj],(e,t)=>{if(e!=null)return ri(e.innerRadius,t,0)}),dT=nt([vv,Xj],(e,t)=>{if(e!=null)return ri(e.outerRadius,t,t*.8)}),sz=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},fT=nt([vv],sz);nt([Wj,fT],xv);var hT=nt([Xj,uT,dT],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});nt([Yj,hT],xv);var iz=nt([da,vv,uT,dT,nu,su],(e,t,r,a,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||a==null)){var{cx:l,cy:u,startAngle:d,endAngle:f}=t;return{cx:ri(l,s,s/2),cy:ri(u,i,i/2),innerRadius:r,outerRadius:a,startAngle:d,endAngle:f,clockWise:!1}}}),Dn=(e,t)=>t,ng=(e,t,r)=>r;function bA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ox(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bA(Object(r),!0).forEach(function(a){oz(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function oz(e,t,r){return(t=lz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lz(e){var t=cz(e,"string");return typeof t=="symbol"?t:t+""}function cz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nw=[0,"auto"],Mi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},ou=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Mi},Ii={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:nw,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:iv},bd=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Ii},uz={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Zj=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??uz},Rn=(e,t,r)=>{switch(t){case"xAxis":return ou(e,r);case"yAxis":return bd(e,r);case"zAxis":return Zj(e,r);case"angleAxis":return Wj(e,r);case"radiusAxis":return Yj(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},dz=(e,t,r)=>{switch(t){case"xAxis":return ou(e,r);case"yAxis":return bd(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},sg=(e,t,r)=>{switch(t){case"xAxis":return ou(e,r);case"yAxis":return bd(e,r);case"angleAxis":return Wj(e,r);case"radiusAxis":return Yj(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},mT=e=>e.graphicalItems.countOfBars>0;function Jj(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var yv=e=>e.graphicalItems.cartesianItems,fz=nt([Dn,ng],Jj),Qj=(e,t,r)=>e.filter(r).filter(a=>(t==null?void 0:t.includeHidden)===!0?!0:!a.hide),ig=nt([yv,Rn,fz],Qj),pT=e=>e.filter(t=>t.stackId===void 0),hz=nt([ig],pT),e_=e=>e.map(t=>t.data).filter(Boolean).flat(1),mz=nt([ig],e_),t_=(e,t)=>{var{chartData:r=[],dataStartIndex:a,dataEndIndex:s}=t;return e.length>0?e:r.slice(a,s+1)},bv=nt([mz,$j],t_),r_=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:Va(a,t.dataKey)})):r.length>0?r.map(a=>a.dataKey).flatMap(a=>e.map(s=>({value:Va(s,a)}))):e.map(a=>({value:a})),wv=nt([bv,Rn,ig],r_);function gT(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Cf(e){return e.filter(t=>ec(t)||t instanceof Date).map(Number).filter(t=>Gi(t)===!1)}function pz(e,t,r){return!r||typeof t!="number"||Gi(t)?[]:r.length?Cf(r.flatMap(a=>{var s=Va(e,a.dataKey),i,l;if(Array.isArray(s)?[i,l]=s:i=l=s,!(!Yi(i)||!Yi(l)))return[t-i,t+l]})):[]}var xT=(e,t,r)=>{var a={},s=t.reduce((i,l)=>(l.stackId==null||(i[l.stackId]==null&&(i[l.stackId]=[]),i[l.stackId].push(l)),i),a);return Object.fromEntries(Object.entries(s).map(i=>{var[l,u]=i,d=u.map(f=>f.dataKey);return[l,{stackedData:pF(e,d,r),graphicalItems:u}]}))},sw=nt([bv,ig,ag],xT),vT=(e,t,r)=>{var{dataStartIndex:a,dataEndIndex:s}=t;if(r!=="zAxis"){var i=yF(e,a,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},gz=nt([sw,Af,Dn],vT),yT=(e,t,r,a)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var l,u,d=(l=i.errorBars)===null||l===void 0?void 0:l.filter(m=>gT(a,m)),f=Va(s,(u=t.dataKey)!==null&&u!==void 0?u:i.dataKey);return{value:f,errorDomain:pz(s,f,d)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Va(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),xz=nt(bv,Rn,hz,Dn,yT);function vz(e){var{value:t}=e;if(ec(t)||t instanceof Date)return t}var yz=e=>{var t=e.flatMap(a=>[a.value,a.errorDomain]).flat(1),r=Cf(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},bz=(e,t,r)=>{var a=e.map(vz).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Uk(a))?fP(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},a_=e=>{var t;if(e==null||!("domain"in e))return nw;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Cf(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:nw},n_=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),l=Math.min(...i),u=Math.max(...i);return[l,u]}},bT=e=>e.referenceElements.dots,cm=(e,t,r)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===r:a.yAxisId===r),wz=nt([bT,Dn,ng],cm),wT=e=>e.referenceElements.areas,jz=nt([wT,Dn,ng],cm),jT=e=>e.referenceElements.lines,_z=nt([jT,Dn,ng],cm),_T=(e,t)=>{var r=Cf(e.map(a=>t==="xAxis"?a.x:a.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Nz=nt(wz,Dn,_T),NT=(e,t)=>{var r=Cf(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Sz=nt([jz,Dn],NT),ST=(e,t)=>{var r=Cf(e.map(a=>t==="xAxis"?a.x:a.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Az=nt(_z,Dn,ST),Cz=nt(Nz,Az,Sz,(e,t,r)=>n_(e,r,t)),AT=nt([Rn],a_),s_=(e,t,r,a,s)=>{var i=B$(t,e.allowDataOverflow);return i??U$(t,n_(r,s,yz(a)),e.allowDataOverflow)},kz=nt([Rn,AT,gz,xz,Cz],s_),Ez=[0,1],i_=(e,t,r,a,s,i,l)=>{if(!(e==null||r==null||r.length===0)){var{dataKey:u,type:d}=e,f=xd(t,i);return f&&u==null?fP(0,r.length):d==="category"?bz(a,e,f):s==="expand"?Ez:l}},o_=nt([Rn,da,bv,wv,ag,Dn,kz],i_),CT=(e,t,r,a,s)=>{if(e!=null){var{scale:i,type:l}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":l==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!r)?"point":l==="category"?"band":"linear";if(typeof i=="string"){var u="scale".concat(Yp(i));return u in xp?u:"point"}}},um=nt([Rn,da,mT,Hj,Dn],CT);function Pz(e){if(e!=null){if(e in xp)return xp[e]();var t="scale".concat(Yp(e));if(t in xp)return xp[t]()}}function l_(e,t,r,a){if(!(r==null||a==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(a);var s=Pz(t);if(s!=null){var i=s.domain(r).range(a);return uF(i),i}}}var c_=(e,t,r)=>{var a=a_(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&Zh(e))return Z$(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Zh(e))return J$(e,t.tickCount,t.allowDecimals)}},u_=nt([o_,sg,um],c_),d_=(e,t,r,a)=>{if(a!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Zh(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],l=t[1],u=r[r.length-1];return[Math.min(s,i),Math.max(l,u)]}return t},Tz=nt([Rn,o_,u_,Dn],d_),Oz=nt(wv,Rn,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,a=Array.from(Cf(e.map(u=>u.value))).sort((u,d)=>u-d);if(a.length<2)return 1/0;var s=a[a.length-1]-a[0];if(s===0)return 1/0;for(var i=0;i<a.length-1;i++){var l=a[i+1]-a[i];r=Math.min(r,l)}return r/s}}),kT=nt(Oz,da,lT,Xn,(e,t,r,a)=>a,(e,t,r,a,s)=>{if(!Yi(e))return 0;var i=t==="vertical"?a.height:a.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var l=ri(r,e*i),u=e*i/2;return u-l-(u-l)/i*l}return 0}),Dz=(e,t)=>{var r=ou(e,t);return r==null||typeof r.padding!="string"?0:kT(e,"xAxis",t,r.padding)},Rz=(e,t)=>{var r=bd(e,t);return r==null||typeof r.padding!="string"?0:kT(e,"yAxis",t,r.padding)},Lz=nt(ou,Dz,(e,t)=>{var r,a;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((a=s.right)!==null&&a!==void 0?a:0)+t}}),Mz=nt(bd,Rz,(e,t)=>{var r,a;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((a=s.bottom)!==null&&a!==void 0?a:0)+t}}),Iz=nt([Xn,Lz,lv,ov,(e,t,r)=>r],(e,t,r,a,s)=>{var{padding:i}=a;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),qz=nt([Xn,da,Mz,lv,ov,(e,t,r)=>r],(e,t,r,a,s,i)=>{var{padding:l}=s;return i?[a.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),og=(e,t,r,a)=>{var s;switch(t){case"xAxis":return Iz(e,r,a);case"yAxis":return qz(e,r,a);case"zAxis":return(s=Zj(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return fT(e);case"radiusAxis":return hT(e,r);default:return}},ET=nt([Rn,og],xv),dm=nt([Rn,um,Tz,ET],l_);nt(ig,Dn,(e,t)=>e.flatMap(r=>{var a;return(a=r.errorBars)!==null&&a!==void 0?a:[]}).filter(r=>gT(t,r)));function PT(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var jv=(e,t)=>t,_v=(e,t,r)=>r,Fz=nt(uj,jv,_v,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(PT)),Bz=nt(dj,jv,_v,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(PT)),TT=(e,t)=>({width:e.width,height:t.height}),Uz=(e,t)=>{var r=typeof t.width=="number"?t.width:iv;return{width:r,height:e.height}},OT=nt(Xn,ou,TT),$z=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},zz=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},Vz=nt(su,Xn,Fz,jv,_v,(e,t,r,a,s)=>{var i={},l;return r.forEach(u=>{var d=TT(t,u);l==null&&(l=$z(t,a,e));var f=a==="top"&&!s||a==="bottom"&&s;i[u.id]=l-Number(f)*d.height,l+=(f?-1:1)*d.height}),i}),Hz=nt(nu,Xn,Bz,jv,_v,(e,t,r,a,s)=>{var i={},l;return r.forEach(u=>{var d=Uz(t,u);l==null&&(l=zz(t,a,e));var f=a==="left"&&!s||a==="right"&&s;i[u.id]=l-Number(f)*d.width,l+=(f?-1:1)*d.width}),i}),Gz=(e,t)=>{var r=Xn(e),a=ou(e,t);if(a!=null){var s=Vz(e,a.orientation,a.mirror),i=s[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},Kz=(e,t)=>{var r=Xn(e),a=bd(e,t);if(a!=null){var s=Hz(e,a.orientation,a.mirror),i=s[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},DT=nt(Xn,bd,(e,t)=>{var r=typeof t.width=="number"?t.width:iv;return{width:r,height:e.height}}),wA=(e,t,r)=>{switch(t){case"xAxis":return OT(e,r).width;case"yAxis":return DT(e,r).height;default:return}},RT=(e,t,r,a)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:l}=r,u=xd(e,a),d=t.map(f=>f.value);if(l&&u&&i==="category"&&s&&Uk(d))return d}},f_=nt([da,wv,Rn,Dn],RT),LT=(e,t,r,a)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,l=xd(e,a);if(l&&(s==="number"||i!=="auto"))return t.map(u=>u.value)}},h_=nt([da,wv,sg,Dn],LT),jA=nt([da,dz,um,dm,f_,h_,og,u_,Dn],(e,t,r,a,s,i,l,u,d)=>{if(t==null)return null;var f=xd(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:i,duplicateDomain:s,isCategorical:f,niceTicks:u,range:l,realScaleType:r,scale:a}}),Wz=(e,t,r,a,s,i,l,u,d)=>{if(!(t==null||a==null)){var f=xd(e,d),{type:m,ticks:g,tickCount:v}=t,x=r==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,j=m==="category"&&a.bandwidth?a.bandwidth()/x:0;j=d==="angleAxis"&&i!=null&&i.length>=2?fs(i[0]-i[1])*2*j:j;var b=g||s;if(b){var S=b.map((A,E)=>{var T=l?l.indexOf(A):A;return{index:E,coordinate:a(T)+j,value:A,offset:j}});return S.filter(A=>!Gi(A.coordinate))}return f&&u?u.map((A,E)=>({coordinate:a(A)+j,value:A,index:E,offset:j})):a.ticks?a.ticks(v).map(A=>({coordinate:a(A)+j,value:A,offset:j})):a.domain().map((A,E)=>({coordinate:a(A)+j,value:l?l[A]:A,index:E,offset:j}))}},MT=nt([da,sg,um,dm,u_,og,f_,h_,Dn],Wz),Yz=(e,t,r,a,s,i,l)=>{if(!(t==null||r==null||a==null||a[0]===a[1])){var u=xd(e,l),{tickCount:d}=t,f=0;return f=l==="angleAxis"&&(a==null?void 0:a.length)>=2?fs(a[0]-a[1])*2*f:f,u&&i?i.map((m,g)=>({coordinate:r(m)+f,value:m,index:g,offset:f})):r.ticks?r.ticks(d).map(m=>({coordinate:r(m)+f,value:m,offset:f})):r.domain().map((m,g)=>({coordinate:r(m)+f,value:s?s[m]:m,index:g,offset:f}))}},ud=nt([da,sg,dm,og,f_,h_,Dn],Yz),rc=nt(Rn,dm,(e,t)=>{if(!(e==null||t==null))return Ox(Ox({},e),{},{scale:t})}),Xz=nt([Rn,um,o_,ET],l_);nt((e,t,r)=>Zj(e,r),Xz,(e,t)=>{if(!(e==null||t==null))return Ox(Ox({},e),{},{scale:t})});var Zz=nt([da,uj,dj],(e,t,r)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),IT=e=>e.options.defaultTooltipEventType,qT=e=>e.options.validateTooltipEventTypes;function FT(e,t,r){if(e==null)return t;var a=e?"axis":"item";return r==null?t:r.includes(a)?a:t}function m_(e,t){var r=IT(e),a=qT(e);return FT(t,r,a)}function Jz(e){return er(t=>m_(t,e))}var BT=(e,t)=>{var r,a=Number(t);if(!(Gi(a)||t==null))return a>=0?e==null||(r=e[a])===null||r===void 0?void 0:r.value:void 0},Qz=e=>e.tooltip.settings,td={active:!1,index:null,dataKey:void 0,coordinate:void 0},eV={itemInteraction:{click:td,hover:td},axisInteraction:{click:td,hover:td},keyboardInteraction:td,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},UT=Po({name:"tooltip",initialState:eV,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=Kc(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:tV,removeTooltipEntrySettings:rV,setTooltipSettingsState:aV,setActiveMouseOverItemIndex:$T,mouseLeaveItem:nV,mouseLeaveChart:zT,setActiveClickItemIndex:sV,setMouseOverAxisIndex:VT,setMouseClickAxisIndex:iV,setSyncInteraction:iw,setKeyboardInteraction:ow}=UT.actions,oV=UT.reducer;function _A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function C0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_A(Object(r),!0).forEach(function(a){lV(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_A(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function lV(e,t,r){return(t=cV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cV(e){var t=uV(e,"string");return typeof t=="symbol"?t:t+""}function uV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dV(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function fV(e){return e.index!=null}var HT=(e,t,r,a)=>{if(t==null)return td;var s=dV(e,t,r);if(s==null)return td;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(fV(s)){if(i)return C0(C0({},s),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a};return C0(C0({},td),{},{coordinate:s.coordinate})},p_=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var a=Number(r);if(!Yi(a))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(a,i)))},GT=(e,t,r,a,s,i,l,u)=>{if(!(i==null||u==null)){var d=l[0],f=d==null?void 0:u(d.positions,i);if(f!=null)return f;var m=s==null?void 0:s[Number(i)];if(m)switch(r){case"horizontal":return{x:m.coordinate,y:(a.top+t)/2};default:return{x:(a.left+e)/2,y:m.coordinate}}}},KT=(e,t,r,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&a!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var l;return((l=i.settings)===null||l===void 0?void 0:l.dataKey)===s})},lg=e=>e.options.tooltipPayloadSearcher,fm=e=>e.tooltip;function NA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function SA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NA(Object(r),!0).forEach(function(a){hV(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function hV(e,t,r){return(t=mV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mV(e){var t=pV(e,"string");return typeof t=="symbol"?t:t+""}function pV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gV(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function xV(e,t){return e??t}var WT=(e,t,r,a,s,i,l)=>{if(!(t==null||i==null)){var{chartData:u,computedData:d,dataStartIndex:f,dataEndIndex:m}=r,g=[];return e.reduce((v,x)=>{var j,{dataDefinedOnItem:b,settings:S}=x,A=xV(b,u),E=gV(A,f,m),T=(j=S==null?void 0:S.dataKey)!==null&&j!==void 0?j:a==null?void 0:a.dataKey,D=S==null?void 0:S.nameKey,R;if(a!=null&&a.dataKey&&Array.isArray(E)&&!Array.isArray(E[0])&&l==="axis"?R=$k(E,a.dataKey,s):R=i(E,t,d,D),Array.isArray(R))R.forEach(U=>{var I=SA(SA({},S),{},{name:U.name,unit:U.unit,color:void 0,fill:void 0});v.push(s3({tooltipEntrySettings:I,dataKey:U.dataKey,payload:U.payload,value:Va(U.payload,U.dataKey),name:U.name}))});else{var B;v.push(s3({tooltipEntrySettings:S,dataKey:T,payload:R,value:Va(R,T),name:(B=Va(R,D))!==null&&B!==void 0?B:S==null?void 0:S.name}))}return v},g)}},ps=e=>{var t=da(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},hm=e=>e.tooltip.settings.axisId,Ts=e=>{var t=ps(e),r=hm(e);return sg(e,t,r)},g_=nt([Ts,da,mT,Hj,ps],CT),vV=nt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),yV=nt([ps,hm],Jj),Nv=nt([vV,Ts,yV],Qj),bV=nt([Nv],e_),kf=nt([bV,Af],t_),x_=nt([kf,Ts,Nv],r_),wV=nt([Ts],a_),jV=nt([kf,Nv,ag],xT),_V=nt([jV,Af,ps],vT),NV=nt([Nv],pT),SV=nt([kf,Ts,NV,ps],yT),AV=nt([bT,ps,hm],cm),CV=nt([AV,ps],_T),kV=nt([wT,ps,hm],cm),EV=nt([kV,ps],NT),PV=nt([jT,ps,hm],cm),TV=nt([PV,ps],ST),OV=nt([CV,TV,EV],n_),DV=nt([Ts,wV,_V,SV,OV],s_),YT=nt([Ts,da,kf,x_,ag,ps,DV],i_),RV=nt([YT,Ts,g_],c_),LV=nt([Ts,YT,RV,ps],d_),XT=e=>{var t=ps(e),r=hm(e),a=!1;return og(e,t,r,a)},ZT=nt([Ts,XT],xv),JT=nt([Ts,g_,LV,ZT],l_),MV=nt([da,x_,Ts,ps],RT),IV=nt([da,x_,Ts,ps],LT),qV=(e,t,r,a,s,i,l,u)=>{if(t){var{type:d}=t,f=xd(e,u);if(a){var m=r==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,g=d==="category"&&a.bandwidth?a.bandwidth()/m:0;return g=u==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?fs(s[0]-s[1])*2*g:g,f&&l?l.map((v,x)=>({coordinate:a(v)+g,value:v,index:x,offset:g})):a.domain().map((v,x)=>({coordinate:a(v)+g,value:i?i[v]:v,index:x,offset:g}))}}},lu=nt([da,Ts,g_,JT,XT,MV,IV,ps],qV),v_=nt([IT,qT,Qz],(e,t,r)=>FT(r.shared,e,t)),QT=e=>e.tooltip.settings.trigger,y_=e=>e.tooltip.settings.defaultIndex,Sv=nt([fm,v_,QT,y_],HT),dd=nt([Sv,kf],p_),eO=nt([lu,dd],BT),tO=nt([Sv],e=>{if(e)return e.dataKey}),rO=nt([fm,v_,QT,y_],KT),FV=nt([nu,su,da,Xn,lu,y_,rO,lg],GT),BV=nt([Sv,FV],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),UV=nt([Sv],e=>e.active),$V=nt([rO,dd,Af,Ts,eO,lg,v_],WT),zV=nt([$V],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function AA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function CA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AA(Object(r),!0).forEach(function(a){VV(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function VV(e,t,r){return(t=HV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HV(e){var t=GV(e,"string");return typeof t=="symbol"?t:t+""}function GV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KV=()=>er(Ts),WV=()=>{var e=KV(),t=er(lu),r=er(JT);return Ep(CA(CA({},e),{},{scale:r}),t)},YV=()=>er(Hj),b_=(e,t)=>t,aO=(e,t,r)=>r,w_=(e,t,r,a)=>a,XV=nt(lu,e=>Qx(e,t=>t.coordinate)),j_=nt([fm,b_,aO,w_],HT),nO=nt([j_,kf],p_),ZV=(e,t,r)=>{if(t!=null){var a=fm(e);return t==="axis"?r==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:r==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},sO=nt([fm,b_,aO,w_],KT),Dx=nt([nu,su,da,Xn,lu,w_,sO,lg],GT),JV=nt([j_,Dx],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),iO=nt(lu,nO,BT),QV=nt([sO,nO,Af,Ts,iO,lg,b_],WT),eH=nt([j_],e=>({isActive:e.active,activeIndex:e.index})),tH=(e,t,r,a,s,i,l,u)=>{if(!(!e||!t||!a||!s||!i)){var d=bF(e.chartX,e.chartY,t,r,u);if(d){var f=jF(d,t),m=lF(f,l,i,a,s),g=wF(t,i,m,d);return{activeIndex:String(m),activeCoordinate:g}}}};function lw(){return lw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},lw.apply(null,arguments)}function kA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function k0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kA(Object(r),!0).forEach(function(a){rH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function rH(e,t,r){return(t=aH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aH(e){var t=nH(e,"string");return typeof t=="symbol"?t:t+""}function nH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sH(e){var{coordinate:t,payload:r,index:a,offset:s,tooltipAxisBandSize:i,layout:l,cursor:u,tooltipEventType:d,chartName:f}=e,m=t,g=r,v=a;if(!u||!m||f!=="ScatterChart"&&d!=="axis")return null;var x,j;if(f==="ScatterChart")x=m,j=y9;else if(f==="BarChart")x=b9(l,m,s,i),j=lP;else if(l==="radial"){var{cx:b,cy:S,radius:A,startAngle:E,endAngle:T}=cP(m);x={cx:b,cy:S,startAngle:E,endAngle:T,innerRadius:A,outerRadius:A},j=dP}else x={points:iB(l,m,s)},j=gj;var D=typeof u=="object"&&"className"in u?u.className:void 0,R=k0(k0(k0(k0({stroke:"#ccc",pointerEvents:"none"},s),x),Kr(u,!1)),{},{payload:g,payloadIndex:v,className:aa("recharts-tooltip-cursor",D)});return _.isValidElement(u)?_.cloneElement(u,R):_.createElement(j,R)}function iH(e){var t=WV(),r=eP(),a=cv(),s=YV();return _.createElement(sH,lw({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:a,tooltipAxisBandSize:t,chartName:s}))}var oO=_.createContext(null),oH=()=>_.useContext(oO),b1={exports:{}},EA;function lH(){return EA||(EA=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function s(d,f,m){this.fn=d,this.context=f,this.once=m||!1}function i(d,f,m,g,v){if(typeof m!="function")throw new TypeError("The listener must be a function");var x=new s(m,g||d,v),j=r?r+f:f;return d._events[j]?d._events[j].fn?d._events[j]=[d._events[j],x]:d._events[j].push(x):(d._events[j]=x,d._eventsCount++),d}function l(d,f){--d._eventsCount===0?d._events=new a:delete d._events[f]}function u(){this._events=new a,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],m,g;if(this._eventsCount===0)return f;for(g in m=this._events)t.call(m,g)&&f.push(r?g.slice(1):g);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(m)):f},u.prototype.listeners=function(f){var m=r?r+f:f,g=this._events[m];if(!g)return[];if(g.fn)return[g.fn];for(var v=0,x=g.length,j=new Array(x);v<x;v++)j[v]=g[v].fn;return j},u.prototype.listenerCount=function(f){var m=r?r+f:f,g=this._events[m];return g?g.fn?1:g.length:0},u.prototype.emit=function(f,m,g,v,x,j){var b=r?r+f:f;if(!this._events[b])return!1;var S=this._events[b],A=arguments.length,E,T;if(S.fn){switch(S.once&&this.removeListener(f,S.fn,void 0,!0),A){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,m),!0;case 3:return S.fn.call(S.context,m,g),!0;case 4:return S.fn.call(S.context,m,g,v),!0;case 5:return S.fn.call(S.context,m,g,v,x),!0;case 6:return S.fn.call(S.context,m,g,v,x,j),!0}for(T=1,E=new Array(A-1);T<A;T++)E[T-1]=arguments[T];S.fn.apply(S.context,E)}else{var D=S.length,R;for(T=0;T<D;T++)switch(S[T].once&&this.removeListener(f,S[T].fn,void 0,!0),A){case 1:S[T].fn.call(S[T].context);break;case 2:S[T].fn.call(S[T].context,m);break;case 3:S[T].fn.call(S[T].context,m,g);break;case 4:S[T].fn.call(S[T].context,m,g,v);break;default:if(!E)for(R=1,E=new Array(A-1);R<A;R++)E[R-1]=arguments[R];S[T].fn.apply(S[T].context,E)}}return!0},u.prototype.on=function(f,m,g){return i(this,f,m,g,!1)},u.prototype.once=function(f,m,g){return i(this,f,m,g,!0)},u.prototype.removeListener=function(f,m,g,v){var x=r?r+f:f;if(!this._events[x])return this;if(!m)return l(this,x),this;var j=this._events[x];if(j.fn)j.fn===m&&(!v||j.once)&&(!g||j.context===g)&&l(this,x);else{for(var b=0,S=[],A=j.length;b<A;b++)(j[b].fn!==m||v&&!j[b].once||g&&j[b].context!==g)&&S.push(j[b]);S.length?this._events[x]=S.length===1?S[0]:S:l(this,x)}return this},u.prototype.removeAllListeners=function(f){var m;return f?(m=r?r+f:f,this._events[m]&&l(this,m)):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u}(b1)),b1.exports}var cH=lH();const uH=Eo(cH);var Mp=new uH,cw="recharts.syncEvent.tooltip",PA="recharts.syncEvent.brush";function __(e,t){if(t){var r=Number.parseInt(t,10);if(!Gi(r))return e==null?void 0:e[r]}}var dH={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},lO=Po({name:"options",initialState:dH,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),fH=lO.reducer,{createEventEmitter:hH}=lO.actions;function mH(e){return e.tooltip.syncInteraction}var pH={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},cO=Po({name:"chartData",initialState:pH,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:a}=t.payload;r!=null&&(e.dataStartIndex=r),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:TA,setDataStartEndIndexes:gH,setComputedData:hne}=cO.actions,xH=cO.reducer,uO=()=>{};function vH(){var e=er(Gj),t=er(Kj),r=an(),a=er(cT),s=er(lu),i=cv(),l=fj(),u=er(d=>d.rootProps.className);_.useEffect(()=>{if(e==null)return uO;var d=(f,m,g)=>{if(t!==g&&e===f){if(a==="index"){r(m);return}if(s!=null){var v;if(typeof a=="function"){var x={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},j=a(s,x);v=s[j]}else a==="value"&&(v=s.find(B=>String(B.value)===m.payload.label));var{coordinate:b}=m.payload;if(v==null||m.payload.active===!1||b==null||l==null){r(iw({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:S,y:A}=b,E=Math.min(S,l.x+l.width),T=Math.min(A,l.y+l.height),D={x:i==="horizontal"?v.coordinate:E,y:i==="horizontal"?T:v.coordinate},R=iw({active:m.payload.active,coordinate:D,dataKey:m.payload.dataKey,index:String(v.index),label:m.payload.label});r(R)}}};return Mp.on(cw,d),()=>{Mp.off(cw,d)}},[u,r,t,e,a,s,i,l])}function yH(){var e=er(Gj),t=er(Kj),r=an();_.useEffect(()=>{if(e==null)return uO;var a=(s,i,l)=>{t!==l&&e===s&&r(gH(i))};return Mp.on(PA,a),()=>{Mp.off(PA,a)}},[r,t,e])}function bH(){var e=an();_.useEffect(()=>{e(hH())},[e]),vH(),yH()}function wH(e,t,r,a,s,i){var l=er(v=>ZV(v,e,t)),u=er(Kj),d=er(Gj),f=er(cT),m=er(mH),g=m==null?void 0:m.active;_.useEffect(()=>{if(!g&&d!=null&&u!=null){var v=iw({active:i,coordinate:r,dataKey:l,index:s,label:typeof a=="number"?String(a):a});Mp.emit(cw,d,v,u)}},[g,r,l,s,a,u,d,f,i])}function OA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function DA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OA(Object(r),!0).forEach(function(a){jH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function jH(e,t,r){return(t=_H(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _H(e){var t=NH(e,"string");return typeof t=="symbol"?t:t+""}function NH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SH(e){return e.dataKey}function AH(e,t){return _.isValidElement(e)?_.cloneElement(e,t):typeof e=="function"?_.createElement(e,t):_.createElement(ZF,t)}var RA=[],CH={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!_f.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ei(e){var t=To(e,CH),{active:r,allowEscapeViewBox:a,animationDuration:s,animationEasing:i,content:l,filterNull:u,isAnimationActive:d,offset:f,payloadUniqBy:m,position:g,reverseDirection:v,useTranslate3d:x,wrapperStyle:j,cursor:b,shared:S,trigger:A,defaultIndex:E,portal:T,axisId:D}=t,R=an(),B=typeof E=="number"?String(E):E;_.useEffect(()=>{R(aV({shared:S,trigger:A,axisId:D,active:r,defaultIndex:B}))},[R,S,A,D,r,B]);var U=fj(),I=nP(),F=Jz(S),{activeIndex:pe,isActive:L}=er(ee=>eH(ee,F,A,B)),q=er(ee=>QV(ee,F,A,B)),z=er(ee=>iO(ee,F,A,B)),V=er(ee=>JV(ee,F,A,B)),de=q,se=oH(),fe=r??L,[oe,Se]=wE([de,fe]),Y=F==="axis"?z:void 0;wH(F,A,V,Y,pe,fe);var ye=T??se;if(ye==null)return null;var P=de??RA;fe||(P=RA),u&&P.length&&(P=gE(de.filter(ee=>ee.value!=null&&(ee.hide!==!0||t.includeHidden)),m,SH));var K=P.length>0,le=_.createElement(n9,{allowEscapeViewBox:a,animationDuration:s,animationEasing:i,isAnimationActive:d,active:fe,coordinate:V,hasPayload:K,offset:f,position:g,reverseDirection:v,useTranslate3d:x,viewBox:U,wrapperStyle:j,lastBoundingBox:oe,innerRef:Se,hasPortalFromProps:!!T},AH(l,DA(DA({},t),{},{payload:P,label:Y,active:fe,coordinate:V,accessibilityLayer:I})));return _.createElement(_.Fragment,null,Hk.createPortal(le,ye),fe&&_.createElement(iH,{cursor:b,tooltipEventType:F,coordinate:V,payload:de,index:pe}))}var w1={},j1={},_1={},LA;function kH(){return LA||(LA=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a,{signal:s,edges:i}={}){let l,u=null;const d=i!=null&&i.includes("leading"),f=i==null||i.includes("trailing"),m=()=>{u!==null&&(r.apply(l,u),l=void 0,u=null)},g=()=>{f&&m(),b()};let v=null;const x=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,g()},a)},j=()=>{v!==null&&(clearTimeout(v),v=null)},b=()=>{j(),l=void 0,u=null},S=()=>{m()},A=function(...E){if(s!=null&&s.aborted)return;l=this,u=E;const T=v==null;x(),d&&T&&m()};return A.schedule=x,A.cancel=b,A.flush=S,s==null||s.addEventListener("abort",b,{once:!0}),A}e.debounce=t}(_1)),_1}var MA;function EH(){return MA||(MA=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kH();function r(a,s=0,i={}){typeof i!="object"&&(i={});const{leading:l=!1,trailing:u=!0,maxWait:d}=i,f=Array(2);l&&(f[0]="leading"),u&&(f[1]="trailing");let m,g=null;const v=t.debounce(function(...b){m=a.apply(this,b),g=null},s,{edges:f}),x=function(...b){return d!=null&&(g===null&&(g=Date.now()),Date.now()-g>=d)?(m=a.apply(this,b),g=Date.now(),v.cancel(),v.schedule(),m):(v.apply(this,b),m)},j=()=>(v.flush(),m);return x.cancel=v.cancel,x.flush=j,x}e.debounce=r}(j1)),j1}var IA;function PH(){return IA||(IA=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EH();function r(a,s=0,i={}){const{leading:l=!0,trailing:u=!0}=i;return t.debounce(a,s,{leading:l,maxWait:s,trailing:u})}e.throttle=r}(w1)),w1}var N1,qA;function TH(){return qA||(qA=1,N1=PH().throttle),N1}var OH=TH();const DH=Eo(OH);var wp=function(t,r){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]};function FA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function S1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FA(Object(r),!0).forEach(function(a){RH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function RH(e,t,r){return(t=LH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LH(e){var t=MH(e,"string");return typeof t=="symbol"?t:t+""}function MH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ti=_.forwardRef((e,t)=>{var{aspect:r,initialDimension:a={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:l=0,minHeight:u,maxHeight:d,children:f,debounce:m=0,id:g,className:v,onResize:x,style:j={}}=e,b=_.useRef(null),S=_.useRef();S.current=x,_.useImperativeHandle(t,()=>b.current);var[A,E]=_.useState({containerWidth:a.width,containerHeight:a.height}),T=_.useCallback((R,B)=>{E(U=>{var I=Math.round(R),F=Math.round(B);return U.containerWidth===I&&U.containerHeight===F?U:{containerWidth:I,containerHeight:F}})},[]);_.useEffect(()=>{var R=F=>{var pe,{width:L,height:q}=F[0].contentRect;T(L,q),(pe=S.current)===null||pe===void 0||pe.call(S,L,q)};m>0&&(R=DH(R,m,{trailing:!0,leading:!1}));var B=new ResizeObserver(R),{width:U,height:I}=b.current.getBoundingClientRect();return T(U,I),B.observe(b.current),()=>{B.disconnect()}},[T,m]);var D=_.useMemo(()=>{var{containerWidth:R,containerHeight:B}=A;if(R<0||B<0)return null;wp(rf(s)||rf(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,i),wp(!r||r>0,"The aspect(%s) must be greater than zero.",r);var U=rf(s)?R:s,I=rf(i)?B:i;return r&&r>0&&(U?I=U/r:I&&(U=I*r),d&&I>d&&(I=d)),wp(U>0||I>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,U,I,s,i,l,u,r),_.Children.map(f,F=>_.cloneElement(F,{width:U,height:I,style:S1({width:U,height:I},F.props.style)}))},[r,f,i,d,u,l,A,s]);return _.createElement("div",{id:g?"".concat(g):void 0,className:aa("recharts-responsive-container",v),style:S1(S1({},j),{},{width:s,height:i,minWidth:l,minHeight:u,maxHeight:d}),ref:b},_.createElement("div",{style:{width:0,height:0,overflow:"visible"}},D))}),ul=e=>null;ul.displayName="Cell";function BA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function uw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BA(Object(r),!0).forEach(function(a){IH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function IH(e,t,r){return(t=qH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qH(e){var t=FH(e,"string");return typeof t=="symbol"?t:t+""}function FH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _h={widthCache:{},cacheCount:0},BH=2e3,UH={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},UA="recharts_measurement_span";function $H(e){var t=uw({},e);return Object.keys(t).forEach(r=>{t[r]||delete t[r]}),t}var jp=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||_f.isSsr)return{width:0,height:0};var a=$H(r),s=JSON.stringify({text:t,copyStyle:a});if(_h.widthCache[s])return _h.widthCache[s];try{var i=document.getElementById(UA);i||(i=document.createElement("span"),i.setAttribute("id",UA),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var l=uw(uw({},UH),a);Object.assign(i.style,l),i.textContent="".concat(t);var u=i.getBoundingClientRect(),d={width:u.width,height:u.height};return _h.widthCache[s]=d,++_h.cacheCount>BH&&(_h.cacheCount=0,_h.widthCache={}),d}catch{return{width:0,height:0}}},$A=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zH=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,VH=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,dO={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},HH=Object.keys(dO),Dh="NaN";function GH(e,t){return e*dO[t]}class pi{static parse(t){var r,[,a,s]=(r=VH.exec(t))!==null&&r!==void 0?r:[];return new pi(parseFloat(a),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Gi(t)&&(this.unit=""),r!==""&&!zH.test(r)&&(this.num=NaN,this.unit=""),HH.includes(r)&&(this.num=GH(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new pi(NaN,""):new pi(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new pi(NaN,""):new pi(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new pi(NaN,""):new pi(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new pi(NaN,""):new pi(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Gi(this.num)}}function fO(e){if(e.includes(Dh))return Dh;for(var t=e;t.includes("*")||t.includes("/");){var r,[,a,s,i]=(r=$A.exec(t))!==null&&r!==void 0?r:[],l=pi.parse(a??""),u=pi.parse(i??""),d=s==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return Dh;t=t.replace($A,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,[,m,g,v]=(f=zA.exec(t))!==null&&f!==void 0?f:[],x=pi.parse(m??""),j=pi.parse(v??""),b=g==="+"?x.add(j):x.subtract(j);if(b.isNaN())return Dh;t=t.replace(zA,b.toString())}return t}var VA=/\(([^()]*)\)/;function KH(e){for(var t=e,r;(r=VA.exec(t))!=null;){var[,a]=r;t=t.replace(VA,fO(a))}return t}function WH(e){var t=e.replace(/\s+/g,"");return t=KH(t),t=fO(t),t}function YH(e){try{return WH(e)}catch{return Dh}}function A1(e){var t=YH(e.slice(5,-1));return t===Dh?"":t}var XH=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],ZH=["dx","dy","angle","className","breakAll"];function dw(){return dw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},dw.apply(null,arguments)}function HA(e,t){if(e==null)return{};var r,a,s=JH(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function JH(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var hO=/[ \f\n\r\t\v\u2028\u2029]+/,mO=e=>{var{children:t,breakAll:r,style:a}=e;try{var s=[];Ta(t)||(r?s=t.toString().split(""):s=t.toString().split(hO));var i=s.map(u=>({word:u,width:jp(u,a).width})),l=r?0:jp(" ",a).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}},QH=(e,t,r,a,s)=>{var{maxLines:i,children:l,style:u,breakAll:d}=e,f=Wt(i),m=l,g=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce((q,z)=>{var{word:V,width:de}=z,se=q[q.length-1];if(se&&(a==null||s||se.width+de+r<Number(a)))se.words.push(V),se.width+=de+r;else{var fe={words:[V],width:de};q.push(fe)}return q},[])},v=g(t),x=pe=>pe.reduce((L,q)=>L.width>q.width?L:q);if(!f||s)return v;var j=v.length>i||x(v).width>Number(a);if(!j)return v;for(var b="…",S=pe=>{var L=m.slice(0,pe),q=mO({breakAll:d,style:u,children:L+b}).wordsWithComputedWidth,z=g(q),V=z.length>i||x(z).width>Number(a);return[V,z]},A=0,E=m.length-1,T=0,D;A<=E&&T<=m.length-1;){var R=Math.floor((A+E)/2),B=R-1,[U,I]=S(B),[F]=S(R);if(!U&&!F&&(A=R+1),U&&F&&(E=R-1),!U&&F){D=I;break}T++}return D||v},GA=e=>{var t=Ta(e)?[]:e.toString().split(hO);return[{words:t}]},eG=e=>{var{width:t,scaleToFit:r,children:a,style:s,breakAll:i,maxLines:l}=e;if((t||r)&&!_f.isSsr){var u,d,f=mO({breakAll:i,children:a,style:s});if(f){var{wordsWithComputedWidth:m,spaceWidth:g}=f;u=m,d=g}else return GA(a);return QH({breakAll:i,children:a,maxLines:l,style:s},u,d,t,r)}return GA(a)},KA="#808080",Av=_.forwardRef((e,t)=>{var{x:r=0,y:a=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:l=!1,textAnchor:u="start",verticalAnchor:d="end",fill:f=KA}=e,m=HA(e,XH),g=_.useMemo(()=>eG({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:l,style:m.style,width:m.width}),[m.breakAll,m.children,m.maxLines,l,m.style,m.width]),{dx:v,dy:x,angle:j,className:b,breakAll:S}=m,A=HA(m,ZH);if(!ec(r)||!ec(a))return null;var E=r+(Wt(v)?v:0),T=a+(Wt(x)?x:0),D;switch(d){case"start":D=A1("calc(".concat(i,")"));break;case"middle":D=A1("calc(".concat((g.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:D=A1("calc(".concat(g.length-1," * -").concat(s,")"));break}var R=[];if(l){var B=g[0].width,{width:U}=m;R.push("scale(".concat(Wt(U)?U/B:1,")"))}return j&&R.push("rotate(".concat(j,", ").concat(E,", ").concat(T,")")),R.length&&(A.transform=R.join(" ")),_.createElement("text",dw({},Kr(A,!0),{ref:t,x:E,y:T,className:aa("recharts-text",b),textAnchor:u,fill:f.includes("url")?KA:f}),g.map((I,F)=>{var pe=I.words.join(S?"":" ");return _.createElement("tspan",{x:E,dy:F===0?D:s,key:"".concat(pe,"-").concat(F)},pe)}))});Av.displayName="Text";var tG=["offset"],rG=["labelRef"];function WA(e,t){if(e==null)return{};var r,a,s=aG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function aG(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function YA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function qn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YA(Object(r),!0).forEach(function(a){nG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function nG(e,t,r){return(t=sG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sG(e){var t=iG(e,"string");return typeof t=="symbol"?t:t+""}function iG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $c(){return $c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},$c.apply(null,arguments)}var oG=e=>{var{value:t,formatter:r}=e,a=Ta(e.children)?t:e.children;return typeof r=="function"?r(a):a},N_=e=>e!=null&&typeof e=="function",lG=(e,t)=>{var r=fs(t-e),a=Math.min(Math.abs(t-e),360);return r*a},cG=(e,t,r)=>{var{position:a,viewBox:s,offset:i,className:l}=e,{cx:u,cy:d,innerRadius:f,outerRadius:m,startAngle:g,endAngle:v,clockWise:x}=s,j=(f+m)/2,b=lG(g,v),S=b>=0?1:-1,A,E;a==="insideStart"?(A=g+S*i,E=x):a==="insideEnd"?(A=v-S*i,E=!x):a==="end"&&(A=v+S*i,E=x),E=b<=0?E:!E;var T=Fn(u,d,j,A),D=Fn(u,d,j,A+(E?1:-1)*359),R="M".concat(T.x,",").concat(T.y,`
    A`).concat(j,",").concat(j,",0,1,").concat(E?0:1,`,
    `).concat(D.x,",").concat(D.y),B=Ta(e.id)?mf("recharts-radial-line-"):e.id;return _.createElement("text",$c({},r,{dominantBaseline:"central",className:aa("recharts-radial-bar-label",l)}),_.createElement("defs",null,_.createElement("path",{id:B,d:R})),_.createElement("textPath",{xlinkHref:"#".concat(B)},t))},uG=e=>{var{viewBox:t,offset:r,position:a}=e,{cx:s,cy:i,innerRadius:l,outerRadius:u,startAngle:d,endAngle:f}=t,m=(d+f)/2;if(a==="outside"){var{x:g,y:v}=Fn(s,i,u+r,m);return{x:g,y:v,textAnchor:g>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"end"};var x=(l+u)/2,{x:j,y:b}=Fn(s,i,x,m);return{x:j,y:b,textAnchor:"middle",verticalAnchor:"middle"}},dG=(e,t)=>{var{parentViewBox:r,offset:a,position:s}=e,{x:i,y:l,width:u,height:d}=t,f=d>=0?1:-1,m=f*a,g=f>0?"end":"start",v=f>0?"start":"end",x=u>=0?1:-1,j=x*a,b=x>0?"end":"start",S=x>0?"start":"end";if(s==="top"){var A={x:i+u/2,y:l-f*a,textAnchor:"middle",verticalAnchor:g};return qn(qn({},A),r?{height:Math.max(l-r.y,0),width:u}:{})}if(s==="bottom"){var E={x:i+u/2,y:l+d+m,textAnchor:"middle",verticalAnchor:v};return qn(qn({},E),r?{height:Math.max(r.y+r.height-(l+d),0),width:u}:{})}if(s==="left"){var T={x:i-j,y:l+d/2,textAnchor:b,verticalAnchor:"middle"};return qn(qn({},T),r?{width:Math.max(T.x-r.x,0),height:d}:{})}if(s==="right"){var D={x:i+u+j,y:l+d/2,textAnchor:S,verticalAnchor:"middle"};return qn(qn({},D),r?{width:Math.max(r.x+r.width-D.x,0),height:d}:{})}var R=r?{width:u,height:d}:{};return s==="insideLeft"?qn({x:i+j,y:l+d/2,textAnchor:S,verticalAnchor:"middle"},R):s==="insideRight"?qn({x:i+u-j,y:l+d/2,textAnchor:b,verticalAnchor:"middle"},R):s==="insideTop"?qn({x:i+u/2,y:l+m,textAnchor:"middle",verticalAnchor:v},R):s==="insideBottom"?qn({x:i+u/2,y:l+d-m,textAnchor:"middle",verticalAnchor:g},R):s==="insideTopLeft"?qn({x:i+j,y:l+m,textAnchor:S,verticalAnchor:v},R):s==="insideTopRight"?qn({x:i+u-j,y:l+m,textAnchor:b,verticalAnchor:v},R):s==="insideBottomLeft"?qn({x:i+j,y:l+d-m,textAnchor:S,verticalAnchor:g},R):s==="insideBottomRight"?qn({x:i+u-j,y:l+d-m,textAnchor:b,verticalAnchor:g},R):s&&typeof s=="object"&&(Wt(s.x)||rf(s.x))&&(Wt(s.y)||rf(s.y))?qn({x:i+ri(s.x,u),y:l+ri(s.y,d),textAnchor:"end",verticalAnchor:"end"},R):qn({x:i+u/2,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},R)},fG=e=>"cx"in e&&Wt(e.cx);function Ui(e){var{offset:t=5}=e,r=WA(e,tG),a=qn({offset:t},r),{viewBox:s,position:i,value:l,children:u,content:d,className:f="",textBreakAll:m,labelRef:g}=a,v=fj(),x=s||v;if(!x||Ta(l)&&Ta(u)&&!_.isValidElement(d)&&typeof d!="function")return null;if(_.isValidElement(d)){var{labelRef:j}=a,b=WA(a,rG);return _.cloneElement(d,b)}var S;if(typeof d=="function"){if(S=_.createElement(d,a),_.isValidElement(S))return S}else S=oG(a);var A=fG(x),E=Kr(a,!0);if(A&&(i==="insideStart"||i==="insideEnd"||i==="end"))return cG(a,S,E);var T=A?uG(a):dG(a,x);return _.createElement(Av,$c({ref:g,className:aa("recharts-label",f)},E,T,{breakAll:m}),S)}Ui.displayName="Label";var pO=e=>{var{cx:t,cy:r,angle:a,startAngle:s,endAngle:i,r:l,radius:u,innerRadius:d,outerRadius:f,x:m,y:g,top:v,left:x,width:j,height:b,clockWise:S,labelViewBox:A}=e;if(A)return A;if(Wt(j)&&Wt(b)){if(Wt(m)&&Wt(g))return{x:m,y:g,width:j,height:b};if(Wt(v)&&Wt(x))return{x:v,y:x,width:j,height:b}}if(Wt(m)&&Wt(g))return{x:m,y:g,width:0,height:0};if(Wt(t)&&Wt(r))return{cx:t,cy:r,startAngle:s||a||0,endAngle:i||a||0,innerRadius:d||0,outerRadius:f||u||l||0,clockWise:S};if(e.viewBox)return e.viewBox},hG=(e,t,r)=>{if(!e)return null;var a={viewBox:t,labelRef:r};return e===!0?_.createElement(Ui,$c({key:"label-implicit"},a)):ec(e)?_.createElement(Ui,$c({key:"label-implicit",value:e},a)):_.isValidElement(e)?e.type===Ui?_.cloneElement(e,qn({key:"label-implicit"},a)):_.createElement(Ui,$c({key:"label-implicit",content:e},a)):N_(e)?_.createElement(Ui,$c({key:"label-implicit",content:e},a)):e&&typeof e=="object"?_.createElement(Ui,$c({},e,{key:"label-implicit"},a)):null},mG=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var{children:s,labelRef:i}=t,l=pO(t),u=Zp(s,Ui).map((f,m)=>_.cloneElement(f,{viewBox:r||l,key:"label-".concat(m)}));if(!a)return u;var d=hG(t.label,r||l,i);return[d,...u]};Ui.parseViewBox=pO;Ui.renderCallByParent=mG;var C1={},k1={},XA;function pG(){return XA||(XA=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(k1)),k1}var E1={},ZA;function gG(){return ZA||(ZA=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(E1)),E1}var JA;function xG(){return JA||(JA=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pG(),r=gG(),a=Qw();function s(i){if(a.isArrayLike(i))return t.last(r.toArray(i))}e.last=s}(C1)),C1}var P1,QA;function vG(){return QA||(QA=1,P1=xG().last),P1}var yG=vG();const bG=Eo(yG);var wG=["valueAccessor"],jG=["data","dataKey","clockWise","id","textBreakAll"];function Rx(){return Rx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Rx.apply(null,arguments)}function e6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function t6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e6(Object(r),!0).forEach(function(a){_G(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function _G(e,t,r){return(t=NG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NG(e){var t=SG(e,"string");return typeof t=="symbol"?t:t+""}function SG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function r6(e,t){if(e==null)return{};var r,a,s=AG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function AG(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var CG=e=>Array.isArray(e.value)?bG(e.value):e.value;function id(e){var{valueAccessor:t=CG}=e,r=r6(e,wG),{data:a,dataKey:s,clockWise:i,id:l,textBreakAll:u}=r,d=r6(r,jG);return!a||!a.length?null:_.createElement(hs,{className:"recharts-label-list"},a.map((f,m)=>{var g=Ta(s)?t(f,m):Va(f&&f.payload,s),v=Ta(l)?{}:{id:"".concat(l,"-").concat(m)};return _.createElement(Ui,Rx({},Kr(f,!0),d,v,{parentViewBox:f.parentViewBox,value:g,textBreakAll:u,viewBox:Ui.parseViewBox(Ta(i)?f:t6(t6({},f),{},{clockWise:i})),key:"label-".concat(m),index:m}))}))}id.displayName="LabelList";function kG(e,t){return e?e===!0?_.createElement(id,{key:"labelList-implicit",data:t}):_.isValidElement(e)||N_(e)?_.createElement(id,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?_.createElement(id,Rx({data:t},e,{key:"labelList-implicit"})):null:null}function EG(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:a}=e,s=Zp(a,id).map((l,u)=>_.cloneElement(l,{data:t,key:"labelList-".concat(u)}));if(!r)return s;var i=kG(e.label,t);return[i,...s]}id.renderCallByParent=EG;function fw(){return fw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},fw.apply(null,arguments)}var gO=e=>{var{cx:t,cy:r,r:a,className:s}=e,i=aa("recharts-dot",s);return t===+t&&r===+r&&a===+a?_.createElement("circle",fw({},Kr(e,!1),Hw(e),{className:i,cx:t,cy:r,r:a})):null},xO=e=>e.graphicalItems.polarItems,PG=nt([Dn,ng],Jj),S_=nt([xO,Rn,PG],Qj),TG=nt([S_],e_),A_=nt([TG,Uj],t_),OG=nt([A_,Rn,S_],r_),DG=nt([A_,Rn,S_],(e,t,r)=>r.length>0?e.flatMap(a=>r.flatMap(s=>{var i,l=Va(a,(i=t.dataKey)!==null&&i!==void 0?i:s.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:Va(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]}))),a6=()=>{},RG=nt([Rn,AT,a6,DG,a6],s_),vO=nt([Rn,da,A_,OG,ag,Dn,RG],i_),LG=nt([vO,Rn,um],c_);nt([Rn,vO,LG,Dn],d_);var MG={radiusAxis:{},angleAxis:{}},yO=Po({name:"polarAxis",initialState:MG,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:mne,removeRadiusAxis:pne,addAngleAxis:gne,removeAngleAxis:xne}=yO.actions,IG=yO.reducer;function n6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function s6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n6(Object(r),!0).forEach(function(a){qG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qG(e,t,r){return(t=FG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FG(e){var t=BG(e,"string");return typeof t=="symbol"?t:t+""}function BG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var C_=(e,t)=>t,UG=[],k_=(e,t,r)=>(r==null?void 0:r.length)===0?UG:r,bO=nt([Uj,C_,k_],(e,t,r)=>{var{chartData:a}=e,s;if((t==null?void 0:t.data)!=null&&t.data.length>0?s=t.data:s=a,(!s||!s.length)&&r!=null&&(s=r.map(i=>s6(s6({},t.presentationProps),i.props))),s!=null)return s}),$G=nt([bO,C_,k_],(e,t,r)=>{if(e!=null)return e.map((a,s)=>{var i,l=Va(a,t.nameKey,t.name),u;return r!=null&&(i=r[s])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?u=r[s].props.fill:typeof a=="object"&&a!=null&&"fill"in a?u=a.fill:u=t.fill,{value:sm(l,t.dataKey),color:u,payload:a,type:t.legendType}})}),zG=nt([xO,C_],(e,t)=>{if(e.some(r=>r.type==="pie"&&t.dataKey===r.dataKey&&t.data===r.data))return t}),VG=nt([bO,zG,k_,Xn],(e,t,r,a)=>{if(!(t==null||e==null))return LK({offset:a,pieSettings:t,displayedData:e,cells:r})}),HG={countOfBars:0,cartesianItems:[],polarItems:[]},wO=Po({name:"graphicalItems",initialState:HG,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:a}=t.payload,s=Kc(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=a)},removeCartesianGraphicalItem(e,t){var r=Kc(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=Kc(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addBar:GG,removeBar:KG,addCartesianGraphicalItem:WG,replaceCartesianGraphicalItem:YG,removeCartesianGraphicalItem:XG,addPolarGraphicalItem:ZG,removePolarGraphicalItem:JG}=wO.actions,QG=wO.reducer;function i6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function o6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i6(Object(r),!0).forEach(function(a){eK(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function eK(e,t,r){return(t=tK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tK(e){var t=rK(e,"string");return typeof t=="symbol"?t:t+""}function rK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aK(e){var t=an(),r=_.useRef(null);return _.useEffect(()=>{var a=o6(o6({},e),{},{stackId:YE(e.stackId)});r.current===null?t(WG(a)):r.current!==a&&t(YG({prev:r.current,next:a})),r.current=a},[t,e]),_.useEffect(()=>()=>{r.current&&(t(XG(r.current)),r.current=null)},[t]),null}function nK(e){var t=an();return _.useEffect(()=>(t(ZG(e)),()=>{t(JG(e))}),[t,e]),null}var T1={},l6;function sK(){return l6||(l6=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${i}]`}let a=r;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(r)===a}e.isPlainObject=t}(T1)),T1}var O1,c6;function iK(){return c6||(c6=1,O1=sK().isPlainObject),O1}var oK=iK();const lK=Eo(oK);function Lx(){return Lx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Lx.apply(null,arguments)}var u6=(e,t,r,a,s)=>{var i=r-a,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+r,",").concat(t),l+="L ".concat(e+r-i/2,",").concat(t+s),l+="L ".concat(e+r-i/2-a,",").concat(t+s),l+="L ".concat(e,",").concat(t," Z"),l},cK={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},uK=e=>{var t=To(e,cK),r=_.useRef(),[a,s]=_.useState(-1);_.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var S=r.current.getTotalLength();S&&s(S)}catch{}},[]);var{x:i,y:l,upperWidth:u,lowerWidth:d,height:f,className:m}=t,{animationEasing:g,animationDuration:v,animationBegin:x,isUpdateAnimationActive:j}=t;if(i!==+i||l!==+l||u!==+u||d!==+d||f!==+f||u===0&&d===0||f===0)return null;var b=aa("recharts-trapezoid",m);return j?_.createElement(cd,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:f,x:i,y:l},to:{upperWidth:u,lowerWidth:d,height:f,x:i,y:l},duration:v,animationEasing:g,isActive:j},S=>{var{upperWidth:A,lowerWidth:E,height:T,x:D,y:R}=S;return _.createElement(cd,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,easing:g},_.createElement("path",Lx({},Kr(t,!0),{className:b,d:u6(D,R,A,E,T),ref:r})))}):_.createElement("g",null,_.createElement("path",Lx({},Kr(t,!0),{className:b,d:u6(i,l,u,d,f)})))},dK=["option","shapeType","propTransformer","activeClassName","isActive"];function fK(e,t){if(e==null)return{};var r,a,s=hK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function hK(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function d6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Mx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d6(Object(r),!0).forEach(function(a){mK(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function mK(e,t,r){return(t=pK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pK(e){var t=gK(e,"string");return typeof t=="symbol"?t:t+""}function gK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xK(e,t){return Mx(Mx({},t),e)}function vK(e,t){return e==="symbols"}function f6(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return _.createElement(lP,r);case"trapezoid":return _.createElement(uK,r);case"sector":return _.createElement(dP,r);case"symbols":if(vK(t))return _.createElement(Xw,r);break;default:return null}}function yK(e){return _.isValidElement(e)?e.props:e}function jO(e){var{option:t,shapeType:r,propTransformer:a=xK,activeClassName:s="recharts-active-shape",isActive:i}=e,l=fK(e,dK),u;if(_.isValidElement(t))u=_.cloneElement(t,Mx(Mx({},l),yK(t)));else if(typeof t=="function")u=t(l);else if(lK(t)&&typeof t!="boolean"){var d=a(t,l);u=_.createElement(f6,{shapeType:r,elementProps:d})}else{var f=l;u=_.createElement(f6,{shapeType:r,elementProps:f})}return i?_.createElement(hs,{className:s},u):u}var E_=(e,t)=>{var r=an();return(a,s)=>i=>{e==null||e(a,s,i),r($T({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}},P_=e=>{var t=an();return(r,a)=>s=>{e==null||e(r,a,s),t(nV())}},T_=(e,t)=>{var r=an();return(a,s)=>i=>{e==null||e(a,s,i),r(sV({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}};function O_(e){var{fn:t,args:r}=e,a=an(),s=ai();return _.useEffect(()=>{if(!s){var i=t(r);return a(tV(i)),()=>{a(rV(i))}}},[t,r,a,s]),null}var _O=()=>{};function NO(e){var{legendPayload:t}=e,r=an(),a=ai();return _.useEffect(()=>a?_O:(r(rP(t)),()=>{r(aP(t))}),[r,a,t]),null}function bK(e){var{legendPayload:t}=e,r=an(),a=er(da);return _.useEffect(()=>a!=="centric"&&a!=="radial"?_O:(r(rP(t)),()=>{r(aP(t))}),[r,a,t]),null}function D_(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=_.useRef(mf(t)),a=_.useRef(e);return a.current!==e&&(r.current=mf(t),a.current=e),r.current}var wK=["onMouseEnter","onClick","onMouseLeave"];function jK(e,t){if(e==null)return{};var r,a,s=_K(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _K(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function h6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function xn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h6(Object(r),!0).forEach(function(a){Cv(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Cv(e,t,r){return(t=NK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NK(e){var t=SK(e,"string");return typeof t=="symbol"?t:t+""}function SK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vf(){return vf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},vf.apply(null,arguments)}function AK(e){var t=_.useMemo(()=>Kr(e,!1),[e]),r=_.useMemo(()=>Zp(e.children,ul),[e.children]),a=_.useMemo(()=>({name:e.name,nameKey:e.nameKey,tooltipType:e.tooltipType,data:e.data,dataKey:e.dataKey,cx:e.cx,cy:e.cy,startAngle:e.startAngle,endAngle:e.endAngle,minAngle:e.minAngle,paddingAngle:e.paddingAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,cornerRadius:e.cornerRadius,legendType:e.legendType,fill:e.fill,presentationProps:t}),[e.cornerRadius,e.cx,e.cy,e.data,e.dataKey,e.endAngle,e.innerRadius,e.minAngle,e.name,e.nameKey,e.outerRadius,e.paddingAngle,e.startAngle,e.tooltipType,e.legendType,e.fill,t]),s=er(i=>$G(i,a,r));return _.createElement(bK,{legendPayload:s})}function CK(e){var{dataKey:t,nameKey:r,sectors:a,stroke:s,strokeWidth:i,fill:l,name:u,hide:d,tooltipType:f}=e;return{dataDefinedOnItem:a==null?void 0:a.map(m=>m.tooltipPayload),positions:a==null?void 0:a.map(m=>m.tooltipPosition),settings:{stroke:s,strokeWidth:i,fill:l,dataKey:t,nameKey:r,name:sm(u,t),hide:d,type:f,color:l,unit:""}}}var kK=(e,t)=>e>t?"start":e<t?"end":"middle",EK=(e,t,r)=>typeof t=="function"?t(e):ri(t,r,r*.8),PK=(e,t,r)=>{var{top:a,left:s,width:i,height:l}=t,u=GE(i,l),d=s+ri(e.cx,i,i/2),f=a+ri(e.cy,l,l/2),m=ri(e.innerRadius,u,0),g=EK(r,e.outerRadius,u),v=e.maxRadius||Math.sqrt(i*i+l*l)/2;return{cx:d,cy:f,innerRadius:m,outerRadius:g,maxRadius:v}},TK=(e,t)=>{var r=fs(t-e),a=Math.min(Math.abs(t-e),360);return r*a},OK=(e,t)=>{if(_.isValidElement(e))return _.cloneElement(e,t);if(typeof e=="function")return e(t);var r=aa("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return _.createElement(gj,vf({},t,{type:"linear",className:r}))},DK=(e,t,r)=>{if(_.isValidElement(e))return _.cloneElement(e,t);var a=r;if(typeof e=="function"&&(a=e(t),_.isValidElement(a)))return a;var s=aa("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return _.createElement(Av,vf({},t,{alignmentBaseline:"middle",className:s}),a)};function RK(e){var{sectors:t,props:r,showLabels:a}=e,{label:s,labelLine:i,dataKey:l}=r;if(!a||!s||!t)return null;var u=Kr(r,!1),d=Kr(s,!1),f=Kr(i,!1),m=typeof s=="object"&&"offsetRadius"in s&&s.offsetRadius||20,g=t.map((v,x)=>{var j=(v.startAngle+v.endAngle)/2,b=Fn(v.cx,v.cy,v.outerRadius+m,j),S=xn(xn(xn(xn({},u),v),{},{stroke:"none"},d),{},{index:x,textAnchor:kK(b.x,v.cx)},b),A=xn(xn(xn(xn({},u),v),{},{fill:"none",stroke:v.fill},f),{},{index:x,points:[Fn(v.cx,v.cy,v.outerRadius,j),b],key:"line"});return _.createElement(hs,{key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(x)},i&&OK(i,A),DK(s,S,Va(v,l)))});return _.createElement(hs,{className:"recharts-pie-labels"},g)}function SO(e){var{sectors:t,activeShape:r,inactiveShape:a,allOtherPieProps:s,showLabels:i}=e,l=er(dd),{onMouseEnter:u,onClick:d,onMouseLeave:f}=s,m=jK(s,wK),g=E_(u,s.dataKey),v=P_(f),x=T_(d,s.dataKey);return t==null?null:_.createElement(_.Fragment,null,t.map((j,b)=>{if((j==null?void 0:j.startAngle)===0&&(j==null?void 0:j.endAngle)===0&&t.length!==1)return null;var S=r&&String(b)===l,A=l?a:null,E=S?r:A,T=xn(xn({},j),{},{stroke:j.stroke,tabIndex:-1,[ZE]:b,[JE]:s.dataKey});return _.createElement(hs,vf({tabIndex:-1,className:"recharts-pie-sector"},Xp(m,j,b),{onMouseEnter:g(j,b),onMouseLeave:v(j,b),onClick:x(j,b),key:"sector-".concat(j==null?void 0:j.startAngle,"-").concat(j==null?void 0:j.endAngle,"-").concat(j.midAngle,"-").concat(b)}),_.createElement(jO,vf({option:E,isActive:S,shapeType:"sector"},T)))}),_.createElement(RK,{sectors:t,props:s,showLabels:i}))}function LK(e){var t,{pieSettings:r,displayedData:a,cells:s,offset:i}=e,{cornerRadius:l,startAngle:u,endAngle:d,dataKey:f,nameKey:m,tooltipType:g}=r,v=Math.abs(r.minAngle),x=TK(u,d),j=Math.abs(x),b=a.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,S=a.filter(B=>Va(B,f,0)!==0).length,A=(j>=360?S:S-1)*b,E=j-S*v-A,T=a.reduce((B,U)=>{var I=Va(U,f,0);return B+(Wt(I)?I:0)},0),D;if(T>0){var R;D=a.map((B,U)=>{var I=Va(B,f,0),F=Va(B,m,U),pe=PK(r,i,B),L=(Wt(I)?I:0)/T,q,z=xn(xn({},B),s&&s[U]&&s[U].props);U?q=R.endAngle+fs(x)*b*(I!==0?1:0):q=u;var V=q+fs(x)*((I!==0?v:0)+L*E),de=(q+V)/2,se=(pe.innerRadius+pe.outerRadius)/2,fe=[{name:F,value:I,payload:z,dataKey:f,type:g}],oe=Fn(pe.cx,pe.cy,se,de);return R=xn(xn(xn(xn({},r.presentationProps),{},{percent:L,cornerRadius:l,name:F,tooltipPayload:fe,midAngle:de,middleRadius:se,tooltipPosition:oe},z),pe),{},{value:Va(B,f),startAngle:q,endAngle:V,payload:z,paddingAngle:fs(x)*b}),R})}return D}function MK(e){var{props:t,previousSectorsRef:r}=e,{sectors:a,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:u,activeShape:d,inactiveShape:f,onAnimationStart:m,onAnimationEnd:g}=t,v=D_(t,"recharts-pie-"),x=r.current,[j,b]=_.useState(!0),S=_.useCallback(()=>{typeof g=="function"&&g(),b(!1)},[g]),A=_.useCallback(()=>{typeof m=="function"&&m(),b(!0)},[m]);return _.createElement(cd,{begin:i,duration:l,isActive:s,easing:u,from:{t:0},to:{t:1},onAnimationStart:A,onAnimationEnd:S,key:v},E=>{var{t:T}=E,D=[],R=a&&a[0],B=R.startAngle;return a.forEach((U,I)=>{var F=x&&x[I],pe=I>0?ld(U,"paddingAngle",0):0;if(F){var L=Bi(F.endAngle-F.startAngle,U.endAngle-U.startAngle),q=xn(xn({},U),{},{startAngle:B+pe,endAngle:B+L(T)+pe});D.push(q),B=q.endAngle}else{var{endAngle:z,startAngle:V}=U,de=Bi(0,z-V),se=de(T),fe=xn(xn({},U),{},{startAngle:B+pe,endAngle:B+se+pe});D.push(fe),B=fe.endAngle}}),r.current=D,_.createElement(hs,null,_.createElement(SO,{sectors:D,activeShape:d,inactiveShape:f,allOtherPieProps:t,showLabels:!j}))})}function IK(e){var{sectors:t,isAnimationActive:r,activeShape:a,inactiveShape:s}=e,i=_.useRef(null),l=i.current;return r&&t&&t.length&&(!l||l!==t)?_.createElement(MK,{props:e,previousSectorsRef:i}):_.createElement(SO,{sectors:t,activeShape:a,inactiveShape:s,allOtherPieProps:e,showLabels:!0})}function qK(e){var{hide:t,className:r,rootTabIndex:a}=e,s=aa("recharts-pie",r);return t?null:_.createElement(hs,{tabIndex:a,className:s},_.createElement(IK,e))}var AO={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!_f.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function FK(e){var t=To(e,AO),r=_.useMemo(()=>Zp(e.children,ul),[e.children]),a=Kr(t,!1),s=_.useMemo(()=>({name:t.name,nameKey:t.nameKey,tooltipType:t.tooltipType,data:t.data,dataKey:t.dataKey,cx:t.cx,cy:t.cy,startAngle:t.startAngle,endAngle:t.endAngle,minAngle:t.minAngle,paddingAngle:t.paddingAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,cornerRadius:t.cornerRadius,legendType:t.legendType,fill:t.fill,presentationProps:a}),[t.cornerRadius,t.cx,t.cy,t.data,t.dataKey,t.endAngle,t.innerRadius,t.minAngle,t.name,t.nameKey,t.outerRadius,t.paddingAngle,t.startAngle,t.tooltipType,t.legendType,t.fill,a]),i=er(l=>VG(l,s,r));return _.createElement(_.Fragment,null,_.createElement(O_,{fn:CK,args:xn(xn({},t),{},{sectors:i})}),_.createElement(qK,vf({},t,{sectors:i})))}class Qc extends _.PureComponent{constructor(){super(...arguments),Cv(this,"id",mf("recharts-pie-"))}render(){return _.createElement(_.Fragment,null,_.createElement(nK,{data:this.props.data,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:0,radiusAxisId:0,stackId:void 0,barSize:void 0,type:"pie"}),_.createElement(AK,this.props),_.createElement(FK,this.props),this.props.children)}}Cv(Qc,"displayName","Pie");Cv(Qc,"defaultProps",AO);var BK=nt([Xn],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),UK=nt([BK,nu,su],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),$K=e=>{var t=ai();return er(r=>rc(r,"xAxis",e,t))},zK=e=>{var t=ai();return er(r=>rc(r,"yAxis",e,t))},R_=()=>er(UK),VK=()=>er(zV);function m6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function p6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m6(Object(r),!0).forEach(function(a){HK(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function HK(e,t,r){return(t=GK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GK(e){var t=KK(e,"string");return typeof t=="symbol"?t:t+""}function KK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WK=e=>{var{point:t,childIndex:r,mainColor:a,activeDot:s,dataKey:i}=e;if(s===!1||t.x==null||t.y==null)return null;var l=p6(p6({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Kr(s,!1)),Hw(s)),u;return _.isValidElement(s)?u=_.cloneElement(s,l):typeof s=="function"?u=s(l):u=_.createElement(gO,l),_.createElement(hs,{className:"recharts-active-dot"},u)};function YK(e){var{points:t,mainColor:r,activeDot:a,itemDataKey:s}=e,i=er(dd),l=VK();if(t==null||l==null)return null;var u=t.find(d=>l.includes(d.payload));return Ta(u)?null:WK({point:u,childIndex:Number(i),mainColor:r,dataKey:s,activeDot:a})}var XK=()=>{var e=an();return _.useEffect(()=>(e(GG()),()=>{e(KG())})),null},ZK=["children"];function JK(e,t){if(e==null)return{};var r,a,s=QK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function QK(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var g6=()=>{},CO=_.createContext({addErrorBar:g6,removeErrorBar:g6}),eW={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},kO=_.createContext(eW);function EO(e){var{children:t}=e,r=JK(e,ZK);return _.createElement(kO.Provider,{value:r},t)}var tW=()=>_.useContext(kO),PO=e=>{var{children:t,xAxisId:r,yAxisId:a,zAxisId:s,dataKey:i,data:l,stackId:u,hide:d,type:f,barSize:m}=e,[g,v]=_.useState([]),x=_.useCallback(S=>{v(A=>[...A,S])},[v]),j=_.useCallback(S=>{v(A=>A.filter(E=>E!==S))},[v]),b=ai();return _.createElement(CO.Provider,{value:{addErrorBar:x,removeErrorBar:j}},_.createElement(aK,{type:f,data:l,xAxisId:r,yAxisId:a,zAxisId:s,dataKey:i,errorBars:g,stackId:u,hide:d,barSize:m,isPanorama:b}),t)};function rW(e){var{addErrorBar:t,removeErrorBar:r}=_.useContext(CO);return _.useEffect(()=>(t(e),()=>{r(e)}),[t,r,e]),null}var aW=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function TO(e,t,r){return(t=nW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nW(e){var t=sW(e,"string");return typeof t=="symbol"?t:t+""}function sW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ip(){return Ip=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ip.apply(null,arguments)}function iW(e,t){if(e==null)return{};var r,a,s=oW(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function oW(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function lW(e){var{direction:t,width:r,dataKey:a,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:u}=e,d=iW(e,aW),f=Kr(d,!1),{data:m,dataPointFormatter:g,xAxisId:v,yAxisId:x,errorBarOffset:j}=tW(),b=$K(v),S=zK(x);if((b==null?void 0:b.scale)==null||(S==null?void 0:S.scale)==null||m==null||t==="x"&&b.type!=="number")return null;var A=m.map(E=>{var{x:T,y:D,value:R,errorVal:B}=g(E,a,t);if(!B)return null;var U=[],I,F;if(Array.isArray(B)?[I,F]=B:I=F=B,t==="x"){var{scale:pe}=b,L=D+j,q=L+r,z=L-r,V=pe(R-I),de=pe(R+F);U.push({x1:de,y1:q,x2:de,y2:z}),U.push({x1:V,y1:L,x2:de,y2:L}),U.push({x1:V,y1:q,x2:V,y2:z})}else if(t==="y"){var{scale:se}=S,fe=T+j,oe=fe-r,Se=fe+r,Y=se(R-I),ye=se(R+F);U.push({x1:oe,y1:ye,x2:Se,y2:ye}),U.push({x1:fe,y1:Y,x2:fe,y2:ye}),U.push({x1:oe,y1:Y,x2:Se,y2:Y})}var P="".concat(T+j,"px ").concat(D+j,"px");return _.createElement(hs,Ip({className:"recharts-errorBar",key:"bar-".concat(U.map(K=>"".concat(K.x1,"-").concat(K.x2,"-").concat(K.y1,"-").concat(K.y2)))},f),U.map(K=>{var le=s?{transformOrigin:"".concat(K.x1-5,"px")}:void 0;return _.createElement(cd,{from:{transform:"scaleY(0)",transformOrigin:P},to:{transform:"scaleY(1)",transformOrigin:P},begin:i,easing:u,isActive:s,duration:l,key:"line-".concat(K.x1,"-").concat(K.x2,"-").concat(K.y1,"-").concat(K.y2),style:{transformOrigin:P}},_.createElement("line",Ip({},K,{style:le})))}))});return _.createElement(hs,{className:"recharts-errorBars"},A)}var OO=_.createContext(void 0);function cW(e){var t=_.useContext(OO);return e??t??"x"}function DO(e){var{direction:t,children:r}=e;return _.createElement(OO.Provider,{value:t},r)}var RO={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function uW(e){var t=cW(e.direction),{width:r,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:l}=To(e,RO);return _.createElement(_.Fragment,null,_.createElement(rW,{dataKey:e.dataKey,direction:t}),_.createElement(lW,Ip({},e,{direction:t,width:r,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:l})))}class LO extends _.Component{render(){return _.createElement(uW,this.props)}}TO(LO,"defaultProps",RO);TO(LO,"displayName","ErrorBar");var dW="Invariant failed";function fW(e,t){throw new Error(dW)}var hW=["x","y"];function hw(){return hw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},hw.apply(null,arguments)}function x6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function fp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x6(Object(r),!0).forEach(function(a){mW(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function mW(e,t,r){return(t=pW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pW(e){var t=gW(e,"string");return typeof t=="symbol"?t:t+""}function gW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xW(e,t){if(e==null)return{};var r,a,s=vW(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function vW(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function yW(e,t){var{x:r,y:a}=e,s=xW(e,hW),i="".concat(r),l=parseInt(i,10),u="".concat(a),d=parseInt(u,10),f="".concat(t.height||s.height),m=parseInt(f,10),g="".concat(t.width||s.width),v=parseInt(g,10);return fp(fp(fp(fp(fp({},t),s),l?{x:l}:{}),d?{y:d}:{}),{},{height:m,width:v,name:t.name,radius:t.radius})}function MO(e){return _.createElement(jO,hw({shapeType:"rectangle",propTransformer:yW,activeClassName:"recharts-active-bar"},e))}var bW=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,s)=>{if(Wt(t))return t;var i=Wt(a)||Ta(a);return i?t(a,s):(i||fW(),r)}};function L_(e,t){var r,a,s=er(f=>ou(f,e)),i=er(f=>bd(f,t)),l=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Mi.allowDataOverflow,u=(a=i==null?void 0:i.allowDataOverflow)!==null&&a!==void 0?a:Ii.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function IO(e){var{xAxisId:t,yAxisId:r,clipPathId:a}=e,s=R_(),{needClipX:i,needClipY:l,needClip:u}=L_(t,r);if(!u)return null;var{x:d,y:f,width:m,height:g}=s;return _.createElement("clipPath",{id:"clipPath-".concat(a)},_.createElement("rect",{x:i?d:d-m/2,y:l?f:f-g/2,width:i?m:m*2,height:l?g:g*2}))}var wW=["onMouseEnter","onMouseLeave","onClick"],jW=["value","background","tooltipPosition"],_W=["onMouseEnter","onClick","onMouseLeave"];function qp(){return qp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},qp.apply(null,arguments)}function v6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function zs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v6(Object(r),!0).forEach(function(a){kv(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function kv(e,t,r){return(t=NW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NW(e){var t=SW(e,"string");return typeof t=="symbol"?t:t+""}function SW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mw(e,t){if(e==null)return{};var r,a,s=AW(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function AW(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var CW=e=>{var{dataKey:t,name:r,fill:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:a,value:sm(r,t),payload:e}]};function kW(e){var{dataKey:t,stroke:r,strokeWidth:a,fill:s,name:i,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:s,dataKey:t,nameKey:void 0,name:sm(i,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function EW(e){var t=er(dd),{data:r,dataKey:a,background:s,allOtherBarProps:i}=e,{onMouseEnter:l,onMouseLeave:u,onClick:d}=i,f=mw(i,wW),m=E_(l,a),g=P_(u),v=T_(d,a);if(!s||r==null)return null;var x=Kr(s,!1);return _.createElement(_.Fragment,null,r.map((j,b)=>{var{value:S,background:A,tooltipPosition:E}=j,T=mw(j,jW);if(!A)return null;var D=m(j,b),R=g(j,b),B=v(j,b),U=zs(zs(zs(zs(zs({option:s,isActive:String(b)===t},T),{},{fill:"#eee"},A),x),Xp(f,j,b)),{},{onMouseEnter:D,onMouseLeave:R,onClick:B,dataKey:a,index:b,className:"recharts-bar-background-rectangle"});return _.createElement(MO,qp({key:"background-bar-".concat(b)},U))}))}function qO(e){var{data:t,props:r,showLabels:a}=e,s=Kr(r,!1),{shape:i,dataKey:l,activeBar:u}=r,d=er(dd),f=er(tO),{onMouseEnter:m,onClick:g,onMouseLeave:v}=r,x=mw(r,_W),j=E_(m,l),b=P_(v),S=T_(g,l);return t?_.createElement(_.Fragment,null,t.map((A,E)=>{var T=u&&String(E)===d&&(f==null||l===f),D=T?u:i,R=zs(zs(zs({},s),A),{},{isActive:T,option:D,index:E,dataKey:l});return _.createElement(hs,qp({className:"recharts-bar-rectangle"},Xp(x,A,E),{onMouseEnter:j(A,E),onMouseLeave:b(A,E),onClick:S(A,E),key:"rectangle-".concat(A==null?void 0:A.x,"-").concat(A==null?void 0:A.y,"-").concat(A==null?void 0:A.value,"-").concat(E)}),_.createElement(MO,R))}),a&&id.renderCallByParent(r,t)):null}function PW(e){var{props:t,previousRectanglesRef:r}=e,{data:a,layout:s,isAnimationActive:i,animationBegin:l,animationDuration:u,animationEasing:d,onAnimationEnd:f,onAnimationStart:m}=t,g=r.current,v=D_(t,"recharts-bar-"),[x,j]=_.useState(!1),b=_.useCallback(()=>{typeof f=="function"&&f(),j(!1)},[f]),S=_.useCallback(()=>{typeof m=="function"&&m(),j(!0)},[m]);return _.createElement(cd,{begin:l,duration:u,isActive:i,easing:d,from:{t:0},to:{t:1},onAnimationEnd:b,onAnimationStart:S,key:v},A=>{var{t:E}=A,T=E===1?a:a.map((D,R)=>{var B=g&&g[R];if(B){var U=Bi(B.x,D.x),I=Bi(B.y,D.y),F=Bi(B.width,D.width),pe=Bi(B.height,D.height);return zs(zs({},D),{},{x:U(E),y:I(E),width:F(E),height:pe(E)})}if(s==="horizontal"){var L=Bi(0,D.height),q=L(E);return zs(zs({},D),{},{y:D.y+D.height-q,height:q})}var z=Bi(0,D.width),V=z(E);return zs(zs({},D),{},{width:V})});return E>0&&(r.current=T),_.createElement(hs,null,_.createElement(qO,{props:t,data:T,showLabels:!x}))})}function TW(e){var{data:t,isAnimationActive:r}=e,a=_.useRef(null);return r&&t&&t.length&&(a.current==null||a.current!==t)?_.createElement(PW,{previousRectanglesRef:a,props:e}):_.createElement(qO,{props:e,data:t,showLabels:!0})}var FO=0,OW=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Va(e,t)}};class DW extends _.PureComponent{constructor(){super(...arguments),kv(this,"id",mf("recharts-bar-"))}render(){var{hide:t,data:r,dataKey:a,className:s,xAxisId:i,yAxisId:l,needClip:u,background:d,id:f,layout:m}=this.props;if(t)return null;var g=aa("recharts-bar",s),v=Ta(f)?this.id:f;return _.createElement(hs,{className:g},u&&_.createElement("defs",null,_.createElement(IO,{clipPathId:v,xAxisId:i,yAxisId:l})),_.createElement(hs,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(v,")"):null},_.createElement(EW,{data:r,dataKey:a,background:d,allOtherBarProps:this.props}),_.createElement(TW,this.props)),_.createElement(DO,{direction:m==="horizontal"?"y":"x"},this.props.children))}}var BO={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!_f.isSsr,legendType:"rect",minPointSize:FO,xAxisId:0,yAxisId:0};function RW(e){var{xAxisId:t,yAxisId:r,hide:a,legendType:s,minPointSize:i,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:f,isAnimationActive:m}=To(e,BO),{needClip:g}=L_(t,r),v=cv(),x=ai(),j=_.useMemo(()=>({barSize:e.barSize,data:void 0,dataKey:e.dataKey,maxBarSize:e.maxBarSize,minPointSize:i,stackId:YE(e.stackId)}),[e.barSize,e.dataKey,e.maxBarSize,i,e.stackId]),b=Zp(e.children,ul),S=er(T=>lY(T,t,r,x,j,b));if(v!=="vertical"&&v!=="horizontal")return null;var A,E=S==null?void 0:S[0];return E==null||E.height==null||E.width==null?A=0:A=v==="vertical"?E.height/2:E.width/2,_.createElement(EO,{xAxisId:t,yAxisId:r,data:S,dataPointFormatter:OW,errorBarOffset:A},_.createElement(DW,qp({},e,{layout:v,needClip:g,data:S,xAxisId:t,yAxisId:r,hide:a,legendType:s,minPointSize:i,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:f,isAnimationActive:m})))}function LW(e){var{layout:t,barSettings:{dataKey:r,minPointSize:a},pos:s,bandSize:i,xAxis:l,yAxis:u,xAxisTicks:d,yAxisTicks:f,stackedData:m,displayedData:g,offset:v,cells:x}=e,j=t==="horizontal"?u:l,b=m?j.scale.domain():null,S=gF({numericAxis:j});return g.map((A,E)=>{var T,D,R,B,U,I;m?T=dF(m[E],b):(T=Va(A,r),Array.isArray(T)||(T=[S,T]));var F=bW(a,FO)(T[1],E);if(t==="horizontal"){var pe,[L,q]=[u.scale(T[0]),u.scale(T[1])];D=r3({axis:l,ticks:d,bandSize:i,offset:s.offset,entry:A,index:E}),R=(pe=q??L)!==null&&pe!==void 0?pe:void 0,B=s.size;var z=L-q;if(U=Gi(z)?0:z,I={x:D,y:v.top,width:B,height:v.height},Math.abs(F)>0&&Math.abs(U)<Math.abs(F)){var V=fs(U||F)*(Math.abs(F)-Math.abs(U));R-=V,U+=V}}else{var[de,se]=[l.scale(T[0]),l.scale(T[1])];if(D=de,R=r3({axis:u,ticks:f,bandSize:i,offset:s.offset,entry:A,index:E}),B=se-de,U=s.size,I={x:v.left,y:R,width:v.width,height:U},Math.abs(F)>0&&Math.abs(B)<Math.abs(F)){var fe=fs(B||F)*(Math.abs(F)-Math.abs(B));B+=fe}}var oe=zs(zs({},A),{},{x:D,y:R,width:B,height:U,value:m?T:T[1],payload:A,background:I,tooltipPosition:{x:D+B/2,y:R+U/2}},x&&x[E]&&x[E].props);return oe})}class fd extends _.PureComponent{render(){return _.createElement(PO,{type:"bar",data:null,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:this.props.stackId,hide:this.props.hide,barSize:this.props.barSize},_.createElement(XK,null),_.createElement(NO,{legendPayload:CW(this.props)}),_.createElement(O_,{fn:kW,args:this.props}),_.createElement(RW,this.props))}}kv(fd,"displayName","Bar");kv(fd,"defaultProps",BO);function y6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function E0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y6(Object(r),!0).forEach(function(a){MW(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function MW(e,t,r){return(t=IW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IW(e){var t=qW(e,"string");return typeof t=="symbol"?t:t+""}function qW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FW=(e,t)=>t,BW=(e,t,r)=>r,UW=(e,t,r,a)=>a,M_=(e,t,r,a,s)=>s,$W=(e,t,r,a,s)=>s.maxBarSize,zW=(e,t,r,a,s,i)=>i,b6=(e,t,r)=>{var a=r??e;if(!Ta(a))return ri(a,t,0)},VW=nt([da,yv,FW,BW,UW],(e,t,r,a,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===a).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),HW=(e,t,r,a)=>{var s=da(e);return s==="horizontal"?sw(e,"yAxis",r,a):sw(e,"xAxis",t,a)},GW=(e,t,r)=>{var a=da(e);return a==="horizontal"?wA(e,"xAxis",t):wA(e,"yAxis",r)};function KW(e){return e.stackId!=null&&e.dataKey!=null}var WW=(e,t,r)=>{var a={},s=e.filter(KW),i=e.filter(f=>f.stackId==null),l=s.reduce((f,m)=>(f[m.stackId]||(f[m.stackId]=[]),f[m.stackId].push(m),f),a),u=Object.entries(l).map(f=>{var[m,g]=f,v=g.map(j=>j.dataKey),x=b6(t,r,g[0].barSize);return{stackId:m,dataKeys:v,barSize:x}}),d=i.map(f=>{var m=[f.dataKey].filter(v=>v!=null),g=b6(t,r,f.barSize);return{stackId:void 0,dataKeys:m,barSize:g}});return[...u,...d]},YW=nt([VW,ez,GW],WW),XW=(e,t,r,a,s)=>{var i,l,u=da(e),d=oT(e),{maxBarSize:f}=s,m=Ta(f)?d:f,g,v;return u==="horizontal"?(g=rc(e,"xAxis",t,a),v=ud(e,"xAxis",t,a)):(g=rc(e,"yAxis",r,a),v=ud(e,"yAxis",r,a)),(i=(l=Ep(g,v,!0))!==null&&l!==void 0?l:m)!==null&&i!==void 0?i:0},UO=(e,t,r,a)=>{var s=da(e),i,l;return s==="horizontal"?(i=rc(e,"xAxis",t,a),l=ud(e,"xAxis",t,a)):(i=rc(e,"yAxis",r,a),l=ud(e,"yAxis",r,a)),Ep(i,l)};function ZW(e,t,r,a,s){var i=a.length;if(!(i<1)){var l=ri(e,r,0,!0),u,d=[];if(Yi(a[0].barSize)){var f=!1,m=r/i,g=a.reduce((A,E)=>A+(E.barSize||0),0);g+=(i-1)*l,g>=r&&(g-=(i-1)*l,l=0),g>=r&&m>0&&(f=!0,m*=.9,g=i*m);var v=(r-g)/2>>0,x={offset:v-l,size:0};u=a.reduce((A,E)=>{var T,D={stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:x.offset+x.size+l,size:f?m:(T=E.barSize)!==null&&T!==void 0?T:0}},R=[...A,D];return x=R[R.length-1].position,R},d)}else{var j=ri(t,r,0,!0);r-2*j-(i-1)*l<=0&&(l=0);var b=(r-2*j-(i-1)*l)/i;b>1&&(b>>=0);var S=Yi(s)?Math.min(b,s):b;u=a.reduce((A,E,T)=>[...A,{stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:j+(b+l)*T+(b-S)/2,size:S}}],d)}return u}}var JW=(e,t,r,a,s,i,l)=>{var u=Ta(l)?t:l,d=ZW(r,a,s!==i?s:i,e,u);return s!==i&&d!=null&&(d=d.map(f=>E0(E0({},f),{},{position:E0(E0({},f.position),{},{offset:f.position.offset-s/2})}))),d},QW=nt([YW,oT,Q$,lT,XW,UO,$W],JW),eY=(e,t,r,a)=>rc(e,"xAxis",t,a),tY=(e,t,r,a)=>rc(e,"yAxis",r,a),rY=(e,t,r,a)=>ud(e,"xAxis",t,a),aY=(e,t,r,a)=>ud(e,"yAxis",r,a),nY=nt([QW,M_],(e,t)=>{if(e!=null){var r=e.find(a=>a.stackId===t.stackId&&a.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),sY=(e,t)=>{if(!(!e||(t==null?void 0:t.dataKey)==null)){var{stackId:r}=t;if(r!=null){var a=e[r];if(a){var{stackedData:s}=a;if(s){var i=s.find(l=>l.key===t.dataKey);return i}}}}},iY=nt([yv,M_],(e,t)=>{if(e.some(r=>r.type==="bar"&&t.dataKey===r.dataKey&&t.stackId===r.stackId&&t.stackId===r.stackId))return t}),oY=nt([HW,M_],sY),lY=nt([Xn,eY,tY,rY,aY,nY,da,$j,UO,oY,iY,zW],(e,t,r,a,s,i,l,u,d,f,m,g)=>{var{chartData:v,dataStartIndex:x,dataEndIndex:j}=u;if(!(m==null||i==null||l!=="horizontal"&&l!=="vertical"||t==null||r==null||a==null||s==null||d==null)){var{data:b}=m,S;if(b!=null&&b.length>0?S=b:S=v==null?void 0:v.slice(x,j+1),S!=null)return LW({layout:l,barSettings:m,pos:i,bandSize:d,xAxis:t,yAxis:r,xAxisTicks:a,yAxisTicks:s,stackedData:f,displayedData:S,offset:e,cells:g})}}),$O=e=>{var{chartData:t}=e,r=an(),a=ai();return _.useEffect(()=>a?()=>{}:(r(TA(t)),()=>{r(TA(void 0))}),[t,r,a]),null},w6={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},zO=Po({name:"brush",initialState:w6,reducers:{setBrushSettings(e,t){return t.payload==null?w6:t.payload}}}),{setBrushSettings:vne}=zO.actions,cY=zO.reducer;function uY(e,t,r){return(t=dY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dY(e){var t=fY(e,"string");return typeof t=="symbol"?t:t+""}function fY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class I_{static create(t){return new I_(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var r=this.range(),a=r[0],s=r[r.length-1];return a<=s?t>=a&&t<=s:t>=s&&t<=a}}uY(I_,"EPS",1e-4);function hY(e){return(e%180+180)%180}var mY=function(t){var{width:r,height:a}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=hY(s),l=i*Math.PI/180,u=Math.atan(a/r),d=l>u&&l<Math.PI-u?a/Math.sin(l):r/Math.cos(l);return Math.abs(d)},pY={dots:[],areas:[],lines:[]},VO=Po({name:"referenceElements",initialState:pY,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Kc(e).dots.findIndex(a=>a===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Kc(e).areas.findIndex(a=>a===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Kc(e).lines.findIndex(a=>a===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:yne,removeDot:bne,addArea:wne,removeArea:jne,addLine:_ne,removeLine:Nne}=VO.actions,gY=VO.reducer,xY=_.createContext(void 0),vY=e=>{var{children:t}=e,[r]=_.useState("".concat(mf("recharts"),"-clip")),a=R_();if(a==null)return null;var{x:s,y:i,width:l,height:u}=a;return _.createElement(xY.Provider,{value:r},_.createElement("defs",null,_.createElement("clipPath",{id:r},_.createElement("rect",{x:s,y:i,height:u,width:l}))),t)};function D1(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function HO(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var a=[],s=0;s<e.length;s+=t)a.push(e[s]);return a}function yY(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return mY(a,r)}function bY(e,t,r){var a=r==="width",{x:s,y:i,width:l,height:u}=e;return t===1?{start:a?s:i,end:a?s+l:i+u}:{start:a?s+l:i+u,end:a?s:i}}function Ix(e,t,r,a,s){if(e*t<e*a||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-s)<=0}function wY(e,t){return HO(e,t+1)}function jY(e,t,r,a,s){for(var i=(a||[]).slice(),{start:l,end:u}=t,d=0,f=1,m=l,g=function(){var j=a==null?void 0:a[d];if(j===void 0)return{v:HO(a,f)};var b=d,S,A=()=>(S===void 0&&(S=r(j,b)),S),E=j.coordinate,T=d===0||Ix(e,E,A,m,u);T||(d=0,m=l,f+=1),T&&(m=E+e*(A()/2+s),d+=f)},v;f<=i.length;)if(v=g(),v)return v.v;return[]}function j6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function $s(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j6(Object(r),!0).forEach(function(a){_Y(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function _Y(e,t,r){return(t=NY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NY(e){var t=SY(e,"string");return typeof t=="symbol"?t:t+""}function SY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AY(e,t,r,a,s){for(var i=(a||[]).slice(),l=i.length,{start:u}=t,{end:d}=t,f=function(v){var x=i[v],j,b=()=>(j===void 0&&(j=r(x,v)),j);if(v===l-1){var S=e*(x.coordinate+e*b()/2-d);i[v]=x=$s($s({},x),{},{tickCoord:S>0?x.coordinate-S*e:x.coordinate})}else i[v]=x=$s($s({},x),{},{tickCoord:x.coordinate});var A=Ix(e,x.tickCoord,b,u,d);A&&(d=x.tickCoord-e*(b()/2+s),i[v]=$s($s({},x),{},{isShow:!0}))},m=l-1;m>=0;m--)f(m);return i}function CY(e,t,r,a,s,i){var l=(a||[]).slice(),u=l.length,{start:d,end:f}=t;if(i){var m=a[u-1],g=r(m,u-1),v=e*(m.coordinate+e*g/2-f);l[u-1]=m=$s($s({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate});var x=Ix(e,m.tickCoord,()=>g,d,f);x&&(f=m.tickCoord-e*(g/2+s),l[u-1]=$s($s({},m),{},{isShow:!0}))}for(var j=i?u-1:u,b=function(E){var T=l[E],D,R=()=>(D===void 0&&(D=r(T,E)),D);if(E===0){var B=e*(T.coordinate-e*R()/2-d);l[E]=T=$s($s({},T),{},{tickCoord:B<0?T.coordinate-B*e:T.coordinate})}else l[E]=T=$s($s({},T),{},{tickCoord:T.coordinate});var U=Ix(e,T.tickCoord,R,d,f);U&&(d=T.tickCoord+e*(R()/2+s),l[E]=$s($s({},T),{},{isShow:!0}))},S=0;S<j;S++)b(S);return l}function q_(e,t,r){var{tick:a,ticks:s,viewBox:i,minTickGap:l,orientation:u,interval:d,tickFormatter:f,unit:m,angle:g}=e;if(!s||!s.length||!a)return[];if(Wt(d)||_f.isSsr){var v;return(v=wY(s,Wt(d)?d:0))!==null&&v!==void 0?v:[]}var x=[],j=u==="top"||u==="bottom"?"width":"height",b=m&&j==="width"?jp(m,{fontSize:t,letterSpacing:r}):{width:0,height:0},S=(T,D)=>{var R=typeof f=="function"?f(T.value,D):T.value;return j==="width"?yY(jp(R,{fontSize:t,letterSpacing:r}),b,g):jp(R,{fontSize:t,letterSpacing:r})[j]},A=s.length>=2?fs(s[1].coordinate-s[0].coordinate):1,E=bY(i,A,j);return d==="equidistantPreserveStart"?jY(A,E,S,s,l):(d==="preserveStart"||d==="preserveStartEnd"?x=CY(A,E,S,s,l,d==="preserveStartEnd"):x=AY(A,E,S,s,l),x.filter(T=>T.isShow))}var kY=["viewBox"],EY=["viewBox"];function Rh(){return Rh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Rh.apply(null,arguments)}function _6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Kn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_6(Object(r),!0).forEach(function(a){F_(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function N6(e,t){if(e==null)return{};var r,a,s=PY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function PY(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function F_(e,t,r){return(t=TY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TY(e){var t=OY(e,"string");return typeof t=="symbol"?t:t+""}function OY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class wd extends _.Component{constructor(t){super(t),this.tickRefs=_.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:a}=t,s=N6(t,kY),i=this.props,{viewBox:l}=i,u=N6(i,EY);return!D1(a,l)||!D1(s,u)||!D1(r,this.state)}getTickLineCoord(t){var{x:r,y:a,width:s,height:i,orientation:l,tickSize:u,mirror:d,tickMargin:f}=this.props,m,g,v,x,j,b,S=d?-1:1,A=t.tickSize||u,E=Wt(t.tickCoord)?t.tickCoord:t.coordinate;switch(l){case"top":m=g=t.coordinate,x=a+ +!d*i,v=x-S*A,b=v-S*f,j=E;break;case"left":v=x=t.coordinate,g=r+ +!d*s,m=g-S*A,j=m-S*f,b=E;break;case"right":v=x=t.coordinate,g=r+ +d*s,m=g+S*A,j=m+S*f,b=E;break;default:m=g=t.coordinate,x=a+ +d*i,v=x+S*A,b=v+S*f,j=E;break}return{line:{x1:m,y1:v,x2:g,y2:x},tick:{x:j,y:b}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,a;switch(t){case"left":a=r?"start":"end";break;case"right":a=r?"end":"start";break;default:a="middle";break}return a}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:a,height:s,orientation:i,mirror:l,axisLine:u}=this.props,d=Kn(Kn(Kn({},Kr(this.props,!1)),Kr(u,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var f=+(i==="top"&&!l||i==="bottom"&&l);d=Kn(Kn({},d),{},{x1:t,y1:r+f*s,x2:t+a,y2:r+f*s})}else{var m=+(i==="left"&&!l||i==="right"&&l);d=Kn(Kn({},d),{},{x1:t+m*a,y1:r,x2:t+m*a,y2:r+s})}return _.createElement("line",Rh({},d,{className:aa("recharts-cartesian-axis-line",ld(u,"className"))}))}static renderTickItem(t,r,a){var s,i=aa(r.className,"recharts-cartesian-axis-tick-value");if(_.isValidElement(t))s=_.cloneElement(t,Kn(Kn({},r),{},{className:i}));else if(typeof t=="function")s=t(Kn(Kn({},r),{},{className:i}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=aa(l,t.className)),s=_.createElement(Av,Rh({},r,{className:l}),a)}return s}renderTicks(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:s,stroke:i,tick:l,tickFormatter:u,unit:d}=this.props,f=q_(Kn(Kn({},this.props),{},{ticks:a}),t,r),m=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),v=Kr(this.props,!1),x=Kr(l,!1),j=Kn(Kn({},v),{},{fill:"none"},Kr(s,!1)),b=f.map((S,A)=>{var{line:E,tick:T}=this.getTickLineCoord(S),D=Kn(Kn(Kn(Kn({textAnchor:m,verticalAnchor:g},v),{},{stroke:"none",fill:i},x),T),{},{index:A,payload:S,visibleTicksCount:f.length,tickFormatter:u});return _.createElement(hs,Rh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},Xp(this.props,S,A)),s&&_.createElement("line",Rh({},j,E,{className:aa("recharts-cartesian-axis-tick-line",ld(s,"className"))})),l&&wd.renderTickItem(l,D,"".concat(typeof u=="function"?u(S.value,A):S.value).concat(d||"")))});return b.length>0?_.createElement("g",{className:"recharts-cartesian-axis-ticks"},b):null}render(){var{axisLine:t,width:r,height:a,className:s,hide:i}=this.props;if(i)return null;var{ticks:l}=this.props;return r!=null&&r<=0||a!=null&&a<=0?null:_.createElement(hs,{className:aa("recharts-cartesian-axis",s),ref:u=>{if(u){var d=u.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(d);var f=d[0];if(f){var m=window.getComputedStyle(f).fontSize,g=window.getComputedStyle(f).letterSpacing;(m!==this.state.fontSize||g!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(f).fontSize,letterSpacing:window.getComputedStyle(f).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,l),Ui.renderCallByParent(this.props))}}F_(wd,"displayName","CartesianAxis");F_(wd,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var DY=["x1","y1","x2","y2","key"],RY=["offset"],LY=["xAxisId","yAxisId"],MY=["xAxisId","yAxisId"];function S6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Vs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S6(Object(r),!0).forEach(function(a){IY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function IY(e,t,r){return(t=qY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qY(e){var t=FY(e,"string");return typeof t=="symbol"?t:t+""}function FY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function of(){return of=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},of.apply(null,arguments)}function qx(e,t){if(e==null)return{};var r,a,s=BY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function BY(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var UY=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:a,y:s,width:i,height:l,ry:u}=e;return _.createElement("rect",{x:a,y:s,ry:u,width:i,height:l,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function GO(e,t){var r;if(_.isValidElement(e))r=_.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:a,y1:s,x2:i,y2:l,key:u}=t,d=qx(t,DY),f=Kr(d,!1),{offset:m}=f,g=qx(f,RY);r=_.createElement("line",of({},g,{x1:a,y1:s,x2:i,y2:l,fill:"none",key:u}))}return r}function $Y(e){var{x:t,width:r,horizontal:a=!0,horizontalPoints:s}=e;if(!a||!s||!s.length)return null;var{xAxisId:i,yAxisId:l}=e,u=qx(e,LY),d=s.map((f,m)=>{var g=Vs(Vs({},u),{},{x1:t,y1:f,x2:t+r,y2:f,key:"line-".concat(m),index:m});return GO(a,g)});return _.createElement("g",{className:"recharts-cartesian-grid-horizontal"},d)}function zY(e){var{y:t,height:r,vertical:a=!0,verticalPoints:s}=e;if(!a||!s||!s.length)return null;var{xAxisId:i,yAxisId:l}=e,u=qx(e,MY),d=s.map((f,m)=>{var g=Vs(Vs({},u),{},{x1:f,y1:t,x2:f,y2:t+r,key:"line-".concat(m),index:m});return GO(a,g)});return _.createElement("g",{className:"recharts-cartesian-grid-vertical"},d)}function VY(e){var{horizontalFill:t,fillOpacity:r,x:a,y:s,width:i,height:l,horizontalPoints:u,horizontal:d=!0}=e;if(!d||!t||!t.length)return null;var f=u.map(g=>Math.round(g+s-s)).sort((g,v)=>g-v);s!==f[0]&&f.unshift(0);var m=f.map((g,v)=>{var x=!f[v+1],j=x?s+l-g:f[v+1]-g;if(j<=0)return null;var b=v%t.length;return _.createElement("rect",{key:"react-".concat(v),y:g,x:a,height:j,width:i,stroke:"none",fill:t[b],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function HY(e){var{vertical:t=!0,verticalFill:r,fillOpacity:a,x:s,y:i,width:l,height:u,verticalPoints:d}=e;if(!t||!r||!r.length)return null;var f=d.map(g=>Math.round(g+s-s)).sort((g,v)=>g-v);s!==f[0]&&f.unshift(0);var m=f.map((g,v)=>{var x=!f[v+1],j=x?s+l-g:f[v+1]-g;if(j<=0)return null;var b=v%r.length;return _.createElement("rect",{key:"react-".concat(v),x:g,y:i,width:j,height:u,stroke:"none",fill:r[b],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var GY=(e,t)=>{var{xAxis:r,width:a,height:s,offset:i}=e;return KE(q_(Vs(Vs(Vs({},wd.defaultProps),r),{},{ticks:WE(r),viewBox:{x:0,y:0,width:a,height:s}})),i.left,i.left+i.width,t)},KY=(e,t)=>{var{yAxis:r,width:a,height:s,offset:i}=e;return KE(q_(Vs(Vs(Vs({},wd.defaultProps),r),{},{ticks:WE(r),viewBox:{x:0,y:0,width:a,height:s}})),i.top,i.top+i.height,t)},WY={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function eu(e){var t=hj(),r=mj(),a=eP(),s=Vs(Vs({},To(e,WY)),{},{x:Wt(e.x)?e.x:a.left,y:Wt(e.y)?e.y:a.top,width:Wt(e.width)?e.width:a.width,height:Wt(e.height)?e.height:a.height}),{xAxisId:i,yAxisId:l,x:u,y:d,width:f,height:m,syncWithTicks:g,horizontalValues:v,verticalValues:x}=s,j=ai(),b=er(F=>jA(F,"xAxis",i,j)),S=er(F=>jA(F,"yAxis",l,j));if(!Wt(f)||f<=0||!Wt(m)||m<=0||!Wt(u)||u!==+u||!Wt(d)||d!==+d)return null;var A=s.verticalCoordinatesGenerator||GY,E=s.horizontalCoordinatesGenerator||KY,{horizontalPoints:T,verticalPoints:D}=s;if((!T||!T.length)&&typeof E=="function"){var R=v&&v.length,B=E({yAxis:S?Vs(Vs({},S),{},{ticks:R?v:S.ticks}):void 0,width:t,height:r,offset:a},R?!0:g);wp(Array.isArray(B),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof B,"]")),Array.isArray(B)&&(T=B)}if((!D||!D.length)&&typeof A=="function"){var U=x&&x.length,I=A({xAxis:b?Vs(Vs({},b),{},{ticks:U?x:b.ticks}):void 0,width:t,height:r,offset:a},U?!0:g);wp(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(D=I)}return _.createElement("g",{className:"recharts-cartesian-grid"},_.createElement(UY,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),_.createElement(VY,of({},s,{horizontalPoints:T})),_.createElement(HY,of({},s,{verticalPoints:D})),_.createElement($Y,of({},s,{offset:a,horizontalPoints:T,xAxis:b,yAxis:S})),_.createElement(zY,of({},s,{offset:a,verticalPoints:D,xAxis:b,yAxis:S})))}eu.displayName="CartesianGrid";var KO=(e,t,r,a)=>rc(e,"xAxis",t,a),WO=(e,t,r,a)=>ud(e,"xAxis",t,a),YO=(e,t,r,a)=>rc(e,"yAxis",r,a),XO=(e,t,r,a)=>ud(e,"yAxis",r,a),YY=nt([da,KO,YO,WO,XO],(e,t,r,a,s)=>xd(e,"xAxis")?Ep(t,a,!1):Ep(r,s,!1)),XY=(e,t,r,a,s)=>s,ZY=nt([yv,XY],(e,t)=>{if(e.some(r=>r.type==="line"&&t.dataKey===r.dataKey&&t.data===r.data))return t}),JY=nt([da,KO,YO,WO,XO,ZY,YY,$j],(e,t,r,a,s,i,l,u)=>{var{chartData:d,dataStartIndex:f,dataEndIndex:m}=u;if(!(i==null||t==null||r==null||a==null||s==null||a.length===0||s.length===0||l==null)){var{dataKey:g,data:v}=i,x;if(v!=null&&v.length>0?x=v:x=d==null?void 0:d.slice(f,m+1),x!=null)return xX({layout:e,xAxis:t,yAxis:r,xAxisTicks:a,yAxisTicks:s,dataKey:g,bandSize:l,displayedData:x})}}),QY=["type","layout","connectNulls","needClip"],eX=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId"];function ZO(e,t){if(e==null)return{};var r,a,s=tX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function tX(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function A6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ol(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A6(Object(r),!0).forEach(function(a){Ev(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ev(e,t,r){return(t=rX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rX(e){var t=aX(e,"string");return typeof t=="symbol"?t:t+""}function aX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jh(){return Jh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Jh.apply(null,arguments)}var nX=e=>{var{dataKey:t,name:r,stroke:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:a,value:sm(r,t),payload:e}]};function sX(e){var{dataKey:t,data:r,stroke:a,strokeWidth:s,fill:i,name:l,hide:u,unit:d}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:a,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:sm(l,t),hide:u,type:e.tooltipType,color:e.stroke,unit:d}}}var JO=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function iX(e,t){for(var r=e.length%2!==0?[...e,0]:e,a=[],s=0;s<t;++s)a=[...a,...r];return a}var oX=(e,t,r)=>{var a=r.reduce((g,v)=>g+v);if(!a)return JO(t,e);for(var s=Math.floor(e/a),i=e%a,l=t-e,u=[],d=0,f=0;d<r.length;f+=r[d],++d)if(f+r[d]>i){u=[...r.slice(0,d),i-f];break}var m=u.length%2===0?[0,l]:[l];return[...iX(r,s),...u,...m].map(g=>"".concat(g,"px")).join(", ")};function lX(e,t){var r;if(_.isValidElement(e))r=_.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var a=aa("recharts-line-dot",typeof e!="boolean"?e.className:"");r=_.createElement(gO,Jh({},t,{className:a}))}return r}function cX(e,t){return e==null?!1:t?!0:e.length===1}function uX(e){var{clipPathId:t,points:r,props:a}=e,{dot:s,dataKey:i,needClip:l}=a;if(!cX(r,s))return null;var u=Vk(s),d=Kr(a,!1),f=Kr(s,!0),m=r.map((v,x)=>{var j=ol(ol(ol({key:"dot-".concat(x),r:3},d),f),{},{index:x,cx:v.x,cy:v.y,dataKey:i,value:v.value,payload:v.payload,points:r});return lX(s,j)}),g={clipPath:l?"url(#clipPath-".concat(u?"":"dots-").concat(t,")"):null};return _.createElement(hs,Jh({className:"recharts-line-dots",key:"dots"},g),m)}function pw(e){var{clipPathId:t,pathRef:r,points:a,strokeDasharray:s,props:i,showLabels:l}=e,{type:u,layout:d,connectNulls:f,needClip:m}=i,g=ZO(i,QY),v=ol(ol({},Kr(g,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:m?"url(#clipPath-".concat(t,")"):null,points:a,type:u,layout:d,connectNulls:f,strokeDasharray:s??i.strokeDasharray});return _.createElement(_.Fragment,null,(a==null?void 0:a.length)>1&&_.createElement(gj,Jh({},v,{pathRef:r})),_.createElement(uX,{points:a,clipPathId:t,props:i}),l&&id.renderCallByParent(i,a))}function dX(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function fX(e){var{clipPathId:t,props:r,pathRef:a,previousPointsRef:s,longestAnimatedLengthRef:i}=e,{points:l,strokeDasharray:u,isAnimationActive:d,animationBegin:f,animationDuration:m,animationEasing:g,animateNewValues:v,width:x,height:j,onAnimationEnd:b,onAnimationStart:S}=r,A=s.current,E=D_(r,"recharts-line-"),[T,D]=_.useState(!1),R=_.useCallback(()=>{typeof b=="function"&&b(),D(!1)},[b]),B=_.useCallback(()=>{typeof S=="function"&&S(),D(!0)},[S]),U=dX(a.current),I=i.current;return _.createElement(cd,{begin:f,duration:m,isActive:d,easing:g,from:{t:0},to:{t:1},onAnimationEnd:R,onAnimationStart:B,key:E},F=>{var{t:pe}=F,L=Bi(I,U+I),q=Math.min(L(pe),U),z;if(u){var V="".concat(u).split(/[,\s]+/gim).map(fe=>parseFloat(fe));z=oX(q,U,V)}else z=JO(U,q);if(A){var de=A.length/l.length,se=pe===1?l:l.map((fe,oe)=>{var Se=Math.floor(oe*de);if(A[Se]){var Y=A[Se],ye=Bi(Y.x,fe.x),P=Bi(Y.y,fe.y);return ol(ol({},fe),{},{x:ye(pe),y:P(pe)})}if(v){var K=Bi(x*2,fe.x),le=Bi(j/2,fe.y);return ol(ol({},fe),{},{x:K(pe),y:le(pe)})}return ol(ol({},fe),{},{x:fe.x,y:fe.y})});return s.current=se,_.createElement(pw,{props:r,points:se,clipPathId:t,pathRef:a,showLabels:!T,strokeDasharray:z})}return pe>0&&U>0&&(s.current=l,i.current=q),_.createElement(pw,{props:r,points:l,clipPathId:t,pathRef:a,showLabels:!T,strokeDasharray:z})})}function hX(e){var{clipPathId:t,props:r}=e,{points:a,isAnimationActive:s}=r,i=_.useRef(null),l=_.useRef(0),u=_.useRef(null),d=i.current;return s&&a&&a.length&&d!==a?_.createElement(fX,{props:r,clipPathId:t,previousPointsRef:i,longestAnimatedLengthRef:l,pathRef:u}):_.createElement(pw,{props:r,points:a,clipPathId:t,pathRef:u,showLabels:!0})}var mX=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Va(e.payload,t)});class pX extends _.Component{constructor(){super(...arguments),Ev(this,"id",mf("recharts-line-"))}render(){var t,{hide:r,dot:a,points:s,className:i,xAxisId:l,yAxisId:u,top:d,left:f,width:m,height:g,id:v,needClip:x,layout:j}=this.props;if(r)return null;var b=aa("recharts-line",i),S=Ta(v)?this.id:v,{r:A=3,strokeWidth:E=2}=(t=Kr(a,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},T=Vk(a),D=A*2+E;return _.createElement(_.Fragment,null,_.createElement(hs,{className:b},x&&_.createElement("defs",null,_.createElement(IO,{clipPathId:S,xAxisId:l,yAxisId:u}),!T&&_.createElement("clipPath",{id:"clipPath-dots-".concat(S)},_.createElement("rect",{x:f-D/2,y:d-D/2,width:m+D,height:g+D}))),_.createElement(hX,{props:this.props,clipPathId:S}),_.createElement(DO,{direction:j==="horizontal"?"y":"x"},_.createElement(EO,{xAxisId:l,yAxisId:u,data:s,dataPointFormatter:mX,errorBarOffset:0},this.props.children))),_.createElement(YK,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var QO={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!_f.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function gX(e){var t=To(e,QO),{activeDot:r,animateNewValues:a,animationBegin:s,animationDuration:i,animationEasing:l,connectNulls:u,dot:d,hide:f,isAnimationActive:m,label:g,legendType:v,xAxisId:x,yAxisId:j}=t,b=ZO(t,eX),{needClip:S}=L_(x,j),{height:A,width:E,x:T,y:D}=R_(),R=cv(),B=ai(),U=_.useMemo(()=>({dataKey:e.dataKey,data:e.data}),[e.dataKey,e.data]),I=er(F=>JY(F,x,j,B,U));return R!=="horizontal"&&R!=="vertical"?null:_.createElement(pX,Jh({},b,{connectNulls:u,dot:d,activeDot:r,animateNewValues:a,animationBegin:s,animationDuration:i,animationEasing:l,isAnimationActive:m,hide:f,label:g,legendType:v,xAxisId:x,yAxisId:j,points:I,layout:R,height:A,width:E,left:T,top:D,needClip:S}))}function xX(e){var{layout:t,xAxis:r,yAxis:a,xAxisTicks:s,yAxisTicks:i,dataKey:l,bandSize:u,displayedData:d}=e;return d.map((f,m)=>{var g=Va(f,l);return t==="horizontal"?{x:t3({axis:r,ticks:s,bandSize:u,entry:f,index:m}),y:Ta(g)?null:a.scale(g),value:g,payload:f}:{x:Ta(g)?null:r.scale(g),y:t3({axis:a,ticks:i,bandSize:u,entry:f,index:m}),value:g,payload:f}})}class Qh extends _.PureComponent{render(){return _.createElement(PO,{type:"line",data:this.props.data,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:void 0,hide:this.props.hide,barSize:void 0},_.createElement(NO,{legendPayload:nX(this.props)}),_.createElement(O_,{fn:sX,args:this.props}),_.createElement(gX,this.props))}}Ev(Qh,"displayName","Line");Ev(Qh,"defaultProps",QO);function C6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function k6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C6(Object(r),!0).forEach(function(a){vX(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function vX(e,t,r){return(t=yX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yX(e){var t=bX(e,"string");return typeof t=="symbol"?t:t+""}function bX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wX={xAxis:{},yAxis:{},zAxis:{}},e8=Po({name:"cartesianAxis",initialState:wX,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:a}=t.payload;e.yAxis[r]&&(e.yAxis[r]=k6(k6({},e.yAxis[r]),{},{width:a}))}}}),{addXAxis:jX,removeXAxis:_X,addYAxis:NX,removeYAxis:SX,addZAxis:Sne,removeZAxis:Ane,updateYAxisWidth:AX}=e8.actions,CX=e8.reducer,kX=["children"],EX=["dangerouslySetInnerHTML","ticks"];function t8(e,t,r){return(t=PX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PX(e){var t=TX(e,"string");return typeof t=="symbol"?t:t+""}function TX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gw(){return gw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},gw.apply(null,arguments)}function r8(e,t){if(e==null)return{};var r,a,s=OX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function OX(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function DX(e){var t=an(),r=_.useMemo(()=>{var{children:i}=e,l=r8(e,kX);return l},[e]),a=er(i=>ou(i,r.id)),s=r===a;return _.useEffect(()=>(t(jX(r)),()=>{t(_X(r))}),[r,t]),s?e.children:null}var RX=e=>{var{xAxisId:t,className:r}=e,a=er(QE),s=ai(),i="xAxis",l=er(x=>dm(x,i,t,s)),u=er(x=>MT(x,i,t,s)),d=er(x=>OT(x,t)),f=er(x=>Gz(x,t));if(d==null||f==null)return null;var{dangerouslySetInnerHTML:m,ticks:g}=e,v=r8(e,EX);return _.createElement(wd,gw({},v,{scale:l,x:f.x,y:f.y,width:d.width,height:d.height,className:aa("recharts-".concat(i," ").concat(i),r),viewBox:a,ticks:u}))},LX=e=>{var t,r,a,s,i;return _.createElement(DX,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},_.createElement(RX,e))};class ac extends _.Component{render(){return _.createElement(LX,this.props)}}t8(ac,"displayName","XAxis");t8(ac,"defaultProps",{allowDataOverflow:Mi.allowDataOverflow,allowDecimals:Mi.allowDecimals,allowDuplicatedCategory:Mi.allowDuplicatedCategory,height:Mi.height,hide:!1,mirror:Mi.mirror,orientation:Mi.orientation,padding:Mi.padding,reversed:Mi.reversed,scale:Mi.scale,tickCount:Mi.tickCount,type:Mi.type,xAxisId:0});var MX=e=>{var{ticks:t,label:r,labelGapWithTick:a=5,tickSize:s=0,tickMargin:i=0}=e,l=0;if(t){t.forEach(m=>{if(m){var g=m.getBoundingClientRect();g.width>l&&(l=g.width)}});var u=r?r.getBoundingClientRect().width:0,d=s+i,f=l+d+u+(r?a:0);return Math.round(f)}return 0},IX=["dangerouslySetInnerHTML","ticks"];function a8(e,t,r){return(t=qX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qX(e){var t=FX(e,"string");return typeof t=="symbol"?t:t+""}function FX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xw(){return xw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},xw.apply(null,arguments)}function BX(e,t){if(e==null)return{};var r,a,s=UX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function UX(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function $X(e){var t=an();return _.useEffect(()=>(t(NX(e)),()=>{t(SX(e))}),[e,t]),null}var zX=e=>{var t,{yAxisId:r,className:a,width:s,label:i}=e,l=_.useRef(null),u=_.useRef(null),d=er(QE),f=ai(),m=an(),g="yAxis",v=er(T=>dm(T,g,r,f)),x=er(T=>DT(T,r)),j=er(T=>Kz(T,r)),b=er(T=>MT(T,g,r,f));if(_.useLayoutEffect(()=>{var T;if(!(s!=="auto"||!x||N_(i)||_.isValidElement(i))){var D=l.current,R=D==null||(T=D.tickRefs)===null||T===void 0?void 0:T.current,{tickSize:B,tickMargin:U}=D.props,I=MX({ticks:R,label:u.current,labelGapWithTick:5,tickSize:B,tickMargin:U});Math.round(x.width)!==Math.round(I)&&m(AX({id:r,width:I}))}},[l,l==null||(t=l.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,x==null?void 0:x.width,x,m,i,r,s]),x==null||j==null)return null;var{dangerouslySetInnerHTML:S,ticks:A}=e,E=BX(e,IX);return _.createElement(wd,xw({},E,{ref:l,labelRef:u,scale:v,x:j.x,y:j.y,width:x.width,height:x.height,className:aa("recharts-".concat(g," ").concat(g),a),viewBox:d,ticks:b}))},VX=e=>{var t,r,a,s,i;return _.createElement(_.Fragment,null,_.createElement($X,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),_.createElement(zX,e))},HX={allowDataOverflow:Ii.allowDataOverflow,allowDecimals:Ii.allowDecimals,allowDuplicatedCategory:Ii.allowDuplicatedCategory,hide:!1,mirror:Ii.mirror,orientation:Ii.orientation,padding:Ii.padding,reversed:Ii.reversed,scale:Ii.scale,tickCount:Ii.tickCount,type:Ii.type,width:Ii.width,yAxisId:0};class dl extends _.Component{render(){return _.createElement(VX,this.props)}}a8(dl,"displayName","YAxis");a8(dl,"defaultProps",HX);var R1={exports:{}},L1={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E6;function GX(){if(E6)return L1;E6=1;var e=am();function t(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var r=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,l=e.useMemo,u=e.useDebugValue;return L1.useSyncExternalStoreWithSelector=function(d,f,m,g,v){var x=s(null);if(x.current===null){var j={hasValue:!1,value:null};x.current=j}else j=x.current;x=l(function(){function S(R){if(!A){if(A=!0,E=R,R=g(R),v!==void 0&&j.hasValue){var B=j.value;if(v(B,R))return T=B}return T=R}if(B=T,r(E,R))return B;var U=g(R);return v!==void 0&&v(B,U)?(E=R,B):(E=R,T=U)}var A=!1,E,T,D=m===void 0?null:m;return[function(){return S(f())},D===null?void 0:function(){return S(D())}]},[f,m,g,v]);var b=a(d,x[0],x[1]);return i(function(){j.hasValue=!0,j.value=b},[b]),u(b),b},L1}var P6;function KX(){return P6||(P6=1,R1.exports=GX()),R1.exports}KX();function WX(e){e()}function YX(){let e=null,t=null;return{clear(){e=null,t=null},notify(){WX(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let a=e;for(;a;)r.push(a),a=a.next;return r},subscribe(r){let a=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!a||e===null||(a=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var T6={notify(){},get:()=>[]};function XX(e,t){let r,a=T6,s=0,i=!1;function l(b){m();const S=a.subscribe(b);let A=!1;return()=>{A||(A=!0,S(),g())}}function u(){a.notify()}function d(){j.onStateChange&&j.onStateChange()}function f(){return i}function m(){s++,r||(r=e.subscribe(d),a=YX())}function g(){s--,r&&s===0&&(r(),r=void 0,a.clear(),a=T6)}function v(){i||(i=!0,m())}function x(){i&&(i=!1,g())}const j={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:f,trySubscribe:v,tryUnsubscribe:x,getListeners:()=>a};return j}var ZX=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",JX=ZX(),QX=()=>typeof navigator<"u"&&navigator.product==="ReactNative",eZ=QX(),tZ=()=>JX||eZ?_.useLayoutEffect:_.useEffect,rZ=tZ(),M1=Symbol.for("react-redux-context"),I1=typeof globalThis<"u"?globalThis:{};function aZ(){if(!_.createContext)return{};const e=I1[M1]??(I1[M1]=new Map);let t=e.get(_.createContext);return t||(t=_.createContext(null),e.set(_.createContext,t)),t}var nZ=aZ();function sZ(e){const{children:t,context:r,serverState:a,store:s}=e,i=_.useMemo(()=>{const d=XX(s);return{store:s,subscription:d,getServerState:a?()=>a:void 0}},[s,a]),l=_.useMemo(()=>s.getState(),[s]);rZ(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==s.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,l]);const u=r||nZ;return _.createElement(u.Provider,{value:i},t)}var iZ=sZ,oZ=(e,t)=>t,B_=nt([oZ,da,iz,ps,ZT,lu,XV,Xn],tH),U_=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/a)}},n8=Ao("mouseClick"),s8=Jp();s8.startListening({actionCreator:n8,effect:(e,t)=>{var r=e.payload,a=B_(t.getState(),U_(r));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(iV({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var vw=Ao("mouseMove"),i8=Jp();i8.startListening({actionCreator:vw,effect:(e,t)=>{var r=e.payload,a=t.getState(),s=m_(a,a.tooltip.settings.shared),i=B_(a,U_(r));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(VT({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(zT()))}});function lZ(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var O6={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},o8=Po({name:"rootProps",initialState:O6,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:O6.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),cZ=o8.reducer,{updateOptions:uZ}=o8.actions,l8=Po({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:dZ}=l8.actions,fZ=l8.reducer,c8=Ao("keyDown"),u8=Ao("focus"),$_=Jp();$_.startListening({actionCreator:c8,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var l=Number(p_(s,kf(r))),u=lu(r);if(i==="Enter"){var d=Dx(r,"axis","hover",String(s.index));t.dispatch(ow({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:d}));return}var f=Zz(r),m=f==="left-to-right"?1:-1,g=i==="ArrowRight"?1:-1,v=l+g*m;if(!(u==null||v>=u.length||v<0)){var x=Dx(r,"axis","hover",String(v));t.dispatch(ow({active:!0,activeIndex:v.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});$_.startListening({actionCreator:u8,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",l=Dx(r,"axis","hover",String(i));t.dispatch(ow({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:l}))}}}});var xo=Ao("externalEvent"),d8=Jp();d8.startListening({actionCreator:xo,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),a={activeCoordinate:BV(r),activeDataKey:tO(r),activeIndex:dd(r),activeLabel:eO(r),activeTooltipIndex:dd(r),isTooltipActive:UV(r)};e.payload.handler(a,e.payload.reactEvent)}}});var hZ=nt([fm],e=>e.tooltipItemPayloads),mZ=nt([hZ,lg,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,a)=>{var s=e.find(u=>u.settings.dataKey===a);if(s!=null){var{positions:i}=s;if(i!=null){var l=t(i,r);return l}}}),f8=Ao("touchMove"),h8=Jp();h8.startListening({actionCreator:f8,effect:(e,t)=>{var r=e.payload,a=t.getState(),s=m_(a,a.tooltip.settings.shared);if(s==="axis"){var i=B_(a,U_({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(VT({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var l,u=r.touches[0],d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var f=d.getAttribute(ZE),m=(l=d.getAttribute(JE))!==null&&l!==void 0?l:void 0,g=mZ(t.getState(),f,m);t.dispatch($T({activeDataKey:m,activeIndex:f,activeCoordinate:g}))}}});var pZ=_E({brush:cY,cartesianAxis:CX,chartData:xH,graphicalItems:QG,layout:Yq,legend:LF,options:fH,polarAxis:IG,polarOptions:fZ,referenceElements:gY,rootProps:cZ,tooltip:oV}),gZ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return bq({reducer:pZ,preloadedState:t,middleware:a=>a({serializableCheck:!1}).concat([s8.middleware,i8.middleware,$_.middleware,d8.middleware,h8.middleware]),devTools:{serialize:{replacer:lZ},name:"recharts-".concat(r)}})};function m8(e){var{preloadedState:t,children:r,reduxStoreName:a}=e,s=ai(),i=_.useRef(null);if(s)return r;i.current==null&&(i.current=gZ(t,a));var l=nj;return _.createElement(iZ,{context:l,store:i.current},r)}function p8(e){var{layout:t,width:r,height:a,margin:s}=e,i=an(),l=ai();return _.useEffect(()=>{l||(i(Gq(t)),i(Kq({width:r,height:a})),i(Hq(s)))},[i,l,t,r,a,s]),null}function g8(e){var t=an();return _.useEffect(()=>{t(uZ(e))},[t,e]),null}var xZ=["children"];function vZ(e,t){if(e==null)return{};var r,a,s=yZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function yZ(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Fx(){return Fx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Fx.apply(null,arguments)}var bZ={width:"100%",height:"100%"},wZ=_.forwardRef((e,t)=>{var r=hj(),a=mj(),s=nP();if(!Kh(r)||!Kh(a))return null;var{children:i,otherAttributes:l,title:u,desc:d}=e,f,m;return typeof l.tabIndex=="number"?f=l.tabIndex:f=s?0:void 0,typeof l.role=="string"?m=l.role:m=s?"application":void 0,_.createElement(Gw,Fx({},l,{title:u,desc:d,role:m,tabIndex:f,width:r,height:a,style:bZ,ref:t}),i)}),jZ=e=>{var{children:t}=e,r=er(lv);if(!r)return null;var{width:a,height:s,y:i,x:l}=r;return _.createElement(Gw,{width:a,height:s,x:l,y:i},t)},D6=_.forwardRef((e,t)=>{var{children:r}=e,a=vZ(e,xZ),s=ai();return s?_.createElement(jZ,null,r):_.createElement(wZ,Fx({ref:t},a),r)});function _Z(){var e=an(),[t,r]=_.useState(null),a=er(_F);return _.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;Yi(i)&&i!==a&&e(Wq(i))}},[t,e,a]),r}function R6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function NZ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R6(Object(r),!0).forEach(function(a){SZ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function SZ(e,t,r){return(t=AZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AZ(e){var t=CZ(e,"string");return typeof t=="symbol"?t:t+""}function CZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kZ=_.forwardRef((e,t)=>{var{children:r,className:a,height:s,onClick:i,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:f,onMouseLeave:m,onMouseMove:g,onMouseUp:v,onTouchEnd:x,onTouchMove:j,onTouchStart:b,style:S,width:A}=e,E=an(),[T,D]=_.useState(null),[R,B]=_.useState(null);bH();var U=_Z(),I=_.useCallback(P=>{U(P),typeof t=="function"&&t(P),D(P),B(P)},[U,t,D,B]),F=_.useCallback(P=>{E(n8(P)),E(xo({handler:i,reactEvent:P}))},[E,i]),pe=_.useCallback(P=>{E(vw(P)),E(xo({handler:f,reactEvent:P}))},[E,f]),L=_.useCallback(P=>{E(zT()),E(xo({handler:m,reactEvent:P}))},[E,m]),q=_.useCallback(P=>{E(vw(P)),E(xo({handler:g,reactEvent:P}))},[E,g]),z=_.useCallback(()=>{E(u8())},[E]),V=_.useCallback(P=>{E(c8(P.key))},[E]),de=_.useCallback(P=>{E(xo({handler:l,reactEvent:P}))},[E,l]),se=_.useCallback(P=>{E(xo({handler:u,reactEvent:P}))},[E,u]),fe=_.useCallback(P=>{E(xo({handler:d,reactEvent:P}))},[E,d]),oe=_.useCallback(P=>{E(xo({handler:v,reactEvent:P}))},[E,v]),Se=_.useCallback(P=>{E(xo({handler:b,reactEvent:P}))},[E,b]),Y=_.useCallback(P=>{E(f8(P)),E(xo({handler:j,reactEvent:P}))},[E,j]),ye=_.useCallback(P=>{E(xo({handler:x,reactEvent:P}))},[E,x]);return _.createElement(oO.Provider,{value:T},_.createElement(Gk.Provider,{value:R},_.createElement("div",{className:aa("recharts-wrapper",a),style:NZ({position:"relative",cursor:"default",width:A,height:s},S),onClick:F,onContextMenu:de,onDoubleClick:se,onFocus:z,onKeyDown:V,onMouseDown:fe,onMouseEnter:pe,onMouseLeave:L,onMouseMove:q,onMouseUp:oe,onTouchEnd:ye,onTouchMove:Y,onTouchStart:Se,ref:I},r)))}),EZ=["children","className","width","height","style","compact","title","desc"];function PZ(e,t){if(e==null)return{};var r,a,s=TZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function TZ(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var x8=_.forwardRef((e,t)=>{var{children:r,className:a,width:s,height:i,style:l,compact:u,title:d,desc:f}=e,m=PZ(e,EZ),g=Kr(m,!1);return u?_.createElement(D6,{otherAttributes:g,title:d,desc:f},r):_.createElement(kZ,{className:a,style:l,width:s,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},_.createElement(D6,{otherAttributes:g,title:d,desc:f,ref:t},_.createElement(vY,null,r)))}),OZ=["width","height"];function yw(){return yw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},yw.apply(null,arguments)}function DZ(e,t){if(e==null)return{};var r,a,s=RZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function RZ(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var LZ={top:5,right:5,bottom:5,left:5},MZ={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:LZ,reverseStackOrder:!1,syncMethod:"index"},v8=_.forwardRef(function(t,r){var a,s=To(t.categoricalChartProps,MZ),{width:i,height:l}=s,u=DZ(s,OZ);if(!Kh(i)||!Kh(l))return null;var{chartName:d,defaultTooltipEventType:f,validateTooltipEventTypes:m,tooltipPayloadSearcher:g,categoricalChartProps:v}=t,x={chartName:d,defaultTooltipEventType:f,validateTooltipEventTypes:m,tooltipPayloadSearcher:g,eventEmitter:void 0};return _.createElement(m8,{preloadedState:{options:x},reduxStoreName:(a=v.id)!==null&&a!==void 0?a:d},_.createElement($O,{chartData:v.data}),_.createElement(p8,{width:i,height:l,layout:s.layout,margin:s.margin}),_.createElement(g8,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),_.createElement(x8,yw({},u,{width:i,height:l,ref:r})))}),IZ=["axis"],Bx=_.forwardRef((e,t)=>_.createElement(v8,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:IZ,tooltipPayloadSearcher:__,categoricalChartProps:e,ref:t})),qZ=["axis","item"],Pv=_.forwardRef((e,t)=>_.createElement(v8,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:qZ,tooltipPayloadSearcher:__,categoricalChartProps:e,ref:t}));function FZ(e){var t=an();return _.useEffect(()=>{t(dZ(e))},[t,e]),null}var BZ=["width","height","layout"];function bw(){return bw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},bw.apply(null,arguments)}function UZ(e,t){if(e==null)return{};var r,a,s=$Z(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function $Z(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var zZ={top:5,right:5,bottom:5,left:5},VZ={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:zZ,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},HZ=_.forwardRef(function(t,r){var a,s=To(t.categoricalChartProps,VZ),{width:i,height:l,layout:u}=s,d=UZ(s,BZ);if(!Kh(i)||!Kh(l))return null;var{chartName:f,defaultTooltipEventType:m,validateTooltipEventTypes:g,tooltipPayloadSearcher:v}=t,x={chartName:f,defaultTooltipEventType:m,validateTooltipEventTypes:g,tooltipPayloadSearcher:v,eventEmitter:void 0};return _.createElement(m8,{preloadedState:{options:x},reduxStoreName:(a=s.id)!==null&&a!==void 0?a:f},_.createElement($O,{chartData:s.data}),_.createElement(p8,{width:i,height:l,layout:u,margin:s.margin}),_.createElement(g8,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),_.createElement(FZ,{cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius}),_.createElement(x8,bw({width:i,height:l},d,{ref:r})))}),GZ=["item"],KZ={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},yf=_.forwardRef((e,t)=>{var r=To(e,KZ);return _.createElement(HZ,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:GZ,tooltipPayloadSearcher:__,categoricalChartProps:r,ref:t})});const y8=({data:e})=>{const r=(()=>{const a={};return e.forEach(s=>{a[s.sector]=(a[s.sector]||0)+1}),Object.keys(a).map(s=>({name:s,count:a[s]}))})();return n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Portfolio Distribution by Sector"}),n.jsx("div",{style:{width:"100%",height:300},children:n.jsx(ti,{children:n.jsxs(Pv,{data:r,margin:{top:5,right:20,left:-10,bottom:5},children:[n.jsx(eu,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),n.jsx(ac,{dataKey:"name",stroke:"#64748b",fontSize:12}),n.jsx(dl,{allowDecimals:!1,stroke:"#64748b",fontSize:12}),n.jsx(ei,{cursor:{fill:"rgba(239, 246, 255, 0.5)"},contentStyle:{backgroundColor:"#fff",borderRadius:"0.5rem",borderColor:"#e2e8f0",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)"}}),n.jsx(Es,{wrapperStyle:{fontSize:"14px"}}),n.jsx(fd,{dataKey:"count",name:"Number of Startups",fill:"#3b82f6",radius:[4,4,0,0]})]})})})]})};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WZ=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),YZ=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),L6=e=>{const t=YZ(e);return t.charAt(0).toUpperCase()+t.slice(1)},b8=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim(),XZ=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZZ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JZ=_.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:s="",children:i,iconNode:l,...u},d)=>_.createElement("svg",{ref:d,...ZZ,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:b8("lucide",s),...!i&&!XZ(u)&&{"aria-hidden":"true"},...u},[...l.map(([f,m])=>_.createElement(f,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=(e,t)=>{const r=_.forwardRef(({className:a,...s},i)=>_.createElement(JZ,{ref:i,iconNode:t,className:b8(`lucide-${WZ(L6(e))}`,`lucide-${e}`,a),...s}));return r.displayName=L6(e),r};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QZ=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],nc=Ft("arrow-left",QZ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eJ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],M6=Ft("arrow-right",eJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tJ=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],rJ=Ft("award",tJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aJ=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],I6=Ft("banknote",aJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nJ=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Fp=Ft("bell",nJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sJ=[["path",{d:"M15 13a3 3 0 1 0-6 0",key:"10j68g"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}]],iJ=Ft("book-user",sJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oJ=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],lJ=Ft("briefcase",oJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cJ=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Jl=Ft("building-2",cJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uJ=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],K0=Ft("building",uJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dJ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Bp=Ft("calendar",dJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fJ=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],q6=Ft("camera",fJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hJ=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],z_=Ft("chart-column",hJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mJ=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],ww=Ft("chart-pie",mJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pJ=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],_o=Ft("check",pJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],tu=Ft("circle-alert",gJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xJ=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ua=Ft("circle-check-big",xJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],yJ=Ft("circle-check",vJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],w8=Ft("circle-plus",bJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],em=Ft("circle-question-mark",wJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Up=Ft("circle-x",jJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _J=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ux=Ft("clock",_J);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NJ=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],q1=Ft("cloud-upload",NJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SJ=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],vp=Ft("credit-card",SJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AJ=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],$x=Ft("database",AJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CJ=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],No=Ft("dollar-sign",CJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kJ=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],gi=Ft("download",kJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EJ=[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]],PJ=Ft("euro",EJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TJ=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Dc=Ft("external-link",TJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OJ=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],F6=Ft("eye-off",OJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DJ=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ru=Ft("eye",DJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RJ=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3 15 2 2 4-4",key:"1lhrkk"}]],LJ=Ft("file-check-2",RJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MJ=[["path",{d:"M11 21a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1",key:"likhh7"}],["path",{d:"M16 16a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1",key:"17ky3x"}],["path",{d:"M21 6a2 2 0 0 0-.586-1.414l-2-2A2 2 0 0 0 17 2h-3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1z",key:"1hyeo0"}]],IJ=Ft("file-stack",MJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qJ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],vn=Ft("file-text",qJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FJ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],Wl=Ft("film",FJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BJ=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],UJ=Ft("funnel",BJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $J=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],zJ=Ft("gift",$J);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],jw=Ft("globe",VJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HJ=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],tm=Ft("heart",HJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GJ=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],V_=Ft("layout-grid",GJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],B6=Ft("layout-dashboard",KJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],$p=Ft("loader-circle",WJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YJ=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],XJ=Ft("lock",YJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZJ=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Tv=Ft("log-out",ZJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JJ=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],bo=Ft("mail",JJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QJ=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],zp=Ft("map-pin",QJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eQ=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Ov=Ft("menu",eQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tQ=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],rQ=Ft("notebook-pen",tQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aQ=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],nQ=Ft("package",aQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sQ=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],lf=Ft("pen-line",sQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iQ=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],j8=Ft("percent",iQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oQ=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],zx=Ft("phone",oQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lQ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],zi=Ft("plus",lQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cQ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],rm=Ft("refresh-cw",cQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uQ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Dv=Ft("save",uQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dQ=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],fQ=Ft("scale",dQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hQ=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],hd=Ft("search",hQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mQ=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],pQ=Ft("send",mQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gQ=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Vp=Ft("settings",gQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xQ=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Rv=Ft("share-2",xQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vQ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_p=Ft("shield-check",vQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yQ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Cs=Ft("shield",yQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bQ=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],wQ=Ft("square-check-big",bQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jQ=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Gl=Ft("square-pen",jQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Q=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],F1=Ft("star",_Q);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NQ=[["path",{d:"M15 3v18",key:"14nvp0"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M21 9H3",key:"1338ky"}],["path",{d:"M21 15H3",key:"9uk58r"}]],B1=Ft("table-properties",NQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],_8=Ft("target",SQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AQ=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],qa=Ft("trash-2",AQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CQ=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],md=Ft("trending-up",CQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kQ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Yl=Ft("triangle-alert",kQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EQ=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],_w=Ft("upload",EQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PQ=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Hp=Ft("user-check",PQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TQ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],OQ=Ft("user-plus",TQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DQ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],mm=Ft("user",DQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RQ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ps=Ft("users",RQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LQ=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],od=Ft("video",LQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MQ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ql=Ft("x",MQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IQ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Nw=Ft("zap",IQ),Yn=({isOpen:e,onClose:t,title:r,children:a})=>e?n.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[100] flex justify-center items-center p-4",onClick:t,children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-full max-w-lg relative animate-fade-in-up",onClick:s=>s.stopPropagation(),children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-3",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-800",children:r}),n.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 transition-colors","aria-label":"Close modal",children:n.jsx(Ql,{className:"h-6 w-6"})})]}),a]}),n.jsx("style",{children:`
        @keyframes fade-in-up {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up {
          animation: fade-in-up 0.3s ease-out forwards;
        }
      `})]}):null,Ot=({label:e,id:t,containerClassName:r="",className:a="",helpText:s,...i})=>{const l="block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-brand-primary focus:border-brand-primary sm:text-sm disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 disabled:shadow-none",u=a?`${l} ${a}`:l;return n.jsxs("div",{className:r,children:[n.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-slate-700 mb-1",children:e}),n.jsx("input",{id:t,className:u,...i}),s&&n.jsx("p",{className:"mt-1 text-sm text-slate-500",children:s})]})};class qQ{async getActiveFundraisingStartups(){try{console.log("🔍 investorService.getActiveFundraisingStartups() called");const{data:t,error:r}=await G.from("fundraising_details").select(`
          *,
          startups (
            id,
            name,
            sector,
            compliance_status,
            startup_nation_validated,
            validation_date,
            created_at
          )
        `).eq("active",!0).order("created_at",{ascending:!1});if(console.log("🔍 Raw query result:",{data:t,error:r}),r)return console.error("❌ Error fetching active fundraising startups:",r),[];console.log("🔍 Raw data length:",(t==null?void 0:t.length)||0),console.log("🔍 Raw data sample:",t==null?void 0:t[0]);const a=(t||[]).filter(s=>{const i=s.startups!==null;return console.log("🔍 Filtering item:",{fundraisingId:s.id,startupId:s.startup_id,hasStartup:i,startupData:s.startups}),i});return console.log("🔍 Filtered data length:",a.length),a.map(s=>({id:s.startups.id,name:s.startups.name,sector:s.startups.sector||"Technology",investmentValue:s.value,equityAllocation:s.equity,complianceStatus:s.startups.compliance_status,pitchDeckUrl:s.pitch_deck_url,pitchVideoUrl:s.pitch_video_url,fundraisingType:s.type,description:s.startups.description||`${s.startups.name} - ${s.startups.sector||"Technology"} startup`,createdAt:s.startups.created_at,fundraisingId:s.id,isStartupNationValidated:s.startups.startup_nation_validated||!1,validationDate:s.startups.validation_date}))}catch(t){return console.error("Error in getActiveFundraisingStartups:",t),[]}}async getStartupDetails(t){try{const{data:r,error:a}=await G.from("fundraising_details").select(`
          *,
          startups (
            id,
            name,
            sector,
            compliance_status,
            created_at
          )
        `).eq("startup_id",t).eq("active",!0).single();return a||!r?(console.error("Error fetching startup details:",a),null):{id:r.startups.id,name:r.startups.name,sector:r.startups.sector||"Technology",investmentValue:r.value,equityAllocation:r.equity,complianceStatus:r.startups.compliance_status,pitchDeckUrl:r.pitch_deck_url,pitchVideoUrl:r.pitch_video_url,fundraisingType:r.type,description:r.startups.description||`${r.startups.name} - ${r.startups.sector||"Technology"} startup`,createdAt:r.startups.created_at,fundraisingId:r.id,isStartupNationValidated:r.startups.startup_nation_validated||!1,validationDate:r.startups.validation_date}}catch(r){return console.error("Error in getStartupDetails:",r),null}}getYoutubeEmbedUrl(t){if(!t)return null;const r=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]+)/,/youtube\.com\/watch\?.*v=([a-zA-Z0-9_-]+)/,/youtube\.com\/shorts\/([a-zA-Z0-9_-]+)/];for(const a of r){const s=t.match(a);if(s)return`https://www.youtube.com/embed/${s[1]}`}return null}formatCurrency(t,r="USD"){const a=this.getCurrencySymbol(r);return t>=1e6?`${a}${(t/1e6).toFixed(1)}M`:t>=1e3?`${a}${(t/1e3).toFixed(1)}K`:`${a}${t.toLocaleString()}`}getCurrencySymbol(t){return{USD:"$",EUR:"€",GBP:"£",INR:"₹",CAD:"C$",AUD:"A$",JPY:"¥",CHF:"CHF",SGD:"S$",CNY:"¥",BTN:"Nu.",AMD:"֏",BYN:"Br",GEL:"₾",ILS:"₪",JOD:"د.ا",NGN:"₦",PHP:"₱",RUB:"₽",LKR:"₨",BRL:"R$",VND:"₫",MMK:"K",AZN:"₼",RSD:"дин.",HKD:"HK$",PKR:"₨",MCO:"€"}[t]||t}}const xi=new qQ;class FQ{async getSubscriptionPlans(t,r){try{const{data:a,error:s}=await G.from("subscription_plans").select("*").eq("user_type",t).eq("country",r).eq("is_active",!0).order("price",{ascending:!0});if(s)throw s;return a||[]}catch(a){throw console.error("Error fetching subscription plans:",a),a}}async getUserSubscription(t){try{const{data:r,error:a}=await G.from("user_subscriptions").select(`
          *,
          subscription_plans (price, interval)
        `).eq("user_id",t).eq("status","active").single();if(a&&a.code!=="PGRST116")throw a;return r&&r.subscription_plans&&(r.amount=r.subscription_plans.price*r.startup_count,r.interval=r.subscription_plans.interval),r}catch(r){throw console.error("Error fetching user subscription:",r),r}}async createPaymentIntent(t,r,a,s){try{const i=await fetch("/api/payment/create-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:Math.round(t*100),currency:r.toLowerCase(),userId:a,planId:s})});if(!i.ok)throw new Error("Failed to create payment intent");return await i.json()}catch(i){throw console.error("Error creating payment intent:",i),i}}async confirmPayment(t,r,a,s){try{const{data:i,error:l}=await G.from("subscription_plans").select("price, interval").eq("id",a).single();if(l)throw l;const u=i.price*s,d=i.interval,{data:f,error:m}=await G.from("user_subscriptions").insert({user_id:r,plan_id:a,status:"active",startup_count:s,amount:u,interval:d,current_period_start:new Date().toISOString(),current_period_end:new Date(Date.now()+(d==="yearly"?365:30)*24*60*60*1e3).toISOString()}).select().single();if(m)throw m;return f}catch(i){throw console.error("Error confirming payment:",i),i}}async updateSubscriptionStartupCount(t,r){try{const{error:a}=await G.from("user_subscriptions").update({startup_count:r,updated_at:new Date().toISOString()}).eq("user_id",t).eq("status","active");if(a)throw a}catch(a){throw console.error("Error updating subscription startup count:",a),a}}async validateDiscountCoupon(t){try{const{data:r,error:a}=await G.from("discount_coupons").select("*").eq("code",t.toUpperCase()).eq("is_active",!0).single();if(a&&a.code!=="PGRST116")throw a;if(!r)return null;const s=new Date,i=new Date(r.valid_from),l=new Date(r.valid_until);return s<i||s>l||r.used_count>=r.max_uses?null:r}catch(r){throw console.error("Error validating discount coupon:",r),r}}async applyDiscountCoupon(t,r){try{const a=await this.validateDiscountCoupon(t);if(!a)throw new Error("Invalid or expired coupon");const{error:s}=await G.from("discount_coupons").update({used_count:a.used_count+1}).eq("id",a.id);if(s)throw s;return{coupon:a,discountAmount:a.discount_value}}catch(a){throw console.error("Error applying discount coupon:",a),a}}calculateScoutingFee(t,r,a){return r&&a?0:r&&!a||!r&&a?t*.3:t}async recordScoutingFee(t,r,a,s,i){try{const{error:l}=await G.from("scouting_fees").insert({advisor_id:t,amount:r,investor_id:a,startup_id:s,advisory_fee:i,created_at:new Date().toISOString()});if(l)throw l}catch(l){throw console.error("Error recording scouting fee:",l),l}}async getSubscriptionSummary(t){try{const{data:r,error:a}=await G.from("user_subscriptions").select(`
          *,
          subscription_plans (*)
        `).eq("user_id",t).eq("status","active");if(a)throw a;const s=r||[];let i=0;const l=[];for(const u of s){const d=u.subscription_plans,f=d.price*u.startup_count;i+=f,l.push({plan:d,amount:f,dueDate:u.current_period_end})}return{totalDue:i,totalSubscriptions:s.length,activeSubscriptions:s,upcomingPayments:l}}catch(r){throw console.error("Error getting subscription summary:",r),r}}async createDueDiligenceRequest(t,r){try{const{data:s,error:i}=await G.from("due_diligence_requests").insert({user_id:t,startup_id:r,amount:150,currency:"EUR",status:"pending",created_at:new Date().toISOString()}).select().single();if(i)throw i;return s}catch(a){throw console.error("Error creating due diligence request:",a),a}}async processDueDiligencePayment(t,r){try{const{error:a}=await G.from("due_diligence_requests").update({status:"paid",payment_intent_id:r,completed_at:new Date().toISOString()}).eq("id",t);if(a)throw a}catch(a){throw console.error("Error processing due diligence payment:",a),a}}async getUserDueDiligenceRequests(t){try{const{data:r,error:a}=await G.from("due_diligence_requests").select("*").eq("user_id",t).order("created_at",{ascending:!1});if(a)throw a;return r||[]}catch(r){throw console.error("Error getting due diligence requests:",r),r}}}const zc=new FQ,ds={async uploadFile(e,t,r){try{console.log(`Uploading file ${e.name} to ${t}/${r}`),console.log("File size:",e.size,"bytes"),console.log("File type:",e.type),console.log(`Attempting direct upload to ${t}...`);const a=G.storage.from(t).upload(r,e,{cacheControl:"3600",upsert:!0}),s=new Promise((d,f)=>{setTimeout(()=>f(new Error("Upload timeout after 15 seconds")),15e3)}),{data:i,error:l}=await Promise.race([a,s]);if(l)return console.error("Upload error:",l),l.message.includes("bucket")||l.message.includes("not found")?{success:!1,error:`Storage bucket '${t}' does not exist. Please create it in Supabase Dashboard.`}:l.message.includes("permission")||l.message.includes("unauthorized")||l.message.includes("policy")?{success:!1,error:"Permission denied. Please create storage policies in Supabase Dashboard → Storage → Policies."}:l.message.includes("timeout")?{success:!1,error:"Upload timed out. Please try again."}:{success:!1,error:l.message};console.log("File uploaded successfully, getting public URL...");const{data:u}=G.storage.from(t).getPublicUrl(r);return console.log("File uploaded successfully:",u.publicUrl),{success:!0,url:u.publicUrl}}catch(a){return console.error("Error uploading file:",a),a instanceof Error&&a.message.includes("timeout")?{success:!1,error:"Upload timed out. Please try again."}:{success:!1,error:"Failed to upload file"}}},async uploadVerificationDocument(e,t,r){const a=new Date().toISOString().replace(/[:.]/g,"-"),s=Math.random().toString(36).substring(2,15),i=`${t}/${r}_${a}_${s}_${e.name}`;return this.uploadFile(e,"verification-documents",i)},async uploadStartupDocument(e,t,r){const a=new Date().toISOString().replace(/[:.]/g,"-"),s=`${t}/${r}_${a}_${e.name}`;return this.uploadFile(e,"startup-documents",s)},async uploadPitchDeck(e,t){const r=new Date().toISOString().replace(/[:.]/g,"-"),a=`${t}/pitch-deck_${r}_${e.name}`;return this.uploadFile(e,"pitch-decks",a)},async uploadPitchVideo(e,t){const r=new Date().toISOString().replace(/[:.]/g,"-"),a=`${t}/pitch-video_${r}_${e.name}`;return this.uploadFile(e,"pitch-videos",a)},async uploadFinancialDocument(e,t,r){const a=new Date().toISOString().replace(/[:.]/g,"-"),s=`${t}/financial/${r}_${a}_${e.name}`;return this.uploadFile(e,"financial-documents",s)},async uploadEmployeeContract(e,t,r){const a=new Date().toISOString().replace(/[:.]/g,"-"),s=`${t}/employees/${r}_contract_${a}_${e.name}`;return this.uploadFile(e,"employee-contracts",s)},async deleteFile(e,t){try{const{error:r}=await G.storage.from(e).remove([t]);return r?(console.error("Delete error:",r),{success:!1,error:r.message}):(console.log("File deleted successfully:",t),{success:!0})}catch(r){return console.error("Error deleting file:",r),{success:!1,error:"Failed to delete file"}}},async testStoragePermissions(){try{console.log("Testing storage permissions...");const{data:e,error:t}=await G.storage.from("verification-documents").list("",{limit:1});return t?(console.error("Storage permission test failed:",t),{success:!1,error:t.message,details:t}):(console.log("Storage permissions test passed"),{success:!0,details:{filesCount:(e==null?void 0:e.length)||0}})}catch(e){return console.error("Storage test error:",e),{success:!1,error:"Failed to test storage permissions"}}},async testBucketExists(e){try{console.log(`Testing if bucket ${e} exists...`);const t=G.storage.from(e).list("",{limit:1}),r=new Promise((a,s)=>{setTimeout(()=>s(new Error("Bucket test timeout")),5e3)});return await Promise.race([t,r]),console.log(`Bucket ${e} exists and is accessible`),!0}catch(t){return console.error(`Bucket ${e} test failed:`,t),!1}},async testStorageConnection(){try{console.log("Testing storage connection...");const e=G.storage.listBuckets(),t=new Promise((i,l)=>{setTimeout(()=>l(new Error("Storage test timeout after 10 seconds")),1e4)}),{data:r,error:a}=await Promise.race([e,t]);if(a)return console.error("Storage connection error:",a),{success:!1,error:a.message};const s=(r==null?void 0:r.map(i=>i.name))||[];return console.log("Available buckets:",s),{success:!0,buckets:s}}catch(e){return console.error("Storage test error:",e),e instanceof Error&&e.message.includes("timeout")?{success:!1,error:"Storage test timed out"}:{success:!1,error:"Failed to test storage connection"}}},getFileUrl(e,t){const{data:r}=G.storage.from(e).getPublicUrl(t);return r.publicUrl},async replaceProfilePhoto(e,t,r){try{if(r)try{const l=r.split("/"),u=l.findIndex(d=>d==="storage");if(u!==-1&&l[u+1]==="v1"&&l[u+2]==="object"){const d=l[u+3],f=l.slice(u+4).join("/");await this.deleteFile(d,f)}}catch(l){console.warn("Could not delete old profile photo:",l)}const a=new Date().toISOString().replace(/[:.]/g,"-"),s=Math.random().toString(36).substring(2,15),i=`${t}/profile_photo_${a}_${s}_${e.name}`;return this.uploadFile(e,"verification-documents",i)}catch(a){return console.error("Error replacing profile photo:",a),{success:!1,error:"Failed to replace profile photo"}}},async replaceVerificationDocument(e,t,r,a){try{if(a)try{const s=a.split("/"),i=s.findIndex(l=>l==="storage");if(i!==-1&&s[i+1]==="v1"&&s[i+2]==="object"){const l=s[i+3],u=s.slice(i+4).join("/");await this.deleteFile(l,u)}}catch(s){console.warn("Could not delete old document:",s)}return this.uploadVerificationDocument(e,t,r)}catch(s){return console.error("Error replacing verification document:",s),{success:!1,error:"Failed to replace verification document"}}}},BQ=Object.freeze(Object.defineProperty({__proto__:null,storageService:ds},Symbol.toStringTag,{value:"Module"})),N8=({currentUser:e,isOpen:t,onClose:r,onSave:a})=>{var pe,L,q,z;const[s,i]=_.useState({name:(e==null?void 0:e.name)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",address:(e==null?void 0:e.address)||"",city:(e==null?void 0:e.city)||"",state:(e==null?void 0:e.state)||"",country:(e==null?void 0:e.country)||"",company:(e==null?void 0:e.company)||"",company_type:(e==null?void 0:e.company_type)||"",government_id:(e==null?void 0:e.government_id)||"",ca_license:(e==null?void 0:e.ca_license)||"",investor_code:(e==null?void 0:e.investor_code)||"",investment_advisor_code:(e==null?void 0:e.investment_advisor_code)||"",investment_advisor_code_entered:(e==null?void 0:e.investment_advisor_code_entered)||"",logo_url:(e==null?void 0:e.logo_url)||"",financial_advisor_license_url:(e==null?void 0:e.financial_advisor_license_url)||""});Vc.useEffect(()=>{console.log("🔍 EditProfileModal - Form data initialized:",{currentUser:e,investment_advisor_code_entered:e==null?void 0:e.investment_advisor_code_entered,formData:s})},[e,s]);const[l,u]=_.useState((e==null?void 0:e.profile_photo_url)||null),[d,f]=_.useState({government_id:e==null?void 0:e.government_id,ca_license:e==null?void 0:e.ca_license,logo_url:e==null?void 0:e.logo_url,financial_advisor_license_url:e==null?void 0:e.financial_advisor_license_url}),[m,g]=_.useState(!1),v=_.useRef(null),x=_.useRef(null),j=_.useRef(null),b=_.useRef(null),S=_.useRef(null),A=_.useRef(null),E=(V,de)=>{i(se=>({...se,[V]:de}))},T=async V=>{var se;const de=(se=V.target.files)==null?void 0:se[0];if(de&&(e!=null&&e.id))try{g(!0);const fe=e==null?void 0:e.profile_photo_url,oe=await ds.replaceProfilePhoto(de,e.id,fe);u(oe.url),i(Se=>({...Se,profile_photo_url:oe.url})),console.log("✅ Profile photo replaced successfully:",oe.url),a({...e,profile_photo_url:oe.url})}catch(fe){console.error("❌ Error uploading profile photo:",fe)}finally{g(!1)}},D=async V=>{var se;const de=(se=V.target.files)==null?void 0:se[0];if(de&&(e!=null&&e.id))try{g(!0);const fe=d.government_id,oe=await ds.replaceVerificationDocument(de,e.id,"government-id",fe);i(Se=>({...Se,government_id:oe.url})),f(Se=>({...Se,government_id:oe.url})),console.log("✅ Government ID replaced successfully:",oe.url)}catch(fe){console.error("❌ Error uploading government ID:",fe)}finally{g(!1)}},R=async V=>{var se;const de=(se=V.target.files)==null?void 0:se[0];if(de&&(e!=null&&e.id))try{g(!0);const fe=d.ca_license,oe=await ds.replaceVerificationDocument(de,e.id,"ca-license",fe);i(Se=>({...Se,ca_license:oe.url})),f(Se=>({...Se,ca_license:oe.url})),console.log("✅ CA License replaced successfully:",oe.url)}catch(fe){console.error("❌ Error uploading CA license:",fe)}finally{g(!1)}},B=async V=>{var se;const de=(se=V.target.files)==null?void 0:se[0];if(de&&(e!=null&&e.id))try{g(!0);const fe=d.ca_license,oe=await ds.replaceVerificationDocument(de,e.id,"cs-license",fe);i(Se=>({...Se,ca_license:oe.url})),f(Se=>({...Se,ca_license:oe.url})),console.log("✅ CS License replaced successfully:",oe.url)}catch(fe){console.error("❌ Error uploading CS license:",fe)}finally{g(!1)}},U=async V=>{var se;const de=(se=V.target.files)==null?void 0:se[0];if(de&&(e!=null&&e.id))try{g(!0);const fe=d.logo_url,oe=await ds.replaceVerificationDocument(de,e.id,"logo",fe);i(Se=>({...Se,logo_url:oe.url})),f(Se=>({...Se,logo_url:oe.url})),console.log("✅ Logo replaced successfully:",oe.url)}catch(fe){console.error("❌ Error uploading logo:",fe)}finally{g(!1)}},I=async V=>{var se;const de=(se=V.target.files)==null?void 0:se[0];if(de&&(e!=null&&e.id))try{g(!0);const fe=d.financial_advisor_license_url,oe=await ds.replaceVerificationDocument(de,e.id,"financial-license",fe);i(Se=>({...Se,financial_advisor_license_url:oe.url})),f(Se=>({...Se,financial_advisor_license_url:oe.url})),console.log("✅ Financial Advisor License replaced successfully:",oe.url)}catch(fe){console.error("❌ Error uploading financial advisor license:",fe)}finally{g(!1)}},F=async()=>{if(!(e!=null&&e.id)){console.error("No user ID available");return}g(!0);try{const V={name:s.name,phone:s.phone,address:s.address,city:s.city,state:s.state,country:s.country,company:s.company,company_type:s.company_type,government_id:s.government_id,ca_license:s.ca_license,profile_photo_url:l||s.profile_photo_url,investment_advisor_code_entered:s.investment_advisor_code_entered,logo_url:s.logo_url,financial_advisor_license_url:s.financial_advisor_license_url},de=await br.updateProfile(e.id,V);if(de.error)throw new Error(de.error);if(e.role==="Startup")try{const{profileService:fe}=await So(async()=>{const{profileService:Y}=await Promise.resolve().then(()=>tee);return{profileService:Y}},void 0),{data:oe,error:Se}=await G.from("startups").select("id").eq("user_id",e.id).single();if(Se)console.error("Error finding startup for user:",Se);else if(oe){const Y={};s.investment_advisor_code_entered&&(Y.investmentAdvisorCode=s.investment_advisor_code_entered),s.company_type&&(Y.companyType=s.company_type),Object.keys(Y).length>0&&(await fe.updateStartupProfile(oe.id,Y),console.log("✅ Startup profile updated with:",Y))}}catch(fe){console.error("Error updating startup profile:",fe)}const se={...V,profilePhoto:l,profile_photo_url:s.profile_photo_url,name:s.name,phone:s.phone,address:s.address,city:s.city,state:s.state,country:s.country,company:s.company,investment_advisor_code_entered:s.investment_advisor_code_entered,logo_url:s.logo_url,financial_advisor_license_url:s.financial_advisor_license_url};await a(se),r()}catch(V){console.error("Error saving profile:",V)}finally{g(!1)}};return t?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4 lg:p-6",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-xs sm:max-w-lg md:max-w-2xl lg:max-w-4xl xl:max-w-5xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 md:p-6 border-b border-slate-200",children:[n.jsx("h2",{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-semibold text-slate-900",children:"Edit Profile"}),n.jsx("button",{onClick:r,className:"p-1.5 sm:p-2 rounded-full hover:bg-slate-100 transition-colors",children:n.jsx(Ql,{className:"h-4 w-4 sm:h-5 sm:w-5 text-slate-600"})})]}),n.jsxs("div",{className:"p-3 sm:p-4 md:p-6 space-y-3 sm:space-y-4 md:space-y-6",children:[n.jsxs("div",{className:"flex flex-col items-center space-y-2 sm:space-y-3 md:space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 lg:w-32 lg:h-32 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center text-white text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold overflow-hidden",children:l?n.jsx("img",{src:l,alt:"Profile",className:"w-full h-full object-cover"}):((L=(pe=e==null?void 0:e.name)==null?void 0:pe.charAt(0))==null?void 0:L.toUpperCase())||((z=(q=e==null?void 0:e.email)==null?void 0:q.charAt(0))==null?void 0:z.toUpperCase())||"U"}),n.jsx("button",{onClick:()=>{var V;return(V=v.current)==null?void 0:V.click()},className:"absolute bottom-0 right-0 w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 lg:w-10 lg:h-10 bg-green-600 rounded-full flex items-center justify-center text-white hover:bg-green-700 transition-colors",children:n.jsx(q6,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 md:h-4 md:w-4 lg:h-5 lg:w-5"})})]}),n.jsx("input",{ref:v,type:"file",accept:"image/*",onChange:T,className:"hidden"}),n.jsx("p",{className:"text-xs sm:text-sm text-slate-500 text-center px-2",children:"Click the camera icon to upload a new photo"})]}),n.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[n.jsx("h3",{className:"text-sm sm:text-base md:text-lg font-medium text-slate-900 border-b border-slate-200 pb-2",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3 md:gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Full Name *"}),n.jsxs("div",{className:"relative",children:[n.jsx(mm,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-slate-400"}),n.jsx("input",{type:"text",value:s.name,onChange:V=>E("name",V.target.value),className:"w-full pl-7 sm:pl-10 pr-2 sm:pr-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Enter your full name"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Email *"}),n.jsxs("div",{className:"relative",children:[n.jsx(bo,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-slate-400"}),n.jsx("input",{type:"email",value:s.email,disabled:!0,className:"w-full pl-7 sm:pl-10 pr-2 sm:pr-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md bg-slate-50 text-slate-500 cursor-not-allowed"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Email cannot be changed"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Phone Number"}),n.jsxs("div",{className:"relative",children:[n.jsx(zx,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-slate-400"}),n.jsx("input",{type:"tel",value:s.phone,onChange:V=>E("phone",V.target.value),className:"w-full pl-7 sm:pl-10 pr-2 sm:pr-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Enter phone number"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Company/Organization"}),n.jsxs("div",{className:"relative",children:[n.jsx(K0,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-slate-400"}),n.jsx("input",{type:"text",value:s.company,onChange:V=>E("company",V.target.value),className:"w-full pl-7 sm:pl-10 pr-2 sm:pr-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Enter company name"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Company Type"}),n.jsxs("div",{className:"relative",children:[n.jsx(K0,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-slate-400"}),n.jsxs("select",{value:s.company_type,onChange:V=>E("company_type",V.target.value),className:"w-full pl-7 sm:pl-10 pr-2 sm:pr-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white",children:[n.jsx("option",{value:"",children:"Select Company Type"}),n.jsx("option",{value:"C-Corporation",children:"C-Corporation"}),n.jsx("option",{value:"S-Corporation",children:"S-Corporation"}),n.jsx("option",{value:"LLC",children:"LLC"}),n.jsx("option",{value:"Partnership",children:"Partnership"}),n.jsx("option",{value:"Sole Proprietorship",children:"Sole Proprietorship"}),n.jsx("option",{value:"Private Limited",children:"Private Limited"}),n.jsx("option",{value:"Public Limited",children:"Public Limited"}),n.jsx("option",{value:"Other",children:"Other"})]})]})]})]})]}),n.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[n.jsx("h3",{className:"text-sm sm:text-base md:text-lg font-medium text-slate-900 border-b border-slate-200 pb-2",children:"Address Information"}),n.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Street Address"}),n.jsxs("div",{className:"relative",children:[n.jsx(zp,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-slate-400"}),n.jsx("input",{type:"text",value:s.address,onChange:V=>E("address",V.target.value),className:"w-full pl-7 sm:pl-10 pr-2 sm:pr-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Enter street address"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"City"}),n.jsx("input",{type:"text",value:s.city,onChange:V=>E("city",V.target.value),className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"City"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"State/Province"}),n.jsx("input",{type:"text",value:s.state,onChange:V=>E("state",V.target.value),className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"State"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Country"}),n.jsx("input",{type:"text",value:s.country,onChange:V=>E("country",V.target.value),className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Country"})]})]})]})]}),n.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[n.jsx("h3",{className:"text-sm sm:text-base md:text-lg font-medium text-slate-900 border-b border-slate-200 pb-2",children:"Professional Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3 md:gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Role"}),n.jsxs("div",{className:"relative",children:[n.jsx(Cs,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-slate-400"}),n.jsx("input",{type:"text",value:(e==null?void 0:e.role)==="CA"?"Chartered Accountant":(e==null?void 0:e.role)==="CS"?"Company Secretary":"User",disabled:!0,className:"w-full pl-7 sm:pl-10 pr-2 sm:pr-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md bg-slate-50 text-slate-500 cursor-not-allowed"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Role cannot be changed"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:(e==null?void 0:e.role)==="CA"?"CA Code":"CS Code"}),n.jsxs("div",{className:"relative",children:[n.jsx(K0,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-slate-400"}),n.jsx("input",{type:"text",value:(e==null?void 0:e.ca_code)||(e==null?void 0:e.cs_code)||"N/A",disabled:!0,className:"w-full pl-7 sm:pl-10 pr-2 sm:pr-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md bg-slate-50 text-slate-500 cursor-not-allowed"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Code cannot be changed"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Registration Date"}),n.jsxs("div",{className:"relative",children:[n.jsx(Bp,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-slate-400"}),n.jsx("input",{type:"text",value:e!=null&&e.registration_date?new Date(e.registration_date).toLocaleDateString():"N/A",disabled:!0,className:"w-full pl-7 sm:pl-10 pr-2 sm:pr-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md bg-slate-50 text-slate-500 cursor-not-allowed"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Registration date cannot be changed"})]})]})]})]}),n.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[n.jsx("h3",{className:"text-sm sm:text-base md:text-lg font-medium text-slate-900 border-b border-slate-200 pb-2",children:"Verification Documents"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Government ID (Passport, Driver's License, etc.)"}),n.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.government_id&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-2 sm:p-3 bg-green-50 border border-green-200 rounded-md gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx(Cs,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600 flex-shrink-0"}),n.jsx("div",{className:"min-w-0 flex-1",children:n.jsxs("span",{className:"text-xs sm:text-sm text-green-800 font-medium block",children:["Current Document: ",d.government_id.split("/").pop()||d.government_id]})}),n.jsx("button",{onClick:()=>window.open(d.government_id,"_blank"),className:"text-green-600 hover:text-green-800 text-xs sm:text-sm underline flex-shrink-0",children:"View Document"})]}),n.jsx("button",{onClick:()=>{i(V=>({...V,government_id:""})),f(V=>({...V,government_id:""}))},className:"text-red-500 hover:text-red-700 text-xs sm:text-sm px-2 py-1 rounded hover:bg-red-50 self-end sm:self-center",title:"Remove Document",children:n.jsx(qa,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx("input",{ref:x,type:"file",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:D,className:"hidden"}),n.jsxs("button",{onClick:()=>{var V;return(V=x.current)==null?void 0:V.click()},className:"px-3 sm:px-4 py-1.5 sm:py-2 border border-slate-300 rounded-md text-xs sm:text-sm text-slate-700 hover:bg-slate-50 transition-colors flex items-center gap-2",children:[n.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),d.government_id?"Replace Document":"Upload Document"]})]})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Accepted formats: PDF, JPG, PNG, DOC, DOCX"})]}),(e==null?void 0:e.role)==="CA"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Copy of CA License"}),n.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.ca_license&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-2 sm:p-3 bg-green-50 border border-green-200 rounded-md gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx(Cs,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600 flex-shrink-0"}),n.jsx("div",{className:"min-w-0 flex-1",children:n.jsxs("span",{className:"text-xs sm:text-sm text-green-800 font-medium block",children:["Current Document: ",d.ca_license.split("/").pop()||d.ca_license]})}),n.jsx("button",{onClick:()=>window.open(d.ca_license,"_blank"),className:"text-green-600 hover:text-green-800 text-xs sm:text-sm underline flex-shrink-0",children:"View Document"})]}),n.jsx("button",{onClick:()=>{i(V=>({...V,ca_license:""})),f(V=>({...V,ca_license:""}))},className:"text-red-500 hover:text-red-700 text-xs sm:text-sm px-2 py-1 rounded hover:bg-red-50 self-end sm:self-center",title:"Remove Document",children:n.jsx(qa,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx("input",{ref:j,type:"file",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:R,className:"hidden"}),n.jsxs("button",{onClick:()=>{var V;return(V=j.current)==null?void 0:V.click()},className:"px-3 sm:px-4 py-1.5 sm:py-2 border border-slate-300 rounded-md text-xs sm:text-sm text-slate-700 hover:bg-slate-50 transition-colors flex items-center gap-2",children:[n.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),d.ca_license?"Replace Document":"Upload Document"]})]})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Accepted formats: PDF, JPG, PNG, DOC, DOCX"})]}),(e==null?void 0:e.role)==="CS"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Copy of CS License"}),n.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.ca_license&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-2 sm:p-3 bg-green-50 border border-green-200 rounded-md gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx(Cs,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600 flex-shrink-0"}),n.jsx("div",{className:"min-w-0 flex-1",children:n.jsxs("span",{className:"text-xs sm:text-sm text-green-800 font-medium block",children:["Current Document: ",d.ca_license.split("/").pop()||d.ca_license]})}),n.jsx("button",{onClick:()=>window.open(d.ca_license,"_blank"),className:"text-green-600 hover:text-green-800 text-xs sm:text-sm underline flex-shrink-0",children:"View Document"})]}),n.jsx("button",{onClick:()=>{i(V=>({...V,ca_license:""})),f(V=>({...V,ca_license:""}))},className:"text-red-500 hover:text-red-700 text-xs sm:text-sm px-2 py-1 rounded hover:bg-red-50 self-end sm:self-center",title:"Remove Document",children:n.jsx(qa,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx("input",{ref:b,type:"file",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:B,className:"hidden"}),n.jsxs("button",{onClick:()=>{var V;return(V=b.current)==null?void 0:V.click()},className:"px-3 sm:px-4 py-1.5 sm:py-2 border border-slate-300 rounded-md text-xs sm:text-sm text-slate-700 hover:bg-slate-50 transition-colors flex items-center gap-2",children:[n.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),d.ca_license?"Replace Document":"Upload Document"]})]})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Accepted formats: PDF, JPG, PNG, DOC, DOCX"})]}),(e==null?void 0:e.role)==="Investment Advisor"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Investment Advisor Code"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"text",value:s.investment_advisor_code,onChange:V=>E("investment_advisor_code",V.target.value),className:"flex-1 px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"IA-XXXXXX",readOnly:!0}),n.jsx("span",{className:"text-xs text-slate-500",children:"Auto-generated"})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Your unique Investment Advisor code (read-only)"})]}),((e==null?void 0:e.role)==="Investor"||(e==null?void 0:e.role)==="Startup")&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Investment Advisor Code"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"text",value:s.investment_advisor_code_entered,onChange:V=>{console.log("🔍 Investment Advisor Code changed:",V.target.value),E("investment_advisor_code_entered",V.target.value)},className:"flex-1 px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"IA-XXXXXX"}),n.jsx("span",{className:"text-xs text-slate-500",children:"Optional"})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Enter your Investment Advisor's code to connect with them"}),n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Current value: ",s.investment_advisor_code_entered||"None"]})]}),(e==null?void 0:e.role)==="Investment Advisor"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Company Logo"}),n.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.logo_url&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-2 sm:p-3 bg-green-50 border border-green-200 rounded-md gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx("img",{src:d.logo_url,alt:"Current Logo",className:"h-8 w-8 rounded object-cover"}),n.jsx("div",{className:"min-w-0 flex-1",children:n.jsxs("span",{className:"text-xs sm:text-sm text-green-800 font-medium block",children:["Current Logo: ",d.logo_url.split("/").pop()||"Company Logo"]})}),n.jsx("button",{onClick:()=>window.open(d.logo_url,"_blank"),className:"text-green-600 hover:text-green-800 text-xs sm:text-sm underline flex-shrink-0",children:"View Logo"})]}),n.jsx("button",{onClick:()=>{i(V=>({...V,logo_url:""})),f(V=>({...V,logo_url:""}))},className:"text-red-500 hover:text-red-700 text-xs sm:text-sm px-2 py-1 rounded hover:bg-red-50 self-end sm:self-center",title:"Remove Logo",children:n.jsx(qa,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx("input",{ref:S,type:"file",accept:".jpg,.jpeg,.png,.svg",onChange:U,className:"hidden"}),n.jsxs("button",{onClick:()=>{var V;return(V=S.current)==null?void 0:V.click()},className:"px-3 sm:px-4 py-1.5 sm:py-2 border border-slate-300 rounded-md text-xs sm:text-sm text-slate-700 hover:bg-slate-50 transition-colors flex items-center gap-2",children:[n.jsx(q6,{className:"h-3 w-3 sm:h-4 sm:w-4"}),d.logo_url?"Replace Logo":"Upload Logo"]})]})]}),n.jsxs("div",{className:"text-xs text-slate-500 mt-1 space-y-1",children:[n.jsx("p",{children:"Accepted formats: JPG, PNG, SVG"}),n.jsxs("div",{className:"bg-blue-50 p-2 rounded border border-blue-200",children:[n.jsx("p",{className:"font-medium text-blue-800 mb-1",children:"Logo Specifications:"}),n.jsxs("ul",{className:"text-blue-700 space-y-0.5",children:[n.jsx("li",{children:"• Recommended size: 64x64 pixels (square format)"}),n.jsx("li",{children:"• Maximum file size: 2MB"}),n.jsx("li",{children:"• Logo will be displayed as 64x64px with white background"})]})]})]})]}),(e==null?void 0:e.role)==="Investment Advisor"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Financial Advisor License"}),n.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.financial_advisor_license_url&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-2 sm:p-3 bg-green-50 border border-green-200 rounded-md gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx(Cs,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600 flex-shrink-0"}),n.jsx("div",{className:"min-w-0 flex-1",children:n.jsxs("span",{className:"text-xs sm:text-sm text-green-800 font-medium block",children:["Current Document: ",d.financial_advisor_license_url.split("/").pop()||d.financial_advisor_license_url]})}),n.jsx("button",{onClick:()=>window.open(d.financial_advisor_license_url,"_blank"),className:"text-green-600 hover:text-green-800 text-xs sm:text-sm underline flex-shrink-0",children:"View Document"})]}),n.jsx("button",{onClick:()=>{i(V=>({...V,financial_advisor_license_url:""})),f(V=>({...V,financial_advisor_license_url:""}))},className:"text-red-500 hover:text-red-700 text-xs sm:text-sm px-2 py-1 rounded hover:bg-red-50 self-end sm:self-center",title:"Remove Document",children:n.jsx(qa,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx("input",{ref:A,type:"file",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:I,className:"hidden"}),n.jsxs("button",{onClick:()=>{var V;return(V=A.current)==null?void 0:V.click()},className:"px-3 sm:px-4 py-1.5 sm:py-2 border border-slate-300 rounded-md text-xs sm:text-sm text-slate-700 hover:bg-slate-50 transition-colors flex items-center gap-2",children:[n.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),d.financial_advisor_license_url?"Replace Document":"Upload Document"]})]})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Upload your financial advisor license (if applicable)"})]})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-end gap-2 sm:gap-3 p-3 sm:p-4 md:p-6 border-t border-slate-200",children:[n.jsx(Oe,{variant:"outline",onClick:r,disabled:m,className:"w-full sm:w-auto text-sm sm:text-base px-3 sm:px-4 py-2 sm:py-2.5",children:"Cancel"}),n.jsx(Oe,{variant:"primary",onClick:F,disabled:m,className:"w-full sm:w-auto flex items-center gap-2 text-sm sm:text-base px-3 sm:px-4 py-2 sm:py-2.5",children:m?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-3 w-3 sm:h-4 sm:w-4 border-b-2 border-white"}),n.jsx("span",{className:"hidden sm:inline",children:"Saving..."}),n.jsx("span",{className:"sm:hidden",children:"Save"})]}):n.jsxs(n.Fragment,{children:[n.jsx(Dv,{className:"h-3 w-3 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Save Changes"}),n.jsx("span",{className:"sm:hidden",children:"Save"})]})})]})]})}):null};function S8({userId:e,userType:t,country:r,startupCount:a}){const[s,i]=_.useState([]),[l,u]=_.useState(null),[d,f]=_.useState(null),[m,g]=_.useState(""),[v,x]=_.useState(null),[j,b]=_.useState(!1),[S,A]=_.useState(null),[E,T]=_.useState(null);_.useEffect(()=>{D()},[e,t,r]);const D=async()=>{try{b(!0),A(null);const[I,F]=await Promise.all([zc.getSubscriptionPlans(t,r),zc.getUserSubscription(e)]);i(I||[]),u(F),(!I||I.length===0)&&A(`No subscription plans available for ${t} in ${r}. Please contact support.`)}catch(I){console.error("Error loading subscription data:",I),A("Failed to load subscription information. Please try again or contact support.")}finally{b(!1)}},R=async()=>{if(m.trim())try{const I=await zc.applyDiscountCoupon(m,e);x(I.coupon),A(null),T(`Coupon applied! ${I.coupon.discount_type==="percentage"?`${I.coupon.discount_value}%`:`€${I.coupon.discount_value}`} discount`)}catch{A("Invalid or expired coupon code"),x(null)}},B=I=>{let F=I.price*a;return v&&(v.discount_type==="percentage"?F=F*(1-v.discount_value/100):F=Math.max(0,F-v.discount_value)),F},U=async I=>{try{b(!0),A(null);const F=B(I),pe=await zc.createPaymentIntent(F,I.currency,e,I.id),L=await zc.confirmPayment(pe.id,e,I.id,a);u(L),T("Subscription activated successfully!"),x(null),g("")}catch(F){console.error("Error processing subscription:",F),A("Failed to process subscription. Please try again.")}finally{b(!1)}};return j&&!l?n.jsx(et,{children:n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):n.jsx(et,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(vp,{className:"h-6 w-6 text-blue-600"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Subscription Management"})]}),l?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ua,{className:"h-5 w-5 text-green-600"}),n.jsx("span",{className:"font-medium text-green-800",children:"Active Subscription"})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:l.status})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Jl,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Plan"})]}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:l.plan_id})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Ps,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Startups"})]}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:l.startup_count})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(No,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Amount"})]}),n.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:["€",l.amount]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Bp,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Started"})]}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:new Date(l.current_period_start).toLocaleDateString()})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Ux,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Next Billing"})]}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:new Date(l.current_period_end).toLocaleDateString()})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(rm,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Interval"})]}),n.jsx("p",{className:"text-sm font-semibold text-slate-900 capitalize",children:l.interval})]})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[n.jsxs("h4",{className:"font-medium text-slate-900 mb-3 flex items-center gap-2",children:[n.jsx(Vp,{className:"h-4 w-4"}),"Subscription Management"]}),n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsxs(Oe,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(rm,{className:"h-4 w-4"}),"Update Plan"]}),n.jsxs(Oe,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(gi,{className:"h-4 w-4"}),"Download Invoice"]}),n.jsxs(Oe,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Vp,{className:"h-4 w-4"}),"Billing Settings"]}),n.jsx(Oe,{variant:"outline",size:"sm",className:"flex items-center gap-2 text-red-600 hover:text-red-700 hover:border-red-300",children:"Cancel Subscription"})]})]})]}):n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(tu,{className:"h-5 w-5 text-yellow-600"}),n.jsx("span",{className:"font-medium text-yellow-800",children:"No Active Subscription"})]}),n.jsxs("p",{className:"text-sm text-yellow-700 mb-3",children:["Subscribe to access premium features for your ",a," startup",a!==1?"s":"","."]}),n.jsx("div",{className:"bg-white rounded-lg p-3 border border-yellow-100",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-900",children:"Current Usage"}),n.jsxs("p",{className:"text-xs text-slate-600",children:[a," startup",a!==1?"s":""," requiring subscription"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:["€",a*15,"/month"]}),n.jsxs("p",{className:"text-xs text-slate-600",children:["or €",a*120,"/year"]})]})]})})]}),!l&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Choose Your Plan"}),n.jsxs("div",{className:"text-sm text-slate-600",children:[s.length," plan",s.length!==1?"s":""," available"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(I=>n.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition-all duration-200 ${(d==null?void 0:d.id)===I.id?"border-blue-500 bg-blue-50 shadow-md":"border-slate-200 hover:border-slate-300 hover:shadow-sm"}`,onClick:()=>f(I),children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h5",{className:"font-medium text-slate-900",children:I.name}),I.interval==="yearly"&&n.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Save 33%"})]}),n.jsx("p",{className:"text-sm text-slate-600",children:I.description})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-lg font-semibold text-slate-900",children:["€",I.price,"/",I.interval==="monthly"?"mo":"yr"]}),n.jsx("div",{className:"text-sm text-slate-500",children:"per startup"})]})]}),n.jsxs("div",{className:"space-y-2 mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(ua,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{children:"Full platform access"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(ua,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{children:"Priority support"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(ua,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{children:"Advanced analytics"})]}),I.interval==="yearly"&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[n.jsx(ua,{className:"h-4 w-4 text-green-500"}),n.jsxs("span",{children:["2 months free (€",Math.round(I.price*.5)," savings)"]})]})]}),a>0&&n.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{children:["Base price for ",a," startup",a!==1?"s":"",":"]}),n.jsxs("span",{children:["€",(I.price*a).toFixed(2)]})]}),v&&n.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[n.jsxs("span",{children:["Discount (",v.discount_type==="percentage"?`${v.discount_value}%`:`€${v.discount_value}`,"):"]}),n.jsxs("span",{children:["-€",(I.price*a-B(I)).toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between text-sm font-semibold border-t border-slate-200 pt-2",children:[n.jsx("span",{children:"Total:"}),n.jsxs("span",{children:["€",B(I).toFixed(2)]})]})]})}),(d==null?void 0:d.id)===I.id&&n.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[n.jsx(ua,{className:"h-4 w-4"}),n.jsx("span",{children:"Selected plan"})]})})]},I.id))})]}),!l&&d&&n.jsx("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(j8,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Discount Coupon"})]}),v&&n.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Applied"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"Enter coupon code (e.g., WELCOME20)",value:m,onChange:I=>g(I.target.value.toUpperCase()),className:"flex-1 px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:v!==null}),n.jsx(Oe,{onClick:R,disabled:!m.trim()||v!==null,size:"sm",variant:"outline",children:v?"Applied":"Apply"})]}),v&&n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-green-800",children:["Coupon applied: ",v.discount_type==="percentage"?`${v.discount_value}% off`:`€${v.discount_value} off`]}),n.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Code: ",v.code]})]}),n.jsx("button",{onClick:()=>{x(null),g("")},className:"text-green-600 hover:text-green-800 text-sm underline",children:"Remove"})]})}),n.jsxs("div",{className:"text-xs text-slate-500",children:[n.jsx("p",{children:"• Coupon codes are case-insensitive"}),n.jsx("p",{children:"• Some coupons may have usage limits or expiration dates"}),n.jsx("p",{children:"• Discounts are applied to the total subscription amount"})]})]})}),!l&&d&&n.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[n.jsxs("h4",{className:"font-medium text-slate-900 mb-3 flex items-center gap-2",children:[n.jsx(vp,{className:"h-4 w-4"}),"Payment Summary"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"bg-slate-50 rounded-lg p-3",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Plan:"}),n.jsx("span",{className:"font-medium",children:d.name})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Billing:"}),n.jsx("span",{className:"font-medium capitalize",children:d.interval})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Startups:"}),n.jsx("span",{className:"font-medium",children:a})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Base amount:"}),n.jsxs("span",{className:"font-medium",children:["€",(d.price*a).toFixed(2)]})]}),v&&n.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[n.jsxs("span",{children:["Discount (",v.discount_type==="percentage"?`${v.discount_value}%`:`€${v.discount_value}`,"):"]}),n.jsxs("span",{children:["-€",(d.price*a-B(d)).toFixed(2)]})]}),n.jsx("div",{className:"border-t border-slate-200 pt-2",children:n.jsxs("div",{className:"flex justify-between text-base font-semibold",children:[n.jsx("span",{children:"Total:"}),n.jsxs("span",{children:["€",B(d).toFixed(2)]})]})})]})}),n.jsxs("div",{className:"text-sm text-slate-600",children:[n.jsx("p",{className:"font-medium mb-2",children:"Accepted payment methods:"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(vp,{className:"h-4 w-4"}),n.jsx("span",{children:"Credit/Debit Card"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Jl,{className:"h-4 w-4"}),n.jsx("span",{children:"Bank Transfer"})]})]})]}),n.jsx(Oe,{onClick:()=>U(d),disabled:j,className:"w-full",size:"lg",children:j?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Processing Payment..."]}):n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(vp,{className:"h-4 w-4"}),"Subscribe for €",B(d).toFixed(2)]})}),n.jsx("div",{className:"text-xs text-slate-500 text-center",children:n.jsx("p",{children:"🔒 Secure payment processing • Cancel anytime • No setup fees"})})]})]}),S&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:n.jsx("p",{className:"text-sm text-red-800",children:S})}),E&&n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:n.jsx("p",{className:"text-sm text-green-800",children:E})}),n.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[n.jsxs("h5",{className:"font-medium text-slate-900 mb-3 flex items-center gap-2",children:[n.jsx(No,{className:"h-4 w-4"}),"Pricing Information"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h6",{className:"text-sm font-medium text-slate-800",children:"Subscription Details"}),n.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[n.jsx("p",{children:"• €15/month or €120/year per invested startup"}),n.jsx("p",{children:"• Billing based on active startup investments"}),n.jsx("p",{children:"• Update subscription anytime"}),n.jsx("p",{children:"• Cancel anytime with no fees"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h6",{className:"text-sm font-medium text-slate-800",children:"What's Included"}),n.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[n.jsx("p",{children:"• Full platform access"}),n.jsx("p",{children:"• Priority customer support"}),n.jsx("p",{children:"• Advanced analytics & reporting"}),n.jsx("p",{children:"• Real-time notifications"})]})]})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-slate-200",children:n.jsxs("div",{className:"text-sm text-slate-600",children:[n.jsxs("p",{className:"font-medium text-slate-800 mb-1",children:[t==="Investor"&&"For Investors:",t==="Startup"&&"For Startups:",t==="Startup Facilitation Center"&&"For Facilitation Centers:",t==="Investment Advisor"&&"For Investment Advisors:"]}),n.jsxs("div",{children:[t==="Investor"&&n.jsx("p",{children:"Pay only for startups you actively invest in. No charges for browsing or due diligence."}),t==="Startup"&&n.jsx("p",{children:"Pay only when you receive investments. Free to use the platform for fundraising."}),t==="Startup Facilitation Center"&&n.jsx("p",{children:"Pay only when you take equity in startups. Limited incubation programs are free."}),t==="Investment Advisor"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"font-medium",children:"Smart Fee Structure - Pay Only When You Succeed:"}),n.jsxs("div",{className:"text-sm space-y-1 ml-2",children:[n.jsxs("p",{children:["• ",n.jsx("span",{className:"font-medium",children:"Both from your network:"})," No scouting fees"]}),n.jsxs("p",{children:["• ",n.jsx("span",{className:"font-medium",children:"Investor from network:"})," 30% from investor"]}),n.jsxs("p",{children:["• ",n.jsx("span",{className:"font-medium",children:"Startup from network:"})," 30% from startup"]})]}),n.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Plus standard subscription fees for platform access."})]})]})]})})]})]})})}function A8({userId:e,userType:t}){const[r,a]=_.useState(null),[s,i]=_.useState(!0),[l,u]=_.useState(null);_.useEffect(()=>{d()},[e]);const d=async()=>{try{i(!0),u(null);const g=await zc.getSubscriptionSummary(e);a(g)}catch(g){console.error("Error loading subscription summary:",g),u("Failed to load subscription summary. Please try again or contact support.")}finally{i(!1)}};if(s)return n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(et,{children:n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}),n.jsx(et,{children:n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})]});if(l)return n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.jsx(et,{children:n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-red-600",children:l})})})});if(!r)return null;const f=g=>new Intl.NumberFormat("en-EU",{style:"currency",currency:"EUR",minimumFractionDigits:2}).format(g),m=g=>new Date(g).toLocaleDateString("en-EU",{year:"numeric",month:"short",day:"numeric"});return n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs(et,{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Total Due"}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:f(r.totalDue)}),n.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[r.totalSubscriptions," active subscription",r.totalSubscriptions!==1?"s":""]})]}),n.jsx("div",{className:"h-12 w-12 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(PJ,{className:"h-6 w-6 text-red-600"})})]}),r.totalDue>0&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Upcoming Payments:"}),n.jsxs("div",{className:"space-y-1",children:[r.upcomingPayments.slice(0,2).map((g,v)=>n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-slate-600",children:g.plan.name}),n.jsx("span",{className:"font-medium",children:f(g.amount)})]},v)),r.upcomingPayments.length>2&&n.jsxs("p",{className:"text-xs text-slate-500",children:["+",r.upcomingPayments.length-2," more payment",r.upcomingPayments.length-2!==1?"s":""]})]})]})]}),n.jsxs(et,{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Active Subscriptions"}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:r.totalSubscriptions}),n.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[r.activeSubscriptions.reduce((g,v)=>g+v.startup_count,0)," total startup",r.activeSubscriptions.reduce((g,v)=>g+v.startup_count,0)!==1?"s":""]})]}),n.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(vp,{className:"h-6 w-6 text-green-600"})})]}),r.activeSubscriptions.length>0&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Subscription Details:"}),n.jsxs("div",{className:"space-y-1",children:[r.activeSubscriptions.slice(0,2).map((g,v)=>n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsxs("span",{className:"text-slate-600",children:[g.startup_count," startup",g.startup_count!==1?"s":""]}),n.jsxs("span",{className:"text-slate-500",children:["Due ",m(g.current_period_end)]})]},v)),r.activeSubscriptions.length>2&&n.jsxs("p",{className:"text-xs text-slate-500",children:["+",r.activeSubscriptions.length-2," more subscription",r.activeSubscriptions.length-2!==1?"s":""]})]})]})]})]})}const cg=({currentUser:e,onBack:t,onProfileUpdate:r,onLogout:a})=>{var E,T,D,R,B,U,I,F,pe;const[s,i]=_.useState(!1),[l,u]=_.useState(e),[d,f]=_.useState(!1);_.useEffect(()=>{e!=null&&e.id&&m()},[]);const m=async()=>{if(e!=null&&e.id)try{f(!0),console.log("🔄 Refreshing profile data for user:",e.id);const L=await br.getCurrentUser();console.log("✅ Fresh profile data loaded:",L),u(L),r&&JSON.stringify(L)!==JSON.stringify(e)?(console.log("🔄 Profile data changed, updating parent component"),r(L)):console.log("✅ Profile data unchanged, no parent update needed")}catch(L){console.error("❌ Error refreshing profile data:",L),u(e)}finally{f(!1)}},[g,v]=_.useState(!1),[x,j]=_.useState(!1),b=[{id:"account",icon:n.jsx(mm,{className:"h-5 w-5"}),title:"Account",description:"Manage your account settings",onClick:()=>i(!0)},{id:"notifications",icon:n.jsx(Fp,{className:"h-5 w-5"}),title:"Notifications",description:"Manage notification preferences",onClick:()=>v(!0)},{id:"help",icon:n.jsx(em,{className:"h-5 w-5"}),title:"Help & Support",description:"Get help and contact support",onClick:()=>j(!0)}],S=()=>{console.log("Logging out..."),a?a():window.location.href="/logout"},A=async L=>{if(!(e!=null&&e.id)){console.error("No user ID available");return}try{if(console.log("Saving profile:",L),r){const q={...e,...L,profile_photo_url:L.profile_photo_url||e.profile_photo_url,investment_advisor_code_entered:L.investment_advisor_code_entered||e.investment_advisor_code_entered,logo_url:L.logo_url||e.logo_url,name:L.name||e.name,phone:L.phone||e.phone,address:L.address||e.address,city:L.city||e.city,state:L.state||e.state,country:L.country||e.country,company:L.company||e.company,company_type:L.company_type||e.company_type};console.log("✅ Profile updated, calling onProfileUpdate with:",q),r(q)}console.log("Profile saved successfully!")}catch(q){console.error("Error in handleSaveProfile:",q)}};return n.jsxs("div",{className:"min-h-screen bg-slate-50",children:[n.jsxs("div",{className:"bg-green-600 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 py-3 sm:py-4",children:[n.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-green-700 transition-colors","aria-label":"Go back",children:n.jsx(nc,{className:"h-5 w-5 sm:h-6 sm:w-6"})}),n.jsx("h1",{className:"text-lg sm:text-xl font-semibold",children:"Profile"}),n.jsx("button",{onClick:m,disabled:d,className:"p-2 rounded-full hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Refresh profile data",title:d?"Refreshing...":"Refresh profile data",children:n.jsx(rm,{className:`h-5 w-5 sm:h-6 sm:w-6 ${d?"animate-spin":""}`})})]}),l&&n.jsxs("div",{className:"text-xs text-green-200 text-center pb-2",children:["Last updated: ",new Date().toLocaleTimeString()]}),!1]}),n.jsx("div",{className:"bg-white px-4 sm:px-6 py-6 sm:py-8",children:n.jsxs("div",{className:"flex flex-col items-center text-center",children:[n.jsxs("div",{className:"relative mb-4 sm:mb-6",children:[l!=null&&l.profile_photo_url?n.jsxs("div",{className:"w-20 h-20 sm:w-24 sm:h-24 lg:w-32 lg:h-32 rounded-full overflow-hidden border-4 border-green-600",children:[n.jsx("img",{src:l.profile_photo_url,alt:`${l.name||"User"}'s profile photo`,className:"w-full h-full object-cover",onError:L=>{var z;const q=L.target;q.style.display="none",(z=q.nextElementSibling)==null||z.classList.remove("hidden")}}),n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center text-white text-xl sm:text-2xl lg:text-3xl font-bold hidden",children:((T=(E=l==null?void 0:l.name)==null?void 0:E.charAt(0))==null?void 0:T.toUpperCase())||((R=(D=l==null?void 0:l.email)==null?void 0:D.charAt(0))==null?void 0:R.toUpperCase())||"U"})]}):n.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 lg:w-32 lg:h-32 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center text-white text-xl sm:text-2xl lg:text-3xl font-bold",children:((U=(B=l==null?void 0:l.name)==null?void 0:B.charAt(0))==null?void 0:U.toUpperCase())||((F=(I=l==null?void 0:l.email)==null?void 0:I.charAt(0))==null?void 0:F.toUpperCase())||"U"}),(l==null?void 0:l.profile_photo_url)&&n.jsx("div",{className:"text-xs text-gray-500 mt-2 text-center",children:"Debug: Photo URL exists"}),n.jsx("button",{className:"absolute bottom-0 right-0 w-6 h-6 sm:w-8 sm:h-8 lg:w-10 lg:h-10 bg-green-600 rounded-full flex items-center justify-center text-white hover:bg-green-700 transition-colors",onClick:()=>i(!0),children:n.jsx(lf,{className:"h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5"})})]}),n.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-slate-900 mb-2 sm:mb-3",children:(l==null?void 0:l.name)||((pe=l==null?void 0:l.email)==null?void 0:pe.split("@")[0])||"User"}),n.jsx("p",{className:"text-sm sm:text-base text-slate-600 mb-3 sm:mb-4 break-all px-2",children:l==null?void 0:l.email}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 mb-3 sm:mb-4",children:[n.jsx("span",{className:"text-xs sm:text-sm text-slate-500",children:"Role:"}),n.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 sm:px-3 sm:py-1 rounded-full text-xs sm:text-sm font-medium",children:(l==null?void 0:l.role)==="CA"?"Chartered Accountant":(l==null?void 0:l.role)==="CS"?"Company Secretary":"User"})]}),(l==null?void 0:l.company_type)&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 mb-3 sm:mb-4",children:[n.jsx("span",{className:"text-xs sm:text-sm text-slate-500",children:"Company Type:"}),n.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 sm:px-3 sm:py-1 rounded-full text-xs sm:text-sm font-medium",children:l.company_type})]}),((l==null?void 0:l.ca_code)||(l==null?void 0:l.cs_code))&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 mb-4 sm:mb-6",children:[n.jsx("span",{className:"text-xs sm:text-sm text-slate-500",children:(l==null?void 0:l.role)==="CA"?"CA Code:":"CS Code:"}),n.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 sm:px-3 sm:py-1 rounded-md text-xs sm:text-sm font-medium",children:(l==null?void 0:l.ca_code)||(l==null?void 0:l.cs_code)})]}),(l==null?void 0:l.role)==="Investment Advisor"&&(l==null?void 0:l.investment_advisor_code)&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 mb-4 sm:mb-6",children:[n.jsx("span",{className:"text-xs sm:text-sm text-slate-500",children:"Investment Advisor Code:"}),n.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 sm:px-3 sm:py-1 rounded-md text-xs sm:text-sm font-medium",children:l.investment_advisor_code})]}),n.jsx(Oe,{variant:"primary",className:"w-full max-w-xs sm:max-w-sm lg:max-w-md text-sm sm:text-base",onClick:()=>i(!0),children:"Edit Profile"})]})}),((l==null?void 0:l.government_id)||(l==null?void 0:l.ca_license)||(l==null?void 0:l.cs_license)||(l==null?void 0:l.role)==="CS"&&(l==null?void 0:l.ca_license)||(l==null?void 0:l.verification_documents)&&l.verification_documents.length>0)&&n.jsxs("div",{className:"bg-white mt-4 px-4 sm:px-6 py-6",children:[n.jsx("h3",{className:"text-base sm:text-lg font-medium text-slate-900 mb-4",children:"Verification Documents"}),n.jsxs("div",{className:"space-y-3",children:[(l==null?void 0:l.government_id)&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 p-3 bg-green-50 border border-green-200 rounded-md",children:[n.jsx(Cs,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-green-800",children:"Government ID"}),n.jsx("p",{className:"text-xs text-green-600 break-all",children:l.government_id})]}),n.jsx("button",{onClick:()=>window.open(l.government_id,"_blank"),className:"text-green-600 hover:text-green-800 text-sm underline flex-shrink-0",children:"View"})]}),(l==null?void 0:l.ca_license)&&(l==null?void 0:l.role)==="CA"&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 p-3 bg-blue-50 border border-blue-200 rounded-md",children:[n.jsx(Cs,{className:"h-5 w-5 text-blue-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-blue-800",children:"CA License"}),n.jsx("p",{className:"text-xs text-blue-600 break-all",children:l.ca_license})]}),n.jsx("button",{onClick:()=>window.open(l.ca_license,"_blank"),className:"text-blue-600 hover:text-blue-800 text-sm underline flex-shrink-0",children:"View"})]}),(l==null?void 0:l.role)==="CS"&&((l==null?void 0:l.cs_license)||(l==null?void 0:l.ca_license))&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 p-3 bg-blue-50 border border-blue-200 rounded-md",children:[n.jsx(Cs,{className:"h-5 w-5 text-blue-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-blue-800",children:"CS License"}),n.jsx("p",{className:"text-xs text-blue-600 break-all",children:l.cs_license||l.ca_license})]}),n.jsx("button",{onClick:()=>window.open(l.cs_license||l.ca_license,"_blank"),className:"text-blue-600 hover:text-blue-800 text-sm underline flex-shrink-0",children:"View"})]})]})]}),l&&["Investor","Startup","Startup Facilitation Center","Investment Advisor"].includes(l.role)&&n.jsx("div",{className:"mt-4",children:n.jsx(A8,{userId:l.id,userType:l.role})}),l&&["Investor","Startup","Startup Facilitation Center","Investment Advisor"].includes(l.role)&&n.jsx("div",{className:"mt-4",children:n.jsx(S8,{userId:l.id,userType:l.role,country:l.country||"Global",startupCount:l.startup_count||0})}),n.jsx("div",{className:"bg-white mt-4",children:b.map((L,q)=>n.jsxs("div",{children:[n.jsxs("button",{onClick:L.onClick,className:"w-full px-4 sm:px-6 py-3 sm:py-4 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[n.jsx("div",{className:"text-slate-600 flex-shrink-0",children:L.icon}),n.jsxs("div",{className:"text-left min-w-0 flex-1",children:[n.jsx("p",{className:"text-sm sm:text-base font-medium text-slate-900",children:L.title}),n.jsx("p",{className:"text-xs sm:text-sm text-slate-500",children:L.description})]})]}),n.jsx("div",{className:"text-slate-400 flex-shrink-0",children:n.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),q<b.length-1&&n.jsx("div",{className:"border-b border-slate-100 mx-4 sm:mx-6"})]},L.id))}),n.jsx("div",{className:"bg-white mt-4",children:n.jsxs("button",{onClick:S,className:"w-full px-4 sm:px-6 py-3 sm:py-4 flex items-center gap-3 text-red-600 hover:bg-red-50 transition-colors",children:[n.jsx(Tv,{className:"h-4 w-4 sm:h-5 sm:w-5"}),n.jsx("span",{className:"text-sm sm:text-base font-medium",children:"Logout"})]})}),n.jsx(N8,{currentUser:l,isOpen:s,onClose:()=>i(!1),onSave:A}),g&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Fp,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Notifications"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"You're all caught up! No new notifications at this time."}),n.jsx(Oe,{variant:"primary",onClick:()=>v(!1),className:"w-full",children:"Got it"})]})})}),x&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx(em,{className:"h-12 w-12 text-blue-500 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Help & Support"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"Our detailed help documentation and support system is coming soon. We're working hard to provide you with the best assistance."}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[n.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Coming Soon Features:"}),n.jsxs("ul",{className:"text-sm text-blue-700 mt-2 space-y-1",children:[n.jsx("li",{children:"• Comprehensive FAQ section"}),n.jsx("li",{children:"• Live chat support"}),n.jsx("li",{children:"• Video tutorials"}),n.jsx("li",{children:"• Contact support team"})]})]}),n.jsx(Oe,{variant:"primary",onClick:()=>j(!1),className:"w-full",children:"Understood"})]})})})]})},au="/assets/logoTMS-BRiW8pqM.svg",UQ=({currentUser:e,className:t="h-7 w-7 sm:h-8 sm:w-8 scale-[5] sm:scale-[5] origin-left cursor-pointer hover:opacity-80 transition-opacity",alt:r="TrackMyStartup",onClick:a,showText:s=!0,textClassName:i="text-2xl sm:text-3xl font-bold text-slate-900"})=>{const[l,u]=_.useState(null),[d,f]=_.useState(!1);return _.useEffect(()=>{(async()=>{if(console.log("🔍 AdvisorAwareLogo: Checking user data:",{hasUser:!!e,role:e==null?void 0:e.role,advisorCodeEntered:e==null?void 0:e.investment_advisor_code_entered}),e!=null&&e.investment_advisor_code_entered&&((e==null?void 0:e.role)==="Investor"||(e==null?void 0:e.role)==="Startup")){f(!0);try{console.log("🔍 AdvisorAwareLogo: Fetching advisor for code:",e.investment_advisor_code_entered);const g=await Wn.getInvestmentAdvisorByCode(e.investment_advisor_code_entered);console.log("🔍 AdvisorAwareLogo: Advisor data received:",g),u(g)}catch(g){console.error("Error fetching advisor info:",g)}finally{f(!1)}}else console.log("🔍 AdvisorAwareLogo: No advisor code or wrong role, using default logo")})()},[e==null?void 0:e.investment_advisor_code_entered,e==null?void 0:e.role]),l!=null&&l.logo_url?n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx("img",{src:l.logo_url,alt:l.name||"Advisor Logo",className:t,onClick:a,onError:m=>{m.currentTarget.style.display="none";const g=m.currentTarget.nextElementSibling;g&&(g.style.display="block")}}),n.jsx("img",{src:au,alt:r,className:t,onClick:a,style:{display:"none"}}),s&&n.jsxs("div",{children:[n.jsx("h1",{className:i,children:l.name||"Advisor"}),n.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Supported by Track My Startup"})]})]}):n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx("img",{src:au,alt:r,className:t,onClick:a}),s&&n.jsx("h1",{className:i,children:"TrackMyStartup"})]})},P0=({title:e,value:t,icon:r})=>n.jsx(et,{className:"flex-1",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:e}),n.jsx("p",{className:"text-2xl font-bold text-slate-800",children:t})]}),n.jsx("div",{className:"p-3 bg-brand-light rounded-full",children:r})]})}),$Q=({startups:e,newInvestments:t,startupAdditionRequests:r,investmentOffers:a,currentUser:s,onViewStartup:i,onAcceptRequest:l,onMakeOffer:u,onUpdateOffer:d,onCancelOffer:f})=>{const m=Ie=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact"}).format(Ie),g=async Ie=>{console.log("Share button clicked for startup:",Ie.name),console.log("Startup object:",Ie);const _t=Ie.pitchVideoUrl||"Video not available",jt=`Startup: ${Ie.name||"N/A"}
Sector: ${Ie.sector||"N/A"}
Ask: $${(Ie.investmentValue||0).toLocaleString()} for ${Ie.equityAllocation||0}% equity
Valuation: $${(Ie.currentValuation||0).toLocaleString()}

Pitch Video: ${_t}`;console.log("Share details:",jt);try{if(navigator.share){console.log("Using native share API");const Pt={title:Ie.name||"Startup Pitch",text:jt,url:_t!=="Video not available"?_t:void 0};await navigator.share(Pt)}else if(navigator.clipboard&&navigator.clipboard.writeText)console.log("Using clipboard API"),await navigator.clipboard.writeText(jt),alert("Startup details copied to clipboard");else{console.log("Using fallback copy method");const Pt=document.createElement("textarea");Pt.value=jt,document.body.appendChild(Pt),Pt.select(),document.execCommand("copy"),document.body.removeChild(Pt),alert("Startup details copied to clipboard")}}catch(Pt){console.error("Share failed",Pt),alert("Unable to share. Try copying manually.")}},[v,x]=_.useState(!1),[j,b]=_.useState(null),[S,A]=_.useState("dashboard"),[E,T]=_.useState([]),[D,R]=_.useState([]),[B,U]=_.useState([]),[I,F]=_.useState(null),[pe,L]=_.useState(new Set),[q,z]=_.useState(!1),[V,de]=_.useState(!1),[se,fe]=_.useState(!1),[oe,Se]=_.useState(""),[Y,ye]=_.useState(!1),[P,K]=_.useState(null),[le,ee]=_.useState(""),[me,ke]=_.useState(""),[Ae,xe]=_.useState(!1),[De,ve]=_.useState(null),[Z,te]=_.useState(!1),[re,$]=_.useState(new Set),ne=()=>{window.location.href="/logout"},W=Ie=>{$(_t=>{const jt=new Set(_t);return jt.has(Ie)?jt.delete(Ie):jt.add(Ie),jt})};_.useEffect(()=>{(async()=>{fe(!0);try{const _t=await xi.getActiveFundraisingStartups();T(_t)}catch(_t){console.error("Error fetching active fundraising startups:",_t)}finally{fe(!1)}})()},[]),_.useEffect(()=>{(async()=>{if(s!=null&&s.id)try{const _t=await Wn.getRecommendedCoInvestmentOpportunities(s.id);R(_t)}catch(_t){console.error("Error loading recommended opportunities:",_t)}})()},[s==null?void 0:s.id]),_.useEffect(()=>{if(S==="reels"&&E.length>0){const Ie=E.filter(at=>at.complianceStatus===Ct.Compliant),_t=E.filter(at=>at.complianceStatus!==Ct.Compliant),jt=at=>{const rt=[...at];for(let Tt=rt.length-1;Tt>0;Tt--){const Te=Math.floor(Math.random()*(Tt+1));[rt[Tt],rt[Te]]=[rt[Te],rt[Tt]]}return rt},Pt=jt(Ie),Rt=jt(_t),rr=[];let Ke=0,Re=0;for(;Ke<Pt.length||Re<Rt.length;)Ke<Pt.length&&rr.push(Pt[Ke++]),Ke<Pt.length&&rr.push(Pt[Ke++]),Re<Rt.length&&rr.push(Rt[Re++]);U(rr)}},[E,S]);const be=e.reduce((Ie,_t)=>Ie+_t.totalFunding,0),Ce=e.reduce((Ie,_t)=>Ie+_t.totalRevenue,0),ze=e.filter(Ie=>Ie.complianceStatus===Ct.Compliant).length,Pe=e.length>0?ze/e.length*100:0,we=Ie=>{b(Ie),x(!0)},ae=Ie=>{if(Ie.preventDefault(),!j)return;const _t=Ie.currentTarget,jt=_t.elements.namedItem("offer-amount"),Pt=_t.elements.namedItem("offer-equity"),Rt=_t.elements.namedItem("country"),rr=Number(jt.value),Ke=Number(Pt.value),Re=Rt.value,at={id:j.id,name:j.name,investmentType:j.investmentType||"Seed",investmentValue:j.investmentValue,equityAllocation:j.equityAllocation,sector:j.sector,totalFunding:j.totalFunding||0,totalRevenue:j.totalRevenue||0,registrationDate:j.registrationDate||new Date().toISOString().split("T")[0],complianceStatus:j.complianceStatus,pitchDeckUrl:j.pitchDeckUrl,pitchVideoUrl:j.pitchVideoUrl};u(at,rr,Ke,Re,j.totalFunding||0),A("offers"),x(!1),b(null)},qe=Ie=>{L(_t=>{const jt=new Set(_t);return jt.has(Ie)?jt.delete(Ie):jt.add(Ie),jt})},ft=async Ie=>{if(!(s!=null&&s.id)){alert("Please log in to conduct due diligence");return}try{const _t=await zc.createDueDiligenceRequest(s.id,Ie.id.toString()),jt=await zc.createPaymentIntent(150,"EUR",s.id,"due-diligence");await zc.processDueDiligencePayment(_t.id,jt.id),alert("Due diligence payment successful! You now have access to detailed startup information.")}catch(_t){console.error("Error processing due diligence payment:",_t),alert("Failed to process due diligence payment. Please try again.")}},Et=Ie=>{K(Ie),ee(Ie.offerAmount.toString()),ke(Ie.equityPercentage.toString()),ye(!0)},Bt=()=>{if(!P||!d)return;const Ie=Number(le),_t=Number(me);if(isNaN(Ie)||isNaN(_t)||Ie<=0||_t<=0){alert("Please enter valid amounts");return}d(P.id,Ie,_t),ye(!1),K(null)},vt=Ie=>{f&&confirm("Are you sure you want to cancel this offer?")&&f(Ie)},ht=Ie=>{switch(Ie){case"pending":return n.jsx(Ux,{className:"h-4 w-4 text-yellow-500"});case"approved":return n.jsx(yJ,{className:"h-4 w-4 text-green-500"});case"rejected":return n.jsx(Ql,{className:"h-4 w-4 text-red-500"});default:return n.jsx(Ux,{className:"h-4 w-4 text-gray-500"})}},Dt=Ie=>{switch(Ie){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"pending_investor_advisor_approval":return"bg-blue-100 text-blue-800";case"pending_startup_advisor_approval":return"bg-purple-100 text-purple-800";case"investor_advisor_approved":return"bg-green-100 text-green-800";case"startup_advisor_approved":return"bg-green-100 text-green-800";case"investor_advisor_rejected":return"bg-red-100 text-red-800";case"startup_advisor_rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return Z?(console.log("🔍 InvestorView: Rendering ProfilePage, showProfilePage =",Z),n.jsx(cg,{currentUser:s,onBack:()=>{console.log("🔍 InvestorView: Back button clicked, setting showProfilePage to false"),te(!1)},onProfileUpdate:Ie=>{console.log("Profile updated in InvestorView:",Ie)},onLogout:ne})):n.jsxs("div",{className:"space-y-6",children:[n.jsx(et,{className:"bg-white border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between py-6 px-6",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"relative profile-menu",children:n.jsx("button",{onClick:()=>{console.log("🔍 InvestorView: Menu button clicked, setting showProfilePage to true"),te(!0)},className:"p-2 rounded-full hover:bg-slate-100 transition-colors","aria-label":"Profile menu",children:n.jsx(Ov,{className:"h-6 w-6 text-slate-600"})})}),n.jsx("div",{children:n.jsx(UQ,{currentUser:s,showText:!0,textClassName:"text-xl font-semibold text-gray-800"})})]}),n.jsxs("div",{className:"flex items-center space-x-6",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Investor Code:"}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsx("span",{className:"px-3 py-2 bg-blue-100 text-blue-800 rounded-lg font-mono text-sm font-semibold",children:(s==null?void 0:s.investor_code)||(s==null?void 0:s.investorCode)||"INV-XXXXXX"})})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ps,{className:"h-6 w-6 text-purple-600"}),n.jsx("span",{className:"text-gray-700 font-medium",children:"Investor"})]})]})]})}),n.jsx("div",{className:"border-b border-slate-200",children:n.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[n.jsxs("button",{onClick:()=>A("dashboard"),className:`${S==="dashboard"?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:[n.jsx(V_,{className:"h-5 w-5"}),"Dashboard"]}),n.jsxs("button",{onClick:()=>A("reels"),className:`${S==="reels"?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:[n.jsx(Wl,{className:"h-5 w-5"}),"Discover Pitches"]}),n.jsxs("button",{onClick:()=>A("offers"),className:`${S==="offers"?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:[n.jsx(No,{className:"h-5 w-5"}),"Offers"]}),n.jsxs("button",{onClick:()=>A("recommendations"),className:`${S==="recommendations"?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:[n.jsx(F1,{className:"h-5 w-5"}),"Recommendations"]})]})}),S==="dashboard"&&n.jsxs("div",{className:"space-y-8 animate-fade-in",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx(P0,{title:"Total Funding",value:m(be),icon:n.jsx(No,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(P0,{title:"Total Revenue",value:m(Ce),icon:n.jsx(md,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(P0,{title:"Compliance Rate",value:`${Pe.toFixed(1)}%`,icon:n.jsx(wQ,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(P0,{title:"My Startups",value:`${e.length}`,icon:n.jsx(Ps,{className:"h-6 w-6 text-brand-primary"})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Approve Startup Requests"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Startup Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Value"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Equity"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status / Action"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-slate-200",children:[r.filter(Ie=>{const _t=Ie==null?void 0:Ie.investor_code,jt=(s==null?void 0:s.investorCode)||(s==null?void 0:s.investor_code);return(Ie.status||"pending")==="pending"&&_t&&_t===jt}).map(Ie=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:Ie.name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:m(Ie.investmentValue)}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:[Ie.equityAllocation,"%"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs(Oe,{size:"sm",onClick:()=>l(Ie.id),children:[n.jsx(w8,{className:"mr-2 h-4 w-4"})," Approve"]})})]},Ie.id)),r.filter(Ie=>{const _t=Ie==null?void 0:Ie.investor_code,jt=(s==null?void 0:s.investorCode)||(s==null?void 0:s.investor_code);return(Ie.status||"pending")==="pending"&&_t&&_t===jt}).length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"text-center py-8 text-slate-500",children:"No pending startup requests."})})]})]})})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"My Startups"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Startup Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Current Valuation"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Compliance Status"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:e.map(Ie=>n.jsxs("tr",{children:[n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsx("div",{className:"text-sm font-medium text-slate-900",children:Ie.name}),n.jsx("div",{className:"text-xs text-slate-500",children:Ie.sector})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:m(Ie.currentValuation)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx(Yx,{status:Ie.complianceStatus})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>i(Ie),children:[n.jsx(ru,{className:"mr-2 h-4 w-4"})," View"]}),n.jsx("button",{onClick:()=>W(Ie.id),className:`px-3 py-1 rounded-full text-xs font-medium transition-colors duration-200 ${re.has(Ie.id)?"bg-green-100 text-green-800 hover:bg-green-200":"bg-blue-100 text-blue-800 hover:bg-blue-200"}`,children:re.has(Ie.id)?"Co-investment Listed":"Seek Co-Investors"})]})})]},Ie.id))})]})})]})]}),n.jsx("div",{className:"space-y-8",children:n.jsx(y8,{data:e})})]})]}),S==="reels"&&n.jsxs("div",{className:"animate-fade-in max-w-4xl mx-auto w-full",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-slate-800 mb-2",children:"Discover Pitches"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Watch startup videos and explore opportunities"})]}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx(hd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search startups by name or sector...",value:oe,onChange:Ie=>Se(Ie.target.value),className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary text-sm"})]})}),n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl border border-blue-100 gap-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("button",{onClick:()=>{de(!1),z(!1)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${!V&&!q?"bg-blue-600 text-white shadow-blue-200":"bg-white text-slate-600 hover:bg-blue-50 hover:text-blue-600 border border-slate-200"}`,children:[n.jsx(Wl,{className:"h-3 w-3 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"All"})]}),n.jsxs("button",{onClick:()=>{de(!0),z(!1)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${V&&!q?"bg-green-600 text-white shadow-green-200":"bg-white text-slate-600 hover:bg-green-50 hover:text-green-600 border border-slate-200"}`,children:[n.jsx(ua,{className:`h-3 w-3 sm:h-4 sm:w-4 ${V&&!q?"fill-current":""}`}),n.jsx("span",{className:"hidden sm:inline",children:"Verified"})]}),n.jsxs("button",{onClick:()=>{de(!1),z(!0)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${q?"bg-red-600 text-white shadow-red-200":"bg-white text-slate-600 hover:bg-red-50 hover:text-red-600 border border-slate-200"}`,children:[n.jsx(tm,{className:`h-3 w-3 sm:h-4 sm:w-4 ${q?"fill-current":""}`}),n.jsx("span",{className:"hidden sm:inline",children:"Favorites"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.jsxs("span",{className:"text-xs sm:text-sm font-medium",children:[E.length," active pitches"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[n.jsx(Wl,{className:"h-4 w-4 sm:h-5 sm:w-5"}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Pitch Reels"})]})]})]}),n.jsx("div",{className:"space-y-8",children:se?n.jsx(et,{className:"text-center py-20",children:n.jsxs("div",{className:"max-w-sm mx-auto",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-2",children:"Loading Pitches..."}),n.jsx("p",{className:"text-slate-500",children:"Fetching active fundraising startups"})]})}):(()=>{let _t=S==="reels"?B:E;if(oe.trim()&&(_t=_t.filter(jt=>jt.name.toLowerCase().includes(oe.toLowerCase())||jt.sector.toLowerCase().includes(oe.toLowerCase()))),V&&(_t=_t.filter(jt=>jt.isStartupNationValidated)),q&&(_t=_t.filter(jt=>pe.has(jt.id))),_t.length===0){const jt=B.every(Pt=>a.some(Rt=>Rt.startupName===Pt.name&&Rt.status==="pending"));return n.jsx(et,{className:"text-center py-20",children:n.jsxs("div",{className:"max-w-sm mx-auto",children:[n.jsx(Wl,{className:"h-16 w-16 text-slate-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-2",children:oe.trim()?"No Matching Startups":V?"No Verified Startups":q?"No Favorited Pitches":jt?"All Offers Submitted!":"No Active Fundraising"}),n.jsx("p",{className:"text-slate-500",children:oe.trim()?"No startups found matching your search. Try adjusting your search terms or filters.":V?"No Startup Nation verified startups are currently fundraising. Try removing the verification filter or check back later.":q?"Start favoriting pitches to see them here.":jt?"You've submitted offers for all available startups. Check your Dashboard → Recent Activity to manage your offers.":"No startups are currently fundraising. Check back later for new opportunities."}),jt&&n.jsx(Oe,{onClick:()=>A("dashboard"),className:"mt-4",children:"Go to Dashboard"})]})})}return _t.map(jt=>{const Pt=xi.getYoutubeEmbedUrl(jt.pitchVideoUrl);return n.jsxs(et,{className:"!p-0 overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border-0 bg-white",children:[n.jsx("div",{className:"relative w-full aspect-[16/9] bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:Pt?I===jt.id?n.jsxs("div",{className:"relative w-full h-full",children:[n.jsx("iframe",{src:Pt,title:`Pitch video for ${jt.name}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full"}),n.jsx("button",{onClick:()=>F(null),className:"absolute top-4 right-4 bg-black/70 text-white rounded-full p-2 hover:bg-black/90 transition-all duration-200 backdrop-blur-sm",children:"×"})]}):n.jsxs("div",{className:"relative w-full h-full group cursor-pointer",onClick:()=>F(jt.id),children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/40"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"w-20 h-20 bg-red-600 rounded-full flex items-center justify-center shadow-2xl transform group-hover:scale-110 transition-all duration-300 group-hover:shadow-red-500/50",children:n.jsx("svg",{className:"w-10 h-10 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M8 5v14l11-7z"})})})}),n.jsx("div",{className:"absolute bottom-4 left-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:n.jsx("p",{className:"text-sm font-medium",children:"Click to play"})})]}):n.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:n.jsxs("div",{className:"text-center",children:[n.jsx(od,{className:"h-16 w-16 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No video available"})]})})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:jt.name}),n.jsx("p",{className:"text-slate-600 font-medium",children:jt.sector})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[jt.isStartupNationValidated&&n.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-3 py-1.5 rounded-full text-xs font-medium shadow-sm",children:[n.jsx(ua,{className:"h-3 w-3"}),"Verified"]}),a.find(rr=>rr.startupName===jt.name&&rr.status==="pending")?n.jsxs("div",{className:"flex items-center gap-1 bg-blue-100 text-blue-700 px-2 py-1 rounded-full text-xs font-medium",children:[n.jsx(ua,{className:"h-3 w-3"}),"Offer Submitted"]}):null]})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[n.jsx(Oe,{size:"sm",variant:"secondary",className:`!rounded-full !p-3 transition-all duration-200 ${pe.has(jt.id)?"bg-gradient-to-r from-red-500 to-pink-600 text-white shadow-lg shadow-red-200":"hover:bg-red-50 hover:text-red-600 border border-slate-200"}`,onClick:()=>qe(jt.id),children:n.jsx(tm,{className:`h-5 w-5 ${pe.has(jt.id)?"fill-current":""}`})}),n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>g(jt),className:"!rounded-full !p-3 hover:bg-blue-50 hover:text-blue-600 hover:border-blue-300 transition-all duration-200 border border-slate-200",children:n.jsx(Rv,{className:"h-5 w-5"})}),jt.pitchDeckUrl&&jt.pitchDeckUrl!=="#"&&n.jsx("a",{href:jt.pitchDeckUrl,target:"_blank",rel:"noopener noreferrer",className:"flex-1",children:n.jsxs(Oe,{size:"sm",variant:"secondary",className:"w-full hover:bg-blue-50 hover:text-blue-600 transition-all duration-200 border border-slate-200",children:[n.jsx(vn,{className:"h-4 w-4 mr-2"})," View Deck"]})}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>ft(jt),className:"flex-1 hover:bg-purple-50 hover:text-purple-600 hover:border-purple-300 transition-all duration-200 border border-slate-200",children:[n.jsx(hd,{className:"h-4 w-4 mr-2"})," Due Diligence (€150)"]}),a.find(rr=>rr.startupName===jt.name&&rr.status==="pending")?n.jsxs("div",{className:"flex-1",children:[n.jsxs(Oe,{size:"sm",variant:"secondary",disabled:!0,className:"w-full bg-slate-100 text-slate-500 cursor-not-allowed border border-slate-200",title:"View and edit your offer in the Dashboard → Recent Activity",children:[n.jsx(ua,{className:"h-4 w-4 mr-2"})," Offer Submitted"]}),n.jsx("div",{className:"text-xs text-slate-400 mt-1 text-center",children:"Edit in Dashboard"})]}):n.jsxs(Oe,{size:"sm",variant:"primary",onClick:()=>we(jt),className:"flex-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-lg shadow-blue-200",children:[n.jsx(No,{className:"h-4 w-4 mr-2"})," Make Offer"]})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-blue-50 px-6 py-4 flex justify-between items-center border-t border-slate-200",children:[n.jsxs("div",{className:"text-base",children:[n.jsx("span",{className:"font-semibold text-slate-800",children:"Ask:"})," ",xi.formatCurrency(jt.investmentValue)," for ",n.jsxs("span",{className:"font-semibold text-blue-600",children:[jt.equityAllocation,"%"]})," equity"]}),jt.complianceStatus===Ct.Compliant&&n.jsxs("div",{className:"flex items-center gap-1 text-green-600",title:"This startup has been verified by Startup Nation",children:[n.jsx(ua,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs font-semibold",children:"Verified"})]})]})]},jt.id)})})()})]}),S==="offers"&&n.jsx("div",{className:"space-y-6 animate-fade-in",children:n.jsxs(et,{children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-700 flex items-center gap-2",children:[n.jsx(No,{className:"h-5 w-5 text-blue-600"}),"Your Offers",n.jsxs("span",{className:"text-sm font-normal text-slate-500",children:["(",a.length," total)"]})]}),n.jsx("div",{className:"space-y-4",children:a.length>0?a.map(Ie=>n.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[ht(Ie.status),n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium text-slate-900 truncate",children:["Offer for ",Ie.startupName]}),n.jsxs("div",{className:"text-sm text-slate-500",children:[m(Ie.offerAmount)," • ",Ie.equityPercentage,"% equity"]}),n.jsxs("div",{className:"text-xs text-slate-400",children:["Submitted on ",new Date(Ie.createdAt).toLocaleDateString()]}),Ie.status==="approved"&&n.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"Admin approved; awaiting startup approval"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Dt(Ie.status)}`,children:Ie.status.replace(/_/g," ").replace(/\b\w/g,_t=>_t.toUpperCase())}),Ie.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>Et(Ie),children:[n.jsx(Gl,{className:"h-3 w-3 mr-1"}),"Edit"]}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>vt(Ie.id),children:[n.jsx(Ql,{className:"h-3 w-3 mr-1"}),"Cancel"]})]}),(Ie.status==="accepted"||Ie.status==="completed")&&n.jsxs("div",{className:"flex gap-2",children:[Ie.contact_details_revealed?n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>{alert("Contact details: [Startup contact information will be displayed here]")},children:"View Contact Details"}):n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>alert("Contact details will be revealed once the investment advisor approves or if no advisor is assigned."),children:"Contact Details Pending"}),n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>alert("Our team will contact you soon"),children:"Next Steps"})]})]})]}),(()=>{const _t=E.find(Rt=>Ie.startup&&Rt.id===Ie.startup.id||Rt.name===Ie.startupName),jt=_t==null?void 0:_t.pitchDeckUrl,Pt=xi.getYoutubeEmbedUrl(_t==null?void 0:_t.pitchVideoUrl);return!jt&&!Pt?null:n.jsxs("div",{className:"mt-3 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[jt&&jt!=="#"&&n.jsx("a",{href:jt,target:"_blank",rel:"noopener noreferrer",children:n.jsxs(Oe,{size:"sm",variant:"secondary",children:[n.jsx(vn,{className:"h-4 w-4 mr-2"})," View Deck"]})}),Pt&&n.jsxs(Oe,{size:"sm",variant:"secondary",onClick:()=>ve(De===Ie.id?null:Ie.id),children:[n.jsx(od,{className:"h-4 w-4 mr-2"})," ",De===Ie.id?"Hide Video":"Watch Video"]})]}),Pt&&De===Ie.id&&n.jsx("div",{className:"relative w-full aspect-[16/9] rounded-lg overflow-hidden bg-black/5",children:n.jsx("iframe",{src:Pt,title:`Pitch video for ${Ie.startupName}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full"})})]})})()]},Ie.id)):n.jsx("div",{className:"text-sm text-slate-500 text-center py-10",children:"You have not submitted any offers yet."})})]})}),S==="recommendations"&&n.jsxs("div",{className:"space-y-6 animate-fade-in",children:[n.jsxs(et,{children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-700 flex items-center gap-2",children:[n.jsx(F1,{className:"h-5 w-5 text-purple-600"}),"Recommended Startups",n.jsx("span",{className:"text-sm font-normal text-slate-500",children:"(Recommended by your Investment Advisor)"})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx(F1,{className:"h-16 w-16 text-slate-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"No Recommendations Yet"}),n.jsx("p",{className:"text-slate-500",children:"When your Investment Advisor recommends startups to you, they will appear here."})]})})]}),n.jsxs(et,{children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-700 flex items-center gap-2",children:[n.jsx("svg",{className:"h-5 w-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Co-Investment Opportunities",n.jsx("span",{className:"text-sm font-normal text-slate-500",children:s!=null&&s.investment_advisor_code?"(Approved by your Investment Advisor)":"(All available opportunities)"})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Startup Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Sector"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Investment Amount"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Recommended By"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Date Recommended"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:D.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-slate-500",children:"No co-investment opportunities available yet"})}):D.map(Ie=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:Ie.startup_name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:Ie.sector}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:Ie.compliance_status}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:m(Ie.investment_amount)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:Ie.advisor_name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(Ie.recommended_at).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{alert("Due diligence request functionality coming soon!")},className:"px-3 py-1 text-xs bg-blue-100 text-blue-800 rounded-full hover:bg-blue-200",children:"Due Diligence"}),n.jsx("button",{onClick:()=>{b({id:Ie.opportunity_id,name:Ie.startup_name,investmentValue:Ie.investment_amount,equityAllocation:Ie.equity_percentage,totalFunding:Ie.investment_amount}),x(!0)},className:"px-3 py-1 text-xs bg-green-100 text-green-800 rounded-full hover:bg-green-200",children:"Make Offer"})]})})]},Ie.recommendation_id))})]})})]})]}),n.jsx(Yn,{isOpen:v,onClose:()=>x(!1),title:`Make an Offer for ${j==null?void 0:j.name}`,children:n.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:["You are making an offer for ",n.jsx("span",{className:"font-semibold",children:j==null?void 0:j.name}),". The current ask is ",n.jsx("span",{className:"font-semibold",children:xi.formatCurrency((j==null?void 0:j.investmentValue)||0)})," for ",n.jsxs("span",{className:"font-semibold",children:[j==null?void 0:j.equityAllocation,"%"]})," equity."]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ot,{label:"Your Investment Offer (USD)",id:"offer-amount",name:"offer-amount",type:"number",required:!0}),n.jsx(Ot,{label:"Equity Requested (%)",id:"offer-equity",name:"offer-equity",type:"number",step:"0.1",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-slate-700 mb-1",children:"Country"}),n.jsxs("select",{id:"country",name:"country",required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"Select Country"}),n.jsx("option",{value:"United States",children:"United States"}),n.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),n.jsx("option",{value:"India",children:"India"}),n.jsx("option",{value:"Canada",children:"Canada"}),n.jsx("option",{value:"Australia",children:"Australia"}),n.jsx("option",{value:"Germany",children:"Germany"}),n.jsx("option",{value:"France",children:"France"}),n.jsx("option",{value:"Singapore",children:"Singapore"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Scouting Fee Information"}),n.jsx("p",{className:"text-xs text-blue-700",children:"When you submit this offer, you will be required to pay a startup scouting fee based on your country and the startup's funding amount. The fee will be calculated automatically and displayed before payment confirmation."})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[n.jsx(Oe,{type:"button",variant:"secondary",onClick:()=>x(!1),children:"Cancel"}),n.jsx(Oe,{type:"submit",children:"Submit Offer & Pay Scouting Fee"})]})]})}),n.jsx(Yn,{isOpen:Y,onClose:()=>ye(!1),title:`Edit Offer for ${P==null?void 0:P.startupName}`,children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:["Update your offer for ",n.jsx("span",{className:"font-semibold",children:P==null?void 0:P.startupName}),"."]}),n.jsx(Ot,{label:"Your Investment Offer (USD)",id:"edit-offer-amount",name:"edit-offer-amount",type:"number",value:le,onChange:Ie=>ee(Ie.target.value),required:!0}),n.jsx(Ot,{label:"Equity Requested (%)",id:"edit-offer-equity",name:"edit-offer-equity",type:"number",step:"0.1",value:me,onChange:Ie=>ke(Ie.target.value),required:!0}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[n.jsx(Oe,{type:"button",variant:"secondary",onClick:()=>ye(!1),children:"Cancel"}),n.jsx(Oe,{onClick:Bt,children:"Update Offer"})]})]})}),n.jsx("style",{children:`
            @keyframes fade-in {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            .animate-fade-in {
                animation: fade-in 0.5s ease-in-out forwards;
            }
            /* Custom scrollbar for webkit browsers */
            .snap-y {
                scrollbar-width: none; /* For Firefox */
            }
            .snap-y::-webkit-scrollbar {
                display: none; /* For Chrome, Safari, and Opera */
            }
        `})]})};function U6(e){if(!e)return{isValid:!1,error:"Investment date is required"};const t=new Date(e),r=new Date;if(r.setHours(23,59,59,999),isNaN(t.getTime()))return{isValid:!1,error:"Invalid date format"};if(t>r)return{isValid:!1,error:"Investment date cannot be in the future"};const a=new Date;return a.setFullYear(r.getFullYear()-50),t<a?{isValid:!1,error:"Investment date cannot be more than 50 years in the past"}:{isValid:!0}}function $6(e){if(!e)return{isValid:!1,error:"Financial record date is required"};const t=new Date(e),r=new Date;if(r.setHours(23,59,59,999),isNaN(t.getTime()))return{isValid:!1,error:"Invalid date format"};if(t>r)return{isValid:!1,error:"Financial record date cannot be in the future"};const a=new Date;return a.setFullYear(r.getFullYear()-50),t<a?{isValid:!1,error:"Financial record date cannot be more than 50 years in the past"}:{isValid:!0}}function zQ(e){if(!e)return{isValid:!1,error:"Valuation date is required"};const t=new Date(e),r=new Date;if(r.setHours(23,59,59,999),isNaN(t.getTime()))return{isValid:!1,error:"Invalid date format"};if(t>r)return{isValid:!1,error:"Valuation date cannot be in the future"};const a=new Date;return a.setFullYear(r.getFullYear()-50),t<a?{isValid:!1,error:"Valuation date cannot be more than 50 years in the past"}:{isValid:!0}}function z6(e){if(!e)return{isValid:!1,error:"Joining date is required"};const t=new Date(e),r=new Date;if(r.setHours(23,59,59,999),isNaN(t.getTime()))return{isValid:!1,error:"Invalid date format"};if(t>r)return{isValid:!1,error:"Joining date cannot be in the future"};const a=new Date;return a.setFullYear(r.getFullYear()-50),t<a?{isValid:!1,error:"Joining date cannot be more than 50 years in the past"}:{isValid:!0}}function V6(){return new Date().toISOString().split("T")[0]}class VQ{async addFinancialRecord(t){const r=$6(t.date);if(!r.isValid)throw new Error(r.error);const{data:a,error:s}=await G.from("financial_records").insert({startup_id:t.startup_id,record_type:t.record_type,date:t.date,entity:t.entity,description:t.description,vertical:t.vertical,amount:t.amount,funding_source:t.funding_source,cogs:t.cogs,attachment_url:t.attachment_url}).select().single();if(s)throw s;return a}async updateFinancialRecord(t,r){if(r.date!==void 0){const i=$6(r.date);if(!i.isValid)throw new Error(i.error)}const{data:a,error:s}=await G.from("financial_records").update(r).eq("id",t).select().single();if(s)throw s;return a}async deleteFinancialRecord(t){try{const r=await this.getFinancialRecord(t);if(r&&r.attachment_url){const s=r.attachment_url.split("/"),i=s[s.length-1],u=`${r.startup_id.toString()}/${i}`,{storageService:d}=await So(async()=>{const{storageService:f}=await Promise.resolve().then(()=>BQ);return{storageService:f}},void 0);await d.deleteFile("financial-documents",u),console.log("🗑️ Deleted attachment file:",u)}const{error:a}=await G.from("financial_records").delete().eq("id",t);if(a)throw a;console.log("🗑️ Deleted financial record:",t)}catch(r){throw console.error("Error deleting financial record:",r),r}}async getFinancialRecord(t){const{data:r,error:a}=await G.from("financial_records").select("*").eq("id",t).single();if(a&&a.code!=="PGRST116")throw a;return r}async getFinancialRecords(t,r){let a=G.from("financial_records").select("*").eq("startup_id",t).order("date",{ascending:!1});r!=null&&r.entity&&r.entity!=="all"&&(a=a.eq("entity",r.entity)),r!=null&&r.year&&r.year!=="all"&&(a=a.gte("date",`${r.year}-01-01`).lt("date",`${r.year+1}-01-01`)),r!=null&&r.record_type&&(a=a.eq("record_type",r.record_type));const{data:s,error:i}=await a;if(i)throw i;return s||[]}async getExpenses(t,r){return(await this.getFinancialRecords(t,{...r,record_type:"expense"})).map(s=>({id:s.id,date:s.date,entity:s.entity,description:s.description||"",vertical:s.vertical,amount:s.amount,fundingSource:s.funding_source||"",attachmentUrl:s.attachment_url}))}async getRevenues(t,r){return(await this.getFinancialRecords(t,{...r,record_type:"revenue"})).map(s=>({id:s.id,date:s.date,entity:s.entity,vertical:s.vertical,earnings:s.amount,cogs:s.cogs||0,attachmentUrl:s.attachment_url}))}async getMonthlyFinancialData(t,r){try{const{data:a,error:s}=await G.rpc("get_monthly_financial_data",{p_startup_id:t,p_year:r});return s?(console.error("Error calling get_monthly_financial_data:",s),this.calculateMonthlyDataManually(t,r)):(a||[]).map(i=>({month_name:i.month_name,revenue:parseFloat(i.revenue||"0"),expenses:parseFloat(i.expenses||"0")}))}catch(a){return console.error("Error in getMonthlyFinancialData:",a),this.calculateMonthlyDataManually(t,r)}}async getRevenueByVertical(t,r){try{const{data:a,error:s}=await G.rpc("get_revenue_by_vertical",{p_startup_id:t,p_year:r});return s?(console.error("Error calling get_revenue_by_vertical:",s),this.calculateRevenueByVerticalManually(t,r)):(a||[]).map(i=>({name:i.vertical_name,value:parseFloat(i.total_revenue||"0")}))}catch(a){return console.error("Error in getRevenueByVertical:",a),this.calculateRevenueByVerticalManually(t,r)}}async getExpensesByVertical(t,r){try{const{data:a,error:s}=await G.rpc("get_expenses_by_vertical",{p_startup_id:t,p_year:r});return s?(console.error("Error calling get_expenses_by_vertical:",s),this.calculateExpensesByVerticalManually(t,r)):(a||[]).map(i=>({name:i.vertical_name,value:parseFloat(i.total_expenses||"0")}))}catch(a){return console.error("Error in getExpensesByVertical:",a),this.calculateExpensesByVerticalManually(t,r)}}async getFinancialSummary(t){try{const{data:r,error:a}=await G.rpc("get_startup_financial_summary",{p_startup_id:t});if(a)return console.error("Error calling get_startup_financial_summary:",a),this.calculateFinancialSummaryManually(t);const s=r==null?void 0:r[0];return{total_funding:parseFloat((s==null?void 0:s.total_funding)||"0"),total_revenue:parseFloat((s==null?void 0:s.total_revenue)||"0"),total_expenses:parseFloat((s==null?void 0:s.total_expenses)||"0"),available_funds:parseFloat((s==null?void 0:s.available_funds)||"0")}}catch(r){return console.error("Error in getFinancialSummary:",r),this.calculateFinancialSummaryManually(t)}}async calculateMonthlyDataManually(t,r){const a=await this.getFinancialRecords(t,{year:r}),s={};for(let i=1;i<=12;i++){const l=new Date(r,i-1,1).toLocaleDateString("en-US",{month:"short"});s[l]={revenue:0,expenses:0}}return a.forEach(i=>{const l=new Date(i.date).toLocaleDateString("en-US",{month:"short"});i.record_type==="revenue"?s[l].revenue+=i.amount:s[l].expenses+=i.amount}),Object.entries(s).map(([i,l])=>({month_name:i,revenue:l.revenue,expenses:l.expenses}))}async calculateRevenueByVerticalManually(t,r){const a=await this.getFinancialRecords(t,{year:r,record_type:"revenue"}),s={};return a.forEach(i=>{s[i.vertical]=(s[i.vertical]||0)+i.amount}),Object.entries(s).map(([i,l])=>({name:i,value:l})).sort((i,l)=>l.value-i.value)}async calculateExpensesByVerticalManually(t,r){const a=await this.getFinancialRecords(t,{year:r,record_type:"expense"}),s={};return a.forEach(i=>{s[i.vertical]=(s[i.vertical]||0)+i.amount}),Object.entries(s).map(([i,l])=>({name:i,value:l})).sort((i,l)=>l.value-i.value)}async calculateFinancialSummaryManually(t){const r=await this.getFinancialRecords(t);let a=0,s=0;r.forEach(d=>{d.record_type==="revenue"?a+=d.amount:s+=d.amount});const{data:i}=await G.from("startups").select("total_funding").eq("id",t).single(),l=(i==null?void 0:i.total_funding)||0,u=l-s;return{total_funding:l,total_revenue:a,total_expenses:s,available_funds:u}}async getEntities(t){const{data:r,error:a}=await G.from("financial_records").select("entity").eq("startup_id",t).order("entity");if(a)throw a;return[...new Set((r==null?void 0:r.map(s=>s.entity))||[])]}async getVerticals(t){const{data:r,error:a}=await G.from("financial_records").select("vertical").eq("startup_id",t).order("vertical");if(a)throw a;return[...new Set((r==null?void 0:r.map(s=>s.vertical))||[])]}async getAvailableYears(t){const{data:r,error:a}=await G.from("financial_records").select("date").eq("startup_id",t);if(a)throw a;const s=(r==null?void 0:r.map(l=>new Date(l.date).getFullYear()))||[],i=[...new Set(s)].sort((l,u)=>u-l);return i.length===0?["all",new Date().getFullYear()]:["all",...i]}async uploadAttachment(t,r){const a=`${r}/${Date.now()}_${t.name}`,{data:s,error:i}=await G.storage.from("financial-attachments").upload(a,t);if(i)throw i;const{data:l}=G.storage.from("financial-attachments").getPublicUrl(a);return l.publicUrl}async deleteAttachment(t){const r=t.split("/").slice(-2).join("/"),{error:a}=await G.storage.from("financial-attachments").remove([r]);if(a)throw a}async getAttachmentDownloadUrl(t){try{if(t&&t.startsWith("http"))return t;if(t&&!t.startsWith("http")){const{data:r}=G.storage.from("financial-attachments").getPublicUrl(t);return r.publicUrl}throw new Error("Invalid attachment URL")}catch(r){throw console.error("Error generating download URL:",r),r}}extractFilePathFromUrl(t){try{if(t.includes("supabase.co/storage/v1/object/public/")){const r=t.split("/"),a=r.findIndex(s=>s==="financial-attachments");if(a!==-1&&a+1<r.length)return r.slice(a+1).join("/")}return t.startsWith("http")?null:t}catch(r){return console.error("Error extracting file path:",r),null}}}const os=new VQ;class HQ{async getInvestmentRecords(t,r){let a=G.from("investment_records").select("*").eq("startup_id",t).order("date",{ascending:!1});r!=null&&r.investorType&&(a=a.eq("investor_type",r.investorType)),r!=null&&r.investmentType&&(a=a.eq("investment_type",r.investmentType)),r!=null&&r.dateFrom&&(a=a.gte("date",r.dateFrom)),r!=null&&r.dateTo&&(a=a.lte("date",r.dateTo));const{data:s,error:i}=await a;if(i)throw i;return(s||[]).map(l=>({id:l.id,date:l.date,investorType:l.investor_type,investmentType:l.investment_type,investorName:l.investor_name,investorCode:l.investor_code,amount:l.amount,equityAllocated:l.equity_allocated,shares:l.shares,pricePerShare:l.price_per_share,preMoneyValuation:l.pre_money_valuation,postMoneyValuation:l.post_money_valuation,proofUrl:l.proof_url}))}async getTotalShares(t){const{data:r,error:a}=await G.from("startup_shares").select("total_shares").eq("startup_id",t).single();if(a&&a.code!=="PGRST116")throw a;return(r==null?void 0:r.total_shares)??0}async getStartupSharesData(t){const{data:r,error:a}=await G.from("startup_shares").select("total_shares, esop_reserved_shares, price_per_share").eq("startup_id",t).single();if(a&&a.code!=="PGRST116")throw console.error("❌ Error loading startup shares data:",a),a;const s={totalShares:(r==null?void 0:r.total_shares)??0,esopReservedShares:(r==null?void 0:r.esop_reserved_shares)??0,pricePerShare:(r==null?void 0:r.price_per_share)??0};return console.log("🔍 Shares data loaded from startup_shares table:",s),s}async upsertTotalShares(t,r,a){if(r<0||!Number.isFinite(r))throw new Error("Total shares must be a non-negative number");const{data:s,error:i}=await G.from("startup_shares").upsert({startup_id:t,total_shares:r,price_per_share:a??null,updated_at:new Date().toISOString()},{onConflict:"startup_id"}).select("total_shares").single();if(i)throw i;return s.total_shares??r}async getPricePerShare(t){const{data:r,error:a}=await G.from("startup_shares").select("price_per_share").eq("startup_id",t).single();if(a&&a.code!=="PGRST116")throw a;return(r==null?void 0:r.price_per_share)??0}async upsertPricePerShare(t,r){if(r<0||!Number.isFinite(r))throw new Error("Price per share must be a non-negative number");const{data:a}=await G.from("startup_shares").select("total_shares, esop_reserved_shares").eq("startup_id",t).single(),s={startup_id:t,price_per_share:r,total_shares:(a==null?void 0:a.total_shares)??1e6,esop_reserved_shares:(a==null?void 0:a.esop_reserved_shares)??0,updated_at:new Date().toISOString()},{data:i,error:l}=await G.from("startup_shares").upsert(s,{onConflict:"startup_id"}).select("price_per_share, total_shares, esop_reserved_shares").single();if(l)throw console.error("❌ Upsert error:",l),l;return i.price_per_share??r}async initializeStartupShares(t,r=1e6,a=1){const s={startup_id:t,total_shares:r,price_per_share:a,esop_reserved_shares:0,updated_at:new Date().toISOString()},{error:i}=await G.from("startup_shares").upsert(s,{onConflict:"startup_id"});if(i)throw console.error("❌ Initialize error:",i),i}async getEsopReservedShares(t){const{data:r,error:a}=await G.from("startup_shares").select("esop_reserved_shares").eq("startup_id",t).single();if(a&&a.code!=="PGRST116")throw a;return(r==null?void 0:r.esop_reserved_shares)??0}async getTotalEsopEquity(t){const{data:r,error:a}=await G.from("employees").select("esop_allocation").eq("startup_id",t);if(a)throw a;const s=(r||[]).reduce((d,f)=>d+(f.esop_allocation||0),0),{data:i,error:l}=await G.from("startups").select("current_valuation").eq("id",t).single();if(l)throw l;const u=(i==null?void 0:i.current_valuation)||0;return u===0?0:s/u*100}async upsertEsopReservedShares(t,r){if(r<0||!Number.isFinite(r))throw new Error("ESOP reserved shares must be a non-negative number");const{data:a,error:s}=await G.from("startup_shares").upsert({startup_id:t,esop_reserved_shares:r,updated_at:new Date().toISOString()},{onConflict:"startup_id"}).select("esop_reserved_shares").single();if(s)throw s;return a.esop_reserved_shares??r}async addInvestmentRecord(t,r){if(console.log("Service: Adding investment record with data:",{startupId:t,investmentData:r}),!r.date)throw new Error("Date is required");const a=U6(r.date);if(!a.isValid)throw new Error(a.error);if(!r.investorType)throw new Error("Investor type is required");if(!r.investmentType)throw new Error("Investment type is required");if(!r.investorName)throw new Error("Investor name is required");if(!r.amount||r.amount<=0)throw new Error("Valid investment amount is required");if(!r.equityAllocated||r.equityAllocated<0)throw new Error("Valid equity allocation is required");if(r.shares!==void 0&&(!r.shares||r.shares<=0))throw new Error("Valid number of shares is required");if(r.pricePerShare!==void 0&&(!r.pricePerShare||r.pricePerShare<=0))throw new Error("Valid price per share is required");const{data:s,error:i}=await G.from("investment_records").insert({startup_id:t,date:r.date,investor_type:r.investorType,investment_type:r.investmentType,investor_name:r.investorName,investor_code:r.investorCode,amount:r.amount,equity_allocated:r.equityAllocated,shares:r.shares||null,price_per_share:r.pricePerShare||null,pre_money_valuation:r.preMoneyValuation,post_money_valuation:r.postMoneyValuation??null,proof_url:r.proofUrl}).select().single();if(i)throw console.error("Supabase error adding investment record:",i),i;const{error:l}=await G.from("startups").update({total_funding:G.raw("total_funding + ?",[r.amount])}).eq("id",t);return l&&console.error("Error updating startup total funding:",l),{id:s.id,date:s.date,investorType:s.investor_type,investmentType:s.investment_type,investorName:s.investor_name,investorCode:s.investor_code,amount:s.amount,equityAllocated:s.equity_allocated,shares:s.shares,pricePerShare:s.price_per_share,preMoneyValuation:s.pre_money_valuation,postMoneyValuation:s.post_money_valuation,proofUrl:s.proof_url}}async updateInvestmentRecord(t,r){const{data:a,error:s}=await G.from("investment_records").select("startup_id, amount").eq("id",t).single();if(s)throw s;const i={};if(r.date!==void 0){const d=U6(r.date);if(!d.isValid)throw new Error(d.error);i.date=r.date}r.investorType!==void 0&&(i.investor_type=r.investorType),r.investmentType!==void 0&&(i.investment_type=r.investmentType),r.investorName!==void 0&&(i.investor_name=r.investorName),r.investorCode!==void 0&&(i.investor_code=r.investorCode),r.amount!==void 0&&(i.amount=r.amount),r.equityAllocated!==void 0&&(i.equity_allocated=r.equityAllocated),r.preMoneyValuation!==void 0&&(i.pre_money_valuation=r.preMoneyValuation),r.postMoneyValuation!==void 0&&(i.post_money_valuation=r.postMoneyValuation),r.proofUrl!==void 0&&(i.proof_url=r.proofUrl);const{data:l,error:u}=await G.from("investment_records").update(i).eq("id",t).select().single();if(u)throw u;if(r.amount!==void 0&&r.amount!==a.amount){const d=r.amount-a.amount,{error:f}=await G.from("startups").update({total_funding:G.raw("total_funding + ?",[d])}).eq("id",a.startup_id);f&&console.error("Error updating startup total funding:",f)}return{id:l.id,date:l.date,investorType:l.investor_type,investmentType:l.investment_type,investorName:l.investor_name,investorCode:l.investor_code,amount:l.amount,equityAllocated:l.equity_allocated,preMoneyValuation:l.pre_money_valuation,postMoneyValuation:l.post_money_valuation,proofUrl:l.proof_url}}async deleteInvestmentRecord(t){try{console.log("🗑️ Deleting investment record with ID:",t);const{data:r,error:a}=await G.from("investment_records").select("startup_id, amount").eq("id",t).single();if(a)throw console.error("❌ Error fetching investment record:",a),a;const{error:s}=await G.from("investment_records").delete().eq("id",t);if(s)throw console.error("❌ Error deleting investment record:",s),s;const{error:i}=await G.from("startups").update({total_funding:G.raw("total_funding - ?",[r.amount])}).eq("id",r.startup_id);i&&console.error("Error updating startup total funding:",i),console.log("✅ Investment record deleted successfully")}catch(r){throw console.error("❌ Error deleting investment record:",r),r}}async recalculateStartupTotalFunding(t){try{console.log("🔄 Recalculating total funding for startup:",t);const{data:r,error:a}=await G.from("investment_records").select("amount").eq("startup_id",t);if(a)throw console.error("❌ Error fetching investment records:",a),a;const s=r.reduce((l,u)=>l+(u.amount||0),0),{error:i}=await G.from("startups").update({total_funding:s}).eq("id",t);if(i)throw console.error("❌ Error updating startup total funding:",i),i;console.log("✅ Startup total funding recalculated:",s)}catch(r){throw console.error("❌ Error recalculating startup total funding:",r),r}}async updateStartupFundingAfterDeletion(t,r){try{console.log("💰 Updating startup funding after deletion:",{startupId:t,amountToSubtract:r});const{data:a,error:s}=await G.from("startups").select("total_funding").eq("id",t).single();if(s)throw console.error("❌ Error fetching startup funding:",s),s;if(!a)throw new Error("Startup not found");const i=Math.max(0,(a.total_funding||0)-r),{error:l}=await G.from("startups").update({total_funding:i}).eq("id",t);if(l)throw console.error("❌ Error updating startup funding:",l),l;console.log("✅ Startup funding updated successfully:",{oldFunding:a.total_funding,newFunding:i})}catch(a){throw console.error("❌ Error updating startup funding:",a),a}}async getFounders(t){console.log("🔍 Loading founders for startup:",t);const{data:r,error:a}=await G.from("founders").select("*").eq("startup_id",t).order("created_at",{ascending:!0});if(a)throw console.error("❌ Error loading founders:",a),a;console.log("🔍 Raw founders data from database:",r);const s=(r||[]).map(i=>({name:i.name,email:i.email,shares:i.shares||0,equityPercentage:i.equity_percentage?Number(i.equity_percentage):0}));return console.log("🔍 Mapped founders data:",s),s}async updateFounders(t,r){const{error:a}=await G.from("founders").delete().eq("startup_id",t);if(a)throw a;if(r.length>0){const s=r.map(l=>({startup_id:t,name:l.name,email:l.email,shares:l.shares||0,equity_percentage:l.equityPercentage||0})),{error:i}=await G.from("founders").insert(s);if(i)throw i}}async deleteAllFounders(t){const{error:r}=await G.from("founders").delete().eq("startup_id",t);if(r)throw r}async addFounder(t,r){const{error:a}=await G.from("founders").insert({startup_id:t,name:r.name,email:r.email,equity_percentage:r.equityPercentage||null,shares:r.shares||null});if(a)throw a}async getFundraisingDetails(t){const{data:r,error:a}=await G.from("fundraising_details").select("*").eq("startup_id",t).order("created_at",{ascending:!1});return a?(console.error("Error fetching fundraising details:",a),[]):(r||[]).map(s=>({active:s.active,type:s.type,value:s.value,equity:s.equity,validationRequested:s.validation_requested,pitchDeckUrl:s.pitch_deck_url,pitchVideoUrl:s.pitch_video_url}))}async updateFundraisingDetails(t,r){console.log("🔄 Updating fundraising details:",{startupId:t,fundraisingData:r});try{if(!t||t<=0)throw new Error("Invalid startup ID");if(!r.type)throw new Error("Fundraising type is required");if(!r.value||r.value<=0)throw new Error("Valid fundraising value is required");if(!r.equity||r.equity<=0||r.equity>100)throw new Error("Valid equity percentage (1-100%) is required");const a=await this.getFundraisingDetails(t);if(console.log("📋 Existing fundraising details:",a),a.length>0){console.log("🗑️ Deleting existing fundraising records");const{error:u}=await G.from("fundraising_details").delete().eq("startup_id",t);if(u)throw console.error("❌ Error deleting existing fundraising details:",u),new Error(`Delete failed: ${u.message}`);console.log("✅ Existing fundraising records deleted")}console.log("➕ Inserting new fundraising record");const s={startup_id:t,active:r.active,type:r.type,value:r.value,equity:r.equity,validation_requested:r.validationRequested,pitch_deck_url:r.pitchDeckUrl||null,pitch_video_url:r.pitchVideoUrl||null};console.log("📝 Insert data:",s);const{data:i,error:l}=await G.from("fundraising_details").insert(s).select().single();if(l)throw console.error("❌ Error inserting fundraising details:",l),new Error(`Insert failed: ${l.message}`);return console.log("✅ Fundraising details inserted successfully:",i),{active:i.active,type:i.type,value:i.value,equity:i.equity,validationRequested:i.validation_requested,pitchDeckUrl:i.pitch_deck_url,pitchVideoUrl:i.pitch_video_url}}catch(a){throw console.error("❌ Fundraising details operation failed:",a),a}}async getValuationHistory(t){const{data:r,error:a}=await G.from("valuation_history").select("*").eq("startup_id",t).order("date",{ascending:!0});if(a)throw a;return(r||[]).map(s=>({round_name:s.round_type,valuation:s.valuation,investment_amount:s.investment_amount,date:s.date}))}async addValuationRecord(t,r){const a=zQ(r.date);if(!a.isValid)throw new Error(a.error);const{error:s}=await G.from("valuation_history").insert({startup_id:t,date:r.date,valuation:r.valuation,round_type:r.roundType,investment_amount:r.investmentAmount||0,notes:r.notes});if(s)throw s}async getEquityHoldings(t){const{data:r,error:a}=await G.from("equity_holdings").select("*").eq("startup_id",t).order("equity_percentage",{ascending:!1});if(a)throw a;return(r||[]).map(s=>({holder_type:s.holder_type,equity_percentage:s.equity_percentage,total_amount:0}))}async updateEquityHoldings(t,r){const{error:a}=await G.from("equity_holdings").delete().eq("startup_id",t);if(a)throw a;if(r.length>0){const s=r.map(l=>({startup_id:t,holder_type:l.holderType,holder_name:l.holderName,equity_percentage:l.equityPercentage})),{error:i}=await G.from("equity_holdings").insert(s);if(i)throw i}}async getInvestmentSummary(t){try{const{data:r,error:a}=await G.rpc("get_investment_summary",{p_startup_id:t});return a?(console.log("❌ Error calling get_investment_summary RPC, using manual calculation"),this.calculateInvestmentSummaryManually(t)):r[0]||{total_equity_funding:0,total_debt_funding:0,total_grant_funding:0,total_investments:0,avg_equity_allocated:0}}catch{return console.log("🔄 Falling back to manual calculation for investment summary"),this.calculateInvestmentSummaryManually(t)}}async getValuationHistoryData(t){try{const{data:r,error:a}=await G.rpc("get_valuation_history",{p_startup_id:t});return a?(console.log("❌ Error calling get_valuation_history RPC, using manual calculation"),this.calculateValuationHistoryManually(t)):r||[]}catch{return console.log("🔄 Falling back to manual calculation for valuation history"),this.calculateValuationHistoryManually(t)}}async getEquityDistributionData(t){try{const{data:r,error:a}=await G.rpc("get_equity_distribution",{p_startup_id:t});return a?(console.log("❌ Error calling get_equity_distribution RPC, using manual calculation"),this.calculateEquityDistributionManually(t)):r||[]}catch{return console.log("🔄 Falling back to manual calculation for equity distribution"),this.calculateEquityDistributionManually(t)}}async getFundraisingStatus(t){try{const{data:r,error:a}=await G.rpc("get_fundraising_status",{p_startup_id:t});if(a){console.log("❌ Error calling get_fundraising_status RPC, using direct query");const s=await this.getFundraisingDetails(t);if(s.length>0){const i=s[0];return{active:i.active,type:i.type,value:i.value,equity:i.equity,validation_requested:i.validationRequested,pitch_deck_url:i.pitchDeckUrl,pitch_video_url:i.pitchVideoUrl}}return null}return r[0]||null}catch{console.log("🔄 Falling back to direct query for fundraising status");const a=await this.getFundraisingDetails(t);if(a.length>0){const s=a[0];return{active:s.active,type:s.type,value:s.value,equity:s.equity,validation_requested:s.validationRequested,pitch_deck_url:s.pitchDeckUrl,pitch_video_url:s.pitchVideoUrl}}return null}}async calculateInvestmentSummaryManually(t){const r=await this.getInvestmentRecords(t),a=r.filter(d=>d.investmentType===qi.Equity).reduce((d,f)=>d+f.amount,0),s=r.filter(d=>d.investmentType===qi.Debt).reduce((d,f)=>d+f.amount,0),i=r.filter(d=>d.investmentType===qi.Grant).reduce((d,f)=>d+f.amount,0),l=r.length,u=l>0?r.reduce((d,f)=>d+f.equityAllocated,0)/l:0;return{total_equity_funding:a,total_debt_funding:s,total_grant_funding:i,total_investments:l,avg_equity_allocated:u}}async calculateValuationHistoryManually(t){console.log("🔄 Calculating valuation history manually for startup:",t);const r=await this.getInvestmentRecords(t);if(console.log("📊 Found investments:",r.length),r.length===0)return console.log("⚠️ No investments found, returning empty array"),[];const a=new Map;r.forEach(i=>{console.log("💰 Processing investment:",{date:i.date,amount:i.amount,preMoneyValuation:i.preMoneyValuation,investorName:i.investorName});const l=a.get(i.date)||{valuation:0,investment:0};a.set(i.date,{valuation:l.valuation+i.preMoneyValuation,investment:l.investment+i.amount})});const s=Array.from(a.entries()).map(([i,l])=>({round_name:"Investment Round",valuation:l.valuation,investment_amount:l.investment,date:i})).sort((i,l)=>new Date(i.date).getTime()-new Date(l.date).getTime());return console.log("📈 Manual valuation history result:",s),s}async calculateEquityDistributionManually(t){const r=await this.getInvestmentRecords(t),a=await this.getFounders(t),s=[];if(a.length>0){const l=(100-r.reduce((u,d)=>u+d.equityAllocated,0))/a.length;a.forEach(u=>{s.push({holder_type:"Founder",equity_percentage:l,total_amount:0})})}return r.forEach(i=>{s.push({holder_type:"Investor",equity_percentage:i.equityAllocated,total_amount:i.amount})}),s.sort((i,l)=>l.equity_percentage-i.equity_percentage)}async getInvestorTypes(){return Object.values(ex)}async getInvestmentTypes(){return Object.values(qi)}async getInvestmentRounds(){return Object.values(va)}async uploadProofDocument(t,r){const a=`${t}/investment-proofs/${Date.now()}_${r.name}`,{data:s,error:i}=await G.storage.from("cap-table-documents").upload(a,r);if(i)throw i;const{data:l}=G.storage.from("cap-table-documents").getPublicUrl(a);return l.publicUrl}async uploadPitchDeck(t,r){const a=`${r}/pitch-decks/${Date.now()}_${t.name}`,{data:s,error:i}=await G.storage.from("pitch-decks").upload(a,t);if(i)throw i;const{data:l}=G.storage.from("pitch-decks").getPublicUrl(a);return l.publicUrl}async getAttachmentDownloadUrl(t){if(t.startsWith("http"))return t;const r=this.extractFilePathFromUrl(t);if(!r)throw new Error("Invalid file URL");const{data:a}=G.storage.from("cap-table-documents").getPublicUrl(r);return a.publicUrl}extractFilePathFromUrl(t){return t.includes("/storage/v1/object/public/")?t.split("/storage/v1/object/public/")[1]:t.includes("/storage/v1/object/sign/")?t.split("/storage/v1/object/sign/")[1]:null}subscribeToInvestmentRecords(t,r){return G.channel("investment_records_changes").on("postgres_changes",{event:"*",schema:"public",table:"investment_records",filter:`startup_id=eq.${t}`},async()=>{try{const s=await this.getInvestmentRecords(t);r(s)}catch(s){console.warn("Failed to refresh investment records after realtime event:",s)}}).subscribe()}subscribeToFounders(t,r){return G.channel("founders_changes").on("postgres_changes",{event:"*",schema:"public",table:"founders",filter:`startup_id=eq.${t}`},async()=>{try{const s=await this.getFounders(t);r(s)}catch(s){console.warn("Failed to refresh founders after realtime event:",s)}}).subscribe()}subscribeToFundraisingDetails(t,r){return G.channel("fundraising_details_changes").on("postgres_changes",{event:"*",schema:"public",table:"fundraising_details",filter:`startup_id=eq.${t}`},async()=>{try{const s=await this.getFundraisingDetails(t);r(s)}catch(s){console.warn("Failed to refresh fundraising details after realtime event:",s)}}).subscribe()}async addFundraisingDetails(t,r){const{data:a,error:s}=await G.from("fundraising_details").insert({startup_id:t,active:r.active,type:r.type,value:r.value,equity:r.equity,validation_requested:r.validationRequested,pitch_deck_url:r.pitchDeckUrl,pitch_video_url:r.pitchVideoUrl}).select().single();if(s)throw s;return{active:a.active,type:a.type,value:a.value,equity:a.equity,validationRequested:a.validation_requested,pitchDeckUrl:a.pitch_deck_url,pitchVideoUrl:a.pitch_video_url}}get supabase(){return G}}const ha=new HQ;class GQ{static async calculateMetrics(t){try{const r=new Date().getFullYear(),a=await os.getFinancialRecords(t.id,{year:r}),s=new Date().getMonth(),i=a.filter(I=>new Date(I.date).getMonth()===s),l=i.filter(I=>I.record_type==="revenue").reduce((I,F)=>I+F.amount,0),u=l,f=i.filter(I=>I.record_type==="expense").reduce((I,F)=>I+F.amount,0)-l,m=i.filter(I=>{var F;return I.record_type==="expense"&&((F=I.vertical)==null?void 0:F.toLowerCase().includes("marketing"))}).reduce((I,F)=>I+F.amount,0),g=s===0?11:s-1,x=a.filter(I=>new Date(I.date).getMonth()===g).filter(I=>I.record_type==="revenue").reduce((I,F)=>I+F.amount,0),j=l-x,b=j>0?Math.max(1,Math.floor(j/1e4)):1,S=b>0?m/b:0;let A=100;try{const I=await ha.getInvestmentSummary(t.id);I&&I.total_investments>0&&(A=Math.max(100,I.total_investments*10))}catch{console.log("Using default customer count for LTV calculation")}const D=(A>0?l/A:0)*12,R=a.filter(I=>I.record_type==="revenue").reduce((I,F)=>I+F.amount,0),B=a.filter(I=>I.record_type==="revenue").reduce((I,F)=>I+(F.cogs||0),0),U=R>0?(R-B)/R*100:0;return{mrr:u,burnRate:f,cac:S,ltv:D,grossMargin:U}}catch(r){return console.error("Error calculating dashboard metrics:",r),{mrr:0,burnRate:0,cac:0,ltv:0,grossMargin:0}}}}const Lv=e=>{var t,r;return _.useMemo(()=>{var a,s;return e.currency?e.currency:(a=e.profile)!=null&&a.currency?e.profile.currency:(s=e.profile)!=null&&s.country?Ik(e.profile.country):"USD"},[e.currency,(t=e.profile)==null?void 0:t.currency,(r=e.profile)==null?void 0:r.country])},H6=["#1e40af","#1d4ed8","#3b82f6","#60a5fa"],KQ=({startup:e,isViewOnly:t=!1,offers:r=[],onProcessOffer:a,currentUser:s})=>{const i=Lv(e),[l,u]=_.useState(null),[d,f]=_.useState(!0),[m,g]=_.useState([]),[v,x]=_.useState([]);_.useEffect(()=>{(async()=>{try{f(!0);const S=await GQ.calculateMetrics(e);u(S);const A=new Date().getFullYear(),E=await os.getFinancialRecords(e.id,{year:A}),T={},D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];D.forEach(I=>{T[I]={revenue:0,expenses:0}}),E.forEach(I=>{const F=new Date(I.date).getMonth(),pe=D[F];I.record_type==="revenue"?T[pe].revenue+=I.amount:T[pe].expenses+=I.amount});const R=D.map(I=>({name:I,revenue:T[I].revenue,expenses:T[I].expenses}));g(R);const B={};E.filter(I=>I.record_type==="expense").forEach(I=>{B[I.vertical]=(B[I.vertical]||0)+I.amount});const U=Object.entries(B).map(([I,F])=>({name:I,value:F})).sort((I,F)=>F.value-I.value).slice(0,4);x(U)}catch(S){console.error("Error loading dashboard data:",S)}finally{f(!1)}})()},[e]);const j=({title:b,value:S,icon:A,subtitle:E})=>n.jsx(et,{padding:"sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-xs sm:text-sm font-medium text-slate-500 uppercase tracking-wider",children:b}),n.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-slate-900",children:S}),E&&n.jsx("p",{className:"text-xs text-slate-400 mt-1 truncate",children:E})]}),n.jsx("div",{className:"text-blue-600 flex-shrink-0 ml-2",children:A})]})});return n.jsxs("div",{className:"space-y-4 sm:space-y-6 px-2 sm:px-0",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3 sm:gap-4",children:[n.jsx(j,{title:"MRR",value:d?"Loading...":nd((l==null?void 0:l.mrr)||0,i),icon:n.jsx(No,{className:"h-5 w-5 sm:h-6 sm:w-6"}),subtitle:"Monthly Recurring Revenue"}),n.jsx(j,{title:"Burn Rate",value:d?"Loading...":nd((l==null?void 0:l.burnRate)||0,i),icon:n.jsx(Nw,{className:"h-5 w-5 sm:h-6 sm:w-6"}),subtitle:l!=null&&l.burnRate&&l.burnRate>0?"Monthly Net Loss":"Monthly Net Profit"}),n.jsx(j,{title:"Gross Margin",value:d?"Loading...":`${((l==null?void 0:l.grossMargin)||0).toFixed(1)}%`,icon:n.jsx(md,{className:"h-5 w-5 sm:h-6 sm:w-6"}),subtitle:"Revenue - COGS"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[n.jsxs(et,{padding:"md",children:[n.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 text-slate-700",children:"Revenue vs. Expenses (Monthly)"}),n.jsx("div",{className:"w-full h-56 sm:h-64",children:n.jsx(ti,{width:"100%",height:"100%",children:n.jsxs(Pv,{data:m,children:[n.jsx(eu,{strokeDasharray:"3 3"}),n.jsx(ac,{dataKey:"name",fontSize:10}),n.jsx(dl,{fontSize:10,tickFormatter:b=>nd(b,i)}),n.jsx(ei,{formatter:b=>Or(b,i)}),n.jsx(Es,{wrapperStyle:{fontSize:"12px"}}),n.jsx(fd,{dataKey:"revenue",fill:"#16a34a",name:"Revenue"}),n.jsx(fd,{dataKey:"expenses",fill:"#dc2626",name:"Expenses"})]})})})]}),n.jsxs(et,{padding:"md",children:[n.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 text-slate-700",children:"Expense Categories"}),n.jsx("div",{className:"w-full h-56 sm:h-64",children:n.jsx(ti,{width:"100%",height:"100%",children:n.jsxs(yf,{children:[n.jsx(Qc,{data:v,cx:"50%",cy:"50%",labelLine:!1,label:({name:b,percent:S})=>`${b} ${(S*100).toFixed(0)}%`,outerRadius:60,fill:"#8884d8",dataKey:"value",children:v.map((b,S)=>n.jsx(ul,{fill:H6[S%H6.length]},`cell-${S}`))}),n.jsx(ei,{formatter:b=>Or(b,i)})]})})})]})]}),n.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[n.jsx("h3",{className:"text-base sm:text-lg font-semibold text-slate-700",children:"Investment Offers"}),!r||r.length===0?n.jsx(et,{className:"p-6 sm:p-8 text-center text-slate-500",children:n.jsx("p",{className:"text-sm sm:text-base",children:"No offers yet."})}):n.jsxs("div",{className:"overflow-hidden",children:[n.jsx("div",{className:"block sm:hidden space-y-3",children:r.map(b=>n.jsx(et,{padding:"sm",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:b.investorName||b.investorEmail}),n.jsxs("p",{className:"text-xs text-slate-600",children:["₹",b.offerAmount,"L • ",b.equityPercentage,"%"]})]}),n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ml-2 flex-shrink-0 ${b.status==="accepted"?"bg-green-100 text-green-800":b.status==="completed"?"bg-blue-100 text-blue-800":b.status==="approved"?"bg-orange-100 text-orange-800":b.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:b.status.charAt(0).toUpperCase()+b.status.slice(1)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[b.status==="approved"&&a&&n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"bg-green-600 hover:bg-green-700 w-full sm:w-auto",onClick:()=>{confirm("Accept this offer and finalize the deal?")&&a(b.id,"accepted")},size:"sm",children:"Accept"}),n.jsx(Oe,{className:"bg-red-600 hover:bg-red-700 w-full sm:w-auto",onClick:()=>{confirm("Decline this offer?")&&a(b.id,"rejected")},size:"sm",children:"Decline"})]}),b.status==="accepted"&&a&&n.jsx(Oe,{className:"bg-blue-600 hover:bg-blue-700 w-full sm:w-auto",onClick:()=>{confirm("Mark this investment as completed?")&&a(b.id,"completed")},size:"sm",children:"Mark Completed"}),(b.status==="pending"||b.status==="rejected"||b.status==="completed")&&n.jsxs("div",{className:"text-xs text-slate-500 text-center",children:[b.status==="pending"&&"Waiting for admin approval",b.status==="rejected"&&"Offer declined",b.status==="completed"&&"Investment completed"]})]})]})},b.id))}),n.jsx("div",{className:"hidden sm:block",children:n.jsx(et,{className:"p-0 overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-sm",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"From"}),n.jsx("th",{className:"px-3 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Amount"}),n.jsx("th",{className:"px-3 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Equity"}),n.jsx("th",{className:"px-3 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-3 sm:px-4 py-2 sm:py-3 text-right text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-slate-200 bg-white",children:r.map(b=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-3 sm:px-4 py-2 sm:py-3 whitespace-nowrap text-slate-900",children:b.investorName||b.investorEmail}),n.jsxs("td",{className:"px-3 sm:px-4 py-2 sm:py-3 whitespace-nowrap text-slate-900",children:["₹",b.offerAmount,"L"]}),n.jsxs("td",{className:"px-3 sm:px-4 py-2 sm:py-3 whitespace-nowrap text-slate-900",children:[b.equityPercentage,"%"]}),n.jsx("td",{className:"px-3 sm:px-4 py-2 sm:py-3 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${b.status==="accepted"?"bg-green-100 text-green-800":b.status==="completed"?"bg-blue-100 text-blue-800":b.status==="approved"?"bg-orange-100 text-orange-800":b.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:b.status.charAt(0).toUpperCase()+b.status.slice(1)})}),n.jsx("td",{className:"px-3 sm:px-4 py-2 sm:py-3 whitespace-nowrap",children:n.jsxs("div",{className:"flex justify-end gap-2",children:[b.status==="approved"&&a&&n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"bg-green-600 hover:bg-green-700",onClick:()=>{confirm("Accept this offer and finalize the deal?")&&a(b.id,"accepted")},size:"sm",children:"Accept"}),n.jsx(Oe,{className:"bg-red-600 hover:bg-red-700",onClick:()=>{confirm("Decline this offer?")&&a(b.id,"rejected")},size:"sm",children:"Decline"})]}),b.status==="accepted"&&a&&n.jsx(Oe,{className:"bg-blue-600 hover:bg-blue-700",onClick:()=>{confirm("Mark this investment as completed?")&&a(b.id,"completed")},size:"sm",children:"Mark Completed"}),(b.status==="pending"||b.status==="rejected"||b.status==="completed")&&n.jsxs("span",{className:"text-xs text-slate-500 self-center",children:[b.status==="pending"&&"Waiting for admin approval",b.status==="rejected"&&"Offer declined",b.status==="completed"&&"Investment completed"]})]})})]},b.id))})]})})})]})]})]})},WQ=({startup:e})=>{const[t,r]=_.useState([]),[a,s]=_.useState([]),[i,l]=_.useState(null),[u,d]=_.useState(!1),[f,m]=_.useState(null),[g,v]=_.useState(""),[x,j]=_.useState(null),[b,S]=_.useState(!1),[A,E]=_.useState(!1),[T,D]=_.useState(""),[R,B]=_.useState("");_.useEffect(()=>{let z=!0;return(async()=>{const{data:V,error:de}=await G.from("incubation_opportunities").select("*").order("created_at",{ascending:!1});if(!z)return;if(!de&&Array.isArray(V)){const fe=V.map(oe=>({id:oe.id,programName:oe.program_name,description:oe.description||"",deadline:oe.deadline||"",posterUrl:oe.poster_url||void 0,videoUrl:oe.video_url||void 0,facilitatorName:"Program Facilitator"}));r(fe)}const{data:se}=await G.from("opportunity_applications").select("*").eq("startup_id",e.id);Array.isArray(se)&&s(se.map(fe=>({id:fe.id,startupId:fe.startup_id,opportunityId:fe.opportunity_id,status:fe.status||"pending",pitchDeckUrl:fe.pitch_deck_url||void 0,pitchVideoUrl:fe.pitch_video_url||void 0})))})(),()=>{z=!1}},[e.id]);const U=_.useMemo(()=>new Set(a.map(z=>z.opportunityId)),[a]),I=z=>{if(!z)return null;try{const V=new URL(z);if(V.hostname.includes("youtube.com")){const de=V.searchParams.get("v");return de?`https://www.youtube.com/embed/${de}`:null}if(V.hostname==="youtu.be"){const de=V.pathname.replace("/","");return de?`https://www.youtube.com/embed/${de}`:null}}catch{}return null},F=z=>{U.has(z)||(m(z),j(null),v(""),d(!0))},pe=(z,V)=>{D(z),B(V),E(!0)},L=z=>{if(z.target.files&&z.target.files[0]){const V=z.target.files[0];if(V.type!=="application/pdf"){alert("Please upload a PDF file for the pitch deck.");return}if(V.size>10*1024*1024){alert("File size must be less than 10MB.");return}j(V)}},q=async()=>{if(f){if(!x&&!g.trim()){alert("Please provide either a pitch deck file or a pitch video URL.");return}S(!0);try{let z=null;const V=g.trim()||null;if(x){const oe=x.name.replace(/[^a-zA-Z0-9.-]/g,"_"),Se=`pitch-decks/${e.id}/${f}/${Date.now()}-${oe}`,{error:Y}=await G.storage.from("startup-documents").upload(Se,x);if(Y)throw Y;const{data:ye}=G.storage.from("startup-documents").getPublicUrl(Se);z=ye.publicUrl}const{data:de,error:se}=await G.from("opportunity_applications").insert({startup_id:e.id,opportunity_id:f,status:"pending",pitch_deck_url:z,pitch_video_url:V}).select().single();if(se)throw se;s(oe=>[...oe,{id:de.id,startupId:e.id,opportunityId:f,status:"pending",pitchDeckUrl:z||void 0,pitchVideoUrl:V||void 0}]),d(!1),m(null);const fe=document.createElement("div");fe.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",fe.innerHTML=`
                <div class="bg-white rounded-lg p-6 max-w-sm mx-4 text-center">
                    <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Application Submitted!</h3>
                    <p class="text-gray-600 mb-4">Your application has been sent to the facilitator.</p>
                    <button onclick="this.parentElement.parentElement.remove()" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">
                        Continue
                    </button>
                </div>
            `,document.body.appendChild(fe)}catch(z){console.error("Failed to submit application:",z),alert("Failed to submit application. "+(z.message||""))}finally{S(!1)}}};return n.jsxs("div",{className:"space-y-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Growth Opportunities"}),n.jsx("p",{className:"text-slate-600",children:"Explore accelerator programs and other opportunities posted by our network of facilitation centers."}),i?n.jsxs("div",{children:[n.jsx(Oe,{onClick:()=>l(null),variant:"secondary",className:"mb-4",children:"Back"}),n.jsxs(et,{className:"!p-0 overflow-hidden",children:[(()=>{const z=I(i.videoUrl||void 0);return z?n.jsx("div",{className:"relative w-full aspect-video bg-slate-800",children:n.jsx("iframe",{src:z,title:`Video for ${i.programName}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full"})}):i.posterUrl?n.jsx("img",{src:i.posterUrl,alt:`${i.programName} poster`,className:"w-full h-64 object-contain bg-slate-100 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>pe(i.posterUrl,`${i.programName} poster`)}):null})(),n.jsx("div",{className:"p-6 md:p-8",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[n.jsx("p",{className:"text-sm font-semibold text-brand-primary",children:i.facilitatorName||"Program Facilitator"}),n.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:i.programName}),n.jsx("p",{className:"text-slate-600 leading-relaxed whitespace-pre-wrap",children:i.description})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs(et,{className:"bg-slate-50/70 !shadow-none border",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-700 mb-3",children:["About ",i.facilitatorName||"Program Facilitator"]}),n.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Opportunities from our facilitator network."})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsxs("p",{className:"text-sm text-slate-500",children:["Application Deadline: ",n.jsx("span",{className:"font-semibold text-slate-700",children:i.deadline})]}),U.has(i.id)?n.jsxs(Oe,{type:"button",className:"w-full mt-3",variant:"secondary",disabled:!0,children:[n.jsx(_o,{className:"h-4 w-4 mr-2"})," You have applied for this program"]}):n.jsxs(Oe,{type:"button",className:"w-full mt-3",onClick:()=>F(i.id),disabled:!1,children:[n.jsx(Nw,{className:"h-4 w-4 mr-2"})," Apply for Program"]})]})]})]})})]})]}):t.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(z=>{const V=I(z.videoUrl),de=U.has(z.id);return n.jsxs(et,{className:"flex flex-col !p-0 overflow-hidden",children:[V?n.jsx("div",{className:"relative w-full aspect-video bg-slate-800",children:n.jsx("iframe",{src:V,title:`Video for ${z.programName}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full"})}):z.posterUrl?n.jsx("img",{src:z.posterUrl,alt:`${z.programName} poster`,className:"w-full h-40 object-contain bg-slate-100 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>pe(z.posterUrl,`${z.programName} poster`)}):n.jsx("div",{className:"w-full h-40 bg-slate-200 flex items-center justify-center text-slate-500",children:n.jsx(od,{className:"h-10 w-10"})}),n.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[n.jsxs("div",{className:"flex-grow",children:[n.jsx("p",{className:"text-sm font-medium text-brand-primary",children:z.facilitatorName||"Program Facilitator"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-800 mt-1 cursor-pointer hover:text-brand-primary transition-colors",onClick:()=>l(z),children:z.programName}),n.jsxs("p",{className:"text-sm text-slate-500 mt-2 mb-4",children:[z.description.substring(0,100),"..."]})]}),n.jsxs("div",{className:"border-t pt-4 mt-4",children:[n.jsxs("p",{className:"text-xs text-slate-500",children:["Deadline: ",n.jsx("span",{className:"font-semibold",children:z.deadline})]}),de?n.jsxs(Oe,{type:"button",className:"w-full mt-3",variant:"secondary",disabled:!0,children:[n.jsx(_o,{className:"h-4 w-4 mr-2"})," You have applied for this program"]}):n.jsxs(Oe,{type:"button",className:"w-full mt-3",onClick:()=>F(z.id),disabled:!1,children:[n.jsx(Nw,{className:"h-4 w-4 mr-2"})," Apply for Program"]})]})]})]},z.id)})}):n.jsxs(et,{className:"text-center py-12",children:[n.jsx("h3",{className:"text-xl font-semibold",children:"No Opportunities Available"}),n.jsx("p",{className:"text-slate-500 mt-2",children:"Please check back later for new programs and offerings."})]}),n.jsx(Yn,{isOpen:u,onClose:()=>{b||(d(!1),m(null))},title:"Submit Application",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Pitch Deck (PDF)"}),n.jsx("input",{type:"file",accept:".pdf",onChange:L,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-slate-100 file:text-slate-700 hover:file:bg-slate-200"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Max 10MB"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Pitch Video URL"}),n.jsx(Ot,{type:"url",placeholder:"https://youtube.com/watch?v=...",value:g,onChange:z=>v(z.target.value),className:"w-full"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Provide either a deck or a video URL (or both)."})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[n.jsx(Oe,{variant:"secondary",type:"button",onClick:()=>{b||(d(!1),m(null))},disabled:b,children:"Cancel"}),n.jsx(Oe,{type:"button",onClick:q,disabled:b||!x&&!g.trim(),children:b?"Submitting...":"Submit Application"})]})]})}),n.jsx(Yn,{isOpen:A,onClose:()=>E(!1),title:R,size:"4xl",children:n.jsx("div",{className:"flex justify-center items-center p-4",children:n.jsx("img",{src:T,alt:R,className:"max-w-full max-h-[80vh] object-contain"})})})]})},YQ=[{id:1,name:"InnovateAI",investmentType:va.SeriesA,investmentValue:5e5,equityAllocation:10,currentValuation:1e7,complianceStatus:Ct.Compliant,sector:"AI/ML",totalFunding:2e6,totalRevenue:5e5,registrationDate:"2022-01-15",founders:[{name:"Alex Chen",email:"alex@innovateai.com"},{name:"Brenda Lee",email:"brenda@innovateai.com"}]},{id:2,name:"HealthWell",investmentType:va.SeriesB,investmentValue:1e6,equityAllocation:15,currentValuation:25e6,complianceStatus:Ct.Compliant,sector:"HealthTech",totalFunding:5e6,totalRevenue:12e5,registrationDate:"2021-06-20",founders:[]},{id:3,name:"FinSecure",investmentType:va.SeriesA,investmentValue:75e4,equityAllocation:8,currentValuation:15e6,complianceStatus:Ct.Pending,sector:"FinTech",totalFunding:3e6,totalRevenue:8e5,registrationDate:"2023-03-10",founders:[]},{id:4,name:"EcoSolutions",investmentType:va.Seed,investmentValue:25e4,equityAllocation:5,currentValuation:5e6,complianceStatus:Ct.NonCompliant,sector:"GreenTech",totalFunding:1e6,totalRevenue:15e4,registrationDate:"2022-11-05",founders:[]},{id:5,name:"EduVerse",investmentType:va.Seed,investmentValue:4e5,equityAllocation:12,currentValuation:8e6,complianceStatus:Ct.Compliant,sector:"EdTech",totalFunding:15e5,totalRevenue:3e5,registrationDate:"2021-09-01",founders:[]}],Sw=[{id:101,name:"QuantumLeap",investmentType:va.Seed,investmentValue:15e4,equityAllocation:7,sector:"DeepTech",totalFunding:15e4,totalRevenue:0,registrationDate:"2024-02-01",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=QJ21TaeN9K0",complianceStatus:Ct.Compliant},{id:102,name:"AgroFuture",investmentType:va.SeriesA,investmentValue:12e5,equityAllocation:18,sector:"AgriTech",totalFunding:25e5,totalRevenue:4e5,registrationDate:"2023-08-15",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=gt_l_4TfG4k",complianceStatus:Ct.Pending},{id:103,name:"CyberGuard",investmentType:va.SeriesB,investmentValue:3e6,equityAllocation:10,sector:"Cybersecurity",totalFunding:5e6,totalRevenue:1e6,registrationDate:"2022-07-22",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=rok_p26_Z5o",complianceStatus:Ct.Compliant},{id:104,name:"BioSynth",investmentType:va.Seed,investmentValue:5e5,equityAllocation:15,sector:"BioTech",totalFunding:5e5,totalRevenue:5e4,registrationDate:"2024-01-05",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=8aGhZQkoFbQ",complianceStatus:Ct.Compliant},{id:105,name:"RetailNext",investmentType:va.SeriesA,investmentValue:25e5,equityAllocation:12,sector:"RetailTech",totalFunding:4e6,totalRevenue:8e5,registrationDate:"2023-05-18",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=Y_N1_Jj9-KA",complianceStatus:Ct.Pending},{id:106,name:"GameOn",investmentType:va.Seed,investmentValue:75e4,equityAllocation:20,sector:"Gaming",totalFunding:75e4,totalRevenue:15e4,registrationDate:"2023-11-30",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=d_HlPboL_sA",complianceStatus:Ct.Compliant},{id:107,name:"PropTech Pro",investmentType:va.PreSeed,investmentValue:1e5,equityAllocation:5,sector:"Real Estate",totalFunding:1e5,totalRevenue:1e4,registrationDate:"2024-03-01",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=uK67H2PAmn8",complianceStatus:Ct.Pending},{id:108,name:"LogiChain",investmentType:va.SeriesA,investmentValue:18e5,equityAllocation:9,sector:"Logistics",totalFunding:3e6,totalRevenue:6e5,registrationDate:"2022-09-10",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=uJg4B5a-a28",complianceStatus:Ct.Compliant},{id:109,name:"EduKids",investmentType:va.Seed,investmentValue:3e5,equityAllocation:10,sector:"EdTech",totalFunding:3e5,totalRevenue:6e4,registrationDate:"2023-10-25",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=GGlY3g_2Q_E",complianceStatus:Ct.NonCompliant},{id:110,name:"QuantumLeap 2",investmentType:va.Seed,investmentValue:15e4,equityAllocation:7,sector:"DeepTech",totalFunding:15e4,totalRevenue:0,registrationDate:"2024-02-01",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=P1ww1X2-S1U",complianceStatus:Ct.Compliant},{id:111,name:"SpaceHaul",investmentType:va.SeriesB,investmentValue:1e7,equityAllocation:15,sector:"Aerospace",totalFunding:25e6,totalRevenue:5e5,registrationDate:"2021-12-01",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=sO-tjb4Edb8",complianceStatus:Ct.Compliant},{id:112,name:"MindWell",investmentType:va.Seed,investmentValue:4e5,equityAllocation:12,sector:"HealthTech",totalFunding:4e5,totalRevenue:8e4,registrationDate:"2024-04-10",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=4x7_v-2-a3I",complianceStatus:Ct.Compliant},{id:113,name:"CleanPlate",investmentType:va.Seed,investmentValue:2e5,equityAllocation:8,sector:"FoodTech",totalFunding:2e5,totalRevenue:4e4,registrationDate:"2023-09-05",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=ysz5S6PUM-U",complianceStatus:Ct.Pending},{id:114,name:"Solaris",investmentType:va.SeriesA,investmentValue:22e5,equityAllocation:11,sector:"GreenTech",totalFunding:35e5,totalRevenue:7e5,registrationDate:"2022-11-20",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=o0u4M6vppCI",complianceStatus:Ct.Compliant},{id:115,name:"LegalEase",investmentType:va.PreSeed,investmentValue:12e4,equityAllocation:6,sector:"LegalTech",totalFunding:12e4,totalRevenue:25e3,registrationDate:"2024-05-15",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=J132shgI_Ns",complianceStatus:Ct.Pending},{id:116,name:"TravelBug",investmentType:va.Seed,investmentValue:6e5,equityAllocation:14,sector:"TravelTech",totalFunding:6e5,totalRevenue:12e4,registrationDate:"2023-03-12",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=T_i-T58-S2E",complianceStatus:Ct.Compliant},{id:117,name:"DataWeave",investmentType:va.SeriesB,investmentValue:45e5,equityAllocation:10,sector:"Data Analytics",totalFunding:8e6,totalRevenue:15e5,registrationDate:"2021-10-01",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=R2vXbFp5C9o",complianceStatus:Ct.Compliant},{id:118,name:"AutoDrive",investmentType:va.SeriesA,investmentValue:5e6,equityAllocation:18,sector:"Automotive",totalFunding:1e7,totalRevenue:8e5,registrationDate:"2022-06-01",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=uA8X54c_w18",complianceStatus:Ct.NonCompliant}],XQ=[{id:201,name:"ConnectSphere",investmentType:va.Seed,investmentValue:2e5,equityAllocation:8,sector:"Social Tech",totalFunding:2e5,totalRevenue:1e4,registrationDate:"2023-11-20"}],ZQ=[{id:"user-1",name:"Alice Investor",email:"investor@example.com",role:"Investor",registrationDate:"2023-01-10",investorCode:"INV-A7B3C9"},{id:"user-2",name:"Alex Chen",email:"alex@innovateai.com",role:"Startup",registrationDate:"2022-01-15"},{id:"user-3",name:"Bob CA",email:"ca@example.com",role:"CA",registrationDate:"2023-03-01"},{id:"user-4",name:"Charlie CS",email:"cs@example.com",role:"CS",registrationDate:"2023-04-01"},{id:"user-5",name:"Admin User",email:"admin@example.com",role:"Admin",registrationDate:"2022-01-01"},{id:"user-6",name:"Brenda Lee",email:"brenda@innovateai.com",role:"Startup",registrationDate:"2022-01-15"},{id:"user-7",name:"Facilitator One",email:"facilitator@example.com",role:"Startup Facilitation Center",registrationDate:"2024-01-20"}],JQ=[{id:1,startupId:3,startupName:"FinSecure",requestDate:"2024-06-25"},{id:2,startupId:4,startupName:"EcoSolutions",requestDate:"2024-06-28"}],QQ=[{id:1,investorEmail:"investor@example.com",startupName:"QuantumLeap",investment:Sw[0],offerAmount:14e4,equityPercentage:6.5,status:"pending"},{id:2,investorEmail:"investor@example.com",startupName:"AgroFuture",investment:Sw[1],offerAmount:11e5,equityPercentage:17,status:"pending"}],eee=["Canada","India","United States","United Kingdom","Australia","Germany","France","Japan","Singapore","Brazil"],ra={supabase:G,async getStartupProfile(e){try{console.log("🔍 getStartupProfile called with startupId:",e);const{data:t,error:r}=await G.from("startups").select("*").eq("id",e).single();if(r)throw console.error("❌ Error fetching startup data:",r),r;if(!t)return console.log("❌ No startup data found for ID:",e),null;console.log("🔍 Raw startup data from database:",t),console.log("🔍 All profile data is now stored in startups table");const{data:a,error:s}=await G.from("subsidiaries").select("*").eq("startup_id",e);s&&console.error("❌ Error fetching subsidiaries:",s);let i=null;try{const{data:m,error:g}=await G.from("international_operations").select("*").eq("startup_id",e);g?g.code!=="PGRST116"&&g.message!=='relation "public.international_operations" does not exist'&&console.log("🔍 International operations table error:",g):i=m}catch{console.log("🔍 International operations table not available, skipping")}const l=m=>{if(!m)return"";if(m instanceof Date)return m.toISOString().split("T")[0];const g=String(m);return g.includes("T")?g.split("T")[0]:g},u=(a||[]).map(m=>({id:m.id,country:m.country,companyType:m.company_type,registrationDate:l(m.registration_date),caCode:m.ca_service_code,csCode:m.cs_service_code})),d=(i||[]).map(m=>({id:m.id,country:m.country,companyType:m.company_type,startDate:l(m.start_date)})),f={country:t.country_of_registration||t.country,companyType:t.company_type,registrationDate:l(t.registration_date),currency:t.currency||"USD",subsidiaries:u,internationalOps:d,caServiceCode:t.ca_service_code,csServiceCode:t.cs_service_code,investmentAdvisorCode:t.investment_advisor_code};return console.log("🔍 Processed profile data:",f),console.log("🔍 company_type from database:",t.company_type),console.log("🔍 companyType in profileData:",f.companyType),f}catch(t){return console.error("❌ Error fetching startup profile:",t),null}},async updateStartupProfile(e,t){try{console.log("🔍 updateStartupProfile called with:",{startupId:e,profileData:t});const r={updated_at:new Date().toISOString()};t.country!==void 0&&t.country!==null&&(r.country_of_registration=t.country),t.companyType!==void 0&&t.companyType!==null?(r.company_type=t.companyType,console.log("🔍 Adding company_type to update:",t.companyType,"type:",typeof t.companyType)):console.log("🔍 Company type not being saved - value:",t.companyType,"type:",typeof t.companyType),t.registrationDate!==void 0&&t.registrationDate!==null&&(r.registration_date=t.registrationDate),t.currency!==void 0&&t.currency!==null&&(r.currency=t.currency,console.log("🔍 Adding currency to update:",t.currency)),(t.caServiceCode||t.caCode)&&(r.ca_service_code=t.caServiceCode||t.caCode),(t.csServiceCode||t.csCode)&&(r.cs_service_code=t.csServiceCode||t.csCode),t.investmentAdvisorCode!==void 0&&t.investmentAdvisorCode!==null&&(r.investment_advisor_code=t.investmentAdvisorCode,console.log("🔍 Adding investment_advisor_code to update:",t.investmentAdvisorCode)),console.log("🔍 Update data:",r);const{error:a,data:s}=await G.from("startups").update(r).eq("id",e).select();if(console.log("🔍 Database update result:",{error:a,data:s}),a){if(console.error("❌ Direct update failed:",a),a.message.includes("currency")&&r.currency){console.log("🔍 Retrying without currency column..."),delete r.currency;const{error:i}=await G.from("startups").update(r).eq("id",e);if(i)throw console.error("❌ Retry without currency failed:",i),new Error(`Database update failed: ${i.message}`);return console.log("🔍 Update succeeded without currency column"),!0}throw new Error(`Database update failed: ${a.message}`)}return console.log("✅ Profile update successful"),!0}catch(r){throw console.error("❌ Error updating startup profile:",r),r instanceof Error?(console.error("❌ Error details:",{message:r.message,stack:r.stack,startupId:e,profileData:t}),new Error(`Failed to update startup profile: ${r.message}`)):new Error("Failed to update startup profile: Unknown error")}},async addSubsidiary(e,t){try{console.log("🔍 addSubsidiary called with:",{startupId:e,subsidiary:t});const{data:r,error:a}=await G.from("subsidiaries").insert({startup_id:e,country:t.country,company_type:t.companyType,registration_date:t.registrationDate,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select("id").single();if(console.log("🔍 Direct add_subsidiary result:",{data:r,error:a}),a)throw a;return(r==null?void 0:r.id)||null}catch(r){return console.error("❌ Error adding subsidiary:",r),null}},async updateSubsidiary(e,t){try{console.log("🔍 updateSubsidiary called with:",{subsidiaryId:e,subsidiary:t});let r=null;if(t.registrationDate)try{const s=new Date(t.registrationDate);if(!isNaN(s.getTime()))r=s.toISOString().split("T")[0];else return console.error("❌ Invalid date format:",t.registrationDate),!1}catch(s){return console.error("❌ Error processing date:",s),!1}console.log("🔍 Processed registration date:",r);const{error:a}=await G.from("subsidiaries").update({country:t.country,company_type:t.companyType,registration_date:r,updated_at:new Date().toISOString()}).eq("id",e);if(console.log("🔍 Direct subsidiary update result:",{error:a}),a)throw a;return!0}catch(r){return console.error("❌ Error updating subsidiary:",r),!1}},async deleteSubsidiary(e){try{console.log("🔍 deleteSubsidiary called with ID:",e);const{error:t}=await G.from("subsidiaries").delete().eq("id",e);if(console.log("🔍 Direct delete_subsidiary result:",{error:t}),t)throw t;return!0}catch(t){return console.error("❌ Error deleting subsidiary:",t),!1}},async addInternationalOp(e,t){try{const{data:r,error:a}=await G.rpc("add_international_op",{startup_id_param:e,country_param:t.country,company_type_param:t.companyType||"default",start_date_param:t.startDate});if(a)throw a;return r}catch(r){return console.error("Error adding international operation:",r),null}},async updateInternationalOp(e,t){try{console.log("🔍 updateInternationalOp called with:",{opId:e,operation:t});let r=t.startDate||null;if(r&&typeof r=="string"){const i=new Date(r);if(!isNaN(i.getTime()))r=i.toISOString().split("T")[0];else return console.error("❌ Invalid date format:",r),!1}else r&&typeof r=="object"&&"toISOString"in r&&(r=r.toISOString().split("T")[0]);console.log("🔍 Processed start date:",r);const{data:a,error:s}=await G.rpc("update_international_op",{op_id_param:e,country_param:t.country,company_type_param:t.companyType||"default",start_date_param:r});if(console.log("🔍 update_international_op result:",{data:a,error:s}),s)throw s;return a}catch(r){return console.error("❌ Error updating international operation:",r),!1}},async deleteInternationalOp(e){try{const{data:t,error:r}=await G.rpc("delete_international_op",{op_id_param:e});if(r)throw r;return t}catch(t){return console.error("Error deleting international operation:",t),!1}},async getProfileNotifications(e){try{const{data:t,error:r}=await G.from("profile_notifications").select("*").eq("startup_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]}catch(t){return console.error("Error fetching profile notifications:",t),[]}},async markNotificationAsRead(e){try{const{error:t}=await G.from("profile_notifications").update({is_read:!0}).eq("id",e);if(t)throw t;return!0}catch(t){return console.error("Error marking notification as read:",t),!1}},async getProfileAuditLog(e){try{const{data:t,error:r}=await G.from("profile_audit_log").select("*").eq("startup_id",e).order("changed_at",{ascending:!1});if(r)throw r;return t||[]}catch(t){return console.error("Error fetching profile audit log:",t),[]}},async getProfileTemplates(e,t){try{let r=G.from("profile_templates").select("*").eq("is_active",!0);e&&(r=r.eq("country",e)),t&&(r=r.eq("sector",t));const{data:a,error:s}=await r;if(s)throw s;return a||[]}catch(r){return console.error("Error fetching profile templates:",r),[]}},subscribeToProfileChanges(e,t){return G.channel(`profile_changes_${e}`).on("postgres_changes",{event:"*",schema:"public",table:"profile_audit_log",filter:`startup_id=eq.${e}`},t).on("postgres_changes",{event:"*",schema:"public",table:"profile_notifications",filter:`startup_id=eq.${e}`},t).on("postgres_changes",{event:"*",schema:"public",table:"subsidiaries",filter:`startup_id=eq.${e}`},t).on("postgres_changes",{event:"*",schema:"public",table:"international_ops",filter:`startup_id=eq.${e}`},t).on("postgres_changes",{event:"UPDATE",schema:"public",table:"startups",filter:`id=eq.${e}`},t).subscribe()},subscribeToProfileNotifications(e,t){return G.channel(`profile_notifications_${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"profile_notifications",filter:`startup_id=eq.${e}`},t).subscribe()},getCompanyTypesByCountry(e,t){const a={USA:"United States",US:"United States",UK:"United Kingdom"}[e]||e;return{"United States":["C-Corporation","LLC","S-Corporation"],"United Kingdom":["Limited Company (Ltd)","Public Limited Company (PLC)"],India:["Private Limited Company","Public Limited Company","LLP"],Singapore:["Private Limited","Exempt Private Company"],Germany:["GmbH","AG","UG"],Canada:["Corporation","LLC","Partnership"],Australia:["Proprietary Limited","Public Company"],Japan:["Kabushiki Kaisha","Godo Kaisha"],Brazil:["Ltda","S.A."],France:["SARL","SA","SAS"]}[a]||["LLC"]},getAllCountries(){return eee},validateProfileData(e){const t=[];if(e.registrationDate){const s=new Date(e.registrationDate);isNaN(s.getTime())&&t.push("Invalid registration date")}const r=e.registrationDate?new Date(e.registrationDate):null,a=s=>s instanceof Date&&!isNaN(s.getTime());if(Array.isArray(e.subsidiaries)){for(const s of e.subsidiaries)if(s.registrationDate){const i=new Date(s.registrationDate);isNaN(i.getTime())&&t.push("Invalid subsidiary registration date"),r&&a(r)&&a(i)&&i<r&&t.push("Subsidiary registration date cannot be earlier than parent registration date")}}if(Array.isArray(e.internationalOps)){for(const s of e.internationalOps)if(s.startDate){const i=new Date(s.startDate);isNaN(i.getTime())&&t.push("Invalid international operation start date"),r&&a(r)&&a(i)&&i<r&&t.push("International operation start date cannot be earlier than parent registration date")}}return{isValid:t.length===0,errors:t}},async validateServiceCodes(e){const t=[];if(e.caServiceCode&&e.caServiceCode.trim()&&(await this.getServiceProvider(e.caServiceCode.trim(),"ca")||t.push(`Invalid CA code: ${e.caServiceCode}. Please enter a valid CA service provider code.`)),e.csServiceCode&&e.csServiceCode.trim()&&(await this.getServiceProvider(e.csServiceCode.trim(),"cs")||t.push(`Invalid CS code: ${e.csServiceCode}. Please enter a valid CS service provider code.`)),Array.isArray(e.subsidiaries))for(let r=0;r<e.subsidiaries.length;r++){const a=e.subsidiaries[r],s=r+1;a.caCode&&a.caCode.trim()&&(await this.getServiceProvider(a.caCode.trim(),"ca")||t.push(`Subsidiary ${s}: Invalid CA code "${a.caCode}". Please enter a valid CA service provider code.`)),a.csCode&&a.csCode.trim()&&(await this.getServiceProvider(a.csCode.trim(),"cs")||t.push(`Subsidiary ${s}: Invalid CS code "${a.csCode}". Please enter a valid CS service provider code.`))}return{isValid:t.length===0,errors:t}},async getServiceProvider(e,t){try{const{data:r,error:a}=await G.from("service_providers").select("*").eq("code",e).eq("type",t).maybeSingle();return a?(console.error("Error fetching service provider:",a),null):r?{name:r.name,code:r.code,licenseUrl:r.license_url}:null}catch(r){return console.error("Error fetching service provider:",r),null}},async updateSubsidiaryServiceProvider(e,t,r){try{const a=t==="ca"?{ca_service_code:r}:{cs_service_code:r},{data:s,error:i}=await G.from("subsidiaries").update(a).eq("id",e).select("id, ca_service_code, cs_service_code").single();if(i)throw i;return!0}catch(a){return console.error("Error updating subsidiary service provider:",a),!1}},async removeSubsidiaryServiceProvider(e,t){try{const r=t==="ca"?{ca_service_code:null}:{cs_service_code:null},{data:a,error:s}=await G.from("subsidiaries").update(r).eq("id",e);if(s)throw s;return!0}catch(r){return console.error("Error removing subsidiary service provider:",r),!1}},async generateComplianceTasks(e){try{console.log("🔍 Generating compliance tasks for startup:",e);const{data:t,error:r}=await G.rpc("generate_compliance_tasks_for_startup",{startup_id_param:e});if(r)throw console.error("Error generating compliance tasks:",r),r;return console.log("🔍 Generated compliance tasks:",t),t||[]}catch(t){return console.error("Error generating compliance tasks:",t),[]}},async syncComplianceTasks(e){try{return console.log("🔍 Compliance task syncing disabled - using database function directly"),!0}catch(t){return console.error("Error syncing compliance tasks:",t),!1}},async getComplianceTasks(e){try{const{data:t,error:r}=await G.from("compliance_checks").select("*").eq("startup_id",e).order("year",{ascending:!1}).order("task_name",{ascending:!0});if(r)throw r;return t||[]}catch(t){return console.error("Error fetching compliance tasks:",t),[]}},async updateComplianceTaskStatus(e,t,r,a){try{const s=r==="ca"?{ca_status:a}:{cs_status:a},{error:i}=await G.from("compliance_checks").update(s).eq("startup_id",e).eq("task_id",t);if(i)throw i;return!0}catch(s){return console.error("Error updating compliance task status:",s),!1}}},tee=Object.freeze(Object.defineProperty({__proto__:null,profileService:ra},Symbol.toStringTag,{value:"Module"}));class ree{async getAllRules(){const{data:t,error:r}=await G.from("compliance_rules_comprehensive").select("*").order("country_name",{ascending:!0}).order("company_type",{ascending:!0}).order("compliance_name",{ascending:!0});if(r)throw r;return t||[]}async getRulesByCountry(t){const{data:r,error:a}=await G.from("compliance_rules_comprehensive").select("*").eq("country_code",t).order("company_type",{ascending:!0}).order("compliance_name",{ascending:!0});if(a)throw a;return r||[]}async getRulesByCompanyType(t){const{data:r,error:a}=await G.from("compliance_rules_comprehensive").select("*").eq("company_type",t).order("country_name",{ascending:!0}).order("compliance_name",{ascending:!0});if(a)throw a;return r||[]}async getRulesByCountryAndCompanyType(t,r){const{data:a,error:s}=await G.from("compliance_rules_comprehensive").select("*").eq("country_code",t).eq("company_type",r).order("compliance_name",{ascending:!0});if(s)throw s;return a||[]}async addRule(t){const{data:r,error:a}=await G.from("compliance_rules_comprehensive").insert(t).select("*").single();if(a)throw a;return r}async updateRule(t,r){const{data:a,error:s}=await G.from("compliance_rules_comprehensive").update({...r,updated_at:new Date().toISOString()}).eq("id",t).select("*").single();if(s)throw s;return a}async deleteRule(t){const{error:r}=await G.from("compliance_rules_comprehensive").delete().eq("id",t);if(r)throw r;return!0}async getCountries(){const{data:t,error:r}=await G.from("compliance_rules_comprehensive").select("country_code, country_name").order("country_name");if(r)throw r;return(t==null?void 0:t.reduce((s,i)=>(s.find(u=>u.country_code===i.country_code)||s.push(i),s),[]))||[]}async getCompanyTypes(){const{data:t,error:r}=await G.from("compliance_rules_comprehensive").select("company_type").order("company_type");if(r)throw r;return[...new Set((t==null?void 0:t.map(s=>s.company_type))||[])]}async getCATypes(){const{data:t,error:r}=await G.from("compliance_rules_comprehensive").select("ca_type").not("ca_type","is",null).order("ca_type");if(r)throw r;return[...new Set((t==null?void 0:t.map(s=>s.ca_type).filter(Boolean))||[])]}async getCSTypes(){const{data:t,error:r}=await G.from("compliance_rules_comprehensive").select("cs_type").not("cs_type","is",null).order("cs_type");if(r)throw r;return[...new Set((t==null?void 0:t.map(s=>s.cs_type).filter(Boolean))||[])]}async getCompanyTypesByCountry(t){const{data:r,error:a}=await G.from("compliance_rules_comprehensive").select("company_type").eq("country_code",t).order("company_type");if(a)throw a;return[...new Set((r==null?void 0:r.map(i=>i.company_type))||[])]}async getCATypeByCountry(t){var s;const{data:r,error:a}=await G.from("compliance_rules_comprehensive").select("ca_type").eq("country_code",t).not("ca_type","is",null).limit(1);if(a)throw a;return((s=r==null?void 0:r[0])==null?void 0:s.ca_type)||null}async getCSTypeByCountry(t){var s;const{data:r,error:a}=await G.from("compliance_rules_comprehensive").select("cs_type").eq("country_code",t).not("cs_type","is",null).limit(1);if(a)throw a;return((s=r==null?void 0:r[0])==null?void 0:s.cs_type)||null}async getCATypesByCountry(t){const r=await this.getCATypeByCountry(t);return r?[r]:[]}async getCSTypesByCountry(t){const r=await this.getCSTypeByCountry(t);return r?[r]:[]}async addCountryWithTypes(t){const{country_code:r,country_name:a,ca_types:s,cs_types:i}=t;for(const l of s)await this.addRule({country_code:r,country_name:a,ca_type:l,company_type:"Country Setup - CA Type",compliance_name:"Country Setup - CA Type",compliance_description:`Setup entry for CA type: ${l} in ${a}`,frequency:"annual",verification_required:"CA"});for(const l of i)await this.addRule({country_code:r,country_name:a,cs_type:l,company_type:"Country Setup - CS Type",compliance_name:"Country Setup - CS Type",compliance_description:`Setup entry for CS type: ${l} in ${a}`,frequency:"annual",verification_required:"CS"})}async bulkUploadRules(t){const r=[];let a=0;for(let s=0;s<t.length;s++)try{console.log(`Processing row ${s+1}:`,t[s]),await this.addRule(t[s]),a++,console.log(`Row ${s+1} processed successfully`)}catch(i){console.error(`Error processing row ${s+1}:`,i);const l=i instanceof Error?i.message:"Unknown error";r.push({row:s+1,error:l,data:t[s]})}return console.log("bulkUploadRules returning:",{success:a,errors:r}),{success:a,errors:r}}}const tn=new ree,U1=({label:e,...t})=>n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:e}),n.jsx("input",{...t,className:"w-full bg-white border border-slate-300 rounded-md px-3 py-2 text-slate-900 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-90 disabled:cursor-not-allowed disabled:bg-slate-100 disabled:text-slate-700"})]}),T0=({name:e,placeholder:t,value:r,onChange:a,disabled:s,isValid:i,isInvalid:l,isLoading:u,errorMessage:d})=>n.jsxs("div",{className:"relative",children:[n.jsx("input",{name:e,placeholder:t,value:r,onChange:a,disabled:s,className:`w-full bg-white border rounded-md px-3 py-2 text-slate-900 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed pr-10 ${l?"border-red-500 focus:ring-red-500 focus:border-red-500":i?"border-green-500 focus:ring-green-500 focus:border-green-500":"border-slate-300"}`}),n.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:u?n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}):i?n.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:n.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}):l?n.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:n.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}):null}),l&&d&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d})]}),Rc=({label:e,children:t,...r})=>n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:e}),n.jsx("select",{...r,className:"w-full bg-white border border-slate-300 rounded-md px-3 py-2 text-slate-900 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-90 disabled:cursor-not-allowed disabled:bg-slate-100 disabled:text-slate-700",children:t})]}),O0=({provider:e,onRemove:t,isEditing:r,type:a})=>n.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-blue-50 p-4 rounded-xl border border-slate-200 flex justify-between items-center h-full shadow-sm hover:shadow-md transition-shadow",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900",children:e.name}),n.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Code: ",e.code]})]}),r&&n.jsx("button",{onClick:t,className:"text-slate-600 hover:text-red-600 font-semibold text-sm bg-white px-3 py-1 rounded-lg border border-slate-200 hover:border-red-200 transition-colors",children:"Change"})]}),aee=({startup:e,userRole:t,onProfileUpdate:r,isViewOnly:a=!1,currentUser:s})=>{const[i,l]=_.useState(!1),[u,d]=_.useState(!0),[f,m]=_.useState([]),[g,v]=_.useState([]),[x,j]=_.useState(!1),[b,S]=_.useState(null),[A,E]=_.useState({}),[T,D]=_.useState([]),[R,B]=_.useState({isValid:!1,isInvalid:!1,isLoading:!1,errorMessage:""}),[U,I]=_.useState({isValid:!1,isInvalid:!1,isLoading:!1,errorMessage:""}),[F,pe]=_.useState({}),L=_.useRef(null),q=ve=>{const Z={country:ve.country||"",companyType:ve.companyType||"",registrationDate:ve.registrationDate||"",subsidiaries:(ve.subsidiaries||[]).map(te=>({country:te.country,companyType:te.companyType})),internationalOps:(ve.internationalOps||[]).map(te=>({country:te.country,companyType:te.companyType}))};return JSON.stringify(Z)},z=(t==="Startup"||t==="Admin")&&!a;console.log("🔍 ProfileTab - Edit button visibility check:",{userRole:t,isViewOnly:a,canEdit:z,isEditing:i});const V=ve=>({country:ve.country||"",companyType:ve.companyType||"",registrationDate:ve.registrationDate||"",currency:ve.currency||"USD",subsidiaries:(ve.subsidiaries||[]).map(te=>({id:te.id||0,country:te.country||"",companyType:te.companyType||"",registrationDate:te.registrationDate||"",caCode:te.caCode||te.ca_service_code||"",csCode:te.csCode||te.cs_service_code||"",ca:te.ca||void 0,cs:te.cs||void 0})),internationalOps:(ve.internationalOps||[]).map(te=>({id:te.id||0,country:te.country||"",companyType:te.companyType||"",startDate:te.startDate||""})),caServiceCode:ve.caServiceCode||ve.ca_service_code||"",csServiceCode:ve.csServiceCode||ve.cs_service_code||"",caCode:ve.caServiceCode||ve.ca_service_code||"",csCode:ve.csServiceCode||ve.cs_service_code||"",ca:ve.ca||void 0,cs:ve.cs||void 0}),[de,se]=_.useState({country:"",companyType:"",registrationDate:e.registrationDate||new Date().toISOString().split("T")[0],subsidiaries:[],internationalOps:[],caServiceCode:"",csServiceCode:"",currency:"USD"}),fe=Vc.useMemo(()=>{if(!de.country)return[];let ve=de.country;if(de.country&&!A[de.country]){for(const[re,$]of Object.entries(A))if($.country_name===de.country){ve=re;break}}const Z=A[ve];return!Z||!Z.company_types?[]:Object.keys(Z.company_types)},[A,de.country]),oe=Vc.useMemo(()=>T.filter(ve=>ve!=="default"),[T]);_.useEffect(()=>{(async()=>{try{d(!0);const Z=await ra.getStartupProfile(e.id);if(Z){console.log("🔍 Raw profile data loaded:",Z),console.log("🔍 Company type from database:",Z.companyType);const re=V(Z);if(console.log("🔍 Sanitized data for form:",re),console.log("🔍 Sanitized company type:",re.companyType),re.country&&A&&Object.keys(A).length>0&&!A[re.country]){for(const[$,ne]of Object.entries(A))if(ne.country_name===re.country){re.country=$;break}}se(re),L.current=q(re)}try{console.log("🔍 Starting user profile document fetch...");const{data:{user:re},error:$}=await br.supabase.auth.getUser();if($){console.error("❌ Auth error:",$);return}if(!re){console.error("❌ No authenticated user found");return}console.log("🔍 Authenticated user:",re.id,re.email);const{data:ne,error:W}=await br.supabase.from("users").select("government_id, ca_license, verification_documents, logo_url, financial_advisor_license_url, investment_advisor_code").eq("id",re.id),be=ne&&ne.length>0?ne[0]:null;if(W){console.error("❌ Profile fetch error:",W);return}console.log("🔍 User profile documents loaded:",be),be?(S(be),console.log("✅ User profile state updated")):console.log("⚠️ No user profile data found")}catch(re){console.error("❌ Error loading user profile documents:",re)}if(!b&&s){console.log("🔄 Using currentUser data as fallback:",s);const re={government_id:s.government_id,ca_license:s.ca_license,verification_documents:s.verification_documents,logo_url:s.logo_url,financial_advisor_license_url:s.financial_advisor_license_url,investment_advisor_code:s.investment_advisor_code};S(re),console.log("✅ Fallback user profile set:",re)}const te=await ra.getProfileNotifications(e.id);v(te);try{const re=await tn.getAllRules(),$={},ne=new Set;re.forEach(W=>{ne.add(W.country_code),$[W.country_code]||($[W.country_code]={country_name:W.country_name,company_types:{}});const be=W.company_type;be&&!be.toLowerCase().includes("setup")&&!be.toLowerCase().includes("ca type")&&!be.toLowerCase().includes("cs type")&&be!==W.ca_type&&be!==W.cs_type&&($[W.country_code].company_types[be]||($[W.country_code].company_types[be]=[]),$[W.country_code].company_types[be].push({id:W.id,name:W.compliance_name,description:W.compliance_description,frequency:W.frequency,verification_required:W.verification_required}))}),E($),D(Array.from(ne))}catch(re){console.warn("Failed to load compliance rules for dropdowns",re)}}catch(Z){console.error("Error loading profile data:",Z)}finally{d(!1)}})()},[e.id]),_.useEffect(()=>{const ve=ra.supabase.channel("profile_rules_catalogs").on("postgres_changes",{event:"*",schema:"public",table:"compliance_rules_comprehensive"},async()=>{try{const Z=await tn.getAllRules(),te={},re=new Set;Z.forEach($=>{re.add($.country_code),te[$.country_code]||(te[$.country_code]={country_name:$.country_name,company_types:{}});const ne=$.company_type;ne&&!ne.toLowerCase().includes("setup")&&!ne.toLowerCase().includes("ca type")&&!ne.toLowerCase().includes("cs type")&&ne!==$.ca_type&&ne!==$.cs_type&&(te[$.country_code].company_types[ne]||(te[$.country_code].company_types[ne]=[]),te[$.country_code].company_types[ne].push({id:$.id,name:$.compliance_name,description:$.compliance_description,frequency:$.frequency,verification_required:$.verification_required}))}),E(te),D(Array.from(re))}catch(Z){console.warn("Failed to refresh compliance rules for dropdowns",Z)}}).subscribe();return()=>{ve.unsubscribe()}},[]),_.useEffect(()=>{console.log("Setting up real-time subscriptions for startup:",e.id);const ve=ra.supabase.channel(`startup_profile_${e.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"startups",filter:`id=eq.${e.id}`},Z=>{console.log("Startup profile updated:",Z),ra.getStartupProfile(e.id).then(te=>{te&&(se(V(te)),L.current=q(V(te)))})}).on("postgres_changes",{event:"*",schema:"public",table:"subsidiaries",filter:`startup_id=eq.${e.id}`},Z=>{console.log("Subsidiary change detected:",Z),ra.getStartupProfile(e.id).then(te=>{te&&(se(V(te)),L.current=q(V(te)))})}).on("postgres_changes",{event:"*",schema:"public",table:"international_ops",filter:`startup_id=eq.${e.id}`},Z=>{console.log("International operation change detected:",Z),ra.getStartupProfile(e.id).then(te=>{te&&(se(V(te)),L.current=q(V(te)))})}).subscribe();return()=>{console.log("Cleaning up real-time subscriptions"),ve.unsubscribe()}},[e.id]),Vc.useEffect(()=>{if(de.country&&A&&Object.keys(A).length>0&&!A[de.country]){for(const[ve,Z]of Object.entries(A))if(Z.country_name===de.country){se(te=>({...te,country:ve}));break}}},[de.country,A]),Vc.useEffect(()=>{if(de.country&&de.companyType&&fe.length>0){const ve=fe;ve.includes(de.companyType)||(console.log(`🔧 Auto-fixing invalid company type: ${de.companyType} -> ${ve[0]} for country: ${de.country}`),se(Z=>({...Z,companyType:ve[0]})))}},[de.country,de.companyType,fe]);const Se=()=>l(!0),Y=()=>{l(!1),ra.getStartupProfile(e.id).then(ve=>{ve&&se(V(ve))})},ye=async()=>{var ve,Z;try{const te=ra.validateProfileData(de);if(!te.isValid){const Pe=te.errors.map(we=>{if(we==="Invalid company type for selected country"){const ae=ra.getCompanyTypesByCountry(de.country);return`Invalid company type for ${de.country}. Valid types are: ${ae.join(", ")}`}return we}).join(`
`);m(Pe.split(`
`)),window.scrollTo({top:0,behavior:"smooth"});return}const re=await ra.validateServiceCodes(de);if(!re.isValid){const Pe=re.errors.join(`
`);m(Pe.split(`
`)),window.scrollTo({top:0,behavior:"smooth"});return}m([]),console.log("🔍 Saving form data:",de),console.log("🔍 Company type being saved:",de.companyType);const $=await ra.updateStartupProfile(e.id,de);console.log("🔍 Save result:",$);const ne=await ra.getStartupProfile(e.id),W=((ve=ne==null?void 0:ne.subsidiaries)==null?void 0:ve.map(Pe=>Pe.id))||[],be=de.subsidiaries.map(Pe=>Pe.id);for(const Pe of W)be.includes(Pe)||await ra.deleteSubsidiary(Pe);for(let Pe=0;Pe<de.subsidiaries.length;Pe++){const we=de.subsidiaries[Pe];if(we.id&&we.id>0)await ra.updateSubsidiary(we.id,{country:we.country,companyType:we.companyType,registrationDate:we.registrationDate}),we.caCode&&await ra.updateSubsidiaryServiceProvider(we.id,"ca",we.caCode),we.csCode&&await ra.updateSubsidiaryServiceProvider(we.id,"cs",we.csCode);else{const ae=await ra.addSubsidiary(e.id,{country:we.country,companyType:we.companyType,registrationDate:we.registrationDate});ae&&(we.caCode&&await ra.updateSubsidiaryServiceProvider(ae,"ca",we.caCode),we.csCode&&await ra.updateSubsidiaryServiceProvider(ae,"cs",we.csCode))}}const Ce=((Z=ne==null?void 0:ne.internationalOps)==null?void 0:Z.map(Pe=>Pe.id))||[],ze=de.internationalOps.map(Pe=>Pe.id);for(const Pe of Ce)ze.includes(Pe)||await ra.deleteInternationalOp(Pe);for(let Pe=0;Pe<de.internationalOps.length;Pe++){const we=de.internationalOps[Pe];we.id&&we.id>0?await ra.updateInternationalOp(we.id,{country:we.country,companyType:we.companyType,startDate:we.startDate}):await ra.addInternationalOp(e.id,{country:we.country,companyType:we.companyType,startDate:we.startDate})}if($){l(!1),console.log("Profile updated successfully");const Pe=await ra.getStartupProfile(e.id);if(console.log("🔍 Refreshed profile data:",Pe),Pe){const ft=V(Pe);console.log("🔍 Sanitized data for form:",ft),se(ft),r&&r({...e,country_of_registration:Pe.country,company_type:Pe.companyType,registration_date:Pe.registrationDate,currency:Pe.currency,profile:{country:Pe.country,companyType:Pe.companyType,registrationDate:Pe.registrationDate,currency:Pe.currency,subsidiaries:Pe.subsidiaries||[],internationalOps:Pe.internationalOps||[],caServiceCode:Pe.caServiceCode,csServiceCode:Pe.csServiceCode,ca:Pe.ca,cs:Pe.cs}})}const we=L.current,ae=q(Pe||de),qe=we!==ae;if(L.current=ae,qe)try{await ra.syncComplianceTasks(e.id)}catch(ft){console.error("❌ Error syncing compliance tasks:",ft)}else console.log("ℹ️ No primary/entity change detected. Skipping compliance sync.")}else console.error("❌ Failed to update profile - success was false"),m(["Failed to update profile"])}catch(te){console.error("❌ Error saving profile:",te);let re="Error saving profile";te instanceof Error&&(re=te.message,console.error("❌ Detailed error:",te)),m([re])}},P=ve=>{const{name:Z,value:te}=ve.target;if(Z==="countryOfRegistration"){const re=A[te]||A.default||{},$=Object.keys(re).filter(be=>be!=="default"),ne=$.length>0?$:re.default?["default"]:[],W=GL(te);se(be=>{const Ce={...be,country:te,currency:W};return be.country!==te&&!ne.includes(be.companyType)&&(Ce.companyType=ne[0]||""),Ce})}else console.log("🔍 Form field changed:",Z,"value:",te),Z==="companyType"&&console.log("🔍 Company type selected:",te),se(re=>({...re,[Z]:te}))},K=async ve=>{const{name:Z,value:te}=ve.target,re=Z==="caCode";if(m($=>$.filter(ne=>!ne.includes(re?"CA code":"CS code"))),re?B({isValid:!1,isInvalid:!1,isLoading:!1,errorMessage:""}):I({isValid:!1,isInvalid:!1,isLoading:!1,errorMessage:""}),se($=>({...$,[Z]:te,[re?"caServiceCode":"csServiceCode"]:te})),se($=>({...$,[re?"ca":"cs"]:void 0})),te&&te.length>=3){re?B($=>({...$,isLoading:!0})):I($=>({...$,isLoading:!0}));try{const $=re?"ca":"cs";console.log("🔍 Fetching service provider:",{value:te,providerType:$});const ne=await ra.getServiceProvider(te,$);if(console.log("🔍 Service provider result:",ne),ne)se(W=>({...W,[$]:ne})),re?B({isValid:!0,isInvalid:!1,isLoading:!1,errorMessage:""}):I({isValid:!0,isInvalid:!1,isLoading:!1,errorMessage:""});else{const W=`Invalid ${re?"CA":"CS"} code: ${te}. Please enter a valid service provider code.`;re?B({isValid:!1,isInvalid:!0,isLoading:!1,errorMessage:W}):I({isValid:!1,isInvalid:!0,isLoading:!1,errorMessage:W}),m(be=>[...be,W])}if(!re&&te){j(!0);try{if(console.log("🔍 Auto-saving profile with CS code:",te),!await ra.updateStartupProfile(e.id,{...de,csServiceCode:te}))throw new Error("Failed to save profile");const{startupService:be}=await So(async()=>{const{startupService:ze}=await import("./startupService-CTg6FjNV.js");return{startupService:ze}},[]),Ce=await be.requestCSAssignment(te,`Assignment request from ${te}`,e.id,e.name);Ce.success?(console.log("CS assignment request created successfully"),v(ze=>[...ze,{id:Date.now(),type:"success",message:`CS assignment request sent to ${te} and profile saved`,timestamp:new Date}])):(console.error("Failed to create CS assignment request:",Ce.error),v(ze=>[...ze,{id:Date.now(),type:"error",message:`Failed to request CS assignment: ${Ce.error}`,timestamp:new Date}]))}catch(W){console.error("Error creating CS assignment request:",W),v(be=>[...be,{id:Date.now(),type:"error",message:"Failed to request CS assignment",timestamp:new Date}])}finally{j(!1)}}}catch($){console.error("Error fetching service provider:",$);const ne=`Error validating ${re?"CA":"CS"} code. Please try again.`;re?B({isValid:!1,isInvalid:!0,isLoading:!1,errorMessage:ne}):I({isValid:!1,isInvalid:!0,isLoading:!1,errorMessage:ne}),m(W=>[...W,ne])}}else re?B({isValid:!1,isInvalid:!1,isLoading:!1,errorMessage:""}):I({isValid:!1,isInvalid:!1,isLoading:!1,errorMessage:""})},le=async(ve,Z)=>{const{name:te,value:re}=Z.target,$=te==="caCode";m(W=>W.filter(be=>!be.includes(`Subsidiary ${ve+1}`)||!be.includes($?"CA code":"CS code"))),pe(W=>({...W,[ve]:{...W[ve],[$?"ca":"cs"]:{isValid:!1,isInvalid:!1,isLoading:!1,errorMessage:""}}}));const ne=[...de.subsidiaries];if(ne[ve]={...ne[ve],[te]:re},se(W=>({...W,subsidiaries:ne})),ne[ve]={...ne[ve],[$?"ca":"cs"]:void 0},se(W=>({...W,subsidiaries:ne})),re&&re.length>=3){pe(W=>({...W,[ve]:{...W[ve],[$?"ca":"cs"]:{isValid:!1,isInvalid:!1,isLoading:!0,errorMessage:""}}}));try{const W=$?"ca":"cs",be=await ra.getServiceProvider(re,W);if(be){const Ce=[...de.subsidiaries];Ce[ve]={...Ce[ve],[W]:be},se(ze=>({...ze,subsidiaries:Ce})),pe(ze=>({...ze,[ve]:{...ze[ve],[$?"ca":"cs"]:{isValid:!0,isInvalid:!1,isLoading:!1,errorMessage:""}}}))}else{const Ce=`Subsidiary ${ve+1}: Invalid ${$?"CA":"CS"} code "${re}". Please enter a valid service provider code.`;pe(ze=>({...ze,[ve]:{...ze[ve],[$?"ca":"cs"]:{isValid:!1,isInvalid:!0,isLoading:!1,errorMessage:Ce}}})),m(ze=>[...ze,Ce])}if(te==="csCode"&&re){j(!0);try{if(console.log("🔍 Auto-saving profile with subsidiary CS code:",re),!await ra.updateStartupProfile(e.id,de))throw new Error("Failed to save profile");const{startupService:ze}=await So(async()=>{const{startupService:we}=await import("./startupService-CTg6FjNV.js");return{startupService:we}},[]),Pe=await ze.requestCSAssignment(re,`Assignment request from ${e.name} subsidiary`,e.id,e.name);Pe.success?(console.log("CS assignment request created successfully for subsidiary"),v(we=>[...we,{id:Date.now(),type:"success",message:`CS assignment request sent to ${re} for subsidiary and profile saved`,timestamp:new Date}])):(console.error("Failed to create CS assignment request for subsidiary:",Pe.error),v(we=>[...we,{id:Date.now(),type:"error",message:`Failed to request CS assignment for subsidiary: ${Pe.error}`,timestamp:new Date}]))}catch(Ce){console.error("Error creating CS assignment request for subsidiary:",Ce),v(ze=>[...ze,{id:Date.now(),type:"error",message:"Failed to request CS assignment for subsidiary",timestamp:new Date}])}finally{j(!1)}}}catch(W){console.error("Error fetching service provider:",W);const be=`Error validating ${$?"CA":"CS"} code. Please try again.`;pe(Ce=>({...Ce,[ve]:{...Ce[ve],[$?"ca":"cs"]:{isValid:!1,isInvalid:!0,isLoading:!1,errorMessage:be}}})),m(Ce=>[...Ce,be])}}else pe(W=>({...W,[ve]:{...W[ve],[$?"ca":"cs"]:{isValid:!1,isInvalid:!1,isLoading:!1,errorMessage:""}}}))},ee=(ve,Z)=>{const te=[...de.subsidiaries];te[ve]={...te[ve],[Z]:void 0},se(re=>({...re,subsidiaries:te}))},me=ve=>{const Z=parseInt(ve.target.value,10),te=de.subsidiaries,re=[];if(console.log(`🔍 Changing subsidiary count from ${te.length} to ${Z}`),Z===0)console.log("🔍 Setting subsidiaries to empty array"),se($=>({...$,subsidiaries:[]})),pe({});else{for(let ne=0;ne<Z;ne++)te[ne]?re.push(te[ne]):re.push({id:0,country:"",companyType:"",registrationDate:"",caCode:"",csCode:"",ca:void 0,cs:void 0});se(ne=>({...ne,subsidiaries:re}));const $={};for(let ne=0;ne<Z;ne++)$[ne]={ca:{isValid:!1,isInvalid:!1,isLoading:!1,errorMessage:""},cs:{isValid:!1,isInvalid:!1,isLoading:!1,errorMessage:""}};pe($)}},ke=(ve,Z)=>{const{name:te,value:re}=Z.target,$=[...de.subsidiaries];if(te==="country"){const ne=A[re]||A.default||{},W=Object.keys(ne).filter(Ce=>Ce!=="default"),be=W.length>0?W:ne.default?["default"]:[];$[ve]={...$[ve],country:re,companyType:be[0]}}else $[ve]={...$[ve],[te]:re};se(ne=>({...ne,subsidiaries:$}))},Ae=ve=>{const Z=parseInt(ve.target.value,10),te=de.internationalOps,re=[];if(console.log(`🔍 Changing international operations count from ${te.length} to ${Z}`),Z===0)console.log("🔍 Setting international operations to empty array"),se($=>({...$,internationalOps:[]}));else{for(let $=0;$<Z;$++)te[$]?re.push(te[$]):re.push({id:0,country:"",companyType:"",startDate:""});se($=>({...$,internationalOps:re}))}},xe=(ve,Z)=>{const{name:te,value:re}=Z.target,$=[...de.internationalOps];$[ve]={...$[ve],[te]:re},se(ne=>({...ne,internationalOps:$}))},De=async ve=>{await ra.markNotificationAsRead(ve),v(Z=>Z.map(te=>te.id===ve?{...te,is_read:!0}:te))};return u?n.jsx("div",{className:"space-y-6",children:n.jsx(et,{children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/3 mb-4"}),n.jsx("div",{className:"h-32 bg-slate-200 rounded"})]})})}):n.jsxs("div",{className:"bg-slate-50 p-8 space-y-8",children:[f.length>0&&n.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-800 rounded-xl p-4",children:[n.jsx("div",{className:"font-semibold mb-2",children:"Please fix the following issues:"}),n.jsx("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:f.map((ve,Z)=>n.jsx("li",{children:ve},Z))})]}),g.filter(ve=>!ve.is_read).length>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Fp,{className:"w-5 h-5 text-blue-600"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Recent Updates"})]}),n.jsx("div",{className:"space-y-2",children:g.filter(ve=>!ve.is_read).slice(0,3).map(ve=>n.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-sm",children:ve.title}),n.jsx("p",{className:"text-xs text-slate-600",children:ve.message})]}),n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>De(ve.id),children:"Mark Read"})]},ve.id))})]}),b&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(_p,{className:"w-5 h-5 text-green-600"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Verification Documents"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[b.government_id&&n.jsx("div",{className:"p-4 bg-slate-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Government ID"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Identity verification document"})]}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>window.open(b.government_id,"_blank"),className:"flex items-center gap-1",children:[n.jsx(gi,{className:"w-4 h-4"}),"View"]})]})}),b.ca_license&&n.jsx("div",{className:"p-4 bg-slate-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Professional License"}),n.jsx("p",{className:"text-sm text-slate-600",children:"CA/CS license or role-specific document"})]}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>window.open(b.ca_license,"_blank"),className:"flex items-center gap-1",children:[n.jsx(gi,{className:"w-4 h-4"}),"View"]})]})}),b.financial_advisor_license_url&&n.jsx("div",{className:"p-4 bg-slate-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Financial Advisor License"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Investment advisor license"})]}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>window.open(b.financial_advisor_license_url,"_blank"),className:"flex items-center gap-1",children:[n.jsx(gi,{className:"w-4 h-4"}),"View"]})]})}),b.logo_url&&n.jsx("div",{className:"p-4 bg-slate-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Company Logo"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Company branding logo"})]}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>window.open(b.logo_url,"_blank"),className:"flex items-center gap-1",children:[n.jsx(gi,{className:"w-4 h-4"}),"View"]})]})}),b.investment_advisor_code&&n.jsx("div",{className:"p-4 bg-slate-50 rounded-lg",children:n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Investment Advisor Code"}),n.jsxs("p",{className:"text-sm text-slate-600",children:["Code: ",b.investment_advisor_code]})]})})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:"Company Profile"}),z&&!i&&n.jsxs("button",{onClick:Se,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center gap-2 shadow-md hover:shadow-lg",style:{display:"block"},children:[n.jsx(lf,{size:18})," Edit Profile"]}),!z&&n.jsxs("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:["Debug: Edit button hidden - canEdit: ",z.toString(),", userRole: ",t,", isViewOnly: ",a.toString()]})]}),n.jsxs("fieldset",{disabled:!i||!z,className:"space-y-8",children:[!i&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),n.jsx("p",{className:"text-blue-800 font-medium",children:'View Mode - Click "Edit Profile" to modify information'})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-xl border border-slate-200 p-8 hover:shadow-2xl transition-shadow duration-300",children:n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),n.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Primary Details"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs(Rc,{label:"Country of Registration",name:"countryOfRegistration",value:de.country,onChange:P,disabled:!i,children:[n.jsx("option",{value:"",children:"Select Country"}),oe.map(ve=>{const Z=A[ve],te=(Z==null?void 0:Z.country_name)||ve;return n.jsx("option",{value:ve,children:te},ve)})]}),n.jsxs(Rc,{label:"Company Type",name:"companyType",value:de.companyType,onChange:P,disabled:!i,children:[n.jsx("option",{value:"",children:"Select Company Type"}),fe.length>0?fe.map(ve=>n.jsx("option",{value:ve,children:ve},ve)):n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"Private Limited Company (Pvt. Ltd.)",children:"Private Limited Company (Pvt. Ltd.)"}),n.jsx("option",{value:"Public Limited Company (Ltd.)",children:"Public Limited Company (Ltd.)"}),n.jsx("option",{value:"Limited Liability Partnership (LLP)",children:"Limited Liability Partnership (LLP)"}),n.jsx("option",{value:"One Person Company (OPC)",children:"One Person Company (OPC)"}),n.jsx("option",{value:"Partnership Firm",children:"Partnership Firm"}),n.jsx("option",{value:"Sole Proprietorship",children:"Sole Proprietorship"}),n.jsx("option",{value:"Section 8 Company (Non-Profit)",children:"Section 8 Company (Non-Profit)"}),n.jsx("option",{value:"NGO (Trust / Society)",children:"NGO (Trust / Society)"})]})]}),n.jsxs(Rc,{label:"Currency",name:"currency",value:de.currency||"USD",onChange:P,disabled:!i,children:[n.jsx("option",{value:"USD",children:"USD - US Dollar"}),n.jsx("option",{value:"INR",children:"INR - Indian Rupee"}),n.jsx("option",{value:"BTN",children:"BTN - Bhutanese Ngultrum"}),n.jsx("option",{value:"AMD",children:"AMD - Armenian Dram"}),n.jsx("option",{value:"BYN",children:"BYN - Belarusian Ruble"}),n.jsx("option",{value:"GEL",children:"GEL - Georgian Lari"}),n.jsx("option",{value:"ILS",children:"ILS - Israeli Shekel"}),n.jsx("option",{value:"JOD",children:"JOD - Jordanian Dinar"}),n.jsx("option",{value:"NGN",children:"NGN - Nigerian Naira"}),n.jsx("option",{value:"PHP",children:"PHP - Philippine Peso"}),n.jsx("option",{value:"RUB",children:"RUB - Russian Ruble"}),n.jsx("option",{value:"SGD",children:"SGD - Singapore Dollar"}),n.jsx("option",{value:"LKR",children:"LKR - Sri Lankan Rupee"}),n.jsx("option",{value:"GBP",children:"GBP - British Pound"}),n.jsx("option",{value:"EUR",children:"EUR - Euro"}),n.jsx("option",{value:"HKD",children:"HKD - Hong Kong Dollar"}),n.jsx("option",{value:"RSD",children:"RSD - Serbian Dinar"}),n.jsx("option",{value:"BRL",children:"BRL - Brazilian Real"}),n.jsx("option",{value:"VND",children:"VND - Vietnamese Dong"}),n.jsx("option",{value:"MMK",children:"MMK - Myanmar Kyat"}),n.jsx("option",{value:"AZN",children:"AZN - Azerbaijani Manat"}),n.jsx("option",{value:"PKR",children:"PKR - Pakistani Rupee"})]}),n.jsx(U1,{label:"Date of Registration",name:"registrationDate",type:"date",value:de.registrationDate,onChange:P,disabled:!i})]})]}),n.jsx("div",{className:"border-t border-slate-200"}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),n.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Service Providers"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2 flex items-center gap-2",children:[n.jsx(Hp,{size:16})," Chartered Accountant"]}),de.ca?n.jsx(O0,{provider:de.ca,onRemove:()=>se(ve=>({...ve,ca:void 0})),isEditing:i,type:"ca"}):n.jsx(T0,{name:"caCode",placeholder:"Enter CA-Code",value:de.caServiceCode||de.caCode||"",onChange:K,disabled:!i,isValid:R.isValid,isInvalid:R.isInvalid,isLoading:R.isLoading,errorMessage:R.errorMessage})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2 flex items-center gap-2",children:[n.jsx(_p,{size:16})," Company Secretary"]}),de.cs?n.jsx(O0,{provider:de.cs,onRemove:()=>se(ve=>({...ve,cs:void 0})),isEditing:i,type:"cs"}):n.jsx(T0,{name:"csCode",placeholder:"Enter CS-Code",value:de.csServiceCode||de.csCode||"",onChange:K,disabled:!i||x,isValid:U.isValid,isInvalid:U.isInvalid,isLoading:U.isLoading||x,errorMessage:U.errorMessage})]})]})]})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-xl border border-slate-200 p-8 hover:shadow-2xl transition-shadow duration-300",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),n.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Subsidiaries"})]}),n.jsx("div",{className:"max-w-xs",children:n.jsxs(Rc,{label:"Number of Subsidiaries",value:de.subsidiaries.length,onChange:me,disabled:!i,children:[n.jsx("option",{value:0,children:"0"}),n.jsx("option",{value:1,children:"1"}),n.jsx("option",{value:2,children:"2"}),n.jsx("option",{value:3,children:"3"})]})}),de.subsidiaries.length===0?n.jsxs("div",{className:"bg-blue-50 p-6 border border-blue-200 rounded-xl text-center",children:[n.jsx("p",{className:"text-blue-700 font-medium",children:"No subsidiaries added"}),n.jsx("p",{className:"text-blue-600 text-sm mt-1",children:"Add subsidiaries to manage their compliance requirements"})]}):de.subsidiaries.map((ve,Z)=>{var te,re,$,ne,W,be,Ce,ze,Pe,we,ae,qe,ft,Et,Bt,vt;return n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 border border-blue-200 rounded-xl space-y-6 shadow-md",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("h4",{className:"md:col-span-3 text-lg font-bold text-blue-900 flex items-center gap-2",children:[n.jsx("div",{className:"w-6 h-6 bg-blue-200 rounded-full flex items-center justify-center text-sm font-bold text-blue-700",children:Z+1}),"Subsidiary ",Z+1]}),n.jsxs(Rc,{label:"Country",name:"country",value:ve.country,onChange:ht=>ke(Z,ht),disabled:!i,children:[n.jsx("option",{value:"",children:"Select Country"}),oe.map(ht=>{const Dt=A[ht],Ie=(Dt==null?void 0:Dt.country_name)||ht;return n.jsx("option",{value:ht,children:Ie},ht)})]}),n.jsxs(Rc,{label:"Company Type",name:"companyType",value:ve.companyType,onChange:ht=>ke(Z,ht),disabled:!i,children:[n.jsx("option",{value:"",children:"Select Company Type"}),(()=>{const ht=A[ve.country];return!ht||!ht.company_types?[]:Object.keys(ht.company_types)})().map(ht=>n.jsx("option",{value:ht,children:ht},ht))]}),n.jsx(U1,{label:"Registration Date",name:"registrationDate",type:"date",value:ve.registrationDate,onChange:ht=>ke(Z,ht),disabled:!i})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-6 border-t border-blue-200",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2 flex items-center gap-2",children:[n.jsx(Hp,{size:16})," Chartered Accountant"]}),ve.ca?n.jsx(O0,{provider:ve.ca,onRemove:()=>ee(Z,"ca"),isEditing:i,type:"ca"}):n.jsx(T0,{name:"caCode",placeholder:"Enter CA-Code",value:ve.caCode||"",onChange:ht=>le(Z,ht),disabled:!i,isValid:((re=(te=F[Z])==null?void 0:te.ca)==null?void 0:re.isValid)||!1,isInvalid:((ne=($=F[Z])==null?void 0:$.ca)==null?void 0:ne.isInvalid)||!1,isLoading:((be=(W=F[Z])==null?void 0:W.ca)==null?void 0:be.isLoading)||!1,errorMessage:((ze=(Ce=F[Z])==null?void 0:Ce.ca)==null?void 0:ze.errorMessage)||""})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2 flex items-center gap-2",children:[n.jsx(_p,{size:16})," Company Secretary"]}),ve.cs?n.jsx(O0,{provider:ve.cs,onRemove:()=>ee(Z,"cs"),isEditing:i,type:"cs"}):n.jsx(T0,{name:"csCode",placeholder:"Enter CS-Code",value:ve.csCode||"",onChange:ht=>le(Z,ht),disabled:!i,isValid:((we=(Pe=F[Z])==null?void 0:Pe.cs)==null?void 0:we.isValid)||!1,isInvalid:((qe=(ae=F[Z])==null?void 0:ae.cs)==null?void 0:qe.isInvalid)||!1,isLoading:((Et=(ft=F[Z])==null?void 0:ft.cs)==null?void 0:Et.isLoading)||!1,errorMessage:((vt=(Bt=F[Z])==null?void 0:Bt.cs)==null?void 0:vt.errorMessage)||""})]})]})]},ve.id)})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-xl border border-slate-200 p-8 hover:shadow-2xl transition-shadow duration-300",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"International Operations"})]}),n.jsx("p",{className:"text-sm text-slate-600 bg-blue-50 p-3 rounded-lg border border-blue-200",children:"Define countries where you do business without a subsidiary."}),n.jsx("div",{className:"max-w-xs",children:n.jsx(Rc,{label:"Number of International Operations",value:de.internationalOps.length,onChange:Ae,disabled:!i,children:[0,1,2,3,4,5].map(ve=>n.jsx("option",{value:ve,children:ve},ve))})}),de.internationalOps.length===0?n.jsxs("div",{className:"bg-blue-50 p-6 border border-blue-200 rounded-xl text-center",children:[n.jsx("p",{className:"text-blue-700 font-medium",children:"No international operations added"}),n.jsx("p",{className:"text-blue-600 text-sm mt-1",children:"Add countries where you do business without subsidiaries"})]}):de.internationalOps.map((ve,Z)=>n.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 border border-blue-200 rounded-xl shadow-md",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("h4",{className:"md:col-span-3 text-lg font-bold text-blue-900 flex items-center gap-2",children:[n.jsx("div",{className:"w-6 h-6 bg-blue-200 rounded-full flex items-center justify-center text-sm font-bold text-blue-700",children:Z+1}),"Operation ",Z+1]}),n.jsx("div",{className:"md:col-span-1",children:n.jsxs(Rc,{label:"Country",name:"country",value:ve.country,onChange:te=>xe(Z,te),disabled:!i,children:[n.jsx("option",{value:"",children:"Select Country"}),oe.map(te=>{const re=A[te],$=(re==null?void 0:re.country_name)||te;return n.jsx("option",{value:te,children:$},te)})]})}),n.jsx("div",{className:"md:col-span-1",children:n.jsxs(Rc,{label:"Company Type",name:"companyType",value:ve.companyType,onChange:te=>xe(Z,te),disabled:!i,children:[n.jsx("option",{value:"",children:"Select Company Type"}),(()=>{const te=A[ve.country];return!te||!te.company_types?[]:Object.keys(te.company_types)})().map(te=>n.jsx("option",{value:te,children:te},te))]})}),n.jsx("div",{className:"md:col-span-1",children:n.jsx(U1,{label:"Start Date",name:"startDate",type:"date",value:ve.startDate,onChange:te=>xe(Z,te),disabled:!i})})]})},ve.id))]})})]}),i&&n.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-6",children:n.jsxs("div",{className:"flex flex-wrap justify-end items-center gap-4",children:[n.jsxs("button",{onClick:Y,className:"bg-slate-100 text-slate-700 px-6 py-3 rounded-lg font-semibold hover:bg-slate-200 transition-colors flex items-center gap-2",children:[n.jsx(Ql,{size:18})," Cancel"]}),n.jsxs("button",{onClick:ye,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center gap-2 shadow-md hover:shadow-lg",children:[n.jsx(Dv,{size:18})," Save Changes"]})]})})]})};class nee{async updateStartupOverallCompliance(t,r){try{const{error:a}=await G.from("startups").update({compliance_status:r}).eq("id",t);if(a)throw a;return!0}catch(a){return console.error("Error updating overall startup compliance:",a),!1}}async checkTablesExist(){try{const{data:t,error:r}=await G.from("compliance_checks").select("*").limit(1);return!r}catch(t){return console.log("Compliance tables do not exist yet:",t),!1}}async getComplianceTasks(t,r){try{if(!await this.checkTablesExist())return console.log("Compliance tables do not exist yet. Returning empty array."),[];let s=G.from("compliance_checks").select("*").eq("startup_id",t);r!=null&&r.entity&&(s=s.eq("entity_identifier",r.entity)),r!=null&&r.year&&(s=s.eq("year",r.year)),r!=null&&r.status&&(s=s.or(`ca_status.eq.${r.status},cs_status.eq.${r.status}`));const{data:i,error:l}=await s;if(l){if(console.error("Error fetching compliance tasks:",l),l.code==="42P01")return console.log("Compliance_checks table does not exist yet"),[];throw l}return(i||[]).map(d=>({taskId:d.task_id,entityIdentifier:d.entity_identifier,entityDisplayName:d.entity_display_name,year:d.year,task:d.task_name,caRequired:d.ca_required,csRequired:d.cs_required,caStatus:d.ca_status,csStatus:d.cs_status,uploads:[],documentUrl:void 0}))}catch(a){return console.error("Error in getComplianceTasks:",a),[]}}async getAllComplianceUploads(t){try{const{data:r,error:a}=await G.from("compliance_uploads").select("*").eq("startup_id",t);if(a)throw a;const s={};return(r||[]).forEach(i=>{s[i.task_id]||(s[i.task_id]=[]),s[i.task_id].push({id:i.id,taskId:i.task_id,fileName:i.file_name,fileUrl:i.file_url,uploadedBy:i.uploaded_by,uploadedAt:i.uploaded_at,fileSize:i.file_size,fileType:i.file_type})}),s}catch(r){return console.error("Error fetching compliance uploads:",r),{}}}async uploadComplianceDocument(t,r,a,s){try{const i=a.name.replace(/[^a-zA-Z0-9_.-]/g,"_"),l=`${t}/${r}/${Date.now()}_${i}`,{data:u,error:d}=await G.storage.from("compliance-documents").upload(l,a,{upsert:!0,contentType:a.type||"application/pdf",cacheControl:"3600"});if(d)throw d;const{data:f}=G.storage.from("compliance-documents").getPublicUrl(l),{data:m,error:g}=await G.from("compliance_uploads").insert({startup_id:t,task_id:r,file_name:a.name,file_url:f.publicUrl,uploaded_by:s,file_size:a.size,file_type:a.type}).select().single();if(g)throw g;return{id:m.id,taskId:m.task_id,fileName:m.file_name,fileUrl:m.file_url,uploadedBy:m.uploaded_by,uploadedAt:m.uploaded_at,fileSize:m.file_size,fileType:m.file_type}}catch(i){return console.error("Error uploading compliance document:",i),null}}async deleteComplianceUpload(t){try{const{error:r}=await G.from("compliance_uploads").delete().eq("id",t);if(r)throw r;return!0}catch(r){return console.error("Error deleting compliance upload:",r),!1}}async updateComplianceStatus(t,r,a,s,i){try{const l=a==="ca"?{ca_status:s}:{cs_status:s},{error:u}=await G.from("compliance_checks").update(l).eq("startup_id",t).eq("task_id",r);if(u)throw u;return!0}catch(l){return console.error("Error updating compliance status:",l),!1}}async getComplianceSummary(t){try{if(!await this.checkTablesExist())return{totalTasks:0,completedTasks:0,pendingTasks:0,overdueTasks:0,complianceRate:0};const{data:a,error:s}=await G.from("compliance_checks").select("*").eq("startup_id",t);if(s)return console.error("Error fetching compliance summary:",s),{totalTasks:0,completedTasks:0,pendingTasks:0,overdueTasks:0,complianceRate:0};const i=a||[],l=i.length,u=i.filter(g=>g.ca_status===Ct.Verified&&g.cs_status===Ct.Verified).length,d=i.filter(g=>g.ca_status===Ct.Pending||g.cs_status===Ct.Pending).length,f=i.filter(g=>{const v=new Date().getFullYear();return g.year<v&&(g.ca_status===Ct.Pending||g.cs_status===Ct.Pending)}).length,m=l>0?u/l*100:0;return{totalTasks:l,completedTasks:u,pendingTasks:d,overdueTasks:f,complianceRate:m}}catch(r){return console.error("Error in getComplianceSummary:",r),{totalTasks:0,completedTasks:0,pendingTasks:0,overdueTasks:0,complianceRate:0}}}subscribeToComplianceChanges(t,r){return G.channel(`compliance_${t}`).on("postgres_changes",{event:"*",schema:"public",table:"compliance_checks",filter:`startup_id=eq.${t}`},r).on("postgres_changes",{event:"*",schema:"public",table:"compliance_uploads",filter:`startup_id=eq.${t}`},r).subscribe()}async generateComplianceTasksFromProfile(t){try{console.log("🔍 Generating compliance tasks from profile for startup:",t);const{data:r,error:a}=await G.rpc("generate_compliance_tasks_for_startup",{startup_id_param:t});if(a)throw console.error("Error generating compliance tasks from profile:",a),a;const s=(r||[]).map(i=>({taskId:i.task_id,entityIdentifier:i.entity_identifier,entityDisplayName:i.entity_display_name,year:i.year,task:i.task_name,caRequired:i.ca_required,csRequired:i.cs_required,caStatus:Ct.Pending,csStatus:Ct.Pending,uploads:[],documentUrl:void 0}));return console.log("🔍 Generated compliance tasks:",s),s}catch(r){return console.error("Error generating compliance tasks from profile:",r),[]}}async syncComplianceTasksWithDatabase(t){try{console.log("🔍 Syncing compliance tasks with database for startup:",t);const r=await this.generateComplianceTasksFromProfile(t);if(!r||r.length===0)return console.warn("⚠️ Generated 0 compliance tasks. Skipping deletion to avoid wiping existing data."),!0;const{error:a}=await G.from("compliance_checks").delete().eq("startup_id",t);if(a)throw console.error("Error clearing existing compliance tasks:",a),a;if(r.length>0){const s=r.map(l=>({startup_id:t,task_id:l.taskId,entity_identifier:l.entityIdentifier,entity_display_name:l.entityDisplayName,year:l.year,task_name:l.task,ca_required:l.caRequired,cs_required:l.csRequired,ca_status:l.caStatus,cs_status:l.csStatus}));console.log("🔍 Inserting compliance task records:",s);const{error:i}=await G.from("compliance_checks").upsert(s,{onConflict:"startup_id,task_id,entity_identifier,year"});if(i)throw console.error("Error inserting compliance tasks:",i),i}return console.log("🔍 Compliance tasks synced successfully"),!0}catch(r){return console.error("Error syncing compliance tasks with database:",r),!1}}async getComplianceTasksWithRealtime(t){try{const r=await this.getComplianceTasks(t);if(r.length>0)return console.log("🔍 Found existing compliance tasks in database:",r.length),r;console.log("🔍 No tasks in database, generating from profile...");const a=await this.generateComplianceTasksFromProfile(t);return a.length>0?(await this.syncComplianceTasksWithDatabase(t),a):[]}catch(r){return console.error("Error getting compliance tasks with realtime:",r),[]}}subscribeToComplianceTaskChanges(t,r){const a=G.channel(`compliance_tasks_${t}`).on("postgres_changes",{event:"*",schema:"public",table:"compliance_checks",filter:`startup_id=eq.${t}`},s=>{console.log("Compliance task change detected:",s),r(s)}).on("postgres_changes",{event:"*",schema:"public",table:"compliance_uploads",filter:`startup_id=eq.${t}`},s=>{console.log("Compliance upload change detected:",s),r(s)}).subscribe();return{unsubscribe:()=>{a.unsubscribe()}}}}const G6=new nee;class see{async checkFirstYearTasksCompleted(t,r,a){if(r.length===0)return!0;try{const s=r.map(d=>`rule_${d.id}_${t}_${a}`);console.log("🔍 Checking first-year tasks completion:",{startupId:t,registrationYear:a,firstYearTaskIds:s,firstYearRulesCount:r.length});const{data:i,error:l}=await G.from("compliance_checks").select("task_id, ca_status, cs_status").eq("startup_id",t).in("task_id",s);if(l)return console.error("Error checking first-year tasks:",l),!1;if(console.log("🔍 Found first-year tasks in database:",i),!i||i.length===0)return console.log("❌ No first-year tasks found in database - not completed"),!1;for(const d of i){const f=!d.ca_status||d.ca_status===Ct.Compliant,m=!d.cs_status||d.cs_status===Ct.Compliant;if(console.log("🔍 Checking task completion:",{taskId:d.task_id,caStatus:d.ca_status,csStatus:d.cs_status,isCACompleted:f,isCSCompleted:m}),!f||!m)return console.log("❌ First-year task not completed:",d.task_id),!1}const u=i.length===s.length;return console.log("✅ First-year tasks completion status:",u),u}catch(s){return console.error("Error checking first-year tasks completion:",s),!1}}getApplicablePeriods(t,r,a){const s=[];switch(t){case"first-year":s.push({year:r});break;case"annual":for(let i=r;i<=a;i++)s.push({year:i});break;case"quarterly":for(let i=r;i<=a;i++)for(let l=1;l<=4;l++)s.push({year:i,period:`Q${l}`});break;case"monthly":for(let i=r;i<=a;i++)for(let l=1;l<=12;l++)s.push({year:i,period:`M${l}`});break;default:s.push({year:a});break}return s}async getComplianceTasksForStartup(t){try{console.log("🔍 getComplianceTasksForStartup called for startup:",t);try{const{data:b,error:S}=await G.rpc("generate_compliance_tasks_for_startup",{startup_id_param:t});if(!S&&b&&b.length>0){console.log("🔍 Found compliance tasks from database function:",b);const A=b.map(E=>({taskId:E.task_id,entityIdentifier:E.entity_identifier,entityDisplayName:E.entity_display_name,year:E.year,task:E.task_name,caRequired:E.ca_required,csRequired:E.cs_required,caStatus:"Pending",csStatus:"Pending",uploads:[],complianceRule:{id:E.task_id,name:E.task_name,description:"",frequency:E.task_type==="firstYear"?"first-year":"annual",verification_required:E.ca_required||E.cs_required,ca_type:E.ca_required?"CA":void 0,cs_type:E.cs_required?"CS":void 0}}));return console.log("🔍 Transformed integrated tasks:",A),A}}catch(b){console.log("🔍 Database function not available, falling back to comprehensive rules:",b)}const{data:r,error:a}=await G.from("startups").select("country_of_registration, company_type, registration_date").eq("id",t).single();if(a||!r)return console.error("Error fetching startup data:",a),[];const s=r.country_of_registration,i=r.company_type,l=r.registration_date;if(!s||!i)return console.log("Startup missing country or company type, cannot load compliance rules"),[];const u=l?new Date(l).getFullYear():new Date().getFullYear(),d=new Date().getFullYear(),f=await tn.getRulesByCountryAndCompanyType(s,i),m=await G6.getComplianceTasksWithRealtime(t),g=await G6.getAllComplianceUploads(t),v=[],x=f.filter(b=>b.frequency==="first-year"),j=await this.checkFirstYearTasksCompleted(t,x,u);for(const b of f){const S=this.getApplicablePeriods(b.frequency,u,d);for(const A of S){const E=`rule_${b.id}_${t}_${A.year}${A.period?`_${A.period}`:""}`,T=m.find(R=>R.taskId===E);let D=b.compliance_name;if(A.period){if(A.period.startsWith("Q")){const R=A.period.substring(1);D=`${b.compliance_name} (Q${R} ${A.year})`}else if(A.period.startsWith("M")){const R=A.period.substring(1),B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];D=`${b.compliance_name} (${B[parseInt(R)-1]} ${A.year})`}}if(T){const R={...T,year:A.year,task:D,uploads:g[T.taskId]||[],complianceRule:b,frequency:b.frequency,complianceDescription:b.compliance_description,caType:b.ca_type,csType:b.cs_type};v.push(R)}else{const R={taskId:E,entityIdentifier:"startup",entityDisplayName:`Parent Company (${s})`,year:A.year,task:D,caRequired:b.verification_required==="CA"||b.verification_required==="both",csRequired:b.verification_required==="CS"||b.verification_required==="both",caStatus:Ct.Pending,csStatus:Ct.Pending,uploads:[],complianceRule:b,frequency:b.frequency,complianceDescription:b.compliance_description,caType:b.ca_type,csType:b.cs_type};v.push(R)}}}for(const b of m)if(!v.some(A=>A.taskId===b.taskId)){const A={...b,uploads:g[b.taskId]||[]};v.push(A)}return v.sort((b,S)=>b.frequency==="first-year"&&S.frequency!=="first-year"?-1:b.frequency!=="first-year"&&S.frequency==="first-year"?1:b.year!==S.year?S.year-b.year:b.task.localeCompare(S.task)),v}catch(r){return console.error("Error getting integrated compliance tasks:",r),[]}}async updateComplianceStatus(t,r,a,s){try{const i=s==="CA"?"ca_status":"cs_status",{error:l}=await G.from("compliance_checks").update({[i]:a}).eq("startup_id",t).eq("task_id",r);if(l)throw console.error("Error updating compliance status:",l),l}catch(i){throw console.error("Error updating compliance status:",i),i}}async uploadComplianceDocument(t,r,a,s){try{const i=a.name.split(".").pop(),l=`${t}/${r}/${Date.now()}.${i}`,{data:u,error:d}=await G.storage.from("compliance-documents").upload(l,a);if(d)return console.error("Error uploading file to storage:",d),{success:!1,error:d.message};const{data:{publicUrl:f}}=G.storage.from("compliance-documents").getPublicUrl(l),{data:m,error:g}=await G.from("compliance_uploads").insert({startup_id:t,task_id:r,file_name:a.name,file_url:f,uploaded_by:s,file_size:a.size,file_type:a.type}).select().single();return g?(console.error("Error inserting upload record:",g),{success:!1,error:g.message}):{success:!0,uploadId:m.id}}catch(i){return console.error("Error uploading compliance document:",i),{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}async deleteComplianceUpload(t){try{const{data:r,error:a}=await G.from("compliance_uploads").select("file_url").eq("id",t).single();if(a)return console.error("Error fetching upload record:",a),!1;if(r.file_url){const i=r.file_url.split("/").pop();if(i){const{error:l}=await G.storage.from("compliance-documents").remove([i]);l&&console.warn("Error deleting file from storage:",l)}}const{error:s}=await G.from("compliance_uploads").delete().eq("id",t);return s?(console.error("Error deleting upload record:",s),!1):!0}catch(r){return console.error("Error deleting compliance upload:",r),!1}}async forceRegenerateComplianceTasks(t){try{console.log("🔄 Force regenerating compliance tasks for startup:",t);const{error:r}=await G.from("compliance_checks").delete().eq("startup_id",t);if(r){console.error("Error clearing existing compliance tasks:",r);return}await this.syncComplianceTasksWithComprehensiveRules(t),console.log("✅ Compliance tasks force regenerated successfully")}catch(r){console.error("Error force regenerating compliance tasks:",r)}}async syncComplianceTasksWithComprehensiveRules(t){try{const r=await this.getComplianceTasksForStartup(t);for(const a of r)if(a.complianceRule&&a.taskId.startsWith("rule_")){const{data:s,error:i}=await G.from("compliance_checks").select("id").eq("startup_id",t).eq("task_id",a.taskId);if(i){console.warn("Error checking existing compliance check:",i);continue}if(!s||s.length===0){const{error:l}=await G.from("compliance_checks").upsert({startup_id:t,task_id:a.taskId,task_name:a.task,entity_identifier:a.entityIdentifier,entity_display_name:a.entityDisplayName,year:a.year,ca_required:a.caRequired,cs_required:a.csRequired,ca_status:a.caStatus,cs_status:a.csStatus,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{onConflict:"startup_id,task_id"});l?console.warn("Error upserting compliance check:",l):console.log("Successfully upserted compliance check:",a.taskId)}}}catch(r){console.error("Error syncing compliance tasks:",r)}}async getComplianceStats(t){try{const r=await this.getComplianceTasksForStartup(t),a={total:r.length,pending:0,compliant:0,nonCompliant:0};for(const s of r)s.caStatus===Ct.Compliant&&s.csStatus===Ct.Compliant?a.compliant++:s.caStatus===Ct.NonCompliant||s.csStatus===Ct.NonCompliant?a.nonCompliant++:a.pending++;return a}catch(r){return console.error("Error getting compliance stats:",r),{total:0,pending:0,compliant:0,nonCompliant:0}}}}const Wd=new see;class iee{async getAllSubmissions(){const{data:t,error:r}=await G.from("user_submitted_compliances").select(`
        *,
        submitted_by:submitted_by_user_id(name, email, role),
        reviewed_by:reviewed_by_user_id(name, email)
      `).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching user submitted compliances:",r),new Error("Failed to fetch user submitted compliances");return t||[]}async getMySubmissions(){const{data:{user:t}}=await G.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:r,error:a}=await G.from("user_submitted_compliances").select("*").eq("submitted_by_user_id",t.id).order("created_at",{ascending:!1});if(a)throw console.error("Error fetching my submissions:",a),new Error("Failed to fetch my submissions");return r||[]}async submitCompliance(t){const{data:{user:r}}=await G.auth.getUser();if(!r)throw new Error("User not authenticated");const{data:a,error:s}=await G.from("users").select("name, email, role").eq("id",r.id).single();if(s||!a)throw new Error("Failed to get user profile");const i={...t,submitted_by_user_id:r.id,submitted_by_name:a.name,submitted_by_role:a.role,submitted_by_email:a.email,status:"pending"},{data:l,error:u}=await G.from("user_submitted_compliances").insert(i).select().single();if(u)throw console.error("Error submitting compliance:",u),new Error("Failed to submit compliance");return l}async updateSubmissionStatus(t,r){const{data:{user:a}}=await G.auth.getUser();if(!a)throw new Error("User not authenticated");const s={...r,reviewed_by_user_id:a.id,reviewed_at:new Date().toISOString()},{data:i,error:l}=await G.from("user_submitted_compliances").update(s).eq("id",t).select().single();if(l)throw console.error("Error updating submission status:",l),new Error("Failed to update submission status");return i}async approveAndPromoteToMainRules(t){const{data:r,error:a}=await G.from("user_submitted_compliances").select("*").eq("id",t).single();if(a||!r)throw new Error("Failed to fetch submission");const s={country_code:r.country_code,country_name:r.country_name,ca_type:r.ca_type,cs_type:r.cs_type,company_type:r.company_type,compliance_name:r.compliance_name,compliance_description:r.compliance_description,frequency:r.frequency,verification_required:r.verification_required},{error:i}=await G.from("compliance_rules_comprehensive").insert(s);if(i)throw console.error("Error promoting to main rules:",i),new Error("Failed to promote to main compliance rules");await this.updateSubmissionStatus(t,{status:"approved",review_notes:"Approved and promoted to main compliance rules"})}async deleteSubmission(t){const{error:r}=await G.from("user_submitted_compliances").delete().eq("id",t);if(r)throw console.error("Error deleting submission:",r),new Error("Failed to delete submission")}async getSubmissionStats(){const{data:t,error:r}=await G.from("user_submitted_compliances").select("status");if(r)throw console.error("Error fetching submission stats:",r),new Error("Failed to fetch submission statistics");return{total:t.length,pending:t.filter(s=>s.status==="pending").length,approved:t.filter(s=>s.status==="approved").length,rejected:t.filter(s=>s.status==="rejected").length,under_review:t.filter(s=>s.status==="under_review").length}}}const Ph=new iee,oee=({currentUser:e,onSuccess:t,onCancel:r})=>{const[a,s]=_.useState({company_name:"",company_type:"",operation_type:"parent",country_code:"",country_name:"",ca_type:"",cs_type:"",compliance_name:"",compliance_description:"",frequency:"annual",verification_required:"both",justification:"",supporting_documents:[],regulatory_reference:""}),[i,l]=_.useState(!1),[u,d]=_.useState(null),[f,m]=_.useState(!1),g=j=>{const{name:b,value:S}=j.target;s(A=>({...A,[b]:S}))},v=async j=>{j.preventDefault();try{if(l(!0),d(null),!a.company_name||!a.company_type||!a.compliance_name)throw new Error("Please fill in all required fields");await Ph.submitCompliance(a),m(!0),t&&t()}catch(b){console.error("Error submitting compliance:",b),d(b instanceof Error?b.message:"Failed to submit compliance")}finally{l(!1)}},x=()=>{s({company_name:"",company_type:"",operation_type:"parent",country_code:"",country_name:"",ca_type:"",cs_type:"",compliance_name:"",compliance_description:"",frequency:"annual",verification_required:"both",justification:"",supporting_documents:[],regulatory_reference:""}),d(null),m(!1)};return f?n.jsx("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:n.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Compliance Submitted Successfully!"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Your compliance submission has been received and is pending admin review. You will be notified once it's been reviewed."}),n.jsxs("div",{className:"flex justify-center space-x-3",children:[n.jsx("button",{onClick:x,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Submit Another"}),r&&n.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Close"})]})]})}):n.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Submit New Compliance"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Submit a new compliance requirement for your company's parent operations, subsidiaries, or international operations."})]}),u&&n.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:u}),n.jsxs("form",{onSubmit:v,className:"space-y-6",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Company Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name *"}),n.jsx("input",{type:"text",name:"company_name",value:a.company_name,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter company name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Type *"}),n.jsx("input",{type:"text",name:"company_type",value:a.company_type,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Private Limited Company"})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Operation Type *"}),n.jsxs("select",{name:"operation_type",value:a.operation_type,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"parent",children:"Parent Company"}),n.jsx("option",{value:"subsidiary",children:"Subsidiary"}),n.jsx("option",{value:"international",children:"International Operations"})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Location Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country Code *"}),n.jsx("input",{type:"text",name:"country_code",value:a.country_code,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., IN, US, UK",maxLength:10})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country Name *"}),n.jsx("input",{type:"text",name:"country_name",value:a.country_name,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., India, United States"})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Professional Types"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CA Type"}),n.jsx("input",{type:"text",name:"ca_type",value:a.ca_type,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Chartered Accountant"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CS Type"}),n.jsx("input",{type:"text",name:"cs_type",value:a.cs_type,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Company Secretary"})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Compliance Details"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compliance Name *"}),n.jsx("input",{type:"text",name:"compliance_name",value:a.compliance_name,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Annual Return Filing"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compliance Description"}),n.jsx("textarea",{name:"compliance_description",value:a.compliance_description,onChange:g,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe the compliance requirement..."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frequency *"}),n.jsxs("select",{name:"frequency",value:a.frequency,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"first-year",children:"First Year"}),n.jsx("option",{value:"monthly",children:"Monthly"}),n.jsx("option",{value:"quarterly",children:"Quarterly"}),n.jsx("option",{value:"annual",children:"Annual"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Required *"}),n.jsxs("select",{name:"verification_required",value:a.verification_required,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"CA",children:"CA"}),n.jsx("option",{value:"CS",children:"CS"}),n.jsx("option",{value:"both",children:"Both"})]})]})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Justification"}),n.jsx("textarea",{name:"justification",value:a.justification,onChange:g,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Explain why this compliance is needed..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Regulatory Reference"}),n.jsx("input",{type:"text",name:"regulatory_reference",value:a.regulatory_reference,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Section 92 of Companies Act, 2013"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[r&&n.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),n.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Reset"}),n.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:i?"Submitting...":"Submit Compliance"})]})]})]})},H_=({currentUser:e,userRole:t,className:r=""})=>{const[a,s]=_.useState(!1),i=()=>{switch(t){case"Startup":return"Submit New Compliance";case"CA":return"Add Compliance Rule";case"CS":return"Add Compliance Rule";default:return"Submit Compliance"}},l=()=>{switch(t){case"Startup":return"Submit compliance requirements for your company's parent operations, subsidiaries, or international operations";case"CA":return"Add new compliance rules based on your professional expertise for parent companies, subsidiaries, or international operations";case"CS":return"Add new compliance rules based on your professional expertise for parent companies, subsidiaries, or international operations";default:return"Submit new compliance requirements"}};return a?n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:n.jsx("div",{className:"relative top-4 mx-auto p-5 w-full max-w-4xl",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg",children:[n.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:i()}),n.jsx("button",{onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsx("div",{className:"p-6",children:n.jsx(oee,{currentUser:e,onSuccess:()=>{s(!1)},onCancel:()=>s(!1)})})]})})}):n.jsx("div",{className:`bg-white rounded-lg shadow border p-6 ${r}`,children:n.jsxs("div",{className:"flex items-start space-x-4",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx(vn,{className:"w-6 h-6 text-blue-600"})})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:i()}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:l()}),n.jsxs("button",{onClick:()=>s(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[n.jsx(zi,{className:"w-4 h-4 mr-2"}),i()]})]})]})})};class lee{async getIPTrademarkRecords(t){try{const{data:r,error:a}=await G.from("ip_trademark_records").select(`
                    *,
                    documents:ip_trademark_documents(*)
                `).eq("startup_id",t).order("created_at",{ascending:!1});if(a)throw console.error("Error fetching IP/trademark records:",a),a;return r||[]}catch(r){throw console.error("Error in getIPTrademarkRecords:",r),r}}async getIPTrademarkRecord(t){try{const{data:r,error:a}=await G.from("ip_trademark_records").select(`
                    *,
                    documents:ip_trademark_documents(*)
                `).eq("id",t).single();if(a)throw console.error("Error fetching IP/trademark record:",a),a;return r}catch(r){throw console.error("Error in getIPTrademarkRecord:",r),r}}async createIPTrademarkRecord(t,r){try{const{data:a,error:s}=await G.from("ip_trademark_records").insert({startup_id:t,type:r.type,name:r.name,description:r.description,registration_number:r.registrationNumber,registration_date:r.registrationDate,expiry_date:r.expiryDate,jurisdiction:r.jurisdiction,status:r.status||sl.Active,owner:r.owner,filing_date:r.filingDate,priority_date:r.priorityDate,renewal_date:r.renewalDate,estimated_value:r.estimatedValue,notes:r.notes}).select().single();if(s)throw console.error("Error creating IP/trademark record:",s),s;return a}catch(a){throw console.error("Error in createIPTrademarkRecord:",a),a}}async updateIPTrademarkRecord(t,r){try{const a={};r.type!==void 0&&(a.type=r.type),r.name!==void 0&&(a.name=r.name),r.description!==void 0&&(a.description=r.description),r.registrationNumber!==void 0&&(a.registration_number=r.registrationNumber),r.registrationDate!==void 0&&(a.registration_date=r.registrationDate),r.expiryDate!==void 0&&(a.expiry_date=r.expiryDate),r.jurisdiction!==void 0&&(a.jurisdiction=r.jurisdiction),r.status!==void 0&&(a.status=r.status),r.owner!==void 0&&(a.owner=r.owner),r.filingDate!==void 0&&(a.filing_date=r.filingDate),r.priorityDate!==void 0&&(a.priority_date=r.priorityDate),r.renewalDate!==void 0&&(a.renewal_date=r.renewalDate),r.estimatedValue!==void 0&&(a.estimated_value=r.estimatedValue),r.notes!==void 0&&(a.notes=r.notes);const{data:s,error:i}=await G.from("ip_trademark_records").update(a).eq("id",t).select().single();if(i)throw console.error("Error updating IP/trademark record:",i),i;return s}catch(a){throw console.error("Error in updateIPTrademarkRecord:",a),a}}async deleteIPTrademarkRecord(t){try{const{error:r}=await G.from("ip_trademark_records").delete().eq("id",t);if(r)throw console.error("Error deleting IP/trademark record:",r),r;return!0}catch(r){throw console.error("Error in deleteIPTrademarkRecord:",r),r}}async uploadIPTrademarkDocument(t,r,a,s){try{const i=r.name.split(".").pop(),u=`ip-trademark-documents/${`${t}_${Date.now()}.${i}`}`,{data:d,error:f}=await G.storage.from("compliance-documents").upload(u,r);if(f)throw console.error("Error uploading file:",f),f;const{data:m}=G.storage.from("compliance-documents").getPublicUrl(u),{data:g,error:v}=await G.from("ip_trademark_documents").insert({ip_record_id:t,file_name:r.name,file_url:m.publicUrl,file_type:r.type,file_size:r.size,document_type:a,uploaded_by:s}).select().single();if(v)throw console.error("Error saving document record:",v),v;return g}catch(i){throw console.error("Error in uploadIPTrademarkDocument:",i),i}}async deleteIPTrademarkDocument(t){try{const{data:r,error:a}=await G.from("ip_trademark_documents").select("file_url").eq("id",t).single();if(a)throw console.error("Error fetching document:",a),a;const i=new URL(r.file_url).pathname.split("/").slice(-2).join("/"),{error:l}=await G.storage.from("compliance-documents").remove([i]);l&&console.error("Error deleting file from storage:",l);const{error:u}=await G.from("ip_trademark_documents").delete().eq("id",t);if(u)throw console.error("Error deleting document record:",u),u;return!0}catch(r){throw console.error("Error in deleteIPTrademarkDocument:",r),r}}async getIPTrademarkDocuments(t){try{const{data:r,error:a}=await G.from("ip_trademark_documents").select("*").eq("ip_record_id",t).order("uploaded_at",{ascending:!1});if(a)throw console.error("Error fetching IP/trademark documents:",a),a;return r||[]}catch(r){throw console.error("Error in getIPTrademarkDocuments:",r),r}}async getIPTrademarkStats(t){try{const{data:r,error:a}=await G.from("ip_trademark_records").select("type, status, estimated_value").eq("startup_id",t);if(a)throw console.error("Error fetching IP/trademark stats:",a),a;const s={total:(r==null?void 0:r.length)||0,byType:{},byStatus:{},totalValue:0};return r==null||r.forEach(i=>{s.byType[i.type]=(s.byType[i.type]||0)+1,s.byStatus[i.status]=(s.byStatus[i.status]||0)+1,i.estimated_value&&(s.totalValue+=i.estimated_value)}),s}catch(r){throw console.error("Error in getIPTrademarkStats:",r),r}}}const Nh=new lee,cee=({startupId:e,currentUser:t,isViewOnly:r=!1})=>{const[a,s]=_.useState([]),[i,l]=_.useState(!0),[u,d]=_.useState(!1),[f,m]=_.useState(!1),[g,v]=_.useState(!1),[x,j]=_.useState(!1),[b,S]=_.useState(null),[A,E]=_.useState(null),[T,D]=_.useState(!1),[R,B]=_.useState(null),[U,I]=_.useState({type:Vl.Trademark,name:"",jurisdiction:"",status:sl.Active}),[F,pe]=_.useState(h2.RegistrationCertificate),L=_.useRef(null);_.useEffect(()=>{q()},[e]);const q=async()=>{try{l(!0);const P=await Nh.getIPTrademarkRecords(e);s(P)}catch(P){console.error("Error loading IP/trademark records:",P)}finally{l(!1)}},z=async()=>{try{await Nh.createIPTrademarkRecord(e,U),d(!1),I({type:Vl.Trademark,name:"",jurisdiction:"",status:sl.Active}),q()}catch(P){console.error("Error adding IP/trademark record:",P)}},V=async()=>{if(b)try{await Nh.updateIPTrademarkRecord(b.id,U),m(!1),S(null),q()}catch(P){console.error("Error updating IP/trademark record:",P)}},de=async()=>{if(R)try{await Nh.deleteIPTrademarkRecord(R),j(!1),B(null),q()}catch(P){console.error("Error deleting IP/trademark record:",P)}},se=async()=>{if(!(!A||!b))try{D(!0),await Nh.uploadIPTrademarkDocument(b.id,A,F,(t==null?void 0:t.email)||"Unknown"),v(!1),E(null),S(null),q()}catch(P){console.error("Error uploading document:",P)}finally{D(!1)}},fe=async P=>{try{await Nh.deleteIPTrademarkDocument(P),q()}catch(K){console.error("Error deleting document:",K)}},oe=P=>{S(P),I({type:P.type,name:P.name,description:P.description,registrationNumber:P.registrationNumber,registrationDate:P.registrationDate,expiryDate:P.expiryDate,jurisdiction:P.jurisdiction,status:P.status,owner:P.owner,filingDate:P.filingDate,priorityDate:P.priorityDate,renewalDate:P.renewalDate,estimatedValue:P.estimatedValue,notes:P.notes}),m(!0)},Se=P=>{S(P),v(!0)},Y=P=>{switch(P){case sl.Active:return"bg-green-100 text-green-800";case sl.Pending:return"bg-yellow-100 text-yellow-800";case sl.Expired:return"bg-red-100 text-red-800";case sl.Abandoned:return"bg-gray-100 text-gray-800";case sl.Cancelled:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ye=P=>{switch(P){case Vl.Trademark:return"bg-blue-100 text-blue-800";case Vl.Patent:return"bg-purple-100 text-purple-800";case Vl.Copyright:return"bg-green-100 text-green-800";case Vl.TradeSecret:return"bg-orange-100 text-orange-800";case Vl.DomainName:return"bg-cyan-100 text-cyan-800";default:return"bg-gray-100 text-gray-800"}};return i?n.jsx(et,{children:n.jsxs("div",{className:"p-6 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Loading IP/Trademark records..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Intellectual Property & Trademarks"}),!r&&n.jsxs(Oe,{onClick:()=>d(!0),className:"flex items-center gap-2",children:[n.jsx(zi,{className:"w-4 h-4"}),"Add IP/Trademark"]})]}),a.length===0?n.jsx(et,{children:n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(vn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No IP/Trademark Records"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Start by adding your intellectual property and trademark records."}),!r&&n.jsxs(Oe,{onClick:()=>d(!0),className:"flex items-center gap-2 mx-auto",children:[n.jsx(zi,{className:"w-4 h-4"}),"Add First Record"]})]})}):n.jsx("div",{className:"grid gap-4",children:a.map(P=>n.jsx(et,{children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:P.name}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ye(P.type)}`,children:P.type}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Y(P.status)}`,children:P.status})]}),P.description&&n.jsx("p",{className:"text-gray-600 mb-2",children:P.description}),n.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[P.registrationNumber&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(vn,{className:"w-4 h-4"}),n.jsxs("span",{children:["Reg. #",P.registrationNumber]})]}),P.jurisdiction&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(zp,{className:"w-4 h-4"}),n.jsx("span",{children:P.jurisdiction})]}),P.registrationDate&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Bp,{className:"w-4 h-4"}),n.jsxs("span",{children:["Reg: ",new Date(P.registrationDate).toLocaleDateString()]})]}),P.expiryDate&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Bp,{className:"w-4 h-4"}),n.jsxs("span",{children:["Exp: ",new Date(P.expiryDate).toLocaleDateString()]})]}),P.estimatedValue&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(No,{className:"w-4 h-4"}),n.jsxs("span",{children:["$",P.estimatedValue.toLocaleString()]})]}),P.owner&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(mm,{className:"w-4 h-4"}),n.jsx("span",{children:P.owner})]})]})]}),!r&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Oe,{variant:"secondary",size:"sm",onClick:()=>oe(P),children:n.jsx(Gl,{className:"w-4 h-4"})}),n.jsx(Oe,{variant:"secondary",size:"sm",onClick:()=>Se(P),children:n.jsx(_w,{className:"w-4 h-4"})}),n.jsx(Oe,{variant:"secondary",size:"sm",onClick:()=>{B(P.id),j(!0)},className:"text-red-600 hover:text-red-700",children:n.jsx(qa,{className:"w-4 h-4"})})]})]}),P.documents&&P.documents.length>0&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[n.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-2",children:"Documents"}),n.jsx("div",{className:"grid gap-2",children:P.documents.map(K=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(vn,{className:"w-4 h-4 text-gray-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:K.fileName}),n.jsxs("span",{className:"text-xs text-gray-500",children:["(",K.documentType,")"]})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(Oe,{variant:"secondary",size:"sm",onClick:()=>window.open(K.fileUrl,"_blank"),children:n.jsx(ru,{className:"w-4 h-4"})}),n.jsx(Oe,{variant:"secondary",size:"sm",onClick:()=>window.open(K.fileUrl,"_blank"),children:n.jsx(gi,{className:"w-4 h-4"})}),!r&&n.jsx(Oe,{variant:"secondary",size:"sm",onClick:()=>fe(K.id),className:"text-red-600 hover:text-red-700",children:n.jsx(qa,{className:"w-4 h-4"})})]})]},K.id))})]})]})},P.id))}),n.jsx(Yn,{isOpen:u,onClose:()=>d(!1),children:n.jsxs("div",{className:"p-6 max-h-[90vh] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[n.jsxs("div",{className:"sticky top-0 bg-white pb-4 border-b border-gray-200 mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Add IP/Trademark Record"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Fill in the details for your intellectual property or trademark"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),n.jsx("select",{value:U.type,onChange:P=>I(K=>({...K,type:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:Object.values(Vl).map(P=>n.jsx("option",{value:P,children:P},P))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("select",{value:U.status,onChange:P=>I(K=>({...K,status:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:Object.values(sl).map(P=>n.jsx("option",{value:P,children:P},P))})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),n.jsx("input",{type:"text",value:U.name,onChange:P=>I(K=>({...K,name:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"Enter IP/trademark name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jurisdiction *"}),n.jsx("input",{type:"text",value:U.jurisdiction,onChange:P=>I(K=>({...K,jurisdiction:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"e.g., United States, EU, etc."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{value:U.description||"",onChange:P=>I(K=>({...K,description:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:3,placeholder:"Enter description"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Number"}),n.jsx("input",{type:"text",value:U.registrationNumber||"",onChange:P=>I(K=>({...K,registrationNumber:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"Enter registration number"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Owner"}),n.jsx("input",{type:"text",value:U.owner||"",onChange:P=>I(K=>({...K,owner:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"Enter owner name"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Date"}),n.jsx("input",{type:"date",value:U.registrationDate||"",onChange:P=>I(K=>({...K,registrationDate:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),n.jsx("input",{type:"date",value:U.expiryDate||"",onChange:P=>I(K=>({...K,expiryDate:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Value"}),n.jsx("input",{type:"number",value:U.estimatedValue||"",onChange:P=>I(K=>({...K,estimatedValue:parseFloat(P.target.value)||void 0})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"0"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{value:U.notes||"",onChange:P=>I(K=>({...K,notes:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:2,placeholder:"Enter any additional notes"})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 sticky bottom-0 bg-white",children:[n.jsx(Oe,{variant:"secondary",onClick:()=>d(!1),children:"Cancel"}),n.jsx(Oe,{onClick:z,disabled:!U.name||!U.jurisdiction,children:"Add Record"})]})]})}),n.jsx(Yn,{isOpen:f,onClose:()=>m(!1),children:n.jsxs("div",{className:"p-6 max-h-[90vh] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[n.jsxs("div",{className:"sticky top-0 bg-white pb-4 border-b border-gray-200 mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Edit IP/Trademark Record"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Update the details for your intellectual property or trademark"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),n.jsx("select",{value:U.type,onChange:P=>I(K=>({...K,type:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:Object.values(Vl).map(P=>n.jsx("option",{value:P,children:P},P))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("select",{value:U.status,onChange:P=>I(K=>({...K,status:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:Object.values(sl).map(P=>n.jsx("option",{value:P,children:P},P))})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),n.jsx("input",{type:"text",value:U.name,onChange:P=>I(K=>({...K,name:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"Enter IP/trademark name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jurisdiction *"}),n.jsx("input",{type:"text",value:U.jurisdiction,onChange:P=>I(K=>({...K,jurisdiction:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"e.g., United States, EU, etc."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{value:U.description||"",onChange:P=>I(K=>({...K,description:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:3,placeholder:"Enter description"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Number"}),n.jsx("input",{type:"text",value:U.registrationNumber||"",onChange:P=>I(K=>({...K,registrationNumber:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"Enter registration number"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Owner"}),n.jsx("input",{type:"text",value:U.owner||"",onChange:P=>I(K=>({...K,owner:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"Enter owner name"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Date"}),n.jsx("input",{type:"date",value:U.registrationDate||"",onChange:P=>I(K=>({...K,registrationDate:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),n.jsx("input",{type:"date",value:U.expiryDate||"",onChange:P=>I(K=>({...K,expiryDate:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Value"}),n.jsx("input",{type:"number",value:U.estimatedValue||"",onChange:P=>I(K=>({...K,estimatedValue:parseFloat(P.target.value)||void 0})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"0"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{value:U.notes||"",onChange:P=>I(K=>({...K,notes:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:2,placeholder:"Enter any additional notes"})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 sticky bottom-0 bg-white",children:[n.jsx(Oe,{variant:"secondary",onClick:()=>m(!1),children:"Cancel"}),n.jsx(Oe,{onClick:V,disabled:!U.name||!U.jurisdiction,children:"Update Record"})]})]})}),n.jsx(Yn,{isOpen:g,onClose:()=>v(!1),children:n.jsxs("div",{className:"p-6 max-h-[90vh] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[n.jsxs("div",{className:"sticky top-0 bg-white pb-4 border-b border-gray-200 mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Upload Document"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Upload supporting documents for your IP/trademark record"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Document Type"}),n.jsx("select",{value:F,onChange:P=>pe(P.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:Object.values(h2).map(P=>n.jsx("option",{value:P,children:P},P))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select File"}),n.jsx("input",{ref:L,type:"file",onChange:P=>{var K;return E(((K=P.target.files)==null?void 0:K[0])||null)},className:"w-full border border-gray-300 rounded-md px-3 py-2",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png"})]}),A&&n.jsxs("div",{className:"p-3 bg-gray-50 rounded-md",children:[n.jsxs("p",{className:"text-sm text-gray-700",children:[n.jsx("strong",{children:"File:"})," ",A.name]}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Size: ",(A.size/1024/1024).toFixed(2)," MB"]})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 sticky bottom-0 bg-white",children:[n.jsx(Oe,{variant:"secondary",onClick:()=>v(!1),children:"Cancel"}),n.jsx(Oe,{onClick:se,disabled:T||!A,children:T?"Uploading...":"Upload Document"})]})]})}),n.jsx(Yn,{isOpen:x,onClose:()=>j(!1),children:n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx(tu,{className:"w-16 h-16 mx-auto"})}),n.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:"Confirm Deletion"}),n.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Are you sure you want to delete this IP/trademark record? This action cannot be undone."}),n.jsxs("div",{className:"flex justify-center gap-3",children:[n.jsx(Oe,{variant:"secondary",onClick:()=>j(!1),children:"Cancel"}),n.jsx(Oe,{onClick:de,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Record"})]})]})})})]})},K6=({status:e})=>{let t="",r=null;switch(e){case Ct.Verified:t="text-green-600",r=n.jsx(ua,{className:"w-4 h-4"});break;case Ct.Rejected:t="text-red-600",r=n.jsx(tu,{className:"w-4 h-4"});break;case Ct.Pending:t="text-yellow-600",r=n.jsx(Ux,{className:"w-4 h-4"});break;case Ct.NotRequired:t="text-gray-500";break;default:t="text-gray-600"}return n.jsxs("span",{className:`font-semibold ${t} flex items-center justify-center gap-1 w-full`,children:[r,e]})},uee=({startup:e,currentUser:t,onUpdateCompliance:r,isViewOnly:a=!1,allowCAEdit:s=!1})=>{console.log("🔍 ComplianceTab props:",{userRole:t==null?void 0:t.role,isViewOnly:a,allowCAEdit:s,startupId:e.id});const[i,l]=_.useState([]),[u,d]=_.useState(!0),[f,m]=_.useState(!1),[g,v]=_.useState(null),[x,j]=_.useState(!1),[b,S]=_.useState(null),[A,E]=_.useState(!1),[T,D]=_.useState(!1),[R,B]=_.useState(null),[U,I]=_.useState({entity:"all",year:"all"}),F=_.useRef(null),pe=_.useRef(!1),L=_.useRef(null);_.useEffect(()=>{q()},[e.id,e.country_of_registration,e.company_type,e.registration_date]),_.useEffect(()=>{const ee=JSON.stringify({country:e.country_of_registration||null,companyType:e.company_type||null,registrationDate:e.registration_date||null});L.current!==ee&&!pe.current&&(pe.current=!0,console.log("🔍 Entity-defining fields changed, syncing compliance tasks..."),Wd.syncComplianceTasksWithComprehensiveRules(e.id).finally(()=>{L.current=ee,pe.current=!1,q()}))},[e.country_of_registration,e.company_type,e.registration_date,e.id]),_.useEffect(()=>()=>{},[e.id]),_.useEffect(()=>{const ee=G.channel("compliance_rules_changes").on("postgres_changes",{event:"*",schema:"public",table:"compliance_rules_comprehensive"},async()=>{try{console.log("🔁 Detected compliance_rules_comprehensive change. Resyncing tasks for startup",e.id),await Wd.syncComplianceTasksWithComprehensiveRules(e.id),await q()}catch(me){console.warn("Failed to resync after rules change",me)}}).subscribe();return()=>{ee.unsubscribe()}},[e.id]);const q=async()=>{try{d(!0),console.log("🔄 Force regenerating compliance tasks with correct years..."),await Wd.forceRegenerateComplianceTasks(e.id);const ee=await Wd.getComplianceTasksForStartup(e.id);console.log("🔍 Loaded integrated compliance data:",ee),l(ee),await z(ee)}catch(ee){console.error("Error loading compliance data:",ee),l([])}finally{d(!1)}},z=async ee=>{try{if(!ee||ee.length===0)return;let me=!1,ke=!1,Ae=!1,xe=!0;for(const Z of ee){const te=!!Z.caRequired,re=!!Z.csRequired,$=Z.caStatus,ne=Z.csStatus;te&&$===Ct.Rejected&&(me=!0,Ae=!0),re&&ne===Ct.Rejected&&(me=!0,ke=!0),(t==null?void 0:t.role)==="CA"?te&&$!==Ct.Verified&&(xe=!1):(t==null?void 0:t.role)==="CS"?re&&ne!==Ct.Verified&&(xe=!1):(te&&$!==Ct.Verified||re&&ne!==Ct.Verified)&&(xe=!1)}let De;if((t==null?void 0:t.role)==="CS"?De=ke?Ct.NonCompliant:xe?Ct.Compliant:Ct.Pending:(t==null?void 0:t.role)==="CA"?De=Ae?Ct.NonCompliant:xe?Ct.Compliant:Ct.Pending:De=me?Ct.NonCompliant:xe?Ct.Compliant:Ct.Pending,(e.complianceStatus||Ct.Pending)===De)return;try{await G.from("startups").update({compliance_status:De}).eq("id",e.id)}catch(Z){console.warn("Failed to update overall startup compliance (non-blocking):",Z)}}catch(me){console.warn("syncOverallComplianceStatus error:",me)}},V=(ee,me)=>{const ke={country:e.country_of_registration,companyType:e.company_type,registrationDate:e.registration_date},Ae=W=>{var be,Ce,ze,Pe,we,ae,qe;if(W==="parent")return{caCode:((be=ke.ca)==null?void 0:be.code)||ke.caServiceCode,csCode:((Ce=ke.cs)==null?void 0:Ce.code)||ke.csServiceCode};if(W.startsWith("sub-")){const ft=parseInt(W.split("-")[1]||"0",10),Et=(ze=ke.subsidiaries)==null?void 0:ze[ft];return{caCode:((Pe=Et==null?void 0:Et.ca)==null?void 0:Pe.code)||(Et==null?void 0:Et.caCode),csCode:((we=Et==null?void 0:Et.cs)==null?void 0:we.code)||(Et==null?void 0:Et.csCode)}}return W.startsWith("intl-")?{caCode:((ae=ke.ca)==null?void 0:ae.code)||ke.caServiceCode,csCode:((qe=ke.cs)==null?void 0:qe.code)||ke.csServiceCode}:{}},{caCode:xe,csCode:De}=Ae(ee.entityIdentifier);((t==null?void 0:t.serviceCode)||(t==null?void 0:t.ca_code)||(t==null?void 0:t.cs_code)||"").toString().toLowerCase();const ve=(t==null?void 0:t.role)==="CA"&&me==="ca",Z=(t==null?void 0:t.role)==="CS"&&me==="cs";console.log("🔍 Verification cell check",{type:me,userRole:t==null?void 0:t.role,canEditCA:ve,canEditCS:Z,allowCAEdit:s,willShowDropdown:ve&&s||Z&&s});const te=i.find(W=>W.taskId===ee.taskId),re=te?me==="ca"?te.caStatus:te.csStatus:Ct.Pending,$=me==="ca"?ee.caRequired:ee.csRequired;console.log("🔍 Task requirement check:",{taskId:ee.taskId,type:me,isRequired:$,caRequired:ee.caRequired,csRequired:ee.csRequired});const ne=ve&&s||Z&&s;return console.log("🔍 Dropdown decision:",{shouldShowDropdown:ne,canEditCA:ve,canEditCS:Z,allowCAEdit:s,type:me,userRole:t==null?void 0:t.role}),ne?(console.log("🔍 Showing dropdown for",me,"column"),n.jsxs("select",{value:re,onChange:async W=>{const be=W.target.value;console.log("Updating compliance status:",{startupId:e.id,taskId:ee.taskId,type:me,newStatus:be,user:t==null?void 0:t.email}),l(Ce=>Ce.map(ze=>ze.taskId===ee.taskId?{...ze,[me==="ca"?"caStatus":"csStatus"]:be}:ze)),r&&r(e.id,ee.taskId,me,be);try{await Wd.updateComplianceStatus(e.id,ee.taskId,be,me.toUpperCase());const Ce=i.map(ze=>ze.taskId===ee.taskId?{...ze,[me==="ca"?"caStatus":"csStatus"]:be}:ze);await z(Ce)}catch(Ce){console.error("Error updating compliance status:",Ce),l(ze=>ze.map(Pe=>Pe.taskId===ee.taskId?{...Pe,[me==="ca"?"caStatus":"csStatus"]:re}:Pe))}},className:"bg-white border border-gray-300 rounded-md px-2 py-1 text-xs focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:Ct.Pending,children:"Pending"}),n.jsx("option",{value:Ct.Verified,children:"Verified"}),n.jsx("option",{value:Ct.Rejected,children:"Rejected"})]})):(console.log("🔍 Showing static display for",me,"column with status:",re,"isRequired:",$,"task:",ee.task,"caRequired:",ee.caRequired,"csRequired:",ee.csRequired),$?(console.log("🔍 Task required for",me,"- showing status:",re),n.jsx(K6,{status:re})):(console.log("🔍 Task not required for",me,"- showing NotRequired"),n.jsx(K6,{status:Ct.NotRequired})))},de=ee=>{v(ee),S(null),E(!1),m(!0)},se=ee=>{S(ee),E(!1)},fe=async()=>{if(!(!g||!t||!b))try{j(!0);const ee=await Wd.uploadComplianceDocument(e.id,g.taskId,b,t.email||"unknown");ee?(console.log("Upload successful:",ee),E(!0),S(null),q(),setTimeout(()=>{m(!1),v(null),E(!1)},2e3)):alert("Upload failed. Please check if the database tables are set up correctly.")}catch(ee){console.error("Error uploading file:",ee),alert("Error uploading file. Please try again.")}finally{j(!1)}},oe=async ee=>{t&&(B(ee),D(!0))},Se=async()=>{if(R)try{await Wd.deleteComplianceUpload(R)?(console.log("Delete successful"),q()):alert("Delete failed. Please try again.")}catch(ee){console.error("Delete error:",ee),alert("Delete failed. Please try again.")}finally{D(!1),B(null)}},Y=_.useMemo(()=>ee=>{const me=i.find(ke=>ke.taskId===ee);return(me==null?void 0:me.uploads)||[]},[i]),ye=(t==null?void 0:t.role)==="Startup"||(t==null?void 0:t.role)==="Admin",P=_.useMemo(()=>{if(!i||i.length===0)return{};const ee={},me=new Set;e.country_of_registration&&me.add(`Parent Company (${e.country_of_registration})`);for(const ke of i)me.size>0&&!me.has(ke.entityDisplayName)||(ee[ke.entityDisplayName]||(ee[ke.entityDisplayName]=[]),ee[ke.entityDisplayName].push({entityIdentifier:ke.entityIdentifier,entityDisplayName:ke.entityDisplayName,year:ke.year,task:ke.task,taskId:ke.taskId,caRequired:ke.caRequired,csRequired:ke.csRequired,caStatus:ke.caStatus,csStatus:ke.csStatus,uploads:ke.uploads,complianceRule:ke.complianceRule,frequency:ke.frequency,complianceDescription:ke.complianceDescription,caType:ke.caType,csType:ke.csType}));return Object.values(ee).forEach(ke=>{ke.sort((Ae,xe)=>xe.year-Ae.year||Ae.task.localeCompare(xe.task))}),ee},[i,e.country_of_registration]),K=_.useMemo(()=>P,[P]),le=_.useMemo(()=>U.entity==="all"&&U.year==="all"?K:Object.fromEntries(Object.entries(K).map(([ee,me])=>[ee,me.filter(ke=>(U.entity==="all"||ee.includes(U.entity))&&(U.year==="all"||ke.year===parseInt(U.year)))]).filter(([ee,me])=>me.length>0)),[K,U]);return u?n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),n.jsx("div",{className:"space-y-4",children:[1,2,3].map(ee=>n.jsx("div",{className:"h-32 bg-gray-200 rounded"},ee))})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-2xl font-semibold text-slate-700",children:"Compliance Checklist"}),!a&&(t==null?void 0:t.role)==="Startup"&&n.jsx(H_,{currentUser:t,userRole:"Startup",className:"mb-0"})]}),n.jsx("div",{className:"flex justify-end items-center",children:n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("select",{value:U.entity,onChange:ee=>I(me=>({...me,entity:ee.target.value})),className:"bg-white border border-gray-300 rounded-md px-3 py-1 text-sm",children:[n.jsx("option",{value:"all",children:"All Entities"}),Object.keys(K).map(ee=>n.jsx("option",{value:ee,children:ee},ee))]}),n.jsxs("select",{value:U.year,onChange:ee=>I(me=>({...me,year:ee.target.value})),className:"bg-white border border-gray-300 rounded-md px-3 py-1 text-sm",children:[n.jsx("option",{value:"all",children:"All Years"}),Array.from(new Set(Object.values(K).flat().map(ee=>ee.year))).sort((ee,me)=>me-ee).map(ee=>n.jsx("option",{value:ee,children:ee},ee))]})]})}),Object.keys(le).length>0?Object.entries(le).map(([ee,me])=>{const ke=ee.match(/\(([A-Z]{2})\)/),Ae=ke?ke[1]:"US",xe=KL(Ae);return n.jsxs(et,{children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-700 mb-4",children:ee}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-left border-collapse",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 uppercase tracking-wider text-center w-20",children:"Year"}),n.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 uppercase tracking-wider text-left w-48",children:"Task"}),n.jsxs("th",{className:"p-4 text-sm font-semibold text-slate-600 uppercase tracking-wider text-center w-32",children:[xe.caTitle," Verified"]}),n.jsxs("th",{className:"p-4 text-sm font-semibold text-slate-600 uppercase tracking-wider text-center w-32",children:[xe.csTitle," Verified"]}),n.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 uppercase tracking-wider text-center w-32",children:"Action"})]})}),n.jsx("tbody",{className:"divide-y divide-slate-200 align-middle",children:me.map(De=>{console.log("🔍 Rendering task:",{taskId:De.taskId,task:De.task,caRequired:De.caRequired,csRequired:De.csRequired});const ve=Y(De.taskId);return n.jsxs("tr",{className:"hover:bg-slate-50 transition-colors h-16",children:[n.jsx("td",{className:"p-4 whitespace-nowrap text-slate-600 text-center align-middle w-20",children:De.year}),n.jsx("td",{className:"p-4 whitespace-normal text-slate-900 font-medium text-left align-middle w-48",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:De.task}),De.complianceRule&&n.jsxs("div",{className:"text-xs text-gray-500 mt-1 space-y-1",children:[De.frequency&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Bp,{className:"w-3 h-3"}),n.jsx("span",{className:"capitalize",children:De.frequency.replace("-"," ")})]}),De.complianceDescription&&n.jsxs("div",{className:"flex items-start gap-1",children:[n.jsx(vn,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:De.complianceDescription})]}),(De.caType||De.csType)&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(mm,{className:"w-3 h-3"}),n.jsx("span",{className:"text-xs",children:De.caType&&De.csType?`${De.caType} / ${De.csType}`:De.caType||De.csType})]})]})]})}),n.jsx("td",{className:"p-4 whitespace-nowrap text-slate-600 text-center align-middle w-32",children:V(De,"ca")}),n.jsx("td",{className:"p-4 whitespace-nowrap text-slate-600 text-center align-middle w-32",children:V(De,"cs")}),n.jsx("td",{className:"p-4 whitespace-nowrap text-center align-middle w-32",children:n.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[ve.length>0&&n.jsxs("button",{onClick:()=>window.open(ve[0].fileUrl,"_blank"),className:"px-3 py-2 rounded-md font-semibold transition-colors flex items-center gap-2 text-xs bg-green-100 text-green-700 hover:bg-green-200",title:"View document",children:[n.jsx(ru,{size:14}),"View"]}),ye&&ve.length===0&&n.jsxs("button",{onClick:()=>de(De),className:"px-3 py-2 rounded-md font-semibold transition-colors flex items-center gap-2 text-xs bg-blue-100 text-blue-700 hover:bg-blue-200",title:"Upload document",children:[n.jsx(q1,{size:14}),"Upload"]}),ye&&ve.length>0&&n.jsxs("button",{onClick:()=>oe(ve[0].id),className:"px-3 py-2 rounded-md font-semibold transition-colors flex items-center gap-2 text-xs bg-red-100 text-red-700 hover:bg-red-200",title:"Delete document",children:[n.jsx(qa,{size:14}),"Delete"]})]})})]},De.taskId)})})]})})]},ee)}):n.jsx(et,{children:n.jsx("div",{className:"p-8 text-center text-slate-500",children:!e.country_of_registration||!e.company_type||!e.registration_date?n.jsxs("div",{children:[n.jsx("p",{className:"text-lg font-semibold mb-2",children:"No Profile Data"}),n.jsx("p",{children:"Please complete your startup profile first to generate compliance tasks."}),n.jsx("p",{className:"text-sm mt-2",children:"Go to the Profile tab and set your country, company type, and registration date."}),n.jsxs("p",{className:"text-sm mt-2 text-blue-600",children:["Debug Info: Country: ",e.country_of_registration||"Not set"," | Type: ",e.company_type||"Not set"," | Date: ",e.registration_date||"Not set"]})]}):i.length===0?n.jsxs("div",{children:[n.jsx("p",{className:"text-lg font-semibold mb-2",children:"No Compliance Tasks Found"}),n.jsx("p",{children:"Tasks are driven by admin-defined rules. Once rules exist for your profile's country and company type, they will appear here automatically."}),n.jsxs("p",{className:"text-sm mt-2",children:["Country: ",n.jsx("span",{className:"font-medium",children:e.country_of_registration})," | Company Type: ",n.jsx("span",{className:"font-medium",children:e.company_type})," | Registration: ",n.jsx("span",{className:"font-medium",children:e.registration_date})]}),n.jsx("p",{className:"text-sm mt-2 text-gray-500",children:"If this seems incorrect, please contact the administrator to configure compliance rules in the Admin → Compliance Rules tab."})]}):null})}),n.jsx(Yn,{isOpen:f,onClose:()=>m(!1),children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Upload Compliance Document"}),n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Task: ",g==null?void 0:g.task," (",g==null?void 0:g.year,")"]}),A?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"text-green-600 mb-4",children:n.jsx(ua,{className:"w-16 h-16 mx-auto"})}),n.jsx("h4",{className:"text-lg font-semibold text-green-600 mb-2",children:"Upload Successful!"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Your document has been uploaded successfully."}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This window will close automatically..."})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[n.jsx("input",{ref:F,type:"file",accept:".pdf",onChange:ee=>{var ke;const me=(ke=ee.target.files)==null?void 0:ke[0];if(me){if(me.type!=="application/pdf"){alert("Please select a PDF file only.");return}se(me)}},className:"hidden"}),b?n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[n.jsx(q1,{className:"w-5 h-5 text-blue-600"}),n.jsx("span",{className:"font-medium",children:b.name})]}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Size: ",(b.size/1024/1024).toFixed(2)," MB"]}),n.jsx("button",{onClick:()=>se(null),className:"text-red-600 text-xs hover:text-red-800",children:"Remove file"})]}):n.jsxs("div",{className:"space-y-2",children:[n.jsx(q1,{className:"w-8 h-8 text-gray-400 mx-auto"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Click to select a PDF file"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Only PDF files are accepted"}),n.jsx("button",{onClick:()=>{var ee;return(ee=F.current)==null?void 0:ee.click()},className:"bg-blue-100 text-blue-700 px-4 py-2 rounded-md text-sm hover:bg-blue-200 transition-colors",children:"Choose File"})]})]}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx(Oe,{variant:"secondary",onClick:()=>{m(!1),S(null),E(!1)},disabled:x,children:"Cancel"}),n.jsx(Oe,{onClick:fe,disabled:x||!b,className:b?"":"opacity-50 cursor-not-allowed",children:x?"Uploading...":"Upload Document"})]})]})]})}),n.jsx(Yn,{isOpen:T,onClose:()=>D(!1),children:n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx(tu,{className:"w-16 h-16 mx-auto"})}),n.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:"Confirm Deletion"}),n.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Are you sure you want to delete this document? This action cannot be undone."}),n.jsxs("div",{className:"flex justify-center gap-3",children:[n.jsx(Oe,{variant:"secondary",onClick:()=>D(!1),children:"Cancel"}),n.jsx(Oe,{onClick:Se,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Document"})]})]})})}),n.jsx(cee,{startupId:e.id,currentUser:t,isViewOnly:a})]})},wo=({label:e,id:t,children:r,containerClassName:a="",...s})=>n.jsxs("div",{className:a,children:[n.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-slate-700 mb-1",children:e}),n.jsx("select",{id:t,className:"block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-brand-primary focus:border-brand-primary sm:text-sm disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 disabled:shadow-none",...s,children:r})]}),dee=({label:e,id:t,name:r,value:a,onChange:s,required:i=!1,disabled:l=!1,className:u="",placeholder:d,allowFuture:f=!1,fieldName:m,maxYearsPast:g=50,error:v})=>{const x=f?void 0:V6(),j=!!v;return n.jsxs("div",{className:"space-y-1",children:[n.jsxs("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700",children:[e,i&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsx("input",{type:"date",id:t,name:r,value:a,onChange:s,max:x,required:i,disabled:l,placeholder:d,className:`
          w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent
          ${j?"border-red-300 bg-red-50 focus:ring-red-500":"border-gray-300 focus:border-blue-500"}
          ${l?"bg-gray-100 cursor-not-allowed":"bg-white"}
          ${u}
        `}),j&&n.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),v]}),!f&&!j&&n.jsxs("p",{className:"text-xs text-gray-500",children:["Maximum allowed date: ",V6()]})]})},D0=["#1e40af","#1d4ed8","#3b82f6","#16a34a","#dc2626","#ea580c","#7c3aed","#059669","#d97706","#be123c"],fee=({startup:e,userRole:t,isViewOnly:r=!1})=>{const a=Lv(e),[s,i]=_.useState({entity:"all",year:"all"}),[l,u]=_.useState([]),[d,f]=_.useState([]),[m,g]=_.useState([]),[v,x]=_.useState([]),[j,b]=_.useState([]),[S,A]=_.useState(null),[E,T]=_.useState([]),[D,R]=_.useState([]),[B,U]=_.useState([]),[I,F]=_.useState([]),[pe,L]=_.useState(!0),[q,z]=_.useState(!1),[V,de]=_.useState(null),[se,fe]=_.useState(!1),[oe,Se]=_.useState(null),[Y,ye]=_.useState({date:"",entity:"Parent Company",description:"",vertical:"",amount:"",cogs:"",fundingSource:"Revenue",attachment:null}),[P,K]=_.useState("expense"),le=(t==="Startup"||t==="Admin")&&!r;_.useEffect(()=>{ee()},[e.id,s]);const ee=async()=>{try{L(!0),de(null);const te=s.year==="all"?new Date().getFullYear():s.year||new Date().getFullYear();console.log("🔄 Loading financial data for startup:",e.id,"year:",te,"filter year:",s.year),console.log("🏢 Startup object:",e);const[re,$,ne,W,be,Ce,ze,Pe,we,ae]=await Promise.all([os.getMonthlyFinancialData(e.id,te),os.getRevenueByVertical(e.id,te),os.getExpensesByVertical(e.id,te),os.getExpenses(e.id,s),os.getRevenues(e.id,s),os.getFinancialSummary(e.id),os.getEntities(e.id),os.getVerticals(e.id),os.getAvailableYears(e.id),ha.getInvestmentRecords(e.id)]);console.log("📊 Financial data loaded:",{startupId:e.id,monthlyDataCount:re.length,expensesCount:W.length,revenuesCount:be.length,summary:Ce,entitiesCount:ze.length,verticalsCount:Pe.length,investmentRecordsCount:ae.length}),console.log("🔍 Detailed data check:",{expenses:W,revenues:be,summary:Ce,filters:s}),console.log("📋 Actual expenses loaded:",W.map(Ie=>({id:Ie.id,date:Ie.date,description:Ie.description,amount:Ie.amount,vertical:Ie.vertical,entity:Ie.entity}))),console.log("🔍 Filter analysis:",{currentYear:s.year,currentEntity:s.entity,formDate:Y.date,formEntity:Y.entity,formVertical:Y.vertical,yearMatch:s.year===new Date(Y.date).getFullYear(),entityMatch:s.entity==="all"||s.entity===Y.entity}),console.log("📊 Chart data received:",{monthlyData:re,revenueByVertical:$,expensesByVertical:ne,expensesCount:W.length,revenuesCount:be.length});const qe=re||[],ft=$||[],Et=ne||[];console.log("📊 Final chart data:",{monthlyData:qe,revenueByVertical:ft,expensesByVertical:Et}),u(qe),f(ft),g(Et),x(W),b(be),A(Ce),T(ze),R(Pe);const Bt=new Date(e.registrationDate).getFullYear(),vt=new Date().getFullYear(),ht=["all"];for(let Ie=vt;Ie>=Bt;Ie--)ht.push(Ie);U(ht),console.log("✅ State updated with:",{expensesState:W.length,revenuesState:be.length,summaryState:Ce});const Dt=["Revenue"];ae.forEach(Ie=>{Dt.push(Ie.investorName)}),F(Dt),console.log("💰 Funding Sources Created:",{totalInvestors:ae.length,fundingSources:Dt,sampleInvestors:ae.slice(0,3).map(Ie=>Ie.investorName)})}catch(te){console.error("❌ Error loading financial data:",te),de("Failed to load financial data. Please try again.")}finally{L(!1)}},me=te=>{const{name:re,value:$}=te.target;ye(ne=>({...ne,[re]:re==="amount"||re==="cogs"?parseFloat($)||0:$}))},ke=async te=>{if(te.preventDefault(),!le){console.log("❌ Cannot edit - user role issue");return}if(console.log("🔍 Starting handleSubmit with form data:",Y),console.log("🏢 Startup ID being used:",e.id),!Y.date||!Y.description||!Y.vertical||!Y.amount){console.log("❌ Form validation failed:",{date:Y.date,description:Y.description,vertical:Y.vertical,amount:Y.amount}),de("Please fill in all required fields.");return}try{z(!0),de(null);let re="";if(Y.attachment){console.log("📎 Uploading attachment:",Y.attachment.name);try{re=await os.uploadAttachment(Y.attachment,e.id),console.log("📎 Attachment uploaded, URL:",re)}catch(W){console.error("❌ Attachment upload failed:",W),de("Failed to upload attachment. Please try again.");return}}const $={startup_id:e.id,record_type:P,date:Y.date,entity:Y.entity,description:Y.description,vertical:Y.vertical,amount:parseFloat(Y.amount.toString()),funding_source:Y.fundingSource,cogs:P==="revenue"&&parseFloat(Y.cogs.toString())||0,attachment_url:re};console.log("💰 Adding financial record:",$);const ne=await os.addFinancialRecord($);console.log("✅ Record added successfully:",ne),ye({date:"",entity:"Parent Company",description:"",vertical:"",amount:"",cogs:"",fundingSource:"Revenue",attachment:null}),console.log("🔄 Reloading financial data..."),setTimeout(async()=>{await ee(),await Z();const W=await os.getExpenses(e.id,s);console.log("🔍 Debug: Expense records after adding:",W),console.log("🔍 Debug: Expense verticals:",W.map(be=>({vertical:be.vertical,amount:be.amount}))),console.log("✅ Financial data reloaded successfully")},500)}catch(re){console.error("❌ Error adding record:",re),console.error("❌ Error details:",{message:re.message,code:re.code,details:re.details,hint:re.hint}),de(`Failed to add ${P}: ${re.message}`)}finally{z(!1)}},Ae=async(te,re,$)=>{le&&(Se({id:te,type:re,description:$}),fe(!0))},xe=async()=>{if(oe)try{de(null),await os.deleteFinancialRecord(oe.id),await ee(),fe(!1),Se(null)}catch(te){console.error(`Error deleting ${oe.type}:`,te),de(`Failed to delete ${oe.type}. Please try again.`),fe(!1),Se(null)}},De=()=>{fe(!1),Se(null)},ve=async te=>{try{const re=await os.getAttachmentDownloadUrl(te);window.open(re,"_blank")}catch(re){console.error("Error downloading attachment:",re),de("Failed to download attachment. Please try again.")}},Z=async()=>{try{const te=s.year==="all"?new Date().getFullYear():s.year||new Date().getFullYear(),re={year:te};s.entity!=="all"&&(re.entity=s.entity);const $=await os.getFinancialRecords(e.id,re);console.log("🔍 All records for chart calculation:",$);const ne={};for(let we=1;we<=12;we++){const ae=new Date(te,we-1,1).toLocaleDateString("en-US",{month:"short"});ne[ae]={revenue:0,expenses:0}}$.forEach(we=>{const ae=new Date(we.date).toLocaleDateString("en-US",{month:"short"});we.record_type==="revenue"?ne[ae].revenue+=we.amount:ne[ae].expenses+=we.amount});const W=Object.entries(ne).map(([we,ae])=>({month_name:we,revenue:ae.revenue,expenses:ae.expenses})),be={},Ce={};$.forEach(we=>{console.log("🔍 Processing record:",{id:we.id,type:we.record_type,vertical:we.vertical,amount:we.amount}),we.record_type==="revenue"?be[we.vertical]=(be[we.vertical]||0)+we.amount:we.record_type==="expense"&&(Ce[we.vertical]=(Ce[we.vertical]||0)+we.amount)}),console.log("🔍 Vertical totals before processing:",{revenueByVertical:be,expensesByVertical:Ce});const ze=Object.entries(be).map(([we,ae])=>({name:we,value:ae})).sort((we,ae)=>ae.value-we.value),Pe=Object.entries(Ce).map(([we,ae])=>({name:we,value:ae})).sort((we,ae)=>ae.value-we.value);console.log("📊 Manual chart calculation:",{monthlyData:W,revenueByVertical:ze,expensesByVertical:Pe}),console.log("🔍 Setting chart data:",{monthlyData:W.length,revenueByVertical:ze.length,expensesByVertical:Pe.length,expensesByVerticalData:Pe}),u(W),f(ze),g(Pe)}catch(te){console.error("Error in manual chart calculation:",te)}};return pe?n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-2 text-slate-600",children:"Loading financial data..."})]})}):(console.log("🎨 Rendering FinancialsTab with:",{expensesCount:v.length,revenuesCount:j.length,summary:S,isLoading:pe,error:V}),n.jsxs("div",{className:"space-y-6",children:[V&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-red-800",children:V}),n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>de(null),className:"mt-2",children:"Dismiss"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs(et,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Funding Received"}),n.jsx("p",{className:"text-2xl font-bold",children:Or(e.totalFunding,a)})]}),n.jsxs(et,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Revenue Till Date"}),n.jsx("p",{className:"text-2xl font-bold",children:Or((S==null?void 0:S.total_revenue)||0,a)})]}),n.jsxs(et,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Expenditure Till Date"}),n.jsx("p",{className:"text-2xl font-bold",children:Or((S==null?void 0:S.total_expenses)||0,a)})]}),n.jsxs(et,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Available Fund"}),n.jsx("p",{className:"text-2xl font-bold",children:Or(((S==null?void 0:S.total_revenue)||0)-((S==null?void 0:S.total_expenses)||0),a)}),n.jsx("p",{className:"text-xs text-slate-400",children:"Total Revenue - Total Expenditure"})]})]}),n.jsx(et,{children:n.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[n.jsxs(wo,{label:"Entity",id:"filter-entity",value:s.entity||"all",onChange:te=>i({...s,entity:te.target.value}),containerClassName:"flex-1 min-w-[120px]",children:[n.jsx("option",{value:"all",children:"All Entities"}),E.map(te=>n.jsx("option",{value:te,children:te},te))]}),n.jsx(wo,{label:"Year",id:"filter-year",value:s.year||"all",onChange:te=>{const re=te.target.value;i({...s,year:re==="all"?"all":parseInt(re)})},containerClassName:"flex-1 min-w-[100px]",children:B.map(te=>n.jsx("option",{value:te,children:te==="all"?"All Years":te},te))})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-2 text-slate-700",children:"Monthly Revenue"}),n.jsx("div",{style:{width:"100%",height:250},children:n.jsx(ti,{children:n.jsxs(Bx,{data:l,children:[n.jsx(eu,{strokeDasharray:"3 3"}),n.jsx(ac,{dataKey:"month_name",fontSize:12}),n.jsx(dl,{fontSize:12,tickFormatter:te=>nd(te,a)}),n.jsx(ei,{formatter:te=>Or(te,a)}),n.jsx(Es,{wrapperStyle:{fontSize:"14px"}}),n.jsx(Qh,{type:"monotone",dataKey:"revenue",stroke:"#16a34a"})]})})})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-2 text-slate-700",children:"Monthly Expenses"}),n.jsx("div",{style:{width:"100%",height:250},children:n.jsx(ti,{children:n.jsxs(Bx,{data:l,children:[n.jsx(eu,{strokeDasharray:"3 3"}),n.jsx(ac,{dataKey:"month_name",fontSize:12}),n.jsx(dl,{fontSize:12,tickFormatter:te=>nd(te,a)}),n.jsx(ei,{formatter:te=>Or(te,a)}),n.jsx(Es,{wrapperStyle:{fontSize:"14px"}}),n.jsx(Qh,{type:"monotone",dataKey:"expenses",stroke:"#dc2626"})]})})})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-0 text-slate-700",children:"Revenue by Vertical"}),n.jsx("div",{style:{width:"100%",height:300},children:n.jsx(ti,{children:n.jsxs(yf,{children:[n.jsx(Qc,{data:d,dataKey:"value",nameKey:"name",cx:"65%",cy:"50%",outerRadius:65,label:!0,children:d.map((te,re)=>n.jsx(ul,{fill:D0[re%D0.length]},`cell-${re}`))}),n.jsx(ei,{formatter:te=>Or(te,a)}),n.jsx(Es,{layout:"vertical",align:"left",verticalAlign:"middle"})]})})})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-0 text-slate-700",children:"Expenses by Vertical"}),n.jsx("div",{style:{width:"100%",height:300},children:n.jsx(ti,{children:n.jsxs(yf,{children:[n.jsx(Qc,{data:m,dataKey:"value",nameKey:"name",cx:"65%",cy:"50%",outerRadius:65,label:!0,children:m.map((te,re)=>n.jsx(ul,{fill:D0[re%D0.length]},`cell-${re}`))}),n.jsx(ei,{formatter:te=>Or(te,a)}),n.jsx(Es,{layout:"vertical",align:"left",verticalAlign:"middle"})]})})})]})]}),le&&n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-700 mb-6",children:"Add Financial Record"}),n.jsxs("form",{onSubmit:ke,className:"space-y-4",children:[n.jsxs("div",{className:"flex gap-4 mb-4",children:[n.jsx("button",{type:"button",onClick:()=>{K("expense"),ye({...Y,description:"",vertical:"",amount:"",cogs:""})},className:`flex-1 py-2 rounded-md font-semibold ${P==="expense"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"}`,children:"Expense"}),n.jsx("button",{type:"button",onClick:()=>{K("revenue"),ye({...Y,description:"",vertical:"",amount:"",cogs:""})},className:`flex-1 py-2 rounded-md font-semibold ${P==="revenue"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"}`,children:"Revenue"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(dee,{label:"Transaction Date",id:"date",name:"date",value:Y.date,onChange:me,required:!0,fieldName:"Transaction date",maxYearsPast:10}),n.jsx(wo,{label:"Entity",id:"entity",name:"entity",value:Y.entity,onChange:me,required:!0,children:E.length>0?E.map(te=>n.jsx("option",{value:te,children:te},te)):n.jsx("option",{value:"Parent Company",children:"Parent Company"})}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 mb-2",children:"Description"}),n.jsx("textarea",{id:"description",name:"description",value:Y.description,onChange:me,required:!0,rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Enter description..."})]}),n.jsxs(wo,{label:"Vertical",id:"vertical",name:"vertical",value:Y.vertical,onChange:me,required:!0,children:[n.jsx("option",{value:"",children:"Select Vertical"}),P==="expense"?n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"SaaS",children:"SaaS"}),n.jsx("option",{value:"Enterprise",children:"Enterprise"}),n.jsx("option",{value:"B2C Hardware",children:"B2C Hardware"}),n.jsx("option",{value:"B2B Services",children:"B2B Services"}),n.jsx("option",{value:"R&D",children:"R&D"}),n.jsx("option",{value:"Marketing",children:"Marketing"}),n.jsx("option",{value:"Salaries",children:"Salaries"}),n.jsx("option",{value:"Ops",children:"Ops"}),n.jsx("option",{value:"COGS",children:"COGS"}),n.jsx("option",{value:"Other Expenses",children:"Other Expenses"})]}):n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"Product Sales",children:"Product Sales"}),n.jsx("option",{value:"Service Revenue",children:"Service Revenue"}),n.jsx("option",{value:"Subscription Revenue",children:"Subscription Revenue"}),n.jsx("option",{value:"Commission/Transaction Fees",children:"Commission/Transaction Fees"}),n.jsx("option",{value:"Advertising Revenue",children:"Advertising Revenue"}),n.jsx("option",{value:"Licensing & Royalties",children:"Licensing & Royalties"}),n.jsx("option",{value:"Other Income",children:"Other Income"})]})]}),n.jsx(Ot,{label:"Amount",id:"amount",name:"amount",type:"number",step:"0.01",min:"0",value:Y.amount,onChange:me,required:!0}),P==="revenue"&&n.jsx(Ot,{label:"COGS",id:"cogs",name:"cogs",type:"number",step:"0.01",min:"0",value:Y.cogs,onChange:me}),P==="expense"&&n.jsxs(n.Fragment,{children:[n.jsxs(wo,{label:"Funding Source",id:"fundingSource",name:"fundingSource",value:Y.fundingSource,onChange:me,required:!0,children:[n.jsx("option",{value:"",children:"Select funding source"}),I.length>0?I.map(te=>n.jsx("option",{value:te,children:te},te)):n.jsx("option",{value:"Revenue",children:"Revenue"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"attachment",className:"block text-sm font-medium text-slate-700 mb-2",children:"Attach Invoice"}),n.jsx("input",{id:"attachment",type:"file",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:te=>{var re;return ye({...Y,attachment:((re=te.target.files)==null?void 0:re[0])||null})},className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),P==="revenue"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"attachment",className:"block text-sm font-medium text-slate-700 mb-2",children:"Attach Invoice"}),n.jsx("input",{id:"attachment",type:"file",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:te=>{var re;return ye({...Y,attachment:((re=te.target.files)==null?void 0:re[0])||null})},className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsx("div",{})," "]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(Oe,{type:"submit",disabled:q,className:"bg-blue-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-blue-700 flex items-center gap-2",children:q?"Adding...":"Add Record"})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Expenditure List"}),n.jsx("div",{className:"overflow-x-auto",children:v.length===0?n.jsx("p",{className:"text-slate-500 text-center py-4",children:"No expenses found for the selected filters."}):n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"py-2 text-left font-semibold",children:"Vertical"}),n.jsx("th",{className:"py-2 text-left font-semibold",children:"Amount"}),n.jsx("th",{className:"py-2 text-left font-semibold",children:"Actions"})]})}),n.jsx("tbody",{children:v.map(te=>n.jsxs("tr",{className:"border-b",children:[n.jsx("td",{className:"py-2",children:te.vertical}),n.jsx("td",{className:"py-2",children:Or(te.amount,a)}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex gap-2",children:[te.attachmentUrl&&n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>ve(te.attachmentUrl),children:n.jsx(gi,{className:"h-4 w-4"})}),le&&n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>Ae(te.id,"expense",te.vertical),children:n.jsx(qa,{className:"h-4 w-4"})})]})})]},te.id))})]})})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Revenue & Profitability"}),n.jsx("div",{className:"overflow-x-auto",children:j.length===0?n.jsx("p",{className:"text-slate-500 text-center py-4",children:"No revenue found for the selected filters."}):n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"py-2 text-left font-semibold",children:"Vertical"}),n.jsx("th",{className:"py-2 text-left font-semibold",children:"Earnings"}),n.jsx("th",{className:"py-2 text-left font-semibold",children:"Actions"})]})}),n.jsx("tbody",{children:j.map(te=>n.jsxs("tr",{className:"border-b",children:[n.jsx("td",{className:"py-2",children:te.vertical}),n.jsx("td",{className:"py-2",children:Or(te.earnings,a)}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex gap-2",children:[te.attachmentUrl&&n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>ve(te.attachmentUrl),children:n.jsx(gi,{className:"h-4 w-4"})}),le&&n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>Ae(te.id,"revenue",te.vertical),children:n.jsx(qa,{className:"h-4 w-4"})})]})})]},te.id))})]})})]})]}),se&&oe&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(qa,{className:"h-6 w-6 text-red-500 mr-3"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirm Delete"})]}),n.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete this ",oe.type,"?",n.jsx("br",{}),n.jsx("span",{className:"font-medium",children:oe.description})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx(Oe,{variant:"outline",onClick:De,className:"px-4 py-2",children:"Cancel"}),n.jsx(Oe,{variant:"destructive",onClick:xe,className:"px-4 py-2",children:"Delete"})]})]})})]}))},hee={position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},mee={backgroundColor:"#ffffff",borderRadius:8,width:"90%",maxWidth:480,boxShadow:"0 10px 25px rgba(0,0,0,0.15)"},pee={padding:"14px 16px",borderBottom:"1px solid #e5e7eb",fontWeight:600,fontSize:16},gee={padding:16},xee={padding:16,borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"flex-end",gap:8},vee=({isOpen:e,title:t,onClose:r,children:a,footer:s})=>e?n.jsx("div",{style:hee,onClick:r,children:n.jsxs("div",{style:mee,onClick:i=>i.stopPropagation(),children:[n.jsx("div",{style:pee,children:t}),n.jsx("div",{style:gee,children:a}),n.jsx("div",{style:xee,children:s})]})}):null;class yee{async getEmployees(t,r){let a=G.from("employees").select("*").eq("startup_id",t).order("joining_date",{ascending:!1});r!=null&&r.entity&&r.entity!=="All Entities"&&(a=a.eq("entity",r.entity)),r!=null&&r.department&&r.department!=="All Departments"&&(a=a.eq("department",r.department)),r!=null&&r.year&&(a=a.eq("EXTRACT(YEAR FROM joining_date)",r.year));const{data:s,error:i}=await a;if(i)throw i;return(s||[]).map(l=>({id:l.id,name:l.name,joiningDate:l.joining_date,entity:l.entity,department:l.department,salary:l.salary,esopAllocation:l.esop_allocation,allocationType:l.allocation_type,esopPerAllocation:l.esop_per_allocation,contractUrl:l.contract_url}))}async addEmployee(t,r){const a=z6(r.joiningDate);if(!a.isValid)throw new Error(a.error);const{data:s,error:i}=await G.from("startups").select("registration_date").eq("id",t).single();if(i)throw i;if(s!=null&&s.registration_date&&r.joiningDate){const d=new Date(r.joiningDate),f=new Date(s.registration_date);if(d<f)throw new Error(`Employee joining date cannot be before the company registration date (${s.registration_date}). Please select a date on or after the registration date.`)}const{data:l,error:u}=await G.from("employees").insert({startup_id:t,name:r.name,joining_date:r.joiningDate,entity:r.entity,department:r.department,salary:r.salary,esop_allocation:r.esopAllocation,allocation_type:r.allocationType,esop_per_allocation:r.esopPerAllocation,contract_url:r.contractUrl}).select().single();if(u)throw u;return{id:l.id,name:l.name,joiningDate:l.joining_date,entity:l.entity,department:l.department,salary:l.salary,esopAllocation:l.esop_allocation,allocationType:l.allocation_type,esopPerAllocation:l.esop_per_allocation,contractUrl:l.contract_url}}async updateEmployee(t,r){if(r.joiningDate!==void 0){const l=z6(r.joiningDate);if(!l.isValid)throw new Error(l.error);const{data:u,error:d}=await G.from("employees").select("startup_id").eq("id",t).single();if(d)throw d;const{data:f,error:m}=await G.from("startups").select("registration_date").eq("id",u.startup_id).single();if(m)throw m;if(f!=null&&f.registration_date){const g=new Date(r.joiningDate),v=new Date(f.registration_date);if(g<v)throw new Error(`Employee joining date cannot be before the company registration date (${f.registration_date}). Please select a date on or after the registration date.`)}}const a={};r.name!==void 0&&(a.name=r.name),r.joiningDate!==void 0&&(a.joining_date=r.joiningDate),r.entity!==void 0&&(a.entity=r.entity),r.department!==void 0&&(a.department=r.department),r.salary!==void 0&&(a.salary=r.salary),r.esopAllocation!==void 0&&(a.esop_allocation=r.esopAllocation),r.allocationType!==void 0&&(a.allocation_type=r.allocationType),r.esopPerAllocation!==void 0&&(a.esop_per_allocation=r.esopPerAllocation),r.contractUrl!==void 0&&(a.contract_url=r.contractUrl);const{data:s,error:i}=await G.from("employees").update(a).eq("id",t).select().single();if(i)throw i;return{id:s.id,name:s.name,joiningDate:s.joining_date,entity:s.entity,department:s.department,salary:s.salary,esopAllocation:s.esop_allocation,allocationType:s.allocation_type,esopPerAllocation:s.esop_per_allocation,contractUrl:s.contract_url}}async deleteEmployee(t){const{error:r}=await G.from("employees").delete().eq("id",t);if(r)throw r}async getEmployeeSummary(t){try{const{data:r,error:a}=await G.rpc("get_employee_summary",{p_startup_id:t});if(a)throw a;if(r&&Array.isArray(r)&&r[0]){const s=r[0];return{total_employees:s.total_employees??0,total_salary_expense:s.total_salary_expense??0,total_esop_allocated:s.total_esop_allocated??0,avg_salary:s.avg_salary??0,avg_esop_allocation:s.avg_esop_allocation??0}}return this.calculateEmployeeSummaryManually(t)}catch(r){return console.warn("RPC get_employee_summary failed, falling back to manual calc:",r),this.calculateEmployeeSummaryManually(t)}}async getEmployeesByDepartment(t){return console.log("🔍 Using manual calculation for department data (startup_id:",t,")"),this.calculateEmployeesByDepartmentManually(t)}async getMonthlySalaryData(t,r){return console.log("🔍 Using manual calculation for monthly data (startup_id:",t,", year:",r,")"),this.calculateMonthlySalaryDataManually(t,r)}async getEntities(t){const{data:r,error:a}=await G.from("employees").select("entity").eq("startup_id",t).order("entity");if(a)throw a;return[...new Set((r==null?void 0:r.map(s=>s.entity))||[])]}async getDepartments(t){const{data:r,error:a}=await G.from("employees").select("department").eq("startup_id",t).order("department");if(a)throw a;return[...new Set((r==null?void 0:r.map(s=>s.department))||[])]}async getAvailableYears(t){const{data:r,error:a}=await G.from("employees").select("joining_date").eq("startup_id",t);if(a)throw a;const s=(r==null?void 0:r.map(l=>new Date(l.joining_date).getFullYear()))||[],i=[...new Set(s)].sort((l,u)=>u-l);return i.length===0?[new Date().getFullYear()]:i}async uploadContract(t,r){const a=`${r}/${Date.now()}_${t.name}`,{data:s,error:i}=await G.storage.from("employee-contracts").upload(a,t);if(i)throw i;const{data:l}=G.storage.from("employee-contracts").getPublicUrl(a);return l.publicUrl}async deleteContract(t){const r=t.split("/").slice(-2).join("/"),{error:a}=await G.storage.from("employee-contracts").remove([r]);if(a)throw a}async getContractDownloadUrl(t){try{if(t&&t.startsWith("http"))return t;if(t&&!t.startsWith("http")){const{data:r}=G.storage.from("employee-contracts").getPublicUrl(t);return r.publicUrl}throw new Error("Invalid contract URL")}catch(r){throw console.error("Error generating download URL:",r),r}}async calculateEmployeeSummaryManually(t){const r=await this.getEmployees(t),a=r.length,s=r.reduce((d,f)=>d+f.salary,0),i=r.reduce((d,f)=>d+f.esopAllocation,0),l=a>0?s/a:0,u=a>0?i/a:0;return{total_employees:a,total_salary_expense:s,total_esop_allocated:i,avg_salary:l,avg_esop_allocation:u}}async calculateEmployeesByDepartmentManually(t){const r=await this.getEmployees(t),a=new Map;return r.forEach(s=>{const i=a.get(s.department)||{count:0,salary:0,esop:0};a.set(s.department,{count:i.count+1,salary:i.salary+s.salary,esop:i.esop+s.esopAllocation})}),Array.from(a.entries()).map(([s,i])=>({department_name:s,employee_count:i.count,total_salary:i.salary,total_esop:i.esop})).sort((s,i)=>i.employee_count-s.employee_count)}async calculateMonthlySalaryDataManually(t,r){const a=await this.getEmployees(t),s=new Map;return a.forEach(i=>{if(new Date(i.joiningDate).getFullYear()===r){const u=new Date(i.joiningDate).toLocaleString("default",{month:"short"}),d=s.get(u)||{salary:0,esop:0};s.set(u,{salary:d.salary+i.salary,esop:d.esop+i.esopAllocation})}}),Array.from(s.entries()).map(([i,l])=>({month_name:i,total_salary:l.salary,total_esop:l.esop}))}}const rd=new yee,bee=async e=>{try{console.log("🔍 Loading monthly data for startup:",e.id);const t=await rd.getMonthlySalaryData(e.id,new Date().getFullYear());return console.log("✅ Monthly data loaded:",t),t.length===0?(console.log("⚠️ No monthly data found, returning empty set"),[]):t.map(r=>({name:r.month_name,salary:r.total_salary,esop:r.total_esop}))}catch(t){return console.error("❌ Error loading monthly data:",t),[]}},wee=async e=>{try{console.log("🔍 Loading department data for startup:",e.id);const t=await rd.getEmployeesByDepartment(e.id);return console.log("✅ Department data loaded:",t),t.length===0?(console.log("⚠️ No department data found, returning empty set"),[]):t.map(r=>({name:r.department_name,value:r.employee_count}))}catch(t){return console.error("❌ Error loading department data:",t),[]}},jee=async e=>{try{return await rd.getEmployees(e.id)}catch(t){return console.error("Error loading employees:",t),[]}},R0=["#1e40af","#1d4ed8","#3b82f6"],_ee=({startup:e,userRole:t,isViewOnly:r=!1})=>{const a=Lv(e),[s,i]=_.useState(!1),[l,u]=_.useState(!0),[d,f]=_.useState(null),[m,g]=_.useState([]),[v,x]=_.useState([]),[j,b]=_.useState([]),[S,A]=_.useState(null),[E,T]=_.useState(["Parent Company"]),[D,R]=_.useState(0),[B,U]=_.useState("0"),[I,F]=_.useState(0),[pe,L]=_.useState(0),[q,z]=_.useState(""),[V,de]=_.useState("one-time"),[se,fe]=_.useState("0"),[oe,Se]=_.useState(!1),Y=(t==="Startup"||t==="Admin")&&!r;_.useEffect(()=>{ye()},[e.id]);const ye=async()=>{try{u(!0),f(null);const[Ae,xe,De,ve,Z,te,re,$]=await Promise.all([bee(e),wee(e),jee(e),rd.getEmployeeSummary(e.id),ra.getStartupProfile(e.id),ha.getPricePerShare(e.id),ha.getTotalShares(e.id),ha.getEsopReservedShares(e.id)]);g(Ae),x(xe),b(De),A(ve),F(te||0),L(re||0),R($||0),U(String($||0));const ne=["Parent Company"];Z!=null&&Z.subsidiaries&&Z.subsidiaries.length>0&&Z.subsidiaries.forEach(W=>{const be=`${W.country} Subsidiary`;ne.push(be)}),T(ne)}catch(Ae){console.error("Error loading data:",Ae),f("Failed to load employee data")}finally{u(!1)}},P=async Ae=>{Ae.preventDefault();const xe=new FormData(Ae.target);try{console.log("🔍 Starting employee creation process...");const De=q!==""?parseFloat(q):parseFloat(xe.get("esopAllocation"))||0,ve=se!==""?parseFloat(se):parseFloat(xe.get("esopPerAllocation"))||0,Z=(S==null?void 0:S.total_esop_allocated)||j.reduce((Ce,ze)=>Ce+ze.esopAllocation,0),te=Z+(De||0);if(I>0&&le>0&&te>le){f(`Total ESOP allocation would exceed the reserved ESOPs value. Current: ${Or(Z,a)}, Adding: ${Or(De||0,a)}, Reserved: ${Or(le,a)}. Reduce the allocation or increase reserved ESOPs.`);return}if(D===0&&(De||0)>0){f("Cannot allocate ESOPs when no shares are reserved for ESOP. Please set ESOP reserved shares first.");return}const re=xe.get("joiningDate");if(re&&e.registrationDate){const Ce=new Date(re),ze=new Date(e.registrationDate);if(Ce<ze){f(`Employee joining date cannot be before the company registration date (${e.registrationDate}). Please select a date on or after the registration date.`);return}}const $={name:xe.get("name"),joiningDate:xe.get("joiningDate"),entity:xe.get("entity"),department:xe.get("department"),salary:parseFloat(xe.get("salary")),esopAllocation:De||0,allocationType:V,esopPerAllocation:ve||0,contractUrl:""};console.log("📝 Employee data to create:",$),console.log("🏢 Startup ID:",e.id),console.log("🔄 Creating employee in database...");const ne=await rd.addEmployee(e.id,$);console.log("✅ Employee created:",ne);const W=Ae.target.elements.namedItem("contract"),be=W!=null&&W.files&&W.files[0]?W.files[0]:null;if(be&&(ne!=null&&ne.id)){console.log("📁 Contract file found, uploading...");const Ce=await ds.uploadEmployeeContract(be,String(e.id),String(ne.id));console.log("📤 Upload result:",Ce),Ce.success&&Ce.url&&(console.log("🔄 Updating employee with contract URL..."),await rd.updateEmployee(ne.id,{contractUrl:Ce.url}),console.log("✅ Employee updated with contract URL"))}console.log("🔄 Reloading data..."),await ye(),console.log("✅ Data reloaded successfully"),Ae.target.reset(),console.log("✅ Form reset successfully"),z(""),fe("0"),de("one-time")}catch(De){console.error("❌ Error adding employee:",De),f("Failed to add employee")}},K=async Ae=>{if(confirm("Are you sure you want to delete this employee?"))try{await rd.deleteEmployee(Ae),await ye()}catch(xe){console.error("Error deleting employee:",xe),f("Failed to delete employee")}},le=(D||0)*(I||0),ee=(S==null?void 0:S.total_esop_allocated)||j.reduce((Ae,xe)=>Ae+xe.esopAllocation,0),me=(()=>{if(D>0&&ee>0)if(I>0){const Ae=D*I;return(ee/Ae*100).toFixed(1)}else return(ee/ee*100).toFixed(1);else{if(D>0&&ee===0)return"0";if(D===0&&ee>0)return"N/A"}return"0"})(),ke=I>0?ee>le:(D>0&&ee>0,!1);return console.log("🔍 ESOP Calculation Debug:",{esopReservedShares:D,pricePerShare:I,reservedEsopValue:le,allocatedEsopValue:ee,esopPercentage:me,isOverAllocated:ke,mockEmployees:j.map(Ae=>({name:Ae.name,esopAllocation:Ae.esopAllocation}))}),l?n.jsx("div",{className:"space-y-6",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Loading employees data..."})]})})}):n.jsxs("div",{className:"space-y-6",children:[d&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:d}),ke&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-red-500 mr-2",children:"⚠️"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"ESOP Over-allocation Detected"}),n.jsxs("p",{className:"text-sm",children:["Total allocated ESOPs (",Or(ee,a),") exceeds reserved ESOPs (",Or(le,a),"). Please reduce employee allocations or increase reserved shares."]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(et,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Number of Employees"}),n.jsx("p",{className:"text-2xl font-bold",children:(S==null?void 0:S.total_employees)||j.length})]}),n.jsxs(et,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Equity Reserved for ESOPs"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ot,{id:"esop-reserved-shares",name:"esop-reserved-shares",type:"number",value:B,onChange:Ae=>U(Ae.target.value),onBlur:async()=>{const Ae=Number(B);if(!Number.isFinite(Ae)||Ae<0){U(String(D||0));return}if(pe&&Ae>pe){f("ESOP reserved shares cannot exceed total company shares"),U(String(D||0));return}try{const xe=await ha.upsertEsopReservedShares(e.id,Ae);R(xe)}catch(xe){console.error("Failed to save ESOP reserved shares",xe),U(String(D||0))}}}),n.jsx("span",{className:"text-slate-500",children:"(shares)"}),n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>Se(!0),children:"Edit"})]}),n.jsx("p",{className:"text-2xl font-bold mt-1",children:Or(le,a)}),I===0&&n.jsxs("div",{className:"text-xs text-amber-600 mt-1",children:[n.jsx("p",{className:"font-medium",children:"⚠️ Price per share not set"}),n.jsx("p",{className:"mt-1",children:"Go to Cap Table tab → Company Settings to set the price per share"})]})]}),n.jsxs(et,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Equity Allocated as ESOPs"}),n.jsxs("p",{className:"text-2xl font-bold",children:[Or(ee,a)," (",me,"%)"]}),me==="N/A"&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:"⚠️ No ESOP shares reserved but allocations exist"})]})]}),n.jsx(vee,{isOpen:oe,title:"Update ESOP Reserved Shares",onClose:()=>Se(!1),footer:n.jsxs(n.Fragment,{children:[n.jsx(Oe,{type:"button",variant:"outline",onClick:()=>Se(!1),children:"Cancel"}),n.jsx(Oe,{type:"button",onClick:async()=>{const Ae=Number(B);if(!Number.isFinite(Ae)||Ae<0){f("Please enter a valid non-negative number");return}if(pe&&Ae>pe){f("ESOP reserved shares cannot exceed total company shares");return}try{const xe=await ha.upsertEsopReservedShares(e.id,Ae);R(xe),Se(!1)}catch(xe){console.error("Failed to save ESOP reserved shares",xe)}},children:"Save"})]}),children:n.jsxs("div",{style:{display:"grid",gap:8},children:[n.jsx("label",{htmlFor:"modal-esop-reserved",style:{fontSize:12,color:"#475569"},children:"ESOP Reserved Shares"}),n.jsx("input",{id:"modal-esop-reserved",type:"number",value:B,onChange:Ae=>U(Ae.target.value),style:{padding:"8px 10px",border:"1px solid #cbd5e1",borderRadius:6}})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Salary Expense"}),n.jsx("div",{style:{width:"100%",height:250},children:n.jsx(ti,{children:n.jsxs(Bx,{data:m,children:[n.jsx(eu,{strokeDasharray:"3 3"}),n.jsx(ac,{dataKey:"name",fontSize:12}),n.jsx(dl,{fontSize:12}),n.jsx(ei,{}),n.jsx(Es,{}),n.jsx(Qh,{type:"monotone",dataKey:"salary",stroke:"#16a34a"})]})})})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"ESOP Expenses"}),n.jsx("div",{style:{width:"100%",height:250},children:n.jsx(ti,{children:n.jsxs(Bx,{data:m,children:[n.jsx(eu,{strokeDasharray:"3 3"}),n.jsx(ac,{dataKey:"name",fontSize:12}),n.jsx(dl,{fontSize:12}),n.jsx(ei,{}),n.jsx(Es,{}),n.jsx(Qh,{type:"monotone",dataKey:"esop",stroke:"#3b82f6"})]})})})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Salary by Department"}),n.jsx("div",{style:{width:"100%",height:250},children:n.jsx(ti,{children:n.jsxs(yf,{children:[n.jsx(Qc,{data:v,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:v.map((Ae,xe)=>n.jsx(ul,{fill:R0[xe%R0.length]},`cell-${xe}`))}),n.jsx(ei,{}),n.jsx(Es,{})]})})})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"ESOP by Department"}),n.jsx("div",{style:{width:"100%",height:250},children:n.jsx(ti,{children:n.jsxs(yf,{children:[n.jsx(Qc,{data:v,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:v.map((Ae,xe)=>n.jsx(ul,{fill:R0[xe%R0.length]},`cell-${xe}`))}),n.jsx(ei,{}),n.jsx(Es,{})]})})})]})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Add New Employee"}),n.jsx("fieldset",{disabled:!Y,children:n.jsxs("form",{onSubmit:P,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(Ot,{label:"Employee Name",name:"name",required:!0}),n.jsx(Ot,{label:"Date of Joining",name:"joiningDate",type:"date",max:new Date().toISOString().split("T")[0],required:!0}),n.jsx(wo,{label:"Entity",name:"entity",children:E.map((Ae,xe)=>n.jsx("option",{value:Ae,children:Ae},xe))}),n.jsx(Ot,{label:"Department",name:"department",required:!0}),n.jsx(Ot,{label:"Salary (Annual)",name:"salary",type:"number",min:"0",required:!0}),n.jsx(Ot,{label:"ESOP Allocation (USD)",name:"esopAllocation",type:"number",min:"0",value:q,onChange:Ae=>{const xe=Ae.target.value;z(xe);const De=parseFloat(xe)||0;fe(String(De/(V==="monthly"?12:V==="quarterly"?4:1)))}}),n.jsxs(wo,{label:"Allocation Type",name:"allocationType",value:V,onChange:Ae=>{const xe=Ae.target.value;de(xe);const De=parseFloat(q)||0;fe(String(De/(xe==="monthly"?12:xe==="quarterly"?4:1)))},children:[n.jsx("option",{value:"one-time",children:"One-time"}),n.jsx("option",{value:"annually",children:"Annually"}),n.jsx("option",{value:"quarterly",children:"Quarterly"}),n.jsx("option",{value:"monthly",children:"Monthly"})]}),n.jsx(Ot,{label:"ESOP per Allocation",name:"esopPerAllocation",type:"number",min:"0",value:se,readOnly:!0}),n.jsx(Ot,{id:"employee-contract",label:"Employee Contract",name:"contract",type:"file",accept:".pdf,.doc,.docx"}),n.jsx("div",{className:"flex items-end pt-5",children:n.jsx(Oe,{type:"submit",children:"Add Employee"})})]})})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Employee List"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-sm",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Name"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Department"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Salary"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"ESOP Allocated"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Contract"}),n.jsx("th",{className:"px-4 py-2 text-right font-medium text-slate-500",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:j.map(Ae=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2 font-medium text-slate-900",children:Ae.name}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:Ae.department}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:Or(Ae.salary,a)}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:Or(Ae.esopAllocation,a)}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:Ae.contractUrl?n.jsxs("a",{href:Ae.contractUrl,className:"flex items-center text-brand-primary hover:underline",children:[n.jsx(gi,{className:"h-4 w-4 mr-1"})," View"]}):"N/A"}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx(Oe,{size:"sm",variant:"outline",disabled:!Y,onClick:()=>K(Ae.id),children:n.jsx(qa,{className:"h-4 w-4"})})})]},Ae.id))})]})})]})]})};class Nee{async getIncubationPrograms(t){const{data:r,error:a}=await G.from("incubation_programs").select("*").eq("startup_id",t).order("start_date",{ascending:!1});if(a)throw a;return(r||[]).map(s=>({id:s.id,programName:s.program_name,programType:s.program_type,startDate:s.start_date,endDate:s.end_date,status:s.status,description:s.description,mentorName:s.mentor_name,mentorEmail:s.mentor_email,programUrl:s.program_url,createdAt:s.created_at}))}async addIncubationProgram(t,r){const{data:a,error:s}=await G.from("incubation_programs").insert({startup_id:t,program_name:r.programName,program_type:r.programType,start_date:r.startDate,end_date:r.endDate,description:r.description,mentor_name:r.mentorName,mentor_email:r.mentorEmail,program_url:r.programUrl}).select().single();if(s)throw s;return{id:a.id,programName:a.program_name,programType:a.program_type,startDate:a.start_date,endDate:a.end_date,status:a.status,description:a.description,mentorName:a.mentor_name,mentorEmail:a.mentor_email,programUrl:a.program_url,createdAt:a.created_at}}async updateIncubationProgram(t,r){const a={};r.programName!==void 0&&(a.program_name=r.programName),r.programType!==void 0&&(a.program_type=r.programType),r.startDate!==void 0&&(a.start_date=r.startDate),r.endDate!==void 0&&(a.end_date=r.endDate),r.status!==void 0&&(a.status=r.status),r.description!==void 0&&(a.description=r.description),r.mentorName!==void 0&&(a.mentor_name=r.mentorName),r.mentorEmail!==void 0&&(a.mentor_email=r.mentorEmail),r.programUrl!==void 0&&(a.program_url=r.programUrl);const{data:s,error:i}=await G.from("incubation_programs").update(a).eq("id",t).select().single();if(i)throw i;return{id:s.id,programName:s.program_name,programType:s.program_type,startDate:s.start_date,endDate:s.end_date,status:s.status,description:s.description,mentorName:s.mentor_name,mentorEmail:s.mentor_email,programUrl:s.program_url,createdAt:s.created_at}}async deleteIncubationProgram(t){const{error:r}=await G.from("incubation_programs").delete().eq("id",t);if(r)throw r}async getProgramTypes(){return["Incubation","Acceleration","Mentorship","Bootcamp"]}async getProgramStatuses(){return["Active","Completed","Dropped"]}async getPopularPrograms(){return["Y Combinator","Techstars","500 Global","AngelPad","Plug and Play","MassChallenge","Startupbootcamp","Seedcamp","Entrepreneur First","Antler"]}subscribeToIncubationPrograms(t,r){return G.channel("incubation_programs_changes").on("postgres_changes",{event:"*",schema:"public",table:"incubation_programs",filter:`startup_id=eq.${t}`},async()=>{try{const s=await this.getIncubationPrograms(t);r(s)}catch(s){console.warn("Failed to refresh incubation programs after realtime event:",s)}}).subscribe()}async getProgramSummary(t){const r=await this.getIncubationPrograms(t),a=r.length,s=r.filter(d=>d.status==="Active").length,i=r.filter(d=>d.status==="Completed").length,l=r.map(d=>{const f=new Date(d.startDate),m=new Date(d.endDate);return Math.ceil((m.getTime()-f.getTime())/(1e3*60*60*24))}),u=l.length>0?l.reduce((d,f)=>d+f,0)/l.length:0;return{totalPrograms:a,activePrograms:s,completedPrograms:i,averageDuration:u}}async getProgramsByType(t){const a=(await this.getIncubationPrograms(t)).reduce((s,i)=>(s[i.programType]=(s[i.programType]||0)+1,s),{});return Object.entries(a).map(([s,i])=>({type:s,count:i}))}}const L0=new Nee;class See{async getRecognitionRecordsByStartupId(t){try{const{data:r,error:a}=await G.from("recognition_records").select("*").eq("startup_id",t).order("date_added",{ascending:!1});if(a)throw console.error("Error fetching recognition records:",a),a;return(r||[]).map(s=>({id:s.id.toString(),startupId:s.startup_id,programName:s.program_name,facilitatorName:s.facilitator_name,facilitatorCode:s.facilitator_code,incubationType:s.incubation_type,feeType:s.fee_type,feeAmount:s.fee_amount,shares:s.shares,pricePerShare:s.price_per_share,investmentAmount:s.investment_amount,equityAllocated:s.equity_allocated,postMoneyValuation:s.post_money_valuation,signedAgreementUrl:s.signed_agreement_url,status:s.status||"pending",dateAdded:s.date_added}))}catch(r){throw console.error("Error in getRecognitionRecordsByStartupId:",r),r}}async getRecognitionRecordsByFacilitatorCode(t){try{const{data:r,error:a}=await G.from("recognition_records").select(`
          *,
          startups!recognition_records_startup_id_fkey (
            id,
            name,
            sector,
            total_funding,
            total_revenue,
            registration_date
          )
        `).eq("facilitator_code",t).order("date_added",{ascending:!1});if(a)throw console.error("Error fetching recognition records by facilitator code:",a),a;return(r||[]).map(s=>({id:s.id.toString(),startupId:s.startup_id,programName:s.program_name,facilitatorName:s.facilitator_name,facilitatorCode:s.facilitator_code,incubationType:s.incubation_type,feeType:s.fee_type,feeAmount:s.fee_amount,shares:s.shares,pricePerShare:s.price_per_share,investmentAmount:s.investment_amount,equityAllocated:s.equity_allocated,postMoneyValuation:s.post_money_valuation,signedAgreementUrl:s.signed_agreement_url,status:s.status||"pending",dateAdded:s.date_added}))}catch(r){throw console.error("Error in getRecognitionRecordsByFacilitatorCode:",r),r}}async createRecognitionRecord(t){try{console.log("🚀 Creating recognition record for startup:",t.startupId),console.log("📋 Record data:",t);const{data:r,error:a}=await G.from("recognition_records").insert({startup_id:t.startupId,program_name:t.programName,facilitator_name:t.facilitatorName,facilitator_code:t.facilitatorCode,incubation_type:t.incubationType,fee_type:t.feeType,fee_amount:t.feeAmount,shares:t.shares,price_per_share:t.pricePerShare,investment_amount:t.investmentAmount,equity_allocated:t.equityAllocated,post_money_valuation:t.postMoneyValuation,signed_agreement_url:t.signedAgreementUrl,status:t.status||"pending",date_added:new Date().toISOString().split("T")[0]}).select().single();if(a)throw console.error("❌ Error creating recognition record:",a),a;return console.log("✅ Recognition record created successfully:",r),{id:r.id.toString(),startupId:r.startup_id,programName:r.program_name,facilitatorName:r.facilitator_name,facilitatorCode:r.facilitator_code,incubationType:r.incubation_type,feeType:r.fee_type,feeAmount:r.fee_amount,shares:r.shares,pricePerShare:r.price_per_share,investmentAmount:r.investment_amount,equityAllocated:r.equity_allocated,postMoneyValuation:r.post_money_valuation,signedAgreementUrl:r.signed_agreement_url,status:r.status||"pending",dateAdded:r.date_added}}catch(r){throw console.error("❌ Error in createRecognitionRecord:",r),r}}async updateRecognitionRecord(t,r){try{const a={};r.programName!==void 0&&(a.program_name=r.programName),r.facilitatorName!==void 0&&(a.facilitator_name=r.facilitatorName),r.facilitatorCode!==void 0&&(a.facilitator_code=r.facilitatorCode),r.incubationType!==void 0&&(a.incubation_type=r.incubationType),r.feeType!==void 0&&(a.fee_type=r.feeType),r.feeAmount!==void 0&&(a.fee_amount=r.feeAmount),r.shares!==void 0&&(a.shares=r.shares),r.pricePerShare!==void 0&&(a.price_per_share=r.pricePerShare),r.investmentAmount!==void 0&&(a.investment_amount=r.investmentAmount),r.equityAllocated!==void 0&&(a.equity_allocated=r.equityAllocated),r.postMoneyValuation!==void 0&&(a.post_money_valuation=r.postMoneyValuation),r.signedAgreementUrl!==void 0&&(a.signed_agreement_url=r.signedAgreementUrl),r.status!==void 0&&(a.status=r.status);const{data:s,error:i}=await G.from("recognition_records").update(a).eq("id",t).select().single();if(i)throw console.error("Error updating recognition record:",i),i;return{id:s.id.toString(),startupId:s.startup_id,programName:s.program_name,facilitatorName:s.facilitator_name,facilitatorCode:s.facilitator_code,incubationType:s.incubation_type,feeType:s.fee_type,feeAmount:s.fee_amount,shares:s.shares,pricePerShare:s.price_per_share,investmentAmount:s.investment_amount,equityAllocated:s.equity_allocated,postMoneyValuation:s.post_money_valuation,signedAgreementUrl:s.signed_agreement_url,status:s.status||"pending",dateAdded:s.date_added}}catch(a){throw console.error("Error in updateRecognitionRecord:",a),a}}async deleteRecognitionRecord(t){try{const{error:r}=await G.from("recognition_records").delete().eq("id",t);if(r)throw console.error("Error deleting recognition record:",r),r;return!0}catch(r){throw console.error("Error in deleteRecognitionRecord:",r),r}}async getRecognitionRecordById(t){try{const{data:r,error:a}=await G.from("recognition_records").select("*").eq("id",t).single();if(a){if(a.code==="PGRST116")return null;throw console.error("Error fetching recognition record by ID:",a),a}return{id:r.id.toString(),startupId:r.startup_id,programName:r.program_name,facilitatorName:r.facilitator_name,facilitatorCode:r.facilitator_code,incubationType:r.incubation_type,feeType:r.fee_type,feeAmount:r.fee_amount,shares:r.shares,pricePerShare:r.price_per_share,investmentAmount:r.investment_amount,equityAllocated:r.equity_allocated,postMoneyValuation:r.post_money_valuation,signedAgreementUrl:r.signed_agreement_url,status:r.status||"pending",dateAdded:r.date_added}}catch(r){throw console.error("Error in getRecognitionRecordById:",r),r}}async validateFacilitatorCode(t){try{console.log("🔍 Validating facilitator code:",t);const{data:r,error:a}=await G.from("users").select("id, facilitator_code, name, role").eq("facilitator_code",t).eq("role","Startup Facilitation Center").single();if(a){if(a.code==="PGRST116")return console.log("❌ No facilitator found with code:",t),!1;throw console.error("❌ Error validating facilitator code:",a),a}return r?(console.log("✅ Facilitator found:",{id:r.id,code:r.facilitator_code,name:r.name,role:r.role}),!0):!1}catch(r){return console.error("❌ Error in validateFacilitatorCode:",r),!1}}async getStartupDetailsForRecognition(t){try{const{data:r,error:a}=await G.from("recognition_records").select(`
          *,
          startups!recognition_records_startup_id_fkey (
            id,
            name,
            sector,
            total_funding,
            total_revenue,
            registration_date
          )
        `).eq("id",t).single();if(a)throw console.error("Error fetching startup details for recognition:",a),a;return{recognitionRecord:{id:r.id.toString(),startupId:r.startup_id,programName:r.program_name,facilitatorName:r.facilitator_name,facilitatorCode:r.facilitator_code,incubationType:r.incubation_type,feeType:r.fee_type,feeAmount:r.fee_amount,shares:r.shares,pricePerShare:r.price_per_share,investmentAmount:r.investment_amount,equityAllocated:r.equity_allocated,postMoneyValuation:r.post_money_valuation,signedAgreementUrl:r.signed_agreement_url,dateAdded:r.date_added},startup:r.startups}}catch(r){throw console.error("Error in getStartupDetailsForRecognition:",r),r}}async approveRecognitionRecord(t){try{const{error:r}=await G.from("recognition_records").update({status:"approved"}).eq("id",t);if(r)throw console.error("Error approving recognition record:",r),r;return!0}catch(r){throw console.error("Error in approveRecognitionRecord:",r),r}}}const M0=new See;function ba(e){"@babel/helpers - typeof";return ba=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ba(e)}var fl=Uint8Array,Vi=Uint16Array,G_=Int32Array,K_=new fl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),W_=new fl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),W6=new fl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),C8=function(e,t){for(var r=new Vi(31),a=0;a<31;++a)r[a]=t+=1<<e[a-1];for(var s=new G_(r[30]),a=1;a<30;++a)for(var i=r[a];i<r[a+1];++i)s[i]=i-r[a]<<5|a;return{b:r,r:s}},k8=C8(K_,2),Aee=k8.b,Aw=k8.r;Aee[28]=258,Aw[258]=28;var Cee=C8(W_,0),Y6=Cee.r,Cw=new Vi(32768);for(var Ha=0;Ha<32768;++Ha){var Wu=(Ha&43690)>>1|(Ha&21845)<<1;Wu=(Wu&52428)>>2|(Wu&13107)<<2,Wu=(Wu&61680)>>4|(Wu&3855)<<4,Cw[Ha]=((Wu&65280)>>8|(Wu&255)<<8)>>1}var Np=function(e,t,r){for(var a=e.length,s=0,i=new Vi(t);s<a;++s)e[s]&&++i[e[s]-1];var l=new Vi(t);for(s=1;s<t;++s)l[s]=l[s-1]+i[s-1]<<1;var u;if(r){u=new Vi(1<<t);var d=15-t;for(s=0;s<a;++s)if(e[s])for(var f=s<<4|e[s],m=t-e[s],g=l[e[s]-1]++<<m,v=g|(1<<m)-1;g<=v;++g)u[Cw[g]>>d]=f}else for(u=new Vi(a),s=0;s<a;++s)e[s]&&(u[s]=Cw[l[e[s]-1]++]>>15-e[s]);return u},bf=new fl(288);for(var Ha=0;Ha<144;++Ha)bf[Ha]=8;for(var Ha=144;Ha<256;++Ha)bf[Ha]=9;for(var Ha=256;Ha<280;++Ha)bf[Ha]=7;for(var Ha=280;Ha<288;++Ha)bf[Ha]=8;var Vx=new fl(32);for(var Ha=0;Ha<32;++Ha)Vx[Ha]=5;var kee=Np(bf,9,0),Eee=Np(Vx,5,0),E8=function(e){return(e+7)/8|0},Pee=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new fl(e.subarray(t,r))},Lc=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8},hp=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8,e[a+2]|=r>>16},$1=function(e,t){for(var r=[],a=0;a<e.length;++a)e[a]&&r.push({s:a,f:e[a]});var s=r.length,i=r.slice();if(!s)return{t:T8,l:0};if(s==1){var l=new fl(r[0].s+1);return l[r[0].s]=1,{t:l,l:1}}r.sort(function(R,B){return R.f-B.f}),r.push({s:-1,f:25001});var u=r[0],d=r[1],f=0,m=1,g=2;for(r[0]={s:-1,f:u.f+d.f,l:u,r:d};m!=s-1;)u=r[r[f].f<r[g].f?f++:g++],d=r[f!=m&&r[f].f<r[g].f?f++:g++],r[m++]={s:-1,f:u.f+d.f,l:u,r:d};for(var v=i[0].s,a=1;a<s;++a)i[a].s>v&&(v=i[a].s);var x=new Vi(v+1),j=kw(r[m-1],x,0);if(j>t){var a=0,b=0,S=j-t,A=1<<S;for(i.sort(function(B,U){return x[U.s]-x[B.s]||B.f-U.f});a<s;++a){var E=i[a].s;if(x[E]>t)b+=A-(1<<j-x[E]),x[E]=t;else break}for(b>>=S;b>0;){var T=i[a].s;x[T]<t?b-=1<<t-x[T]++-1:++a}for(;a>=0&&b;--a){var D=i[a].s;x[D]==t&&(--x[D],++b)}j=t}return{t:new fl(x),l:j}},kw=function(e,t,r){return e.s==-1?Math.max(kw(e.l,t,r+1),kw(e.r,t,r+1)):t[e.s]=r},X6=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Vi(++t),a=0,s=e[0],i=1,l=function(d){r[a++]=d},u=1;u<=t;++u)if(e[u]==s&&u!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)l(32754);i>2&&(l(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(l(s),--i;i>6;i-=6)l(8304);i>2&&(l(i-3<<5|8208),i=0)}for(;i--;)l(s);i=1,s=e[u]}return{c:r.subarray(0,a),n:t}},mp=function(e,t){for(var r=0,a=0;a<t.length;++a)r+=e[a]*t[a];return r},P8=function(e,t,r){var a=r.length,s=E8(t+2);e[s]=a&255,e[s+1]=a>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<a;++i)e[s+i+4]=r[i];return(s+4+a)*8},Z6=function(e,t,r,a,s,i,l,u,d,f,m){Lc(t,m++,r),++s[256];for(var g=$1(s,15),v=g.t,x=g.l,j=$1(i,15),b=j.t,S=j.l,A=X6(v),E=A.c,T=A.n,D=X6(b),R=D.c,B=D.n,U=new Vi(19),I=0;I<E.length;++I)++U[E[I]&31];for(var I=0;I<R.length;++I)++U[R[I]&31];for(var F=$1(U,7),pe=F.t,L=F.l,q=19;q>4&&!pe[W6[q-1]];--q);var z=f+5<<3,V=mp(s,bf)+mp(i,Vx)+l,de=mp(s,v)+mp(i,b)+l+14+3*q+mp(U,pe)+2*U[16]+3*U[17]+7*U[18];if(d>=0&&z<=V&&z<=de)return P8(t,m,e.subarray(d,d+f));var se,fe,oe,Se;if(Lc(t,m,1+(de<V)),m+=2,de<V){se=Np(v,x,0),fe=v,oe=Np(b,S,0),Se=b;var Y=Np(pe,L,0);Lc(t,m,T-257),Lc(t,m+5,B-1),Lc(t,m+10,q-4),m+=14;for(var I=0;I<q;++I)Lc(t,m+3*I,pe[W6[I]]);m+=3*q;for(var ye=[E,R],P=0;P<2;++P)for(var K=ye[P],I=0;I<K.length;++I){var le=K[I]&31;Lc(t,m,Y[le]),m+=pe[le],le>15&&(Lc(t,m,K[I]>>5&127),m+=K[I]>>12)}}else se=kee,fe=bf,oe=Eee,Se=Vx;for(var I=0;I<u;++I){var ee=a[I];if(ee>255){var le=ee>>18&31;hp(t,m,se[le+257]),m+=fe[le+257],le>7&&(Lc(t,m,ee>>23&31),m+=K_[le]);var me=ee&31;hp(t,m,oe[me]),m+=Se[me],me>3&&(hp(t,m,ee>>5&8191),m+=W_[me])}else hp(t,m,se[ee]),m+=fe[ee]}return hp(t,m,se[256]),m+fe[256]},Tee=new G_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),T8=new fl(0),Oee=function(e,t,r,a,s,i){var l=i.z||e.length,u=new fl(a+l+5*(1+Math.ceil(l/7e3))+s),d=u.subarray(a,u.length-s),f=i.l,m=(i.r||0)&7;if(t){m&&(d[0]=i.r>>3);for(var g=Tee[t-1],v=g>>13,x=g&8191,j=(1<<r)-1,b=i.p||new Vi(32768),S=i.h||new Vi(j+1),A=Math.ceil(r/3),E=2*A,T=function(re){return(e[re]^e[re+1]<<A^e[re+2]<<E)&j},D=new G_(25e3),R=new Vi(288),B=new Vi(32),U=0,I=0,F=i.i||0,pe=0,L=i.w||0,q=0;F+2<l;++F){var z=T(F),V=F&32767,de=S[z];if(b[V]=de,S[z]=V,L<=F){var se=l-F;if((U>7e3||pe>24576)&&(se>423||!f)){m=Z6(e,d,0,D,R,B,I,pe,q,F-q,m),pe=U=I=0,q=F;for(var fe=0;fe<286;++fe)R[fe]=0;for(var fe=0;fe<30;++fe)B[fe]=0}var oe=2,Se=0,Y=x,ye=V-de&32767;if(se>2&&z==T(F-ye))for(var P=Math.min(v,se)-1,K=Math.min(32767,F),le=Math.min(258,se);ye<=K&&--Y&&V!=de;){if(e[F+oe]==e[F+oe-ye]){for(var ee=0;ee<le&&e[F+ee]==e[F+ee-ye];++ee);if(ee>oe){if(oe=ee,Se=ye,ee>P)break;for(var me=Math.min(ye,ee-2),ke=0,fe=0;fe<me;++fe){var Ae=F-ye+fe&32767,xe=b[Ae],De=Ae-xe&32767;De>ke&&(ke=De,de=Ae)}}}V=de,de=b[V],ye+=V-de&32767}if(Se){D[pe++]=268435456|Aw[oe]<<18|Y6[Se];var ve=Aw[oe]&31,Z=Y6[Se]&31;I+=K_[ve]+W_[Z],++R[257+ve],++B[Z],L=F+oe,++U}else D[pe++]=e[F],++R[e[F]]}}for(F=Math.max(F,L);F<l;++F)D[pe++]=e[F],++R[e[F]];m=Z6(e,d,f,D,R,B,I,pe,q,F-q,m),f||(i.r=m&7|d[m/8|0]<<3,m-=7,i.h=S,i.p=b,i.i=F,i.w=L)}else{for(var F=i.w||0;F<l+f;F+=65535){var te=F+65535;te>=l&&(d[m/8|0]=f,te=l),m=P8(d,m+1,e.subarray(F,te))}i.i=l}return Pee(u,0,a+E8(m)+s)},O8=function(){var e=1,t=0;return{p:function(r){for(var a=e,s=t,i=r.length|0,l=0;l!=i;){for(var u=Math.min(l+2655,i);l<u;++l)s+=a+=r[l];a=(a&65535)+15*(a>>16),s=(s&65535)+15*(s>>16)}e=a,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Dee=function(e,t,r,a,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),l=new fl(i.length+e.length);l.set(i),l.set(e,i.length),e=l,s.w=i.length}return Oee(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,a,s)},D8=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Ree=function(e,t){var r=t.level,a=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=a<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=O8();s.p(t.dictionary),D8(e,2,s.d())}};function Ew(e,t){t||(t={});var r=O8();r.p(e);var a=Dee(e,t,t.dictionary?6:2,4);return Ree(a,t),D8(a,a.length-4,r.d()),a}var Lee=typeof TextDecoder<"u"&&new TextDecoder,Mee=0;try{Lee.decode(T8,{stream:!0}),Mee=1}catch{}function Iee(e){if(Array.isArray(e))return e}function qee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,l,u=[],d=!0,f=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(u.push(a.value),u.length!==t);d=!0);}catch(m){f=!0,s=m}finally{try{if(!d&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}function J6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function Fee(e,t){if(e){if(typeof e=="string")return J6(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?J6(e,t):void 0}}function Bee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q6(e,t){return Iee(e)||qee(e,t)||Fee(e,t)||Bee()}function eC(e,t="utf8"){return new TextDecoder(t).decode(e)}const Uee=new TextEncoder;function $ee(e){return Uee.encode(e)}const zee=1024*8,Vee=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),z1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Y_{constructor(t=zee,r={}){ca(this,"buffer");ca(this,"byteLength");ca(this,"byteOffset");ca(this,"length");ca(this,"offset");ca(this,"lastWrittenByte");ca(this,"littleEndian");ca(this,"_data");ca(this,"_mark");ca(this,"_marks");let a=!1;typeof t=="number"?t=new ArrayBuffer(t):(a=!0,this.lastWrittenByte=t.byteLength);const s=r.offset?r.offset>>>0:0,i=t.byteLength-s;let l=s;(ArrayBuffer.isView(t)||t instanceof Y_)&&(t.byteLength!==t.buffer.byteLength&&(l=t.byteOffset+s),t=t.buffer),a?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const a=(this.offset+t)*2,s=new Uint8Array(a);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=a,this.byteLength=a,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const a=z1[r].BYTES_PER_ELEMENT*t,s=this.byteOffset+this.offset,i=this.buffer.slice(s,s+a);if(this.littleEndian===Vee&&r!=="uint8"&&r!=="int8"){const u=new Uint8Array(this.buffer.slice(s,s+a));u.reverse();const d=new z1[r](u.buffer);return this.offset+=a,d.reverse(),d}const l=new z1[r](i);return this.offset+=a,l}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let a=0;a<t;a++)r+=this.readChar();return r}readUtf8(t=1){return eC(this.readBytes(t))}decodeText(t=1,r="utf8"){return eC(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes($ee(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function pm(e){let t=e.length;for(;--t>=0;)e[t]=0}const Hee=3,Gee=258,R8=29,Kee=256,Wee=Kee+1+R8,L8=30,Yee=512,Xee=new Array((Wee+2)*2);pm(Xee);const Zee=new Array(L8*2);pm(Zee);const Jee=new Array(Yee);pm(Jee);const Qee=new Array(Gee-Hee+1);pm(Qee);const ete=new Array(R8);pm(ete);const tte=new Array(L8);pm(tte);const rte=(e,t,r,a)=>{let s=e&65535|0,i=e>>>16&65535|0,l=0;for(;r!==0;){l=r>2e3?2e3:r,r-=l;do s=s+t[a++]|0,i=i+s|0;while(--l);s%=65521,i%=65521}return s|i<<16|0};var Pw=rte;const ate=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var a=0;a<8;a++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},nte=new Uint32Array(ate()),ste=(e,t,r,a)=>{const s=nte,i=a+r;e^=-1;for(let l=a;l<i;l++)e=e>>>8^s[(e^t[l])&255];return e^-1};var zl=ste,Tw={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},M8={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const ite=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var ote=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const a in r)ite(r,a)&&(e[a]=r[a])}}return e},lte=e=>{let t=0;for(let a=0,s=e.length;a<s;a++)t+=e[a].length;const r=new Uint8Array(t);for(let a=0,s=0,i=e.length;a<i;a++){let l=e[a];r.set(l,s),s+=l.length}return r},I8={assign:ote,flattenChunks:lte};let q8=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{q8=!1}const Gp=new Uint8Array(256);for(let e=0;e<256;e++)Gp[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Gp[254]=Gp[254]=1;var cte=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,a,s,i,l=e.length,u=0;for(s=0;s<l;s++)r=e.charCodeAt(s),(r&64512)===55296&&s+1<l&&(a=e.charCodeAt(s+1),(a&64512)===56320&&(r=65536+(r-55296<<10)+(a-56320),s++)),u+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(u),i=0,s=0;i<u;s++)r=e.charCodeAt(s),(r&64512)===55296&&s+1<l&&(a=e.charCodeAt(s+1),(a&64512)===56320&&(r=65536+(r-55296<<10)+(a-56320),s++)),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|r&63):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|r&63):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|r&63);return t};const ute=(e,t)=>{if(t<65534&&e.subarray&&q8)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let a=0;a<t;a++)r+=String.fromCharCode(e[a]);return r};var dte=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let a,s;const i=new Array(r*2);for(s=0,a=0;a<r;){let l=e[a++];if(l<128){i[s++]=l;continue}let u=Gp[l];if(u>4){i[s++]=65533,a+=u-1;continue}for(l&=u===2?31:u===3?15:7;u>1&&a<r;)l=l<<6|e[a++]&63,u--;if(u>1){i[s++]=65533;continue}l<65536?i[s++]=l:(l-=65536,i[s++]=55296|l>>10&1023,i[s++]=56320|l&1023)}return ute(i,s)},fte=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+Gp[e[r]]>t?r:t},Ow={string2buf:cte,buf2string:dte,utf8border:fte};function hte(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var mte=hte;const I0=16209,pte=16191;var gte=function(t,r){let a,s,i,l,u,d,f,m,g,v,x,j,b,S,A,E,T,D,R,B,U,I,F,pe;const L=t.state;a=t.next_in,F=t.input,s=a+(t.avail_in-5),i=t.next_out,pe=t.output,l=i-(r-t.avail_out),u=i+(t.avail_out-257),d=L.dmax,f=L.wsize,m=L.whave,g=L.wnext,v=L.window,x=L.hold,j=L.bits,b=L.lencode,S=L.distcode,A=(1<<L.lenbits)-1,E=(1<<L.distbits)-1;e:do{j<15&&(x+=F[a++]<<j,j+=8,x+=F[a++]<<j,j+=8),T=b[x&A];t:for(;;){if(D=T>>>24,x>>>=D,j-=D,D=T>>>16&255,D===0)pe[i++]=T&65535;else if(D&16){R=T&65535,D&=15,D&&(j<D&&(x+=F[a++]<<j,j+=8),R+=x&(1<<D)-1,x>>>=D,j-=D),j<15&&(x+=F[a++]<<j,j+=8,x+=F[a++]<<j,j+=8),T=S[x&E];r:for(;;){if(D=T>>>24,x>>>=D,j-=D,D=T>>>16&255,D&16){if(B=T&65535,D&=15,j<D&&(x+=F[a++]<<j,j+=8,j<D&&(x+=F[a++]<<j,j+=8)),B+=x&(1<<D)-1,B>d){t.msg="invalid distance too far back",L.mode=I0;break e}if(x>>>=D,j-=D,D=i-l,B>D){if(D=B-D,D>m&&L.sane){t.msg="invalid distance too far back",L.mode=I0;break e}if(U=0,I=v,g===0){if(U+=f-D,D<R){R-=D;do pe[i++]=v[U++];while(--D);U=i-B,I=pe}}else if(g<D){if(U+=f+g-D,D-=g,D<R){R-=D;do pe[i++]=v[U++];while(--D);if(U=0,g<R){D=g,R-=D;do pe[i++]=v[U++];while(--D);U=i-B,I=pe}}}else if(U+=g-D,D<R){R-=D;do pe[i++]=v[U++];while(--D);U=i-B,I=pe}for(;R>2;)pe[i++]=I[U++],pe[i++]=I[U++],pe[i++]=I[U++],R-=3;R&&(pe[i++]=I[U++],R>1&&(pe[i++]=I[U++]))}else{U=i-B;do pe[i++]=pe[U++],pe[i++]=pe[U++],pe[i++]=pe[U++],R-=3;while(R>2);R&&(pe[i++]=pe[U++],R>1&&(pe[i++]=pe[U++]))}}else if((D&64)===0){T=S[(T&65535)+(x&(1<<D)-1)];continue r}else{t.msg="invalid distance code",L.mode=I0;break e}break}}else if((D&64)===0){T=b[(T&65535)+(x&(1<<D)-1)];continue t}else if(D&32){L.mode=pte;break e}else{t.msg="invalid literal/length code",L.mode=I0;break e}break}}while(a<s&&i<u);R=j>>3,a-=R,j-=R<<3,x&=(1<<j)-1,t.next_in=a,t.next_out=i,t.avail_in=a<s?5+(s-a):5-(a-s),t.avail_out=i<u?257+(u-i):257-(i-u),L.hold=x,L.bits=j};const Sh=15,tC=852,rC=592,aC=0,V1=1,nC=2,xte=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),vte=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),yte=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),bte=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),wte=(e,t,r,a,s,i,l,u)=>{const d=u.bits;let f=0,m=0,g=0,v=0,x=0,j=0,b=0,S=0,A=0,E=0,T,D,R,B,U,I=null,F;const pe=new Uint16Array(Sh+1),L=new Uint16Array(Sh+1);let q=null,z,V,de;for(f=0;f<=Sh;f++)pe[f]=0;for(m=0;m<a;m++)pe[t[r+m]]++;for(x=d,v=Sh;v>=1&&pe[v]===0;v--);if(x>v&&(x=v),v===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,u.bits=1,0;for(g=1;g<v&&pe[g]===0;g++);for(x<g&&(x=g),S=1,f=1;f<=Sh;f++)if(S<<=1,S-=pe[f],S<0)return-1;if(S>0&&(e===aC||v!==1))return-1;for(L[1]=0,f=1;f<Sh;f++)L[f+1]=L[f]+pe[f];for(m=0;m<a;m++)t[r+m]!==0&&(l[L[t[r+m]]++]=m);if(e===aC?(I=q=l,F=20):e===V1?(I=xte,q=vte,F=257):(I=yte,q=bte,F=0),E=0,m=0,f=g,U=i,j=x,b=0,R=-1,A=1<<x,B=A-1,e===V1&&A>tC||e===nC&&A>rC)return 1;for(;;){z=f-b,l[m]+1<F?(V=0,de=l[m]):l[m]>=F?(V=q[l[m]-F],de=I[l[m]-F]):(V=96,de=0),T=1<<f-b,D=1<<j,g=D;do D-=T,s[U+(E>>b)+D]=z<<24|V<<16|de|0;while(D!==0);for(T=1<<f-1;E&T;)T>>=1;if(T!==0?(E&=T-1,E+=T):E=0,m++,--pe[f]===0){if(f===v)break;f=t[r+l[m]]}if(f>x&&(E&B)!==R){for(b===0&&(b=x),U+=g,j=f-b,S=1<<j;j+b<v&&(S-=pe[j+b],!(S<=0));)j++,S<<=1;if(A+=1<<j,e===V1&&A>tC||e===nC&&A>rC)return 1;R=E&B,s[R]=x<<24|j<<16|U-i|0}}return E!==0&&(s[U+E]=f-b<<24|64<<16|0),u.bits=x,0};var Sp=wte;const jte=0,F8=1,B8=2,{Z_FINISH:sC,Z_BLOCK:_te,Z_TREES:q0,Z_OK:wf,Z_STREAM_END:Nte,Z_NEED_DICT:Ste,Z_STREAM_ERROR:ko,Z_DATA_ERROR:U8,Z_MEM_ERROR:$8,Z_BUF_ERROR:Ate,Z_DEFLATED:iC}=M8,Mv=16180,oC=16181,lC=16182,cC=16183,uC=16184,dC=16185,fC=16186,hC=16187,mC=16188,pC=16189,Hx=16190,Mc=16191,H1=16192,gC=16193,G1=16194,xC=16195,vC=16196,yC=16197,bC=16198,F0=16199,B0=16200,wC=16201,jC=16202,_C=16203,NC=16204,SC=16205,K1=16206,AC=16207,CC=16208,en=16209,z8=16210,V8=16211,Cte=852,kte=592,Ete=15,Pte=Ete,kC=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Tte(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ef=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Mv||t.mode>V8?1:0},H8=e=>{if(Ef(e))return ko;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Mv,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Cte),t.distcode=t.distdyn=new Int32Array(kte),t.sane=1,t.back=-1,wf},G8=e=>{if(Ef(e))return ko;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,H8(e)},K8=(e,t)=>{let r;if(Ef(e))return ko;const a=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?ko:(a.window!==null&&a.wbits!==t&&(a.window=null),a.wrap=r,a.wbits=t,G8(e))},W8=(e,t)=>{if(!e)return ko;const r=new Tte;e.state=r,r.strm=e,r.window=null,r.mode=Mv;const a=K8(e,t);return a!==wf&&(e.state=null),a},Ote=e=>W8(e,Pte);let EC=!0,W1,Y1;const Dte=e=>{if(EC){W1=new Int32Array(512),Y1=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Sp(F8,e.lens,0,288,W1,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Sp(B8,e.lens,0,32,Y1,0,e.work,{bits:5}),EC=!1}e.lencode=W1,e.lenbits=9,e.distcode=Y1,e.distbits=5},Y8=(e,t,r,a)=>{let s;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),a>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>a&&(s=a),i.window.set(t.subarray(r-a,r-a+s),i.wnext),a-=s,a?(i.window.set(t.subarray(r-a,r),0),i.wnext=a,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},Rte=(e,t)=>{let r,a,s,i,l,u,d,f,m,g,v,x,j,b,S=0,A,E,T,D,R,B,U,I;const F=new Uint8Array(4);let pe,L;const q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ef(e)||!e.output||!e.input&&e.avail_in!==0)return ko;r=e.state,r.mode===Mc&&(r.mode=H1),l=e.next_out,s=e.output,d=e.avail_out,i=e.next_in,a=e.input,u=e.avail_in,f=r.hold,m=r.bits,g=u,v=d,I=wf;e:for(;;)switch(r.mode){case Mv:if(r.wrap===0){r.mode=H1;break}for(;m<16;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}if(r.wrap&2&&f===35615){r.wbits===0&&(r.wbits=15),r.check=0,F[0]=f&255,F[1]=f>>>8&255,r.check=zl(r.check,F,2,0),f=0,m=0,r.mode=oC;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",r.mode=en;break}if((f&15)!==iC){e.msg="unknown compression method",r.mode=en;break}if(f>>>=4,m-=4,U=(f&15)+8,r.wbits===0&&(r.wbits=U),U>15||U>r.wbits){e.msg="invalid window size",r.mode=en;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=f&512?pC:Mc,f=0,m=0;break;case oC:for(;m<16;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}if(r.flags=f,(r.flags&255)!==iC){e.msg="unknown compression method",r.mode=en;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=en;break}r.head&&(r.head.text=f>>8&1),r.flags&512&&r.wrap&4&&(F[0]=f&255,F[1]=f>>>8&255,r.check=zl(r.check,F,2,0)),f=0,m=0,r.mode=lC;case lC:for(;m<32;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}r.head&&(r.head.time=f),r.flags&512&&r.wrap&4&&(F[0]=f&255,F[1]=f>>>8&255,F[2]=f>>>16&255,F[3]=f>>>24&255,r.check=zl(r.check,F,4,0)),f=0,m=0,r.mode=cC;case cC:for(;m<16;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}r.head&&(r.head.xflags=f&255,r.head.os=f>>8),r.flags&512&&r.wrap&4&&(F[0]=f&255,F[1]=f>>>8&255,r.check=zl(r.check,F,2,0)),f=0,m=0,r.mode=uC;case uC:if(r.flags&1024){for(;m<16;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}r.length=f,r.head&&(r.head.extra_len=f),r.flags&512&&r.wrap&4&&(F[0]=f&255,F[1]=f>>>8&255,r.check=zl(r.check,F,2,0)),f=0,m=0}else r.head&&(r.head.extra=null);r.mode=dC;case dC:if(r.flags&1024&&(x=r.length,x>u&&(x=u),x&&(r.head&&(U=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(a.subarray(i,i+x),U)),r.flags&512&&r.wrap&4&&(r.check=zl(r.check,a,x,i)),u-=x,i+=x,r.length-=x),r.length))break e;r.length=0,r.mode=fC;case fC:if(r.flags&2048){if(u===0)break e;x=0;do U=a[i+x++],r.head&&U&&r.length<65536&&(r.head.name+=String.fromCharCode(U));while(U&&x<u);if(r.flags&512&&r.wrap&4&&(r.check=zl(r.check,a,x,i)),u-=x,i+=x,U)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=hC;case hC:if(r.flags&4096){if(u===0)break e;x=0;do U=a[i+x++],r.head&&U&&r.length<65536&&(r.head.comment+=String.fromCharCode(U));while(U&&x<u);if(r.flags&512&&r.wrap&4&&(r.check=zl(r.check,a,x,i)),u-=x,i+=x,U)break e}else r.head&&(r.head.comment=null);r.mode=mC;case mC:if(r.flags&512){for(;m<16;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}if(r.wrap&4&&f!==(r.check&65535)){e.msg="header crc mismatch",r.mode=en;break}f=0,m=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Mc;break;case pC:for(;m<32;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}e.adler=r.check=kC(f),f=0,m=0,r.mode=Hx;case Hx:if(r.havedict===0)return e.next_out=l,e.avail_out=d,e.next_in=i,e.avail_in=u,r.hold=f,r.bits=m,Ste;e.adler=r.check=1,r.mode=Mc;case Mc:if(t===_te||t===q0)break e;case H1:if(r.last){f>>>=m&7,m-=m&7,r.mode=K1;break}for(;m<3;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}switch(r.last=f&1,f>>>=1,m-=1,f&3){case 0:r.mode=gC;break;case 1:if(Dte(r),r.mode=F0,t===q0){f>>>=2,m-=2;break e}break;case 2:r.mode=vC;break;case 3:e.msg="invalid block type",r.mode=en}f>>>=2,m-=2;break;case gC:for(f>>>=m&7,m-=m&7;m<32;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",r.mode=en;break}if(r.length=f&65535,f=0,m=0,r.mode=G1,t===q0)break e;case G1:r.mode=xC;case xC:if(x=r.length,x){if(x>u&&(x=u),x>d&&(x=d),x===0)break e;s.set(a.subarray(i,i+x),l),u-=x,i+=x,d-=x,l+=x,r.length-=x;break}r.mode=Mc;break;case vC:for(;m<14;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}if(r.nlen=(f&31)+257,f>>>=5,m-=5,r.ndist=(f&31)+1,f>>>=5,m-=5,r.ncode=(f&15)+4,f>>>=4,m-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=en;break}r.have=0,r.mode=yC;case yC:for(;r.have<r.ncode;){for(;m<3;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}r.lens[q[r.have++]]=f&7,f>>>=3,m-=3}for(;r.have<19;)r.lens[q[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,pe={bits:r.lenbits},I=Sp(jte,r.lens,0,19,r.lencode,0,r.work,pe),r.lenbits=pe.bits,I){e.msg="invalid code lengths set",r.mode=en;break}r.have=0,r.mode=bC;case bC:for(;r.have<r.nlen+r.ndist;){for(;S=r.lencode[f&(1<<r.lenbits)-1],A=S>>>24,E=S>>>16&255,T=S&65535,!(A<=m);){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}if(T<16)f>>>=A,m-=A,r.lens[r.have++]=T;else{if(T===16){for(L=A+2;m<L;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}if(f>>>=A,m-=A,r.have===0){e.msg="invalid bit length repeat",r.mode=en;break}U=r.lens[r.have-1],x=3+(f&3),f>>>=2,m-=2}else if(T===17){for(L=A+3;m<L;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}f>>>=A,m-=A,U=0,x=3+(f&7),f>>>=3,m-=3}else{for(L=A+7;m<L;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}f>>>=A,m-=A,U=0,x=11+(f&127),f>>>=7,m-=7}if(r.have+x>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=en;break}for(;x--;)r.lens[r.have++]=U}}if(r.mode===en)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=en;break}if(r.lenbits=9,pe={bits:r.lenbits},I=Sp(F8,r.lens,0,r.nlen,r.lencode,0,r.work,pe),r.lenbits=pe.bits,I){e.msg="invalid literal/lengths set",r.mode=en;break}if(r.distbits=6,r.distcode=r.distdyn,pe={bits:r.distbits},I=Sp(B8,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,pe),r.distbits=pe.bits,I){e.msg="invalid distances set",r.mode=en;break}if(r.mode=F0,t===q0)break e;case F0:r.mode=B0;case B0:if(u>=6&&d>=258){e.next_out=l,e.avail_out=d,e.next_in=i,e.avail_in=u,r.hold=f,r.bits=m,gte(e,v),l=e.next_out,s=e.output,d=e.avail_out,i=e.next_in,a=e.input,u=e.avail_in,f=r.hold,m=r.bits,r.mode===Mc&&(r.back=-1);break}for(r.back=0;S=r.lencode[f&(1<<r.lenbits)-1],A=S>>>24,E=S>>>16&255,T=S&65535,!(A<=m);){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}if(E&&(E&240)===0){for(D=A,R=E,B=T;S=r.lencode[B+((f&(1<<D+R)-1)>>D)],A=S>>>24,E=S>>>16&255,T=S&65535,!(D+A<=m);){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}f>>>=D,m-=D,r.back+=D}if(f>>>=A,m-=A,r.back+=A,r.length=T,E===0){r.mode=SC;break}if(E&32){r.back=-1,r.mode=Mc;break}if(E&64){e.msg="invalid literal/length code",r.mode=en;break}r.extra=E&15,r.mode=wC;case wC:if(r.extra){for(L=r.extra;m<L;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}r.length+=f&(1<<r.extra)-1,f>>>=r.extra,m-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=jC;case jC:for(;S=r.distcode[f&(1<<r.distbits)-1],A=S>>>24,E=S>>>16&255,T=S&65535,!(A<=m);){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}if((E&240)===0){for(D=A,R=E,B=T;S=r.distcode[B+((f&(1<<D+R)-1)>>D)],A=S>>>24,E=S>>>16&255,T=S&65535,!(D+A<=m);){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}f>>>=D,m-=D,r.back+=D}if(f>>>=A,m-=A,r.back+=A,E&64){e.msg="invalid distance code",r.mode=en;break}r.offset=T,r.extra=E&15,r.mode=_C;case _C:if(r.extra){for(L=r.extra;m<L;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}r.offset+=f&(1<<r.extra)-1,f>>>=r.extra,m-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=en;break}r.mode=NC;case NC:if(d===0)break e;if(x=v-d,r.offset>x){if(x=r.offset-x,x>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=en;break}x>r.wnext?(x-=r.wnext,j=r.wsize-x):j=r.wnext-x,x>r.length&&(x=r.length),b=r.window}else b=s,j=l-r.offset,x=r.length;x>d&&(x=d),d-=x,r.length-=x;do s[l++]=b[j++];while(--x);r.length===0&&(r.mode=B0);break;case SC:if(d===0)break e;s[l++]=r.length,d--,r.mode=B0;break;case K1:if(r.wrap){for(;m<32;){if(u===0)break e;u--,f|=a[i++]<<m,m+=8}if(v-=d,e.total_out+=v,r.total+=v,r.wrap&4&&v&&(e.adler=r.check=r.flags?zl(r.check,s,v,l-v):Pw(r.check,s,v,l-v)),v=d,r.wrap&4&&(r.flags?f:kC(f))!==r.check){e.msg="incorrect data check",r.mode=en;break}f=0,m=0}r.mode=AC;case AC:if(r.wrap&&r.flags){for(;m<32;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}if(r.wrap&4&&f!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=en;break}f=0,m=0}r.mode=CC;case CC:I=Nte;break e;case en:I=U8;break e;case z8:return $8;case V8:default:return ko}return e.next_out=l,e.avail_out=d,e.next_in=i,e.avail_in=u,r.hold=f,r.bits=m,(r.wsize||v!==e.avail_out&&r.mode<en&&(r.mode<K1||t!==sC))&&Y8(e,e.output,e.next_out,v-e.avail_out),g-=e.avail_in,v-=e.avail_out,e.total_in+=g,e.total_out+=v,r.total+=v,r.wrap&4&&v&&(e.adler=r.check=r.flags?zl(r.check,s,v,e.next_out-v):Pw(r.check,s,v,e.next_out-v)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Mc?128:0)+(r.mode===F0||r.mode===G1?256:0),(g===0&&v===0||t===sC)&&I===wf&&(I=Ate),I},Lte=e=>{if(Ef(e))return ko;let t=e.state;return t.window&&(t.window=null),e.state=null,wf},Mte=(e,t)=>{if(Ef(e))return ko;const r=e.state;return(r.wrap&2)===0?ko:(r.head=t,t.done=!1,wf)},Ite=(e,t)=>{const r=t.length;let a,s,i;return Ef(e)||(a=e.state,a.wrap!==0&&a.mode!==Hx)?ko:a.mode===Hx&&(s=1,s=Pw(s,t,r,0),s!==a.check)?U8:(i=Y8(e,t,r,r),i?(a.mode=z8,$8):(a.havedict=1,wf))};var qte=G8,Fte=K8,Bte=H8,Ute=Ote,$te=W8,zte=Rte,Vte=Lte,Hte=Mte,Gte=Ite,Kte="pako inflate (from Nodeca project)",Bc={inflateReset:qte,inflateReset2:Fte,inflateResetKeep:Bte,inflateInit:Ute,inflateInit2:$te,inflate:zte,inflateEnd:Vte,inflateGetHeader:Hte,inflateSetDictionary:Gte,inflateInfo:Kte};function Wte(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Yte=Wte;const X8=Object.prototype.toString,{Z_NO_FLUSH:Xte,Z_FINISH:Zte,Z_OK:Kp,Z_STREAM_END:X1,Z_NEED_DICT:Z1,Z_STREAM_ERROR:Jte,Z_DATA_ERROR:PC,Z_MEM_ERROR:Qte}=M8;function ug(e){this.options=I8.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new mte,this.strm.avail_out=0;let r=Bc.inflateInit2(this.strm,t.windowBits);if(r!==Kp)throw new Error(Tw[r]);if(this.header=new Yte,Bc.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Ow.string2buf(t.dictionary):X8.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Bc.inflateSetDictionary(this.strm,t.dictionary),r!==Kp)))throw new Error(Tw[r])}ug.prototype.push=function(e,t){const r=this.strm,a=this.options.chunkSize,s=this.options.dictionary;let i,l,u;if(this.ended)return!1;for(t===~~t?l=t:l=t===!0?Zte:Xte,X8.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(a),r.next_out=0,r.avail_out=a),i=Bc.inflate(r,l),i===Z1&&s&&(i=Bc.inflateSetDictionary(r,s),i===Kp?i=Bc.inflate(r,l):i===PC&&(i=Z1));r.avail_in>0&&i===X1&&r.state.wrap>0&&e[r.next_in]!==0;)Bc.inflateReset(r),i=Bc.inflate(r,l);switch(i){case Jte:case PC:case Z1:case Qte:return this.onEnd(i),this.ended=!0,!1}if(u=r.avail_out,r.next_out&&(r.avail_out===0||i===X1))if(this.options.to==="string"){let d=Ow.utf8border(r.output,r.next_out),f=r.next_out-d,m=Ow.buf2string(r.output,d);r.next_out=f,r.avail_out=a-f,f&&r.output.set(r.output.subarray(d,d+f),0),this.onData(m)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===Kp&&u===0)){if(i===X1)return i=Bc.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};ug.prototype.onData=function(e){this.chunks.push(e)};ug.prototype.onEnd=function(e){e===Kp&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=I8.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function ere(e,t){const r=new ug(t);if(r.push(e),r.err)throw r.msg||Tw[r.err];return r.result}var tre=ug,rre=ere,are={Inflate:tre,inflate:rre};const{Inflate:nre,inflate:sre}=are;var TC=nre,ire=sre;const Z8=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;Z8[e]=t}const OC=4294967295;function ore(e,t,r){let a=e;for(let s=0;s<r;s++)a=Z8[(a^t[s])&255]^a>>>8;return a}function lre(e,t){return(ore(OC,e,t)^OC)>>>0}function DC(e,t,r){const a=e.readUint32(),s=lre(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(s!==a)throw new Error(`CRC mismatch for chunk ${r}. Expected ${a}, found ${s}`)}function J8(e,t,r){for(let a=0;a<r;a++)t[a]=e[a]}function Q8(e,t,r,a){let s=0;for(;s<a;s++)t[s]=e[s];for(;s<r;s++)t[s]=e[s]+t[s-a]&255}function eD(e,t,r,a){let s=0;if(r.length===0)for(;s<a;s++)t[s]=e[s];else for(;s<a;s++)t[s]=e[s]+r[s]&255}function tD(e,t,r,a,s){let i=0;if(r.length===0){for(;i<s;i++)t[i]=e[i];for(;i<a;i++)t[i]=e[i]+(t[i-s]>>1)&255}else{for(;i<s;i++)t[i]=e[i]+(r[i]>>1)&255;for(;i<a;i++)t[i]=e[i]+(t[i-s]+r[i]>>1)&255}}function rD(e,t,r,a,s){let i=0;if(r.length===0){for(;i<s;i++)t[i]=e[i];for(;i<a;i++)t[i]=e[i]+t[i-s]&255}else{for(;i<s;i++)t[i]=e[i]+r[i]&255;for(;i<a;i++)t[i]=e[i]+cre(t[i-s],r[i],r[i-s])&255}}function cre(e,t,r){const a=e+t-r,s=Math.abs(a-e),i=Math.abs(a-t),l=Math.abs(a-r);return s<=i&&s<=l?e:i<=l?t:r}function ure(e,t,r,a,s,i){switch(e){case 0:J8(t,r,s);break;case 1:Q8(t,r,s,i);break;case 2:eD(t,r,a,s);break;case 3:tD(t,r,a,s,i);break;case 4:rD(t,r,a,s,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const dre=new Uint16Array([255]),fre=new Uint8Array(dre.buffer),hre=fre[0]===255;function mre(e){const{data:t,width:r,height:a,channels:s,depth:i}=e,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],u=Math.ceil(i/8)*s,d=new Uint8Array(a*r*u);let f=0;for(let m=0;m<7;m++){const g=l[m],v=Math.ceil((r-g.x)/g.xStep),x=Math.ceil((a-g.y)/g.yStep);if(v<=0||x<=0)continue;const j=v*u,b=new Uint8Array(j);for(let S=0;S<x;S++){const A=t[f++],E=t.subarray(f,f+j);f+=j;const T=new Uint8Array(j);ure(A,E,T,b,j,u),b.set(T);for(let D=0;D<v;D++){const R=g.x+D*g.xStep,B=g.y+S*g.yStep;if(!(R>=r||B>=a))for(let U=0;U<u;U++)d[(B*r+R)*u+U]=T[D*u+U]}}}if(i===16){const m=new Uint16Array(d.buffer);if(hre)for(let g=0;g<m.length;g++)m[g]=pre(m[g]);return m}else return d}function pre(e){return(e&255)<<8|e>>8&255}const gre=new Uint16Array([255]),xre=new Uint8Array(gre.buffer),vre=xre[0]===255,yre=new Uint8Array(0);function RC(e){const{data:t,width:r,height:a,channels:s,depth:i}=e,l=Math.ceil(i/8)*s,u=Math.ceil(i/8*s*r),d=new Uint8Array(a*u);let f=yre,m=0,g,v;for(let x=0;x<a;x++){switch(g=t.subarray(m+1,m+1+u),v=d.subarray(x*u,(x+1)*u),t[m]){case 0:J8(g,v,u);break;case 1:Q8(g,v,u,l);break;case 2:eD(g,v,f,u);break;case 3:tD(g,v,f,u,l);break;case 4:rD(g,v,f,u,l);break;default:throw new Error(`Unsupported filter: ${t[m]}`)}f=v,m+=u+1}if(i===16){const x=new Uint16Array(d.buffer);if(vre)for(let j=0;j<x.length;j++)x[j]=bre(x[j]);return x}else return d}function bre(e){return(e&255)<<8|e>>8&255}const W0=Uint8Array.of(137,80,78,71,13,10,26,10);function LC(e){if(!wre(e.readBytes(W0.length)))throw new Error("wrong PNG signature")}function wre(e){if(e.length<W0.length)return!1;for(let t=0;t<W0.length;t++)if(e[t]!==W0[t])return!1;return!0}const jre="tEXt",_re=0,aD=new TextDecoder("latin1");function Nre(e){if(Are(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const Sre=/^[\u0000-\u00FF]*$/;function Are(e){if(!Sre.test(e))throw new Error("invalid latin1 text")}function Cre(e,t,r){const a=nD(t);e[a]=kre(t,r-a.length-1)}function nD(e){for(e.mark();e.readByte()!==_re;);const t=e.offset;e.reset();const r=aD.decode(e.readBytes(t-e.offset-1));return e.skip(1),Nre(r),r}function kre(e,t){return aD.decode(e.readBytes(t))}const Di={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},J1={UNKNOWN:-1,DEFLATE:0},MC={UNKNOWN:-1,ADAPTIVE:0},Q1={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},U0={NONE:0,BACKGROUND:1,PREVIOUS:2},e2={SOURCE:0,OVER:1};class Ere extends Y_{constructor(r,a={}){super(r);ca(this,"_checkCrc");ca(this,"_inflator");ca(this,"_png");ca(this,"_apng");ca(this,"_end");ca(this,"_hasPalette");ca(this,"_palette");ca(this,"_hasTransparency");ca(this,"_transparency");ca(this,"_compressionMethod");ca(this,"_filterMethod");ca(this,"_interlaceMethod");ca(this,"_colorType");ca(this,"_isAnimated");ca(this,"_numberOfFrames");ca(this,"_numberOfPlays");ca(this,"_frames");ca(this,"_writingDataChunks");const{checkCrc:s=!1}=a;this._checkCrc=s,this._inflator=new TC,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=J1.UNKNOWN,this._filterMethod=MC.UNKNOWN,this._interlaceMethod=Q1.UNKNOWN,this._colorType=Di.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(LC(this);!this._end;){const r=this.readUint32(),a=this.readChars(4);this.decodeChunk(r,a)}return this.decodeImage(),this._png}decodeApng(){for(LC(this);!this._end;){const r=this.readUint32(),a=this.readChars(4);this.decodeApngChunk(r,a)}return this.decodeApngImage(),this._apng}decodeChunk(r,a){const s=this.offset;switch(a){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case jre:Cre(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${a}`);this._checkCrc?DC(this,r+4,a):this.skip(4)}decodeApngChunk(r,a){const s=this.offset;switch(a!=="fdAT"&&a!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),a){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,a),this.offset=s+r;break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${a}`);this._checkCrc?DC(this,r+4,a):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=Pre(this.readUint8());const a=this.readUint8();this._colorType=a;let s;switch(a){case Di.GREYSCALE:s=1;break;case Di.TRUECOLOUR:s=3;break;case Di.INDEXED_COLOUR:s=1;break;case Di.GREYSCALE_ALPHA:s=2;break;case Di.TRUECOLOUR_ALPHA:s=4;break;case Di.UNKNOWN:default:throw new Error(`Unknown color type: ${a}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==J1.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const a=r/3;this._hasPalette=!0;const s=[];this._palette=s;for(let i=0;i<a;i++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const a=r,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,a)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let a=r,s=this.offset+this.byteOffset;if(s+=4,a-=4,this._inflator.push(new Uint8Array(this.buffer,s,a)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Di.GREYSCALE:case Di.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let a=0;a<r/2;a++)this._transparency[a]=this.readUint16();break}case Di.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let a=0;for(;a<r;a++){const s=this.readByte();this._palette[a].push(s)}for(;a<this._palette.length;a++)this._palette[a].push(255);break}case Di.UNKNOWN:case Di.GREYSCALE_ALPHA:case Di.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const a=nD(this),s=this.readUint8();if(s!==J1.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const i=this.readBytes(r-a.length-2);this._png.iccEmbeddedProfile={name:a,profile:ire(i)}}decodepHYs(){const r=this.readUint32(),a=this.readUint32(),s=this.readByte();this._png.resolution={x:r,y:a,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const a={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(r);if(s){if(s.data=RC({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)a.data=s.data;else{const i=this._apng.frames.at(r-1);this.disposeFrame(s,i,a),this.addFrameDataToCanvas(a,s)}this._apng.frames.push(a)}}return this._apng}disposeFrame(r,a,s){switch(r.disposeOp){case U0.NONE:break;case U0.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let l=0;l<this._png.width;l++){const u=(i*r.width+l)*this._png.channels;for(let d=0;d<this._png.channels;d++)s.data[u+d]=0}break;case U0.PREVIOUS:s.data.set(a.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,a){const s=1<<this._png.depth,i=(l,u)=>{const d=((l+a.yOffset)*this._png.width+a.xOffset+u)*this._png.channels,f=(l*a.width+u)*this._png.channels;return{index:d,frameIndex:f}};switch(a.blendOp){case e2.SOURCE:for(let l=0;l<a.height;l++)for(let u=0;u<a.width;u++){const{index:d,frameIndex:f}=i(l,u);for(let m=0;m<this._png.channels;m++)r.data[d+m]=a.data[f+m]}break;case e2.OVER:for(let l=0;l<a.height;l++)for(let u=0;u<a.width;u++){const{index:d,frameIndex:f}=i(l,u);for(let m=0;m<this._png.channels;m++){const g=a.data[f+this._png.channels-1]/s,v=m%(this._png.channels-1)===0?1:a.data[f+m],x=Math.floor(g*v+(1-g)*r.data[d+m]);r.data[d+m]+=x}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var a;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((a=this._frames)==null?void 0:a.at(0)).data:this._inflator.result;if(this._filterMethod!==MC.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Q1.NO_INTERLACE)this._png.data=RC({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Q1.ADAM7)this._png.data=mre({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,a=this._frames.at(-1);a?a.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:U0.NONE,blendOp:e2.SOURCE,data:r}),this._inflator=new TC,this._writingDataChunks=!1}}function Pre(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var IC;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(IC||(IC={}));function Tre(e,t){return new Ere(e,t).decode()}var _r=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function t2(){_r.console&&typeof _r.console.log=="function"&&_r.console.log.apply(_r.console,arguments)}var Ea={log:t2,warn:function(e){_r.console&&(typeof _r.console.warn=="function"?_r.console.warn.apply(_r.console,arguments):t2.call(null,arguments))},error:function(e){_r.console&&(typeof _r.console.error=="function"?_r.console.error.apply(_r.console,arguments):t2(e))}};function r2(e,t,r){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){Qd(a.response,t,r)},a.onerror=function(){Ea.error("could not download file")},a.send()}function qC(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function $0(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Qd=_r.saveAs||((typeof window>"u"?"undefined":ba(window))!=="object"||window!==_r?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var a=_r.URL||_r.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?qC(s.href)?r2(e,t,r):$0(s,s.target="_blank"):$0(s)):(s.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(s.href)},4e4),setTimeout(function(){$0(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(qC(e))r2(e,t,r);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){$0(a)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:ba(i)!=="object"&&(Ea.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(e,r),t)}:function(e,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof e=="string")return r2(e,t,r);var s=e.type==="application/octet-stream",i=/constructor/i.test(_r.HTMLElement)||_r.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||s&&i)&&(typeof FileReader>"u"?"undefined":ba(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var m=u.result;m=l?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=m:location=m,a=null},u.readAsDataURL(e)}else{var d=_r.URL||_r.webkitURL,f=d.createObjectURL(e);a?a.location=f:location.href=f,a=null,setTimeout(function(){d.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function sD(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],a=0;a<r.length;a++){var s=r[a].re,i=r[a].process,l=s.exec(e);l&&(t=i(l),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),d=this.g.toString(16),f=this.b.toString(16);return u.length==1&&(u="0"+u),d.length==1&&(d="0"+d),f.length==1&&(f="0"+f),"#"+u+d+f}}var Y0=_r.atob.bind(_r),FC=_r.btoa.bind(_r);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function a2(e,t){var r=e[0],a=e[1],s=e[2],i=e[3];r=Is(r,a,s,i,t[0],7,-680876936),i=Is(i,r,a,s,t[1],12,-389564586),s=Is(s,i,r,a,t[2],17,606105819),a=Is(a,s,i,r,t[3],22,-1044525330),r=Is(r,a,s,i,t[4],7,-176418897),i=Is(i,r,a,s,t[5],12,1200080426),s=Is(s,i,r,a,t[6],17,-1473231341),a=Is(a,s,i,r,t[7],22,-45705983),r=Is(r,a,s,i,t[8],7,1770035416),i=Is(i,r,a,s,t[9],12,-1958414417),s=Is(s,i,r,a,t[10],17,-42063),a=Is(a,s,i,r,t[11],22,-1990404162),r=Is(r,a,s,i,t[12],7,1804603682),i=Is(i,r,a,s,t[13],12,-40341101),s=Is(s,i,r,a,t[14],17,-1502002290),r=qs(r,a=Is(a,s,i,r,t[15],22,1236535329),s,i,t[1],5,-165796510),i=qs(i,r,a,s,t[6],9,-1069501632),s=qs(s,i,r,a,t[11],14,643717713),a=qs(a,s,i,r,t[0],20,-373897302),r=qs(r,a,s,i,t[5],5,-701558691),i=qs(i,r,a,s,t[10],9,38016083),s=qs(s,i,r,a,t[15],14,-660478335),a=qs(a,s,i,r,t[4],20,-405537848),r=qs(r,a,s,i,t[9],5,568446438),i=qs(i,r,a,s,t[14],9,-1019803690),s=qs(s,i,r,a,t[3],14,-187363961),a=qs(a,s,i,r,t[8],20,1163531501),r=qs(r,a,s,i,t[13],5,-1444681467),i=qs(i,r,a,s,t[2],9,-51403784),s=qs(s,i,r,a,t[7],14,1735328473),r=Fs(r,a=qs(a,s,i,r,t[12],20,-1926607734),s,i,t[5],4,-378558),i=Fs(i,r,a,s,t[8],11,-2022574463),s=Fs(s,i,r,a,t[11],16,1839030562),a=Fs(a,s,i,r,t[14],23,-35309556),r=Fs(r,a,s,i,t[1],4,-1530992060),i=Fs(i,r,a,s,t[4],11,1272893353),s=Fs(s,i,r,a,t[7],16,-155497632),a=Fs(a,s,i,r,t[10],23,-1094730640),r=Fs(r,a,s,i,t[13],4,681279174),i=Fs(i,r,a,s,t[0],11,-358537222),s=Fs(s,i,r,a,t[3],16,-722521979),a=Fs(a,s,i,r,t[6],23,76029189),r=Fs(r,a,s,i,t[9],4,-640364487),i=Fs(i,r,a,s,t[12],11,-421815835),s=Fs(s,i,r,a,t[15],16,530742520),r=Bs(r,a=Fs(a,s,i,r,t[2],23,-995338651),s,i,t[0],6,-198630844),i=Bs(i,r,a,s,t[7],10,1126891415),s=Bs(s,i,r,a,t[14],15,-1416354905),a=Bs(a,s,i,r,t[5],21,-57434055),r=Bs(r,a,s,i,t[12],6,1700485571),i=Bs(i,r,a,s,t[3],10,-1894986606),s=Bs(s,i,r,a,t[10],15,-1051523),a=Bs(a,s,i,r,t[1],21,-2054922799),r=Bs(r,a,s,i,t[8],6,1873313359),i=Bs(i,r,a,s,t[15],10,-30611744),s=Bs(s,i,r,a,t[6],15,-1560198380),a=Bs(a,s,i,r,t[13],21,1309151649),r=Bs(r,a,s,i,t[4],6,-145523070),i=Bs(i,r,a,s,t[11],10,-1120210379),s=Bs(s,i,r,a,t[2],15,718787259),a=Bs(a,s,i,r,t[9],21,-343485551),e[0]=ad(r,e[0]),e[1]=ad(a,e[1]),e[2]=ad(s,e[2]),e[3]=ad(i,e[3])}function Iv(e,t,r,a,s,i){return t=ad(ad(t,e),ad(a,i)),ad(t<<s|t>>>32-s,r)}function Is(e,t,r,a,s,i,l){return Iv(t&r|~t&a,e,t,s,i,l)}function qs(e,t,r,a,s,i,l){return Iv(t&a|r&~a,e,t,s,i,l)}function Fs(e,t,r,a,s,i,l){return Iv(t^r^a,e,t,s,i,l)}function Bs(e,t,r,a,s,i,l){return Iv(r^(t|~a),e,t,s,i,l)}function iD(e){var t,r=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)a2(a,Ore(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(a2(a,s),t=0;t<16;t++)s[t]=0;return s[14]=8*r,a2(a,s),a}function Ore(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var BC="0123456789abcdef".split("");function Dre(e){for(var t="",r=0;r<4;r++)t+=BC[e>>8*r+4&15]+BC[e>>8*r&15];return t}function Rre(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Dw(e){return iD(e).map(Rre).join("")}var Lre=function(e){for(var t=0;t<e.length;t++)e[t]=Dre(e[t]);return e.join("")}(iD("hello"))!="5d41402abc4b2a76b9719d911017c592";function ad(e,t){if(Lre){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Rw(e,t){var r,a,s,i;if(e!==r){for(var l=(s=e,i=1+(256/e.length|0),new Array(i+1).join(s)),u=[],d=0;d<256;d++)u[d]=d;var f=0;for(d=0;d<256;d++){var m=u[d];f=(f+m+l.charCodeAt(d))%256,u[d]=u[f],u[f]=m}r=e,a=u}else u=a;var g=t.length,v=0,x=0,j="";for(d=0;d<g;d++)x=(x+(m=u[v=(v+1)%256]))%256,u[v]=u[x],u[x]=m,l=u[(u[v]+u[x])%256],j+=String.fromCharCode(t.charCodeAt(d)^l);return j}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var UC={print:4,modify:8,copy:16,"annot-forms":32};function Th(e,t,r,a){this.v=1,this.r=2;var s=192;e.forEach(function(u){if(UC.perm!==void 0)throw new Error("Invalid permission: "+u);s+=UC[u]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(t+this.padding).substr(0,32),l=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,l),this.P=-(1+(255^s)),this.encryptionKey=Dw(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=Rw(this.encryptionKey,this.padding)}function Oh(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,a=0;a<r;a++){var s=e.charCodeAt(a);t+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):e[a]}return t}function $C(e){if(ba(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,a,s){if(s=s||!1,typeof r!="string"||typeof a!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[a,!!s],i},this.unsubscribe=function(r){for(var a in t)if(t[a][r])return delete t[a][r],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[r]){var l=t[r][i];try{l[0].apply(e,a)}catch(u){_r.console&&Ea.error("jsPDF PubSub Error",u.message,u)}l[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Gx(e){if(!(this instanceof Gx))return new Gx(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function oD(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function tf(e,t,r,a,s){if(!(this instanceof tf))return new tf(e,t,r,a,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,oD.call(this,a,s)}function Lh(e,t,r,a,s){if(!(this instanceof Lh))return new Lh(e,t,r,a,s);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,oD.call(this,a,s)}function nr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],s=arguments[2],i=arguments[3],l=[],u=1,d=16,f="S",m=null;ba(e=e||{})==="object"&&(r=e.orientation,a=e.unit||a,s=e.format||s,i=e.compress||e.compressPdf||i,(m=e.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),u=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(d=e.floatPrecision),f=e.defaultPathOperation||"S"),l=e.filters||(i===!0?["FlateEncode"]:l),a=a||"mm",r=(""+(r||"P")).toLowerCase();var g=e.putOnlyUsedFonts||!1,v={},x={internal:{},__private__:{}};x.__private__.PubSub=$C;var j="1.3",b=x.__private__.getPdfVersion=function(){return j};x.__private__.setPdfVersion=function(k){j=k};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return S};var A=x.__private__.getPageFormat=function(k){return S[k]};s=s||"a4";var E="compat",T="advanced",D=E;function R(){this.saveGraphicsState(),$(new St(Dt,0,0,-Dt,0,fc()*Dt).toString()+" cm"),this.setFontSize(this.getFontSize()/Dt),f="n",D=T}function B(){this.restoreGraphicsState(),f="S",D=E}var U=x.__private__.combineFontStyleAndFontWeight=function(k,J){if(k=="bold"&&J=="normal"||k=="bold"&&J==400||k=="normal"&&J=="italic"||k=="bold"&&J=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return J&&(k=J==400||J==="normal"?k==="italic"?"italic":"normal":J!=700&&J!=="bold"||k!=="normal"?(J==700?"bold":J)+""+k:"bold"),k};x.advancedAPI=function(k){var J=D===E;return J&&R.call(this),typeof k!="function"||(k(this),J&&B.call(this)),this},x.compatAPI=function(k){var J=D===T;return J&&B.call(this),typeof k!="function"||(k(this),J&&R.call(this)),this},x.isAdvancedAPI=function(){return D===T};var I,F=function(k){if(D!==T)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},pe=x.roundToPrecision=x.__private__.roundToPrecision=function(k,J){var Ne=t||J;if(isNaN(k)||isNaN(Ne))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(Ne).replace(/0+$/,"")};I=x.hpf=x.__private__.hpf=typeof d=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return pe(k,d)}:d==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return pe(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return pe(k,16)};var L=x.f2=x.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return pe(k,2)},q=x.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return pe(k,3)},z=x.scale=x.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return D===E?k*Dt:D===T?k:void 0},V=function(k){return z(function(J){return D===E?fc()-J:D===T?J:void 0}(k))};x.__private__.setPrecision=x.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(t=parseInt(k,10))};var de,se="00000000000000000000000000000000",fe=x.__private__.getFileId=function(){return se},oe=x.__private__.setFileId=function(k){return se=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(Mr=new Th(m.userPermissions,m.userPassword,m.ownerPassword,se)),se};x.setFileId=function(k){return oe(k),this},x.getFileId=function(){return fe()};var Se=x.__private__.convertDateToPDFDate=function(k){var J=k.getTimezoneOffset(),Ne=J<0?"+":"-",Me=Math.floor(Math.abs(J/60)),He=Math.abs(J%60),mt=[Ne,le(Me),"'",le(He),"'"].join("");return["D:",k.getFullYear(),le(k.getMonth()+1),le(k.getDate()),le(k.getHours()),le(k.getMinutes()),le(k.getSeconds()),mt].join("")},Y=x.__private__.convertPDFDateToDate=function(k){var J=parseInt(k.substr(2,4),10),Ne=parseInt(k.substr(6,2),10)-1,Me=parseInt(k.substr(8,2),10),He=parseInt(k.substr(10,2),10),mt=parseInt(k.substr(12,2),10),Nt=parseInt(k.substr(14,2),10);return new Date(J,Ne,Me,He,mt,Nt,0)},ye=x.__private__.setCreationDate=function(k){var J;if(k===void 0&&(k=new Date),k instanceof Date)J=Se(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");J=k}return de=J},P=x.__private__.getCreationDate=function(k){var J=de;return k==="jsDate"&&(J=Y(de)),J};x.setCreationDate=function(k){return ye(k),this},x.getCreationDate=function(k){return P(k)};var K,le=x.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},ee=x.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},me=0,ke=[],Ae=[],xe=0,De=[],ve=[],Z=!1,te=Ae;x.__private__.setCustomOutputDestination=function(k){Z=!0,te=k};var re=function(k){Z||(te=k)};x.__private__.resetCustomOutputDestination=function(){Z=!1,te=Ae};var $=x.__private__.out=function(k){return k=k.toString(),xe+=k.length+1,te.push(k),te},ne=x.__private__.write=function(k){return $(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},W=x.__private__.getArrayBuffer=function(k){for(var J=k.length,Ne=new ArrayBuffer(J),Me=new Uint8Array(Ne);J--;)Me[J]=k.charCodeAt(J);return Ne},be=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return be};var Ce=e.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(k){return Ce=D===T?k/Dt:k,this};var ze,Pe=x.__private__.getFontSize=x.getFontSize=function(){return D===E?Ce:Ce*Dt},we=e.R2L||!1;x.__private__.setR2L=x.setR2L=function(k){return we=k,this},x.__private__.getR2L=x.getR2L=function(){return we};var ae,qe=x.__private__.setZoomMode=function(k){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))ze=k;else if(isNaN(k)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');ze=k}else ze=parseInt(k,10)};x.__private__.getZoomMode=function(){return ze};var ft,Et=x.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');ae=k};x.__private__.getPageMode=function(){return ae};var Bt=x.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');ft=k};x.__private__.getLayoutMode=function(){return ft},x.__private__.setDisplayMode=x.setDisplayMode=function(k,J,Ne){return qe(k),Bt(J),Et(Ne),this};var vt={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(k){if(Object.keys(vt).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return vt[k]},x.__private__.getDocumentProperties=function(){return vt},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(k){for(var J in vt)vt.hasOwnProperty(J)&&k[J]&&(vt[J]=k[J]);return this},x.__private__.setDocumentProperty=function(k,J){if(Object.keys(vt).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return vt[k]=J};var ht,Dt,Ie,_t,jt,Pt={},Rt={},rr=[],Ke={},Re={},at={},rt={},Tt=null,Te=0,Ue=[],it=new $C(x),kt=e.hotfixes||[],We={},It={},ir=[],St=function k(J,Ne,Me,He,mt,Nt){if(!(this instanceof k))return new k(J,Ne,Me,He,mt,Nt);isNaN(J)&&(J=1),isNaN(Ne)&&(Ne=0),isNaN(Me)&&(Me=0),isNaN(He)&&(He=1),isNaN(mt)&&(mt=0),isNaN(Nt)&&(Nt=0),this._matrix=[J,Ne,Me,He,mt,Nt]};Object.defineProperty(St.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(St.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(St.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(St.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(St.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(St.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(St.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(St.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(St.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(St.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(St.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(St.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(St.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(St.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(St.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(St.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),St.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(I).join(k)},St.prototype.multiply=function(k){var J=k.sx*this.sx+k.shy*this.shx,Ne=k.sx*this.shy+k.shy*this.sy,Me=k.shx*this.sx+k.sy*this.shx,He=k.shx*this.shy+k.sy*this.sy,mt=k.tx*this.sx+k.ty*this.shx+this.tx,Nt=k.tx*this.shy+k.ty*this.sy+this.ty;return new St(J,Ne,Me,He,mt,Nt)},St.prototype.decompose=function(){var k=this.sx,J=this.shy,Ne=this.shx,Me=this.sy,He=this.tx,mt=this.ty,Nt=Math.sqrt(k*k+J*J),zt=(k/=Nt)*Ne+(J/=Nt)*Me;Ne-=k*zt,Me-=J*zt;var tr=Math.sqrt(Ne*Ne+Me*Me);return zt/=tr,k*(Me/=tr)<J*(Ne/=tr)&&(k=-k,J=-J,zt=-zt,Nt=-Nt),{scale:new St(Nt,0,0,tr,0,0),translate:new St(1,0,0,1,He,mt),rotate:new St(k,J,-J,k,0,0),skew:new St(1,0,zt,1,0,0)}},St.prototype.toString=function(k){return this.join(" ")},St.prototype.inversed=function(){var k=this.sx,J=this.shy,Ne=this.shx,Me=this.sy,He=this.tx,mt=this.ty,Nt=1/(k*Me-J*Ne),zt=Me*Nt,tr=-J*Nt,xr=-Ne*Nt,Nr=k*Nt;return new St(zt,tr,xr,Nr,-zt*He-xr*mt,-tr*He-Nr*mt)},St.prototype.applyToPoint=function(k){var J=k.x*this.sx+k.y*this.shx+this.tx,Ne=k.x*this.shy+k.y*this.sy+this.ty;return new uc(J,Ne)},St.prototype.applyToRectangle=function(k){var J=this.applyToPoint(k),Ne=this.applyToPoint(new uc(k.x+k.w,k.y+k.h));return new dc(J.x,J.y,Ne.x-J.x,Ne.y-J.y)},St.prototype.clone=function(){var k=this.sx,J=this.shy,Ne=this.shx,Me=this.sy,He=this.tx,mt=this.ty;return new St(k,J,Ne,Me,He,mt)},x.Matrix=St;var Ht=x.matrixMult=function(k,J){return J.multiply(k)},ar=new St(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=ar;var cr=function(k,J){if(!Re[k]){var Ne=(J instanceof tf?"Sh":"P")+(Object.keys(Ke).length+1).toString(10);J.id=Ne,Re[k]=Ne,Ke[Ne]=J,it.publish("addPattern",J)}};x.ShadingPattern=tf,x.TilingPattern=Lh,x.addShadingPattern=function(k,J){return F("addShadingPattern()"),cr(k,J),this},x.beginTilingPattern=function(k){F("beginTilingPattern()"),Mo(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},x.endTilingPattern=function(k,J){F("endTilingPattern()"),J.stream=ve[K].join(`
`),cr(k,J),it.publish("endTilingPattern",J),ir.pop().restore()};var Ur,Ar=x.__private__.newObject=function(){var k=or();return fr(k,!0),k},or=x.__private__.newObjectDeferred=function(){return me++,ke[me]=function(){return xe},me},fr=function(k,J){return J=typeof J=="boolean"&&J,ke[k]=xe,J&&$(k+" 0 obj"),k},gr=x.__private__.newAdditionalObject=function(){var k={objId:or(),content:""};return De.push(k),k},Fa=or(),nn=or(),sa=x.__private__.decodeColorString=function(k){var J=k.split(" ");if(J.length!==2||J[1]!=="g"&&J[1]!=="G")J.length!==5||J[4]!=="k"&&J[4]!=="K"||(J=[(1-J[0])*(1-J[3]),(1-J[1])*(1-J[3]),(1-J[2])*(1-J[3]),"r"]);else{var Ne=parseFloat(J[0]);J=[Ne,Ne,Ne,"r"]}for(var Me="#",He=0;He<3;He++)Me+=("0"+Math.floor(255*parseFloat(J[He])).toString(16)).slice(-2);return Me},Ba=x.__private__.encodeColorString=function(k){var J;typeof k=="string"&&(k={ch1:k});var Ne=k.ch1,Me=k.ch2,He=k.ch3,mt=k.ch4,Nt=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ne=="string"&&Ne.charAt(0)!=="#"){var zt=new sD(Ne);if(zt.ok)Ne=zt.toHex();else if(!/^\d*\.?\d*$/.test(Ne))throw new Error('Invalid color "'+Ne+'" passed to jsPDF.encodeColorString.')}if(typeof Ne=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ne)&&(Ne="#"+Ne[1]+Ne[1]+Ne[2]+Ne[2]+Ne[3]+Ne[3]),typeof Ne=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ne)){var tr=parseInt(Ne.substr(1),16);Ne=tr>>16&255,Me=tr>>8&255,He=255&tr}if(Me===void 0||mt===void 0&&Ne===Me&&Me===He)J=typeof Ne=="string"?Ne+" "+Nt[0]:k.precision===2?L(Ne/255)+" "+Nt[0]:q(Ne/255)+" "+Nt[0];else if(mt===void 0||ba(mt)==="object"){if(mt&&!isNaN(mt.a)&&mt.a===0)return["1.","1.","1.",Nt[1]].join(" ");J=typeof Ne=="string"?[Ne,Me,He,Nt[1]].join(" "):k.precision===2?[L(Ne/255),L(Me/255),L(He/255),Nt[1]].join(" "):[q(Ne/255),q(Me/255),q(He/255),Nt[1]].join(" ")}else J=typeof Ne=="string"?[Ne,Me,He,mt,Nt[2]].join(" "):k.precision===2?[L(Ne),L(Me),L(He),L(mt),Nt[2]].join(" "):[q(Ne),q(Me),q(He),q(mt),Nt[2]].join(" ");return J},dn=x.__private__.getFilters=function(){return l},Oa=x.__private__.putStream=function(k){var J=(k=k||{}).data||"",Ne=k.filters||dn(),Me=k.alreadyAppliedFilters||[],He=k.addLength1||!1,mt=J.length,Nt=k.objectId,zt=function(jn){return jn};if(m!==null&&Nt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(zt=Mr.encryptor(Nt,0));var tr={};Ne===!0&&(Ne=["FlateEncode"]);var xr=k.additionalKeyValues||[],Nr=(tr=nr.API.processDataByFilters!==void 0?nr.API.processDataByFilters(J,Ne):{data:J,reverseChain:[]}).reverseChain+(Array.isArray(Me)?Me.join(" "):Me.toString());if(tr.data.length!==0&&(xr.push({key:"Length",value:tr.data.length}),He===!0&&xr.push({key:"Length1",value:mt})),Nr.length!=0)if(Nr.split("/").length-1==1)xr.push({key:"Filter",value:Nr});else{xr.push({key:"Filter",value:"["+Nr+"]"});for(var Xr=0;Xr<xr.length;Xr+=1)if(xr[Xr].key==="DecodeParms"){for(var Ua=[],fn=0;fn<tr.reverseChain.split("/").length-1;fn+=1)Ua.push("null");Ua.push(xr[Xr].value),xr[Xr].value="["+Ua.join(" ")+"]"}}$("<<");for(var wa=0;wa<xr.length;wa++)$("/"+xr[wa].key+" "+xr[wa].value);$(">>"),tr.data.length!==0&&($("stream"),$(zt(tr.data)),$("endstream"))},Wr=x.__private__.putPage=function(k){var J=k.number,Ne=k.data,Me=k.objId,He=k.contentsObjId;fr(Me,!0),$("<</Type /Page"),$("/Parent "+k.rootDictionaryObjId+" 0 R"),$("/Resources "+k.resourceDictionaryObjId+" 0 R"),$("/MediaBox ["+parseFloat(I(k.mediaBox.bottomLeftX))+" "+parseFloat(I(k.mediaBox.bottomLeftY))+" "+I(k.mediaBox.topRightX)+" "+I(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&$("/CropBox ["+I(k.cropBox.bottomLeftX)+" "+I(k.cropBox.bottomLeftY)+" "+I(k.cropBox.topRightX)+" "+I(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&$("/BleedBox ["+I(k.bleedBox.bottomLeftX)+" "+I(k.bleedBox.bottomLeftY)+" "+I(k.bleedBox.topRightX)+" "+I(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&$("/TrimBox ["+I(k.trimBox.bottomLeftX)+" "+I(k.trimBox.bottomLeftY)+" "+I(k.trimBox.topRightX)+" "+I(k.trimBox.topRightY)+"]"),k.artBox!==null&&$("/ArtBox ["+I(k.artBox.bottomLeftX)+" "+I(k.artBox.bottomLeftY)+" "+I(k.artBox.topRightX)+" "+I(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&$("/UserUnit "+k.userUnit),it.publish("putPage",{objId:Me,pageContext:Ue[J],pageNumber:J,page:Ne}),$("/Contents "+He+" 0 R"),$(">>"),$("endobj");var mt=Ne.join(`
`);return D===T&&(mt+=`
Q`),fr(He,!0),Oa({data:mt,filters:dn(),objectId:He}),$("endobj"),Me},yn=x.__private__.putPages=function(){var k,J,Ne=[];for(k=1;k<=Te;k++)Ue[k].objId=or(),Ue[k].contentsObjId=or();for(k=1;k<=Te;k++)Ne.push(Wr({number:k,data:ve[k],objId:Ue[k].objId,contentsObjId:Ue[k].contentsObjId,mediaBox:Ue[k].mediaBox,cropBox:Ue[k].cropBox,bleedBox:Ue[k].bleedBox,trimBox:Ue[k].trimBox,artBox:Ue[k].artBox,userUnit:Ue[k].userUnit,rootDictionaryObjId:Fa,resourceDictionaryObjId:nn}));fr(Fa,!0),$("<</Type /Pages");var Me="/Kids [";for(J=0;J<Te;J++)Me+=Ne[J]+" 0 R ";$(Me+"]"),$("/Count "+Te),$(">>"),$("endobj"),it.publish("postPutPages")},Yr=function(k){it.publish("putFont",{font:k,out:$,newObject:Ar,putStream:Oa}),k.isAlreadyPutted!==!0&&(k.objectNumber=Ar(),$("<<"),$("/Type /Font"),$("/BaseFont /"+Oh(k.postScriptName)),$("/Subtype /Type1"),typeof k.encoding=="string"&&$("/Encoding /"+k.encoding),$("/FirstChar 32"),$("/LastChar 255"),$(">>"),$("endobj"))},lr=function(k){k.objectNumber=Ar();var J=[];J.push({key:"Type",value:"/XObject"}),J.push({key:"Subtype",value:"/Form"}),J.push({key:"BBox",value:"["+[I(k.x),I(k.y),I(k.x+k.width),I(k.y+k.height)].join(" ")+"]"}),J.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var Ne=k.pages[1].join(`
`);Oa({data:Ne,additionalKeyValues:J,objectId:k.objectNumber}),$("endobj")},ia=function(k,J){J||(J=21);var Ne=Ar(),Me=function(Nt,zt){var tr,xr=[],Nr=1/(zt-1);for(tr=0;tr<1;tr+=Nr)xr.push(tr);if(xr.push(1),Nt[0].offset!=0){var Xr={offset:0,color:Nt[0].color};Nt.unshift(Xr)}if(Nt[Nt.length-1].offset!=1){var Ua={offset:1,color:Nt[Nt.length-1].color};Nt.push(Ua)}for(var fn="",wa=0,jn=0;jn<xr.length;jn++){for(tr=xr[jn];tr>Nt[wa+1].offset;)wa++;var hn=Nt[wa].offset,$n=(tr-hn)/(Nt[wa+1].offset-hn),ii=Nt[wa].color,Ds=Nt[wa+1].color;fn+=ee(Math.round((1-$n)*ii[0]+$n*Ds[0]).toString(16))+ee(Math.round((1-$n)*ii[1]+$n*Ds[1]).toString(16))+ee(Math.round((1-$n)*ii[2]+$n*Ds[2]).toString(16))}return fn.trim()}(k.colors,J),He=[];He.push({key:"FunctionType",value:"0"}),He.push({key:"Domain",value:"[0.0 1.0]"}),He.push({key:"Size",value:"["+J+"]"}),He.push({key:"BitsPerSample",value:"8"}),He.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),He.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Oa({data:Me,additionalKeyValues:He,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ne}),$("endobj"),k.objectNumber=Ar(),$("<< /ShadingType "+k.type),$("/ColorSpace /DeviceRGB");var mt="/Coords ["+I(parseFloat(k.coords[0]))+" "+I(parseFloat(k.coords[1]))+" ";k.type===2?mt+=I(parseFloat(k.coords[2]))+" "+I(parseFloat(k.coords[3])):mt+=I(parseFloat(k.coords[2]))+" "+I(parseFloat(k.coords[3]))+" "+I(parseFloat(k.coords[4]))+" "+I(parseFloat(k.coords[5])),$(mt+="]"),k.matrix&&$("/Matrix ["+k.matrix.toString()+"]"),$("/Function "+Ne+" 0 R"),$("/Extend [true true]"),$(">>"),$("endobj")},ni=function(k,J){var Ne=or(),Me=Ar();J.push({resourcesOid:Ne,objectOid:Me}),k.objectNumber=Me;var He=[];He.push({key:"Type",value:"/Pattern"}),He.push({key:"PatternType",value:"1"}),He.push({key:"PaintType",value:"1"}),He.push({key:"TilingType",value:"1"}),He.push({key:"BBox",value:"["+k.boundingBox.map(I).join(" ")+"]"}),He.push({key:"XStep",value:I(k.xStep)}),He.push({key:"YStep",value:I(k.yStep)}),He.push({key:"Resources",value:Ne+" 0 R"}),k.matrix&&He.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),Oa({data:k.stream,additionalKeyValues:He,objectId:k.objectNumber}),$("endobj")},bn=function(k){for(var J in k.objectNumber=Ar(),$("<<"),k)switch(J){case"opacity":$("/ca "+L(k[J]));break;case"stroke-opacity":$("/CA "+L(k[J]))}$(">>"),$("endobj")},gl=function(k){fr(k.resourcesOid,!0),$("<<"),$("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var J in $("/Font <<"),Pt)Pt.hasOwnProperty(J)&&(g===!1||g===!0&&v.hasOwnProperty(J))&&$("/"+J+" "+Pt[J].objectNumber+" 0 R");$(">>")}(),function(){if(Object.keys(Ke).length>0){for(var J in $("/Shading <<"),Ke)Ke.hasOwnProperty(J)&&Ke[J]instanceof tf&&Ke[J].objectNumber>=0&&$("/"+J+" "+Ke[J].objectNumber+" 0 R");it.publish("putShadingPatternDict"),$(">>")}}(),function(J){if(Object.keys(Ke).length>0){for(var Ne in $("/Pattern <<"),Ke)Ke.hasOwnProperty(Ne)&&Ke[Ne]instanceof x.TilingPattern&&Ke[Ne].objectNumber>=0&&Ke[Ne].objectNumber<J&&$("/"+Ne+" "+Ke[Ne].objectNumber+" 0 R");it.publish("putTilingPatternDict"),$(">>")}}(k.objectOid),function(){if(Object.keys(at).length>0){var J;for(J in $("/ExtGState <<"),at)at.hasOwnProperty(J)&&at[J].objectNumber>=0&&$("/"+J+" "+at[J].objectNumber+" 0 R");it.publish("putGStateDict"),$(">>")}}(),function(){for(var J in $("/XObject <<"),We)We.hasOwnProperty(J)&&We[J].objectNumber>=0&&$("/"+J+" "+We[J].objectNumber+" 0 R");it.publish("putXobjectDict"),$(">>")}(),$(">>"),$("endobj")},cu=function(k){Rt[k.fontName]=Rt[k.fontName]||{},Rt[k.fontName][k.fontStyle]=k.id},Do=function(k,J,Ne,Me,He){var mt={id:"F"+(Object.keys(Pt).length+1).toString(10),postScriptName:k,fontName:J,fontStyle:Ne,encoding:Me,isStandardFont:He||!1,metadata:{}};return it.publish("addFont",{font:mt,instance:this}),Pt[mt.id]=mt,cu(mt),mt.id},Un=x.__private__.pdfEscape=x.pdfEscape=function(k,J){return function(Ne,Me){var He,mt,Nt,zt,tr,xr,Nr,Xr,Ua;if(Nt=(Me=Me||{}).sourceEncoding||"Unicode",tr=Me.outputEncoding,(Me.autoencode||tr)&&Pt[ht].metadata&&Pt[ht].metadata[Nt]&&Pt[ht].metadata[Nt].encoding&&(zt=Pt[ht].metadata[Nt].encoding,!tr&&Pt[ht].encoding&&(tr=Pt[ht].encoding),!tr&&zt.codePages&&(tr=zt.codePages[0]),typeof tr=="string"&&(tr=zt[tr]),tr)){for(Nr=!1,xr=[],He=0,mt=Ne.length;He<mt;He++)(Xr=tr[Ne.charCodeAt(He)])?xr.push(String.fromCharCode(Xr)):xr.push(Ne[He]),xr[He].charCodeAt(0)>>8&&(Nr=!0);Ne=xr.join("")}for(He=Ne.length;Nr===void 0&&He!==0;)Ne.charCodeAt(He-1)>>8&&(Nr=!0),He--;if(!Nr)return Ne;for(xr=Me.noBOM?[]:[254,255],He=0,mt=Ne.length;He<mt;He++){if((Ua=(Xr=Ne.charCodeAt(He))>>8)>>8)throw new Error("Character at position "+He+" of string '"+Ne+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");xr.push(Ua),xr.push(Xr-(Ua<<8))}return String.fromCharCode.apply(void 0,xr)}(k,J).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},gs=x.__private__.beginPage=function(k){ve[++Te]=[],Ue[Te]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},bi(Te),re(ve[K])},xl=function(k,J){var Ne,Me,He;switch(r=J||r,typeof k=="string"&&(Ne=A(k.toLowerCase()),Array.isArray(Ne)&&(Me=Ne[0],He=Ne[1])),Array.isArray(k)&&(Me=k[0]*Dt,He=k[1]*Dt),isNaN(Me)&&(Me=s[0],He=s[1]),(Me>14400||He>14400)&&(Ea.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Me=Math.min(14400,Me),He=Math.min(14400,He)),s=[Me,He],r.substr(0,1)){case"l":He>Me&&(s=[He,Me]);break;case"p":Me>He&&(s=[He,Me])}gs(s),Gr(Hr),$(fa),_i!==0&&$(_i+" J"),_l!==0&&$(_l+" j"),it.publish("addPage",{pageNumber:Te})},vl=function(k){k>0&&k<=Te&&(ve.splice(k,1),Ue.splice(k,1),Te--,K>Te&&(K=Te),this.setPage(K))},bi=function(k){k>0&&k<=Te&&(K=k)},yl=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return ve.length-1},bl=function(k,J,Ne){var Me,He=void 0;return Ne=Ne||{},k=k!==void 0?k:Pt[ht].fontName,J=J!==void 0?J:Pt[ht].fontStyle,Me=k.toLowerCase(),Rt[Me]!==void 0&&Rt[Me][J]!==void 0?He=Rt[Me][J]:Rt[k]!==void 0&&Rt[k][J]!==void 0?He=Rt[k][J]:Ne.disableWarning===!1&&Ea.warn("Unable to look up font label for font '"+k+"', '"+J+"'. Refer to getFontList() for available fonts."),He||Ne.noFallback||(He=Rt.times[J])==null&&(He=Rt.times.normal),He},wl=x.__private__.putInfo=function(){var k=Ar(),J=function(Me){return Me};for(var Ne in m!==null&&(J=Mr.encryptor(k,0)),$("<<"),$("/Producer ("+Un(J("jsPDF "+nr.version))+")"),vt)vt.hasOwnProperty(Ne)&&vt[Ne]&&$("/"+Ne.substr(0,1).toUpperCase()+Ne.substr(1)+" ("+Un(J(vt[Ne]))+")");$("/CreationDate ("+Un(J(de))+")"),$(">>"),$("endobj")},uu=x.__private__.putCatalog=function(k){var J=(k=k||{}).rootDictionaryObjId||Fa;switch(Ar(),$("<<"),$("/Type /Catalog"),$("/Pages "+J+" 0 R"),ze||(ze="fullwidth"),ze){case"fullwidth":$("/OpenAction [3 0 R /FitH null]");break;case"fullheight":$("/OpenAction [3 0 R /FitV null]");break;case"fullpage":$("/OpenAction [3 0 R /Fit]");break;case"original":$("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ne=""+ze;Ne.substr(Ne.length-1)==="%"&&(ze=parseInt(ze)/100),typeof ze=="number"&&$("/OpenAction [3 0 R /XYZ null null "+L(ze)+"]")}switch(ft||(ft="continuous"),ft){case"continuous":$("/PageLayout /OneColumn");break;case"single":$("/PageLayout /SinglePage");break;case"two":case"twoleft":$("/PageLayout /TwoColumnLeft");break;case"tworight":$("/PageLayout /TwoColumnRight")}ae&&$("/PageMode /"+ae),it.publish("putCatalog"),$(">>"),$("endobj")},Vr=x.__private__.putTrailer=function(){$("trailer"),$("<<"),$("/Size "+(me+1)),$("/Root "+me+" 0 R"),$("/Info "+(me-1)+" 0 R"),m!==null&&$("/Encrypt "+Mr.oid+" 0 R"),$("/ID [ <"+se+"> <"+se+"> ]"),$(">>")},ic=x.__private__.putHeader=function(){$("%PDF-"+j),$("%ºß¬à")},du=x.__private__.putXRef=function(){var k="0000000000";$("xref"),$("0 "+(me+1)),$("0000000000 65535 f ");for(var J=1;J<=me;J++)typeof ke[J]=="function"?$((k+ke[J]()).slice(-10)+" 00000 n "):ke[J]!==void 0?$((k+ke[J]).slice(-10)+" 00000 n "):$("0000000000 00000 n ")},Os=x.__private__.buildDocument=function(){var k;me=0,xe=0,Ae=[],ke=[],De=[],Fa=or(),nn=or(),re(Ae),it.publish("buildDocument"),ic(),yn(),function(){it.publish("putAdditionalObjects");for(var Ne=0;Ne<De.length;Ne++){var Me=De[Ne];fr(Me.objId,!0),$(Me.content),$("endobj")}it.publish("postPutAdditionalObjects")}(),k=[],function(){for(var Ne in Pt)Pt.hasOwnProperty(Ne)&&(g===!1||g===!0&&v.hasOwnProperty(Ne))&&Yr(Pt[Ne])}(),function(){var Ne;for(Ne in at)at.hasOwnProperty(Ne)&&bn(at[Ne])}(),function(){for(var Ne in We)We.hasOwnProperty(Ne)&&lr(We[Ne])}(),function(Ne){var Me;for(Me in Ke)Ke.hasOwnProperty(Me)&&(Ke[Me]instanceof tf?ia(Ke[Me]):Ke[Me]instanceof Lh&&ni(Ke[Me],Ne))}(k),it.publish("putResources"),k.forEach(gl),gl({resourcesOid:nn,objectOid:Number.MAX_SAFE_INTEGER}),it.publish("postPutResources"),m!==null&&(Mr.oid=Ar(),$("<<"),$("/Filter /Standard"),$("/V "+Mr.v),$("/R "+Mr.r),$("/U <"+Mr.toHexString(Mr.U)+">"),$("/O <"+Mr.toHexString(Mr.O)+">"),$("/P "+Mr.P),$(">>"),$("endobj")),wl(),uu();var J=xe;return du(),Vr(),$("startxref"),$(""+J),$("%%EOF"),re(ve[K]),Ae.join(`
`)},Xi=x.__private__.getBlob=function(k){return new Blob([W(k)],{type:"application/pdf"})},Ln=x.output=x.__private__.output=(Ur=function(k,J){switch(typeof(J=J||{})=="string"?J={filename:J}:J.filename=J.filename||"generated.pdf",k){case void 0:return Os();case"save":x.save(J.filename);break;case"arraybuffer":return W(Os());case"blob":return Xi(Os());case"bloburi":case"bloburl":if(_r.URL!==void 0&&typeof _r.URL.createObjectURL=="function")return _r.URL&&_r.URL.createObjectURL(Xi(Os()))||void 0;Ea.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ne="",Me=Os();try{Ne=FC(Me)}catch{Ne=FC(unescape(encodeURIComponent(Me)))}return"data:application/pdf;filename="+J.filename+";base64,"+Ne;case"pdfobjectnewwindow":if(Object.prototype.toString.call(_r)==="[object Window]"){var He="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",mt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';J.pdfObjectUrl&&(He=J.pdfObjectUrl,mt="");var Nt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+He+'"'+mt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(J)+");<\/script></body></html>",zt=_r.open();return zt!==null&&zt.document.write(Nt),zt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(_r)==="[object Window]"){var tr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(J.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+J.filename+'" width="500px" height="400px" /></body></html>',xr=_r.open();if(xr!==null){xr.document.write(tr);var Nr=this;xr.document.documentElement.querySelector("#pdfViewer").onload=function(){xr.document.title=J.filename,xr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Nr.output("bloburl"))}}return xr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(_r)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Xr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",J)+'"></iframe></body></html>',Ua=_r.open();if(Ua!==null&&(Ua.document.write(Xr),Ua.document.title=J.filename),Ua||typeof safari>"u")return Ua;break;case"datauri":case"dataurl":return _r.document.location.href=this.output("datauristring",J);default:return null}},Ur.foo=function(){try{return Ur.apply(this,arguments)}catch(Ne){var k=Ne.stack||"";~k.indexOf(" at ")&&(k=k.split(" at ")[1]);var J="Error in function "+k.split(`
`)[0].split("<")[0]+": "+Ne.message;if(!_r.console)throw new Error(J);_r.console.error(J,Ne),_r.alert&&alert(J)}},Ur.foo.bar=Ur,Ur.foo),Ro=function(k){return Array.isArray(kt)===!0&&kt.indexOf(k)>-1};switch(a){case"pt":Dt=1;break;case"mm":Dt=72/25.4;break;case"cm":Dt=72/2.54;break;case"in":Dt=72;break;case"px":Dt=Ro("px_scaling")==1?.75:96/72;break;case"pc":case"em":Dt=12;break;case"ex":Dt=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);Dt=a}var Mr=null;ye(),oe();var wi=x.__private__.getPageInfo=x.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ue[k].objId,pageNumber:k,pageContext:Ue[k]}},si=x.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var J in Ue)if(Ue[J].objId===k)break;return wi(J)},oc=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:Ue[K].objId,pageNumber:K,pageContext:Ue[K]}};x.addPage=function(){return xl.apply(this,arguments),this},x.setPage=function(){return bi.apply(this,arguments),re.call(this,ve[K]),this},x.insertPage=function(k){return this.addPage(),this.movePage(K,k),this},x.movePage=function(k,J){var Ne,Me;if(k>J){Ne=ve[k],Me=Ue[k];for(var He=k;He>J;He--)ve[He]=ve[He-1],Ue[He]=Ue[He-1];ve[J]=Ne,Ue[J]=Me,this.setPage(J)}else if(k<J){Ne=ve[k],Me=Ue[k];for(var mt=k;mt<J;mt++)ve[mt]=ve[mt+1],Ue[mt]=Ue[mt+1];ve[J]=Ne,Ue[J]=Me,this.setPage(J)}return this},x.deletePage=function(){return vl.apply(this,arguments),this},x.__private__.text=x.text=function(k,J,Ne,Me,He){var mt,Nt,zt,tr,xr,Nr,Xr,Ua,fn,wa=(Me=Me||{}).scope||this;if(typeof k=="number"&&typeof J=="number"&&(typeof Ne=="string"||Array.isArray(Ne))){var jn=Ne;Ne=J,J=k,k=jn}if(arguments[3]instanceof St==0?(zt=arguments[4],tr=arguments[5],ba(Xr=arguments[3])==="object"&&Xr!==null||(typeof zt=="string"&&(tr=zt,zt=null),typeof Xr=="string"&&(tr=Xr,Xr=null),typeof Xr=="number"&&(zt=Xr,Xr=null),Me={flags:Xr,angle:zt,align:tr})):(F("The transform parameter of text() with a Matrix value"),fn=He),isNaN(J)||isNaN(Ne)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return wa;var hn,$n="",ii=typeof Me.lineHeightFactor=="number"?Me.lineHeightFactor:dr,Ds=wa.internal.scaleFactor;function Rf(Ir){return Ir=Ir.split("	").join(Array(Me.TabLen||9).join(" ")),Un(Ir,Xr)}function Sl(Ir){for(var oa,Wa=Ir.concat(),Aa=[],to=Wa.length;to--;)typeof(oa=Wa.shift())=="string"?Aa.push(oa):Array.isArray(Ir)&&(oa.length===1||oa[1]===void 0&&oa[2]===void 0)?Aa.push(oa[0]):Aa.push([oa[0],oa[1],oa[2]]);return Aa}function Si(Ir,oa){var Wa;if(typeof Ir=="string")Wa=oa(Ir)[0];else if(Array.isArray(Ir)){for(var Aa,to,yu=Ir.concat(),pc=[],Mf=yu.length;Mf--;)typeof(Aa=yu.shift())=="string"?pc.push(oa(Aa)[0]):Array.isArray(Aa)&&typeof Aa[0]=="string"&&(to=oa(Aa[0],Aa[1],Aa[2]),pc.push([to[0],to[1],to[2]]));Wa=pc}return Wa}var Al=!1,Cl=!0;if(typeof k=="string")Al=!0;else if(Array.isArray(k)){var kl=k.concat();Nt=[];for(var El,zn=kl.length;zn--;)(typeof(El=kl.shift())!="string"||Array.isArray(El)&&typeof El[0]!="string")&&(Cl=!1);Al=Cl}if(Al===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var Pl=Ce/wa.internal.scaleFactor,oi=Pl*(ii-1);switch(Me.baseline){case"bottom":Ne-=oi;break;case"top":Ne+=Pl-oi;break;case"hanging":Ne+=Pl-2*oi;break;case"middle":Ne+=Pl/2-oi}if((Nr=Me.maxWidth||0)>0&&(typeof k=="string"?k=wa.splitTextToSize(k,Nr):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(Ir,oa){return Ir.concat(wa.splitTextToSize(oa,Nr))},[]))),mt={text:k,x:J,y:Ne,options:Me,mutex:{pdfEscape:Un,activeFontKey:ht,fonts:Pt,activeFontSize:Ce}},it.publish("preProcessText",mt),k=mt.text,zt=(Me=mt.options).angle,fn instanceof St==0&&zt&&typeof zt=="number"){zt*=Math.PI/180,Me.rotationDirection===0&&(zt=-zt),D===T&&(zt=-zt);var _d=Math.cos(zt),Nd=Math.sin(zt);fn=new St(_d,Nd,-Nd,_d,0,0)}else zt&&zt instanceof St&&(fn=zt);D!==T||fn||(fn=ar),(xr=Me.charSpace||cc)!==void 0&&($n+=I(z(xr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ua=Me.horizontalScale)!==void 0&&($n+=I(100*Ua)+` Tz
`),Me.lang;var Ga=-1,Ji=Me.renderingMode!==void 0?Me.renderingMode:Me.stroke,hc=wa.internal.getCurrentPageInfo().pageContext;switch(Ji){case 0:case!1:case"fill":Ga=0;break;case 1:case!0:case"stroke":Ga=1;break;case 2:case"fillThenStroke":Ga=2;break;case 3:case"invisible":Ga=3;break;case 4:case"fillAndAddForClipping":Ga=4;break;case 5:case"strokeAndAddPathForClipping":Ga=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ga=6;break;case 7:case"addToPathForClipping":Ga=7}var Tl=hc.usedRenderingMode!==void 0?hc.usedRenderingMode:-1;Ga!==-1?$n+=Ga+` Tr
`:Tl!==-1&&($n+=`0 Tr
`),Ga!==-1&&(hc.usedRenderingMode=Ga),tr=Me.align||"left";var Qn,mc=Ce*ii,Ol=wa.internal.pageSize.getWidth(),hu=Pt[ht];xr=Me.charSpace||cc,Nr=Me.maxWidth||0,Xr=Object.assign({autoencode:!0,noBOM:!0},Me.flags);var Fo=[],Bo=function(Ir){return wa.getStringUnitWidth(Ir,{font:hu,charSpace:xr,fontSize:Ce,doKerning:!1})*Ce/Ds};if(Object.prototype.toString.call(k)==="[object Array]"){var vs;Nt=Sl(k),tr!=="left"&&(Qn=Nt.map(Bo));var Rs,Uo=0;if(tr==="right"){J-=Qn[0],k=[],zn=Nt.length;for(var Qi=0;Qi<zn;Qi++)Qi===0?(Rs=Ut(J),vs=ma(Ne)):(Rs=z(Uo-Qn[Qi]),vs=-mc),k.push([Nt[Qi],Rs,vs]),Uo=Qn[Qi]}else if(tr==="center"){J-=Qn[0]/2,k=[],zn=Nt.length;for(var Dl=0;Dl<zn;Dl++)Dl===0?(Rs=Ut(J),vs=ma(Ne)):(Rs=z((Uo-Qn[Dl])/2),vs=-mc),k.push([Nt[Dl],Rs,vs]),Uo=Qn[Dl]}else if(tr==="left"){k=[],zn=Nt.length;for(var Sd=0;Sd<zn;Sd++)k.push(Nt[Sd])}else if(tr==="justify"&&hu.encoding==="Identity-H"){k=[],zn=Nt.length,Nr=Nr!==0?Nr:Ol;for(var mu=0,sn=0;sn<zn;sn++)if(vs=sn===0?ma(Ne):-mc,Rs=sn===0?Ut(J):mu,sn<zn-1){var Lf=z((Nr-Qn[sn])/(Nt[sn].split(" ").length-1)),Ka=Nt[sn].split(" ");k.push([Ka[0]+" ",Rs,vs]),mu=0;for(var Ls=1;Ls<Ka.length;Ls++){var pu=(Bo(Ka[Ls-1]+" "+Ka[Ls])-Bo(Ka[Ls]))*Ds+Lf;Ls==Ka.length-1?k.push([Ka[Ls],pu,0]):k.push([Ka[Ls]+" ",pu,0]),mu-=pu}}else k.push([Nt[sn],Rs,vs]);k.push(["",mu,0])}else{if(tr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(k=[],zn=Nt.length,Nr=Nr!==0?Nr:Ol,sn=0;sn<zn;sn++){vs=sn===0?ma(Ne):-mc,Rs=sn===0?Ut(J):0;var gu=Nt[sn].split(" ").length-1,xu=gu>0?(Nr-Qn[sn])/gu:0;sn<zn-1?Fo.push(I(z(xu))):Fo.push(0),k.push([Nt[sn],Rs,vs])}}}(typeof Me.R2L=="boolean"?Me.R2L:we)===!0&&(k=Si(k,function(Ir,oa,Wa){return[Ir.split("").reverse().join(""),oa,Wa]})),mt={text:k,x:J,y:Ne,options:Me,mutex:{pdfEscape:Un,activeFontKey:ht,fonts:Pt,activeFontSize:Ce}},it.publish("postProcessText",mt),k=mt.text,hn=mt.mutex.isHex||!1;var vu=Pt[ht].encoding;vu!=="WinAnsiEncoding"&&vu!=="StandardEncoding"||(k=Si(k,function(Ir,oa,Wa){return[Rf(Ir),oa,Wa]})),Nt=Sl(k),k=[];for(var eo,Rl,Gs,$o=Array.isArray(Nt[0])?1:0,li="",zo=function(Ir,oa,Wa){var Aa="";return Wa instanceof St?(Wa=typeof Me.angle=="number"?Ht(Wa,new St(1,0,0,1,Ir,oa)):Ht(new St(1,0,0,1,Ir,oa),Wa),D===T&&(Wa=Ht(new St(1,0,0,-1,0,0),Wa)),Aa=Wa.join(" ")+` Tm
`):Aa=I(Ir)+" "+I(oa)+` Td
`,Aa},Ks=0;Ks<Nt.length;Ks++){switch(li="",$o){case 1:Gs=(hn?"<":"(")+Nt[Ks][0]+(hn?">":")"),eo=parseFloat(Nt[Ks][1]),Rl=parseFloat(Nt[Ks][2]);break;case 0:Gs=(hn?"<":"(")+Nt[Ks]+(hn?">":")"),eo=Ut(J),Rl=ma(Ne)}Fo!==void 0&&Fo[Ks]!==void 0&&(li=Fo[Ks]+` Tw
`),Ks===0?k.push(li+zo(eo,Rl,fn)+Gs):$o===0?k.push(li+Gs):$o===1&&k.push(li+zo(eo,Rl,fn)+Gs)}k=$o===0?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var es=`BT
/`;return es+=ht+" "+Ce+` Tf
`,es+=I(Ce*ii)+` TL
`,es+=wn+`
`,es+=$n,es+=k,$(es+="ET"),v[ht]=!0,wa};var ji=x.__private__.clip=x.clip=function(k){return $(k==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return ji("evenodd")},x.__private__.discardPath=x.discardPath=function(){return $("n"),this};var Hs=x.__private__.isValidStyle=function(k){var J=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(J=!0),J};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(k){return Hs(k)&&(f=k),this};var lc=x.__private__.getStyle=x.getStyle=function(k){var J=f;switch(k){case"D":case"S":J="S";break;case"F":J="f";break;case"FD":case"DF":J="B";break;case"f":case"f*":case"B":case"B*":J=k}return J},X=x.close=function(){return $("h"),this};x.stroke=function(){return $("S"),this},x.fill=function(k){return Ee("f",k),this},x.fillEvenOdd=function(k){return Ee("f*",k),this},x.fillStroke=function(k){return Ee("B",k),this},x.fillStrokeEvenOdd=function(k){return Ee("B*",k),this};var Ee=function(k,J){ba(J)==="object"?ot(J,k):$(k)},lt=function(k){k===null||D===T&&k===void 0||(k=lc(k),$(k))};function yt(k,J,Ne,Me,He){var mt=new Lh(J||this.boundingBox,Ne||this.xStep,Me||this.yStep,this.gState,He||this.matrix);mt.stream=this.stream;var Nt=k+"$$"+this.cloneIndex+++"$$";return cr(Nt,mt),mt}var ot=function(k,J){var Ne=Re[k.key],Me=Ke[Ne];if(Me instanceof tf)$("q"),$(ut(J)),Me.gState&&x.setGState(Me.gState),$(k.matrix.toString()+" cm"),$("/"+Ne+" sh"),$("Q");else if(Me instanceof Lh){var He=new St(1,0,0,-1,0,fc());k.matrix&&(He=He.multiply(k.matrix||ar),Ne=yt.call(Me,k.key,k.boundingBox,k.xStep,k.yStep,He).id),$("q"),$("/Pattern cs"),$("/"+Ne+" scn"),Me.gState&&x.setGState(Me.gState),$(J),$("Q")}},ut=function(k){switch(k){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Lt=x.moveTo=function(k,J){return $(I(z(k))+" "+I(V(J))+" m"),this},qt=x.lineTo=function(k,J){return $(I(z(k))+" "+I(V(J))+" l"),this},gt=x.curveTo=function(k,J,Ne,Me,He,mt){return $([I(z(k)),I(V(J)),I(z(Ne)),I(V(Me)),I(z(He)),I(V(mt)),"c"].join(" ")),this};x.__private__.line=x.line=function(k,J,Ne,Me,He){if(isNaN(k)||isNaN(J)||isNaN(Ne)||isNaN(Me)||!Hs(He))throw new Error("Invalid arguments passed to jsPDF.line");return D===E?this.lines([[Ne-k,Me-J]],k,J,[1,1],He||"S"):this.lines([[Ne-k,Me-J]],k,J,[1,1]).stroke()},x.__private__.lines=x.lines=function(k,J,Ne,Me,He,mt){var Nt,zt,tr,xr,Nr,Xr,Ua,fn,wa,jn,hn,$n;if(typeof k=="number"&&($n=Ne,Ne=J,J=k,k=$n),Me=Me||[1,1],mt=mt||!1,isNaN(J)||isNaN(Ne)||!Array.isArray(k)||!Array.isArray(Me)||!Hs(He)||typeof mt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Lt(J,Ne),Nt=Me[0],zt=Me[1],xr=k.length,jn=J,hn=Ne,tr=0;tr<xr;tr++)(Nr=k[tr]).length===2?(jn=Nr[0]*Nt+jn,hn=Nr[1]*zt+hn,qt(jn,hn)):(Xr=Nr[0]*Nt+jn,Ua=Nr[1]*zt+hn,fn=Nr[2]*Nt+jn,wa=Nr[3]*zt+hn,jn=Nr[4]*Nt+jn,hn=Nr[5]*zt+hn,gt(Xr,Ua,fn,wa,jn,hn));return mt&&X(),lt(He),this},x.path=function(k){for(var J=0;J<k.length;J++){var Ne=k[J],Me=Ne.c;switch(Ne.op){case"m":Lt(Me[0],Me[1]);break;case"l":qt(Me[0],Me[1]);break;case"c":gt.apply(this,Me);break;case"h":X()}}return this},x.__private__.rect=x.rect=function(k,J,Ne,Me,He){if(isNaN(k)||isNaN(J)||isNaN(Ne)||isNaN(Me)||!Hs(He))throw new Error("Invalid arguments passed to jsPDF.rect");return D===E&&(Me=-Me),$([I(z(k)),I(V(J)),I(z(Ne)),I(z(Me)),"re"].join(" ")),lt(He),this},x.__private__.triangle=x.triangle=function(k,J,Ne,Me,He,mt,Nt){if(isNaN(k)||isNaN(J)||isNaN(Ne)||isNaN(Me)||isNaN(He)||isNaN(mt)||!Hs(Nt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ne-k,Me-J],[He-Ne,mt-Me],[k-He,J-mt]],k,J,[1,1],Nt,!0),this},x.__private__.roundedRect=x.roundedRect=function(k,J,Ne,Me,He,mt,Nt){if(isNaN(k)||isNaN(J)||isNaN(Ne)||isNaN(Me)||isNaN(He)||isNaN(mt)||!Hs(Nt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var zt=4/3*(Math.SQRT2-1);return He=Math.min(He,.5*Ne),mt=Math.min(mt,.5*Me),this.lines([[Ne-2*He,0],[He*zt,0,He,mt-mt*zt,He,mt],[0,Me-2*mt],[0,mt*zt,-He*zt,mt,-He,mt],[2*He-Ne,0],[-He*zt,0,-He,-mt*zt,-He,-mt],[0,2*mt-Me],[0,-mt*zt,He*zt,-mt,He,-mt]],k+He,J,[1,1],Nt,!0),this},x.__private__.ellipse=x.ellipse=function(k,J,Ne,Me,He){if(isNaN(k)||isNaN(J)||isNaN(Ne)||isNaN(Me)||!Hs(He))throw new Error("Invalid arguments passed to jsPDF.ellipse");var mt=4/3*(Math.SQRT2-1)*Ne,Nt=4/3*(Math.SQRT2-1)*Me;return Lt(k+Ne,J),gt(k+Ne,J-Nt,k+mt,J-Me,k,J-Me),gt(k-mt,J-Me,k-Ne,J-Nt,k-Ne,J),gt(k-Ne,J+Nt,k-mt,J+Me,k,J+Me),gt(k+mt,J+Me,k+Ne,J+Nt,k+Ne,J),lt(He),this},x.__private__.circle=x.circle=function(k,J,Ne,Me){if(isNaN(k)||isNaN(J)||isNaN(Ne)||!Hs(Me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,J,Ne,Ne,Me)},x.setFont=function(k,J,Ne){return Ne&&(J=U(J,Ne)),ht=bl(k,J,{disableWarning:!1}),this};var ur=x.__private__.getFont=x.getFont=function(){return Pt[bl.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var k,J,Ne={};for(k in Rt)if(Rt.hasOwnProperty(k))for(J in Ne[k]=[],Rt[k])Rt[k].hasOwnProperty(J)&&Ne[k].push(J);return Ne},x.addFont=function(k,J,Ne,Me,He){var mt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&mt.indexOf(arguments[3])!==-1?He=arguments[3]:arguments[3]&&mt.indexOf(arguments[3])==-1&&(Ne=U(Ne,Me)),Do.call(this,k,J,Ne,He=He||"Identity-H")};var dr,Hr=e.lineWidth||.200025,Gt=x.__private__.getLineWidth=x.getLineWidth=function(){return Hr},Gr=x.__private__.setLineWidth=x.setLineWidth=function(k){return Hr=k,$(I(z(k))+" w"),this};x.__private__.setLineDash=nr.API.setLineDash=nr.API.setLineDashPattern=function(k,J){if(k=k||[],J=J||0,isNaN(J)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(Ne){return I(z(Ne))}).join(" "),J=I(z(J)),$("["+k+"] "+J+" d"),this};var Qr=x.__private__.getLineHeight=x.getLineHeight=function(){return Ce*dr};x.__private__.getLineHeight=x.getLineHeight=function(){return Ce*dr};var Da=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(dr=k),this},Er=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return dr};Da(e.lineHeight);var Ut=x.__private__.getHorizontalCoordinate=function(k){return z(k)},ma=x.__private__.getVerticalCoordinate=function(k){return D===T?k:Ue[K].mediaBox.topRightY-Ue[K].mediaBox.bottomLeftY-z(k)},Ra=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(k){return I(Ut(k))},jl=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(k){return I(ma(k))},fa=e.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return sa(fa)},x.__private__.setStrokeColor=x.setDrawColor=function(k,J,Ne,Me){return fa=Ba({ch1:k,ch2:J,ch3:Ne,ch4:Me,pdfColorType:"draw",precision:2}),$(fa),this};var xs=e.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return sa(xs)},x.__private__.setFillColor=x.setFillColor=function(k,J,Ne,Me){return xs=Ba({ch1:k,ch2:J,ch3:Ne,ch4:Me,pdfColorType:"fill",precision:2}),$(xs),this};var wn=e.textColor||"0 g",Lo=x.__private__.getTextColor=x.getTextColor=function(){return sa(wn)};x.__private__.setTextColor=x.setTextColor=function(k,J,Ne,Me){return wn=Ba({ch1:k,ch2:J,ch3:Ne,ch4:Me,pdfColorType:"text",precision:3}),this};var cc=e.charSpace,Jn=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(cc||0)};x.__private__.setCharSpace=x.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return cc=k,this};var _i=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(k){var J=x.CapJoinStyles[k];if(J===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return _i=J,$(J+" J"),this};var _l=0;x.__private__.setLineJoin=x.setLineJoin=function(k){var J=x.CapJoinStyles[k];if(J===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return _l=J,$(J+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return $(I(z(k))+" M"),this},x.GState=Gx,x.setGState=function(k){(k=typeof k=="string"?at[rt[k]]:Ni(null,k)).equals(Tt)||($("/"+k.id+" gs"),Tt=k)};var Ni=function(k,J){if(!k||!rt[k]){var Ne=!1;for(var Me in at)if(at.hasOwnProperty(Me)&&at[Me].equals(J)){Ne=!0;break}if(Ne)J=at[Me];else{var He="GS"+(Object.keys(at).length+1).toString(10);at[He]=J,J.id=He}return k&&(rt[k]=J.id),it.publish("addGState",J),J}};x.addGState=function(k,J){return Ni(k,J),this},x.saveGraphicsState=function(){return $("q"),rr.push({key:ht,size:Ce,color:wn}),this},x.restoreGraphicsState=function(){$("Q");var k=rr.pop();return ht=k.key,Ce=k.size,wn=k.color,Tt=null,this},x.setCurrentTransformationMatrix=function(k){return $(k.toString()+" cm"),this},x.comment=function(k){return $("#"+k),this};var uc=function(k,J){var Ne=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ne},set:function(mt){isNaN(mt)||(Ne=parseFloat(mt))}});var Me=J||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Me},set:function(mt){isNaN(mt)||(Me=parseFloat(mt))}});var He="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return He},set:function(mt){He=mt.toString()}}),this},dc=function(k,J,Ne,Me){uc.call(this,k,J),this.type="rect";var He=Ne||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return He},set:function(Nt){isNaN(Nt)||(He=parseFloat(Nt))}});var mt=Me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return mt},set:function(Nt){isNaN(Nt)||(mt=parseFloat(Nt))}}),this},Nl=function(){this.page=Te,this.currentPage=K,this.pages=ve.slice(0),this.pagesContext=Ue.slice(0),this.x=Ie,this.y=_t,this.matrix=jt,this.width=jd(K),this.height=Io(K),this.outputDestination=te,this.id="",this.objectNumber=-1};Nl.prototype.restore=function(){Te=this.page,K=this.currentPage,Ue=this.pagesContext,ve=this.pages,Ie=this.x,_t=this.y,jt=this.matrix,Tf(K,this.width),qo(K,this.height),te=this.outputDestination};var Mo=function(k,J,Ne,Me,He){ir.push(new Nl),Te=K=0,ve=[],Ie=k,_t=J,jt=He,gs([Ne,Me])};for(var Zi in x.beginFormObject=function(k,J,Ne,Me,He){return Mo(k,J,Ne,Me,He),this},x.endFormObject=function(k){return function(J){if(It[J])ir.pop().restore();else{var Ne=new Nl,Me="Xo"+(Object.keys(We).length+1).toString(10);Ne.id=Me,It[J]=Me,We[Me]=Ne,it.publish("addFormObject",Ne),ir.pop().restore()}}(k),this},x.doFormObject=function(k,J){var Ne=We[It[k]];return $("q"),$(J.toString()+" cm"),$("/"+Ne.id+" Do"),$("Q"),this},x.getFormObject=function(k){var J=We[It[k]];return{x:J.x,y:J.y,width:J.width,height:J.height,matrix:J.matrix}},x.save=function(k,J){return k=k||"generated.pdf",(J=J||{}).returnPromise=J.returnPromise||!1,J.returnPromise===!1?(Qd(Xi(Os()),k),typeof Qd.unload=="function"&&_r.setTimeout&&setTimeout(Qd.unload,911),this):new Promise(function(Ne,Me){try{var He=Qd(Xi(Os()),k);typeof Qd.unload=="function"&&_r.setTimeout&&setTimeout(Qd.unload,911),Ne(He)}catch(mt){Me(mt.message)}})},nr.API)nr.API.hasOwnProperty(Zi)&&(Zi==="events"&&nr.API.events.length?function(k,J){var Ne,Me,He;for(He=J.length-1;He!==-1;He--)Ne=J[He][0],Me=J[He][1],k.subscribe.apply(k,[Ne].concat(typeof Me=="function"?[Me]:Me))}(it,nr.API.events):x[Zi]=nr.API[Zi]);function jd(k){return Ue[k].mediaBox.topRightX-Ue[k].mediaBox.bottomLeftX}function Tf(k,J){Ue[k].mediaBox.topRightX=J+Ue[k].mediaBox.bottomLeftX}function Io(k){return Ue[k].mediaBox.topRightY-Ue[k].mediaBox.bottomLeftY}function qo(k,J){Ue[k].mediaBox.topRightY=J+Ue[k].mediaBox.bottomLeftY}var fu=x.getPageWidth=function(k){return jd(k=k||K)/Dt},Of=x.setPageWidth=function(k,J){Tf(k,J*Dt)},fc=x.getPageHeight=function(k){return Io(k=k||K)/Dt},Df=x.setPageHeight=function(k,J){qo(k,J*Dt)};return x.internal={pdfEscape:Un,getStyle:lc,getFont:ur,getFontSize:Pe,getCharSpace:Jn,getTextColor:Lo,getLineHeight:Qr,getLineHeightFactor:Er,getLineWidth:Gt,write:ne,getHorizontalCoordinate:Ut,getVerticalCoordinate:ma,getCoordinateString:Ra,getVerticalCoordinateString:jl,collections:{},newObject:Ar,newAdditionalObject:gr,newObjectDeferred:or,newObjectDeferredBegin:fr,getFilters:dn,putStream:Oa,events:it,scaleFactor:Dt,pageSize:{getWidth:function(){return fu(K)},setWidth:function(k){Of(K,k)},getHeight:function(){return fc(K)},setHeight:function(k){Df(K,k)}},encryptionOptions:m,encryption:Mr,getEncryptor:function(k){return m!==null?Mr.encryptor(k,0):function(J){return J}},output:Ln,getNumberOfPages:yl,pages:ve,out:$,f2:L,f3:q,getPageInfo:wi,getPageInfoByObjId:si,getCurrentPageInfo:oc,getPDFVersion:b,Point:uc,Rectangle:dc,Matrix:St,hasHotfix:Ro},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return fu(K)},set:function(k){Of(K,k)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return fc(K)},set:function(k){Df(K,k)},enumerable:!0,configurable:!0}),(function(k){for(var J=0,Ne=be.length;J<Ne;J++){var Me=Do.call(this,k[J][0],k[J][1],k[J][2],be[J][3],!0);g===!1&&(v[Me]=!0);var He=k[J][0].split("-");cu({id:Me,fontName:He[0],fontStyle:He[1]||""})}it.publish("addFonts",{fonts:Pt,dictionary:Rt})}).call(x,be),ht="F1",xl(s,r),it.publish("initialized"),x}Th.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Th.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Th.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Th.prototype.processOwnerPassword=function(e,t){return Rw(Dw(t).substr(0,5),e)},Th.prototype.encryptor=function(e,t){var r=Dw(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return Rw(r,a)}},Gx.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||ba(e)!==ba(this))return!1;var a=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;a++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&a--;return a===0},nr.API={events:[]},nr.version="3.0.3";var gn=nr.API,X_=1,Pf=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ah=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Cr=function(e){return e.toFixed(2)},Yu=function(e){return e.toFixed(5)};gn.__acroform__={};var yi=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},zC=function(e){return e*X_},Hl=function(e){var t=new cD,r=Jt.internal.getHeight(e)||0,a=Jt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Cr(a)),Number(Cr(r))],t},Mre=gn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},Ire=gn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},qre=gn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Pn=gn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return qre(e,t-1)},Tn=gn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Mre(e,t-1)},On=gn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Ire(e,t-1)},Fre=gn.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,s=e[0],i=e[1],l=e[2],u=e[3],d={};return d.lowerLeft_X=r(s)||0,d.lowerLeft_Y=a(i+u)||0,d.upperRight_X=r(s+l)||0,d.upperRight_Y=a(i)||0,[Number(Cr(d.lowerLeft_X)),Number(Cr(d.lowerLeft_Y)),Number(Cr(d.upperRight_X)),Number(Cr(d.upperRight_Y))]},Bre=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,a=Lw(e,r),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+Cr(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Hl(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},Lw=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(L){return L.split(`
`)}):s.map(function(L){return[L]});var i=r,l=Jt.internal.getHeight(e)||0;l=l<0?-l:l;var u=Jt.internal.getWidth(e)||0;u=u<0?-u:u;var d=function(L,q,z){if(L+1<s.length){var V=q+" "+s[L+1][0];return z0(V,e,z).width<=u-4}return!1};i++;e:for(;i>0;){t="",i--;var f,m,g=z0("3",e,i).height,v=e.multiline?l-i:(l-g)/2,x=v+=2,j=0,b=0,S=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+z0(t,e,i=12).width+", FieldWidth:"+u+`
`;break}for(var A="",E=0,T=0;T<s.length;T++)if(s.hasOwnProperty(T)){var D=!1;if(s[T].length!==1&&S!==s[T].length-1){if((g+2)*(E+2)+2>l)continue e;A+=s[T][S],D=!0,b=T,T--}else{A=(A+=s[T][S]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var R=parseInt(T),B=d(R,A,i),U=T>=s.length-1;if(B&&!U){A+=" ",S=0;continue}if(B||U){if(U)b=R;else if(e.multiline&&(g+2)*(E+2)+2>l)continue e}else{if(!e.multiline||(g+2)*(E+2)+2>l)continue e;b=R}}for(var I="",F=j;F<=b;F++){var pe=s[F];if(e.multiline){if(F===b){I+=pe[S]+" ",S=(S+1)%pe.length;continue}if(F===j){I+=pe[pe.length-1]+" ";continue}}I+=pe[0]+" "}switch(I=I.substr(I.length-1)==" "?I.substr(0,I.length-1):I,m=z0(I,e,i).width,e.textAlign){case"right":f=u-m-2;break;case"center":f=(u-m)/2;break;default:f=2}t+=Cr(f)+" "+Cr(x)+` Td
`,t+="("+Pf(I)+`) Tj
`,t+=-Cr(f)+` 0 Td
`,x=-(i+2),m=0,j=D?b:b+1,E++,A=""}break}return a.text=t,a.fontSize=i,a},z0=function(e,t,r){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},Ure={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},$re=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(a){return a.type===r.type&&a.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},zre=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(ml.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Ure)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");X_=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new uD,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in a)if(a.hasOwnProperty(s)){var i=a[s];i.objId=void 0,i.hasAnnotation&&$re(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(a,s){var i=!a;for(var l in a||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(l)){var u=a[l],d=[],f=u.Rect;if(u.Rect&&(u.Rect=Fre(u.Rect,s)),s.internal.newObjectDeferredBegin(u.objId,!0),u.DA=Jt.createDefaultAppearanceStream(u),ba(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(d=u.getKeyValueListForStream()),u.Rect=f,u.hasAppearanceStream&&!u.appearanceStreamContent){var m=Bre(u);d.push({key:"AP",value:"<</N "+m+">>"}),s.internal.acroformPlugin.xForms.push(m)}if(u.appearanceStreamContent){var g="";for(var v in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(v)){var x=u.appearanceStreamContent[v];if(g+="/"+v+" ",g+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var l in x)if(x.hasOwnProperty(l)){var j=x[l];typeof j=="function"&&(j=j.call(s,u)),g+="/"+l+" "+j+" ",s.internal.acroformPlugin.xForms.indexOf(j)>=0||s.internal.acroformPlugin.xForms.push(j)}}else typeof(j=x)=="function"&&(j=j.call(s,u)),g+="/"+l+" "+j,s.internal.acroformPlugin.xForms.indexOf(j)>=0||s.internal.acroformPlugin.xForms.push(j);g+=">>"}d.push({key:"AP",value:`<<
`+g+">>"})}s.internal.putStream({additionalKeyValues:d,objectId:u.objId}),s.internal.out("endobj")}i&&function(b,S){for(var A in b)if(b.hasOwnProperty(A)){var E=A,T=b[A];S.internal.newObjectDeferredBegin(T.objId,!0),ba(T)==="object"&&typeof T.putStream=="function"&&T.putStream(),delete b[E]}}(s.internal.acroformPlugin.xForms,s)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},lD=gn.__acroform__.arrayToPdfArray=function(e,t,r){var a=function(l){return l};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),ba(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(a=r.internal.getEncryptor(t)),s+="("+Pf(a(e[i].toString()))+")"):s+=e[i].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},n2=function(e,t,r){var a=function(s){return s};return t!==void 0&&r&&(a=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+Pf(a(e))+")"},Xl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Xl.prototype.toString=function(){return this.objId+" 0 R"},Xl.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Xl.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var a=t[r],s=this[a];s&&(Array.isArray(s)?e.push({key:a,value:lD(s,this.objId,this.scope)}):s instanceof Xl?(s.scope=this.scope,e.push({key:a,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:a,value:s}))}return e};var cD=function(){Xl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};yi(cD,Xl);var uD=function(){Xl.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Pf(r(e))+")"}},set:function(r){e=r}})};yi(uD,Xl);var ml=function e(){Xl.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');t=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Pn(t,3)},set:function(A){A?this.F=Tn(t,3):this.F=On(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');r=A}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(A){a=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(A){a[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(A){a[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(A){a[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(A){a[3]=A}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Kx)return;i="FieldObject"+e.FieldNum++}var A=function(E){return E};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+Pf(A(i))+")"},set:function(A){i=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(A){i=A}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(A){l=A}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(A){u=A}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(A){d=A}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/X_:f},set:function(A){f=A}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(A){m=A}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof Kx||this instanceof hf))return n2(g,this.objId,this.scope)},set:function(A){A=A.toString(),g=A}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof us==0?n2(v,this.objId,this.scope):v},set:function(A){A=A.toString(),v=this instanceof us==0?A.substr(0,1)==="("?Ah(A.substr(1,A.length-2)):Ah(A):A}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof us==1?Ah(v.substr(1,v.length-1)):v},set:function(A){A=A.toString(),v=this instanceof us==1?"/"+A:A}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof us==0?n2(x,this.objId,this.scope):x},set:function(A){A=A.toString(),x=this instanceof us==0?A.substr(0,1)==="("?Ah(A.substr(1,A.length-2)):Ah(A):A}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof us==1?Ah(x.substr(1,x.length-1)):x},set:function(A){A=A.toString(),x=this instanceof us==1?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var j,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(A){A=!!A,b=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(j)return j},set:function(A){j=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,1)},set:function(A){A?this.Ff=Tn(this.Ff,1):this.Ff=On(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,2)},set:function(A){A?this.Ff=Tn(this.Ff,2):this.Ff=On(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,3)},set:function(A){A?this.Ff=Tn(this.Ff,3):this.Ff=On(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');S=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(S){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:S=2;break;case"center":case 1:S=1;break;default:S=0}}})};yi(ml,Xl);var qh=function(){ml.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return lD(t,this.objId,this.scope)},set:function(r){var a,s;s=[],typeof(a=r)=="string"&&(s=function(i,l,u){u||(u=1);for(var d,f=[];d=l.exec(i);)f.push(d[u]);return f}(a,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,18)},set:function(r){r?this.Ff=Tn(this.Ff,18):this.Ff=On(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Tn(this.Ff,19):this.Ff=On(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,20)},set:function(r){r?(this.Ff=Tn(this.Ff,20),t.sort()):this.Ff=On(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,22)},set:function(r){r?this.Ff=Tn(this.Ff,22):this.Ff=On(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,23)},set:function(r){r?this.Ff=Tn(this.Ff,23):this.Ff=On(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,27)},set:function(r){r?this.Ff=Tn(this.Ff,27):this.Ff=On(this.Ff,27)}}),this.hasAppearanceStream=!1};yi(qh,ml);var Fh=function(){qh.call(this),this.fontName="helvetica",this.combo=!1};yi(Fh,qh);var Bh=function(){Fh.call(this),this.combo=!0};yi(Bh,Fh);var X0=function(){Bh.call(this),this.edit=!0};yi(X0,Bh);var us=function(){ml.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,15)},set:function(r){r?this.Ff=Tn(this.Ff,15):this.Ff=On(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,16)},set:function(r){r?this.Ff=Tn(this.Ff,16):this.Ff=On(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,17)},set:function(r){r?this.Ff=Tn(this.Ff,17):this.Ff=On(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,26)},set:function(r){r?this.Ff=Tn(this.Ff,26):this.Ff=On(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,s=[];for(a in s.push("<<"),t)s.push("/"+a+" ("+Pf(r(t[a]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){ba(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};yi(us,ml);var Z0=function(){us.call(this),this.pushButton=!0};yi(Z0,us);var Uh=function(){us.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};yi(Uh,us);var Kx=function(){var e,t;ml.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(u){return u};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,l=[];for(i in l.push("<<"),a)l.push("/"+i+" ("+Pf(s(a[i]))+")");return l.push(">>"),l.join(`
`)},set:function(s){ba(s)==="object"&&(a=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(s){typeof s=="string"&&(a.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Jt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};yi(Kx,ml),Uh.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Uh.prototype.createOption=function(e){var t=new Kx;return t.Parent=this,t.optionName=e,this.Kids.push(t),Vre.call(this.scope,t),t};var J0=function(){us.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Jt.CheckBox.createAppearanceStream()};yi(J0,us);var hf=function(){ml.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,13)},set:function(t){t?this.Ff=Tn(this.Ff,13):this.Ff=On(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,21)},set:function(t){t?this.Ff=Tn(this.Ff,21):this.Ff=On(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,23)},set:function(t){t?this.Ff=Tn(this.Ff,23):this.Ff=On(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,24)},set:function(t){t?this.Ff=Tn(this.Ff,24):this.Ff=On(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,25)},set:function(t){t?this.Ff=Tn(this.Ff,25):this.Ff=On(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,26)},set:function(t){t?this.Ff=Tn(this.Ff,26):this.Ff=On(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};yi(hf,ml);var Q0=function(){hf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,14)},set:function(e){e?this.Ff=Tn(this.Ff,14):this.Ff=On(this.Ff,14)}}),this.password=!0};yi(Q0,hf);var Jt={CheckBox:{createAppearanceStream:function(){return{N:{On:Jt.CheckBox.YesNormal},D:{On:Jt.CheckBox.YesPushDown,Off:Jt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Hl(e);t.scope=e.scope;var r=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=Lw(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Cr(Jt.internal.getWidth(e))+" "+Cr(Jt.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+Cr(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Hl(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=[],i=Jt.internal.getHeight(e),l=Jt.internal.getWidth(e),u=Lw(e,e.caption);return s.push("1 g"),s.push("0 0 "+Cr(l)+" "+Cr(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Cr(l-1)+" "+Cr(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+Cr(u.fontSize)+" Tf "+a),s.push(u.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Hl(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Cr(Jt.internal.getWidth(e))+" "+Cr(Jt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Jt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Jt.RadioButton.Circle.YesNormal,t.D[e]=Jt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Hl(e);t.scope=e.scope;var r=[],a=Jt.internal.getWidth(e)<=Jt.internal.getHeight(e)?Jt.internal.getWidth(e)/4:Jt.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Jt.internal.Bezier_C,i=Number((a*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Yu(Jt.internal.getWidth(e)/2)+" "+Yu(Jt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Hl(e);t.scope=e.scope;var r=[],a=Jt.internal.getWidth(e)<=Jt.internal.getHeight(e)?Jt.internal.getWidth(e)/4:Jt.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*Jt.internal.Bezier_C).toFixed(5)),l=Number((a*Jt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Yu(Jt.internal.getWidth(e)/2)+" "+Yu(Jt.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Yu(Jt.internal.getWidth(e)/2)+" "+Yu(Jt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+l+" "+l+" "+a+" 0 "+a+" c"),r.push("-"+l+" "+a+" -"+a+" "+l+" -"+a+" 0 c"),r.push("-"+a+" -"+l+" -"+l+" -"+a+" 0 -"+a+" c"),r.push(l+" -"+a+" "+a+" -"+l+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Hl(e);t.scope=e.scope;var r=[],a=Jt.internal.getWidth(e)<=Jt.internal.getHeight(e)?Jt.internal.getWidth(e)/4:Jt.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*Jt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Yu(Jt.internal.getWidth(e)/2)+" "+Yu(Jt.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Jt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Jt.RadioButton.Cross.YesNormal,t.D[e]=Jt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Hl(e);t.scope=e.scope;var r=[],a=Jt.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Cr(Jt.internal.getWidth(e)-2)+" "+Cr(Jt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Cr(a.x1.x)+" "+Cr(a.x1.y)+" m"),r.push(Cr(a.x2.x)+" "+Cr(a.x2.y)+" l"),r.push(Cr(a.x4.x)+" "+Cr(a.x4.y)+" m"),r.push(Cr(a.x3.x)+" "+Cr(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Hl(e);t.scope=e.scope;var r=Jt.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+Cr(Jt.internal.getWidth(e))+" "+Cr(Jt.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Cr(Jt.internal.getWidth(e)-2)+" "+Cr(Jt.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(Cr(r.x1.x)+" "+Cr(r.x1.y)+" m"),a.push(Cr(r.x2.x)+" "+Cr(r.x2.y)+" l"),a.push(Cr(r.x4.x)+" "+Cr(r.x4.y)+" m"),a.push(Cr(r.x3.x)+" "+Cr(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Hl(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Cr(Jt.internal.getWidth(e))+" "+Cr(Jt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Jt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Jt.internal.getWidth(e),r=Jt.internal.getHeight(e),a=Math.min(t,r);return{x1:{x:(t-a)/2,y:(r-a)/2+a},x2:{x:(t-a)/2+a,y:(r-a)/2},x3:{x:(t-a)/2,y:(r-a)/2},x4:{x:(t-a)/2+a,y:(r-a)/2+a}}}},Jt.internal.getWidth=function(e){var t=0;return ba(e)==="object"&&(t=zC(e.Rect[2])),t},Jt.internal.getHeight=function(e){var t=0;return ba(e)==="object"&&(t=zC(e.Rect[3])),t};var Vre=gn.addField=function(e){if(zre(this,e),!(e instanceof ml))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};gn.AcroFormChoiceField=qh,gn.AcroFormListBox=Fh,gn.AcroFormComboBox=Bh,gn.AcroFormEditBox=X0,gn.AcroFormButton=us,gn.AcroFormPushButton=Z0,gn.AcroFormRadioButton=Uh,gn.AcroFormCheckBox=J0,gn.AcroFormTextField=hf,gn.AcroFormPasswordField=Q0,gn.AcroFormAppearance=Jt,gn.AcroForm={ChoiceField:qh,ListBox:Fh,ComboBox:Bh,EditBox:X0,Button:us,PushButton:Z0,RadioButton:Uh,CheckBox:J0,TextField:hf,PasswordField:Q0,Appearance:Jt},nr.AcroForm={ChoiceField:qh,ListBox:Fh,ComboBox:Bh,EditBox:X0,Button:us,PushButton:Z0,RadioButton:Uh,CheckBox:J0,TextField:hf,PasswordField:Q0,Appearance:Jt};nr.AcroForm;function dD(e){return e.reduce(function(t,r,a){return t[r]=a,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(L,q){var z,V,de,se,fe,oe=r;if((q=q||r)==="RGBA"||L.data!==void 0&&L.data instanceof Uint8ClampedArray&&"height"in L&&"width"in L)return"RGBA";if(B(L))for(fe in a)for(de=a[fe],z=0;z<de.length;z+=1){for(se=!0,V=0;V<de[z].length;V+=1)if(de[z][V]!==void 0&&de[z][V]!==L[V]){se=!1;break}if(se===!0){oe=fe;break}}else for(fe in a)for(de=a[fe],z=0;z<de.length;z+=1){for(se=!0,V=0;V<de[z].length;V+=1)if(de[z][V]!==void 0&&de[z][V]!==L.charCodeAt(V)){se=!1;break}if(se===!0){oe=fe;break}}return oe===r&&q!==r&&(oe=q),oe},i=function L(q){for(var z=this.internal.write,V=this.internal.putStream,de=(0,this.internal.getFilters)();de.indexOf("FlateEncode")!==-1;)de.splice(de.indexOf("FlateEncode"),1);q.objectId=this.internal.newObject();var se=[];if(se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Image"}),se.push({key:"Width",value:q.width}),se.push({key:"Height",value:q.height}),q.colorSpace===A.INDEXED?se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(q.palette.length/3-1)+" "+("sMask"in q&&q.sMask!==void 0?q.objectId+2:q.objectId+1)+" 0 R]"}):(se.push({key:"ColorSpace",value:"/"+q.colorSpace}),q.colorSpace===A.DEVICE_CMYK&&se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),se.push({key:"BitsPerComponent",value:q.bitsPerComponent}),"decodeParameters"in q&&q.decodeParameters!==void 0&&se.push({key:"DecodeParms",value:"<<"+q.decodeParameters+">>"}),"transparency"in q&&Array.isArray(q.transparency)&&q.transparency.length>0){for(var fe="",oe=0,Se=q.transparency.length;oe<Se;oe++)fe+=q.transparency[oe]+" "+q.transparency[oe]+" ";se.push({key:"Mask",value:"["+fe+"]"})}q.sMask!==void 0&&se.push({key:"SMask",value:q.objectId+1+" 0 R"});var Y=q.filter!==void 0?["/"+q.filter]:void 0;if(V({data:q.data,additionalKeyValues:se,alreadyAppliedFilters:Y,objectId:q.objectId}),z("endobj"),"sMask"in q&&q.sMask!==void 0){var ye,P=(ye=q.sMaskBitsPerComponent)!==null&&ye!==void 0?ye:q.bitsPerComponent,K={width:q.width,height:q.height,colorSpace:"DeviceGray",bitsPerComponent:P,data:q.sMask};"filter"in q&&(K.decodeParameters="/Predictor ".concat(q.predictor," /Colors 1 /BitsPerComponent ").concat(P," /Columns ").concat(q.width),K.filter=q.filter),L.call(this,K)}if(q.colorSpace===A.INDEXED){var le=this.internal.newObject();V({data:I(new Uint8Array(q.palette)),objectId:le}),z("endobj")}},l=function(){var L=this.internal.collections[t+"images"];for(var q in L)i.call(this,L[q])},u=function(){var L,q=this.internal.collections[t+"images"],z=this.internal.write;for(var V in q)z("/I"+(L=q[V]).index,L.objectId,"0","R")},d=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",u))},f=function(){var L=this.internal.collections[t+"images"];return d.call(this),L},m=function(){return Object.keys(this.internal.collections[t+"images"]).length},g=function(L){return typeof e["process"+L.toUpperCase()]=="function"},v=function(L){return ba(L)==="object"&&L.nodeType===1},x=function(L,q){if(L.nodeName==="IMG"&&L.hasAttribute("src")){var z=""+L.getAttribute("src");if(z.indexOf("data:image/")===0)return Y0(unescape(z).split("base64,").pop());var V=e.loadFile(z,!0);if(V!==void 0)return V}if(L.nodeName==="CANVAS"){if(L.width===0||L.height===0)throw new Error("Given canvas must have data. Canvas width: "+L.width+", height: "+L.height);var de;switch(q){case"PNG":de="image/png";break;case"WEBP":de="image/webp";break;default:de="image/jpeg"}return Y0(L.toDataURL(de,1).split("base64,").pop())}},j=function(L){var q=this.internal.collections[t+"images"];if(q){for(var z in q)if(L===q[z].alias)return q[z]}},b=function(L,q,z){return L||q||(L=-96,q=-96),L<0&&(L=-1*z.width*72/L/this.internal.scaleFactor),q<0&&(q=-1*z.height*72/q/this.internal.scaleFactor),L===0&&(L=q*z.width/z.height),q===0&&(q=L*z.height/z.width),[L,q]},S=function(L,q,z,V,de,se){var fe=b.call(this,z,V,de),oe=this.internal.getCoordinateString,Se=this.internal.getVerticalCoordinateString,Y=f.call(this);if(z=fe[0],V=fe[1],Y[de.index]=de,se){se*=Math.PI/180;var ye=Math.cos(se),P=Math.sin(se),K=function(ee){return ee.toFixed(4)},le=[K(ye),K(P),K(-1*P),K(ye),0,0,"cm"]}this.internal.write("q"),se?(this.internal.write([1,"0","0",1,oe(L),Se(q+V),"cm"].join(" ")),this.internal.write(le.join(" ")),this.internal.write([oe(z),"0","0",oe(V),"0","0","cm"].join(" "))):this.internal.write([oe(z),"0","0",oe(V),oe(L),Se(q+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+de.index+" Do"),this.internal.write("Q")},A=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var E=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},T=e.__addimage__.sHashCode=function(L){var q,z,V=0;if(typeof L=="string")for(z=L.length,q=0;q<z;q++)V=(V<<5)-V+L.charCodeAt(q),V|=0;else if(B(L))for(z=L.byteLength/2,q=0;q<z;q++)V=(V<<5)-V+L[q],V|=0;return V},D=e.__addimage__.validateStringAsBase64=function(L){(L=L||"").toString().trim();var q=!0;return L.length===0&&(q=!1),L.length%4!=0&&(q=!1),/^[A-Za-z0-9+/]+$/.test(L.substr(0,L.length-2))===!1&&(q=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(L.substr(-2))===!1&&(q=!1),q},R=e.__addimage__.extractImageFromDataUrl=function(L){if(L==null||!(L=L.trim()).startsWith("data:"))return null;var q=L.indexOf(",");return q<0?null:L.substring(0,q).trim().endsWith("base64")?L.substring(q+1):null};e.__addimage__.isArrayBuffer=function(L){return L instanceof ArrayBuffer};var B=e.__addimage__.isArrayBufferView=function(L){return L instanceof Int8Array||L instanceof Uint8Array||L instanceof Uint8ClampedArray||L instanceof Int16Array||L instanceof Uint16Array||L instanceof Int32Array||L instanceof Uint32Array||L instanceof Float32Array||L instanceof Float64Array},U=e.__addimage__.binaryStringToUint8Array=function(L){for(var q=L.length,z=new Uint8Array(q),V=0;V<q;V++)z[V]=L.charCodeAt(V);return z},I=e.__addimage__.arrayBufferToBinaryString=function(L){for(var q="",z=B(L)?L:new Uint8Array(L),V=0;V<z.length;V+=8192)q+=String.fromCharCode.apply(null,z.subarray(V,V+8192));return q};e.addImage=function(){var L,q,z,V,de,se,fe,oe,Se;if(typeof arguments[1]=="number"?(q=r,z=arguments[1],V=arguments[2],de=arguments[3],se=arguments[4],fe=arguments[5],oe=arguments[6],Se=arguments[7]):(q=arguments[1],z=arguments[2],V=arguments[3],de=arguments[4],se=arguments[5],fe=arguments[6],oe=arguments[7],Se=arguments[8]),ba(L=arguments[0])==="object"&&!v(L)&&"imageData"in L){var Y=L;L=Y.imageData,q=Y.format||q||r,z=Y.x||z||0,V=Y.y||V||0,de=Y.w||Y.width||de,se=Y.h||Y.height||se,fe=Y.alias||fe,oe=Y.compression||oe,Se=Y.rotation||Y.angle||Se}var ye=this.internal.getFilters();if(oe===void 0&&ye.indexOf("FlateEncode")!==-1&&(oe="SLOW"),isNaN(z)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");d.call(this);var P=F.call(this,L,q,fe,oe);return S.call(this,z,V,de,se,P,Se),this};var F=function(L,q,z,V){var de,se,fe;if(typeof L=="string"&&s(L)===r){L=unescape(L);var oe=pe(L,!1);(oe!==""||(oe=e.loadFile(L,!0))!==void 0)&&(L=oe)}if(v(L)&&(L=x(L,q)),q=s(L,q),!g(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(((fe=z)==null||fe.length===0)&&(z=function(Se){return typeof Se=="string"||B(Se)?T(Se):B(Se.data)?T(Se.data):null}(L)),(de=j.call(this,z))||(L instanceof Uint8Array||q==="RGBA"||(se=L,L=U(L)),de=this["process"+q.toUpperCase()](L,m.call(this),z,function(Se){return Se&&typeof Se=="string"&&(Se=Se.toUpperCase()),Se in e.image_compression?Se:E.NONE}(V),se)),!de)throw new Error("An unknown error occurred whilst processing the image.");return de},pe=e.__addimage__.convertBase64ToBinaryString=function(L,q){q=typeof q!="boolean"||q;var z,V="";if(typeof L=="string"){var de;z=(de=R(L))!==null&&de!==void 0?de:L;try{V=Y0(z)}catch(se){if(q)throw D(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return V};e.getImageProperties=function(L){var q,z,V="";if(v(L)&&(L=x(L)),typeof L=="string"&&s(L)===r&&((V=pe(L,!1))===""&&(V=e.loadFile(L)||""),L=V),z=s(L),!g(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(L instanceof Uint8Array||(L=U(L)),!(q=this["process"+z.toUpperCase()](L)))throw new Error("An unknown error occurred whilst processing the image");return q.fileType=z,q}})(nr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};nr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var a,s,i,l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(r.objId),f=r.pageContext.annotations,m=!1,g=0;g<f.length&&!m;g++)switch((a=f[g]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var v=0;v<f.length;v++){a=f[v];var x=this.internal.pdfEscape,j=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(b.objId),E=a.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+l(a.bounds.x)+" "+u(a.bounds.y+a.bounds.h)+" "+l(a.bounds.x+a.bounds.w)+" "+u(a.bounds.y)+"] ")+"/Contents ("+x(A(a.contents))+")",i+=" /Popup "+S.objId+" 0 R",i+=" /P "+d.objId+" 0 R",i+=" /T ("+x(A(E))+") >>",b.content=i;var T=b.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+l(a.bounds.x+30)+" "+u(a.bounds.y+a.bounds.h)+" "+l(a.bounds.x+a.bounds.w+30)+" "+u(a.bounds.y)+"] ")+" /Parent "+T,a.open&&(i+=" /Open true"),i+=" >>",S.content=i,this.internal.write(b.objId,"0 R",S.objId,"0 R");break;case"freetext":s="/Rect ["+l(a.bounds.x)+" "+u(a.bounds.y)+" "+l(a.bounds.x+a.bounds.w)+" "+u(a.bounds.y+a.bounds.h)+"] ";var D=a.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+x(j(a.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+D+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(a.options.name){var R=this.annotations._nameMap[a.options.name];a.options.pageNumber=R.page,a.options.top=R.y}else a.options.top||(a.options.top=0);if(s="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",i="",a.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+x(j(a.options.url))+") >>";else if(a.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,i+=" /FitV "+a.options.left+"]";break;default:var B=u(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),i+=" /XYZ "+a.options.left+" "+B+" "+a.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},e.link=function(r,a,s,i,l){var u=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:d(r),y:f(a),w:d(r+s),h:f(a+i)},options:l,type:"link"})},e.textWithLink=function(r,a,s,i){var l,u,d=this.getTextWidth(r),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){u=i.maxWidth;var m=this.splitTextToSize(r,u).length;l=Math.ceil(f*m)}else u=d,l=f;return this.text(r,a,s,i),s+=.2*f,i.align==="center"&&(a-=d/2),i.align==="right"&&(a-=d),this.link(a,s-f,u,l,i),d},e.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}}(nr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(b){return t[b.charCodeAt(0)]!==void 0},l=e.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},u=e.__arabicParser__.isArabicEndLetter=function(b){return l(b)&&i(b)&&t[b.charCodeAt(0)].length<=2},d=e.__arabicParser__.isArabicAlfLetter=function(b){return l(b)&&s.indexOf(b.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return l(b)&&i(b)&&t[b.charCodeAt(0)].length>=1};var f=e.__arabicParser__.arabicLetterHasFinalForm=function(b){return l(b)&&i(b)&&t[b.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(b){return l(b)&&i(b)&&t[b.charCodeAt(0)].length>=3};var m=e.__arabicParser__.arabicLetterHasMedialForm=function(b){return l(b)&&i(b)&&t[b.charCodeAt(0)].length==4},g=e.__arabicParser__.resolveLigatures=function(b){var S=0,A=r,E="",T=0;for(S=0;S<b.length;S+=1)A[b.charCodeAt(S)]!==void 0?(T++,typeof(A=A[b.charCodeAt(S)])=="number"&&(E+=String.fromCharCode(A),A=r,T=0),S===b.length-1&&(A=r,E+=b.charAt(S-(T-1)),S-=T-1,T=0)):(A=r,E+=b.charAt(S-T),S-=T,T=0);return E};e.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&a[b.charCodeAt(0)]!==void 0};var v=e.__arabicParser__.getCorrectForm=function(b,S,A){return l(b)?i(b)===!1?-1:!f(b)||!l(S)&&!l(A)||!l(A)&&u(S)||u(b)&&!l(S)||u(b)&&d(S)||u(b)&&u(S)?0:m(b)&&l(S)&&!u(S)&&l(A)&&f(A)?3:u(b)||!l(A)?1:2:-1},x=function(b){var S=0,A=0,E=0,T="",D="",R="",B=(b=b||"").split("\\s+"),U=[];for(S=0;S<B.length;S+=1){for(U.push(""),A=0;A<B[S].length;A+=1)T=B[S][A],D=B[S][A-1],R=B[S][A+1],l(T)?(E=v(T,D,R),U[S]+=E!==-1?String.fromCharCode(t[T.charCodeAt(0)][E]):T):U[S]+=T;U[S]=g(U[S])}return U.join(" ")},j=e.__arabicParser__.processArabic=e.processArabic=function(){var b,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(S)){var E=0;for(A=[],E=0;E<S.length;E+=1)Array.isArray(S[E])?A.push([x(S[E][0]),S[E][1],S[E][2]]):A.push([x(S[E])]);b=A}else b=x(S);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};e.events.push(["preProcessText",j])}(nr.API),nr.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(u){r=u}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(u){a=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(u){s=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(u){i=u}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(u){l=u}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,a){var s;if((r=r||"2d")!=="2d")return null;for(s in a)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=a[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(nr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(b){d=b}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(b){f=b}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(b){m=b}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(b){g=b}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(b){v=b}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(b){x=b}});var j=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return j},set:function(b){j=b}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(d){return a.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},e.getTextDimensions=function(d,f){a.call(this);var m=(f=f||{}).fontSize||this.getFontSize(),g=f.font||this.getFont(),v=f.scaleFactor||this.internal.scaleFactor,x=0,j=0,b=0,S=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var A=f.maxWidth;A>0?typeof d=="string"?d=this.splitTextToSize(d,A):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(T,D){return T.concat(S.splitTextToSize(D,A))},[])):d=Array.isArray(d)?d:[d];for(var E=0;E<d.length;E++)x<(b=this.getStringUnitWidth(d[E],{font:g})*m)&&(x=b);return x!==0&&(j=d.length),{w:x/=v,h:Math.max((j*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/v,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var d=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=e.cell=function(){var d;d=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var f=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,g=this.internal.__cell__.margins||t,v=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===d.lineNumber?(d.x=(f.x||0)+(f.width||0),d.y=f.y||0):f.y+f.height+d.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=g.top,x&&v&&(this.printHeaderRow(d.lineNumber,!0),d.y+=v[0].height)):d.y=f.y+f.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,r===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-m,d.y+m,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+m,{align:"center",baseline:"top",maxWidth:d.width-m-m}):this.text(d.text,d.x+m,d.y+m,{align:"left",baseline:"top",maxWidth:d.width-m-m})),this.internal.__cell__.lastCell=d,this};e.table=function(d,f,m,g,v){if(a.call(this),!m)throw new Error("No data for PDF table.");var x,j,b,S,A=[],E=[],T=[],D={},R={},B=[],U=[],I=(v=v||{}).autoSize||!1,F=v.printHeaders!==!1,pe=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,L=v.margins||Object.assign({width:this.getPageWidth()},t),q=typeof v.padding=="number"?v.padding:3,z=v.headerBackgroundColor||"#c8c8c8",V=v.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=F,this.internal.__cell__.margins=L,this.internal.__cell__.table_font_size=pe,this.internal.__cell__.padding=q,this.internal.__cell__.headerBackgroundColor=z,this.internal.__cell__.headerTextColor=V,this.setFontSize(pe),g==null)E=A=Object.keys(m[0]),T=A.map(function(){return"left"});else if(Array.isArray(g)&&ba(g[0])==="object")for(A=g.map(function(Y){return Y.name}),E=g.map(function(Y){return Y.prompt||Y.name||""}),T=g.map(function(Y){return Y.align||"left"}),x=0;x<g.length;x+=1)R[g[x].name]=.7499990551181103*g[x].width;else Array.isArray(g)&&typeof g[0]=="string"&&(E=A=g,T=A.map(function(){return"left"}));if(I||Array.isArray(g)&&typeof g[0]=="string")for(x=0;x<A.length;x+=1){for(D[S=A[x]]=m.map(function(Y){return Y[S]}),this.setFont(void 0,"bold"),B.push(this.getTextDimensions(E[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),j=D[S],this.setFont(void 0,"normal"),b=0;b<j.length;b+=1)B.push(this.getTextDimensions(j[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);R[S]=Math.max.apply(null,B)+q+q,B=[]}if(F){var de={};for(x=0;x<A.length;x+=1)de[A[x]]={},de[A[x]].text=E[x],de[A[x]].align=T[x];var se=u.call(this,de,R);U=A.map(function(Y){return new i(d,f,R[Y],se,de[Y].text,void 0,de[Y].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var fe=g.reduce(function(Y,ye){return Y[ye.name]=ye.align,Y},{});for(x=0;x<m.length;x+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:x,data:m[x]},this);var oe=u.call(this,m[x],R);for(b=0;b<A.length;b+=1){var Se=m[x][A[b]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:x,col:b,data:Se},this),l.call(this,new i(d,f,R[A[b]],oe,Se,x+2,fe[A[b]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=f,this};var u=function(d,f){var m=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(d).map(function(x){var j=d[x];return this.splitTextToSize(j.hasOwnProperty("text")?j.text:j,f[x]-m-m)},this).map(function(x){return this.getLineHeightFactor()*x.length*g/v+m+m},this).reduce(function(x,j){return Math.max(x,j)},0)};e.setTableHeaderRow=function(d){a.call(this),this.internal.__cell__.tableHeaderRow=d},e.printHeaderRow=function(d,f){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){m=this.internal.__cell__.tableHeaderRow[x].clone(),f&&(m.y=this.internal.__cell__.margins.top||0,v.push(m)),m.lineNumber=d;var j=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,m),this.setTextColor(j)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),r=!1}}(nr.API);var fD={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},hD=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Mw=dD(hD),mD=[100,200,300,400,500,600,700,800,900],Hre=dD(mD);function s2(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return fD[i=i||"normal"]?i:"normal"}(e.style),a=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(e.weight),s=function(i){return typeof Mw[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:a,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,r,a].join(" ")}}}function VC(e,t,r,a){var s;for(s=r;s>=0&&s<t.length;s+=a)if(e[t[s]])return e[t[s]];for(s=r;s>=0&&s<t.length;s-=a)if(e[t[s]])return e[t[s]]}var Gre={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},HC={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function GC(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function KC(e){return e.trimLeft()}function Kre(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Wre(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var V0,WC,YC,Ch,H0,XC,ZC,JC,i2=["times"];function QC(e,t,r,a,s){var i=4,l=tk;switch(s){case nr.API.image_compression.FAST:i=1,l=ek;break;case nr.API.image_compression.MEDIUM:i=6,l=rk;break;case nr.API.image_compression.SLOW:i=9,l=ak}e=function(d,f,m,g){for(var v,x=d.length/f,j=new Uint8Array(d.length+x),b=[Yre,ek,tk,rk,ak],S=0;S<x;S+=1){var A=S*f,E=d.subarray(A,A+f);if(g)j.set(g(E,m,v),A+S);else{for(var T=b.length,D=[],R=0;R<T;R+=1)D[R]=b[R](E,m,v);var B=Zre(D.concat());j.set(D[B],A+S)}v=E}return j}(e,t,Math.ceil(r*a/8),l);var u=Ew(e,{level:i});return nr.API.__addimage__.arrayBufferToBinaryString(u)}function Yre(e){var t=Array.apply([],e);return t.unshift(0),t}function ek(e,t){var r=e.length,a=[];a[0]=1;for(var s=0;s<r;s+=1){var i=e[s-t]||0;a[s+1]=e[s]-i+256&255}return a}function tk(e,t,r){var a=e.length,s=[];s[0]=2;for(var i=0;i<a;i+=1){var l=r&&r[i]||0;s[i+1]=e[i]-l+256&255}return s}function rk(e,t,r){var a=e.length,s=[];s[0]=3;for(var i=0;i<a;i+=1){var l=e[i-t]||0,u=r&&r[i]||0;s[i+1]=e[i]+256-(l+u>>>1)&255}return s}function ak(e,t,r){var a=e.length,s=[];s[0]=4;for(var i=0;i<a;i+=1){var l=Xre(e[i-t]||0,r&&r[i]||0,r&&r[i-t]||0);s[i+1]=e[i]-l+256&255}return s}function Xre(e,t,r){if(e===t&&t===r)return e;var a=Math.abs(t-r),s=Math.abs(e-r),i=Math.abs(e+t-r-r);return a<=s&&a<=i?e:s<=i?t:r}function Zre(e){var t=e.map(function(r){return r.reduce(function(a,s){return a+Math.abs(s)},0)});return t.indexOf(Math.min.apply(null,t))}function o2(e,t,r){var a=t*r,s=Math.floor(a/8),i=16-(a-8*s+r),l=(1<<r)-1;return pD(e,s)>>i&l}function nk(e,t,r,a){var s=r*a,i=Math.floor(s/8),l=16-(s-8*i+a),u=(1<<a)-1,d=(t&u)<<l;(function(f,m,g){if(m+1<f.byteLength)f.setUint16(m,g,!1);else{var v=g>>8&255;f.setUint8(m,v)}})(e,i,pD(e,i)&~(u<<l)&65535|d)}function pD(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function Jre(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,l=1<<1+(7&s);e[t++],e[t++];var u=null,d=null;i&&(u=t,d=l,t+=3*l);var f=!0,m=[],g=0,v=null,x=0,j=null;for(this.width=r,this.height=a;f&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,j=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((L=e[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var b=e[t++];g=e[t++]|e[t++]<<8,v=e[t++],1&b||(v=null),x=b>>2&7,t++;break;case 254:for(;;){if(!((L=e[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var S=e[t++]|e[t++]<<8,A=e[t++]|e[t++]<<8,E=e[t++]|e[t++]<<8,T=e[t++]|e[t++]<<8,D=e[t++],R=D>>6&1,B=1<<1+(7&D),U=u,I=d,F=!1;D>>7&&(F=!0,U=t,I=B,t+=3*B);var pe=t;for(t++;;){var L;if(!((L=e[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}m.push({x:S,y:A,width:E,height:T,has_local_palette:F,palette_offset:U,palette_size:I,data_offset:pe,data_length:t-pe,transparent_index:v,interlaced:!!R,delay:g,disposal:x});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return j},this.frameInfo=function(q){if(q<0||q>=m.length)throw new Error("Frame index out of range.");return m[q]},this.decodeAndBlitFrameBGRA=function(q,z){var V=this.frameInfo(q),de=V.width*V.height,se=new Uint8Array(de);sk(e,V.data_offset,se,de);var fe=V.palette_offset,oe=V.transparent_index;oe===null&&(oe=256);var Se=V.width,Y=r-Se,ye=Se,P=4*(V.y*r+V.x),K=4*((V.y+V.height)*r+V.x),le=P,ee=4*Y;V.interlaced===!0&&(ee+=4*r*7);for(var me=8,ke=0,Ae=se.length;ke<Ae;++ke){var xe=se[ke];if(ye===0&&(ye=Se,(le+=ee)>=K&&(ee=4*Y+4*r*(me-1),le=P+(Se+Y)*(me<<1),me>>=1)),xe===oe)le+=4;else{var De=e[fe+3*xe],ve=e[fe+3*xe+1],Z=e[fe+3*xe+2];z[le++]=Z,z[le++]=ve,z[le++]=De,z[le++]=255}--ye}},this.decodeAndBlitFrameRGBA=function(q,z){var V=this.frameInfo(q),de=V.width*V.height,se=new Uint8Array(de);sk(e,V.data_offset,se,de);var fe=V.palette_offset,oe=V.transparent_index;oe===null&&(oe=256);var Se=V.width,Y=r-Se,ye=Se,P=4*(V.y*r+V.x),K=4*((V.y+V.height)*r+V.x),le=P,ee=4*Y;V.interlaced===!0&&(ee+=4*r*7);for(var me=8,ke=0,Ae=se.length;ke<Ae;++ke){var xe=se[ke];if(ye===0&&(ye=Se,(le+=ee)>=K&&(ee=4*Y+4*r*(me-1),le=P+(Se+Y)*(me<<1),me>>=1)),xe===oe)le+=4;else{var De=e[fe+3*xe],ve=e[fe+3*xe+1],Z=e[fe+3*xe+2];z[le++]=De,z[le++]=ve,z[le++]=Z,z[le++]=255}--ye}}}function sk(e,t,r,a){for(var s=e[t++],i=1<<s,l=i+1,u=l+1,d=s+1,f=(1<<d)-1,m=0,g=0,v=0,x=e[t++],j=new Int32Array(4096),b=null;;){for(;m<16&&x!==0;)g|=e[t++]<<m,m+=8,x===1?x=e[t++]:--x;if(m<d)break;var S=g&f;if(g>>=d,m-=d,S!==i){if(S===l)break;for(var A=S<u?S:b,E=0,T=A;T>i;)T=j[T]>>8,++E;var D=T;if(v+E+(A!==S?1:0)>a)return void Ea.log("Warning, gif stream longer than expected.");r[v++]=D;var R=v+=E;for(A!==S&&(r[v++]=D),T=A;E--;)T=j[T],r[--R]=255&T,T>>=8;b!==null&&u<4096&&(j[u++]=b<<8|D,u>=f+1&&d<12&&(++d,f=f<<1|1)),b=S}else u=l+1,f=(1<<(d=s+1))-1,b=null}return v!==a&&Ea.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function l2(e){var t,r,a,s,i,l=Math.floor,u=new Array(64),d=new Array(64),f=new Array(64),m=new Array(64),g=new Array(65535),v=new Array(65535),x=new Array(64),j=new Array(64),b=[],S=0,A=7,E=new Array(64),T=new Array(64),D=new Array(64),R=new Array(256),B=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],I=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],pe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],L=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],q=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],de=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function se(P,K){for(var le=0,ee=0,me=new Array,ke=1;ke<=16;ke++){for(var Ae=1;Ae<=P[ke];Ae++)me[K[ee]]=[],me[K[ee]][0]=le,me[K[ee]][1]=ke,ee++,le++;le*=2}return me}function fe(P){for(var K=P[0],le=P[1]-1;le>=0;)K&1<<le&&(S|=1<<A),le--,--A<0&&(S==255?(oe(255),oe(0)):oe(S),A=7,S=0)}function oe(P){b.push(P)}function Se(P){oe(P>>8&255),oe(255&P)}function Y(P,K,le,ee,me){for(var ke,Ae=me[0],xe=me[240],De=function(Ce,ze){var Pe,we,ae,qe,ft,Et,Bt,vt,ht,Dt,Ie=0;for(ht=0;ht<8;++ht){Pe=Ce[Ie],we=Ce[Ie+1],ae=Ce[Ie+2],qe=Ce[Ie+3],ft=Ce[Ie+4],Et=Ce[Ie+5],Bt=Ce[Ie+6];var _t=Pe+(vt=Ce[Ie+7]),jt=Pe-vt,Pt=we+Bt,Rt=we-Bt,rr=ae+Et,Ke=ae-Et,Re=qe+ft,at=qe-ft,rt=_t+Re,Tt=_t-Re,Te=Pt+rr,Ue=Pt-rr;Ce[Ie]=rt+Te,Ce[Ie+4]=rt-Te;var it=.707106781*(Ue+Tt);Ce[Ie+2]=Tt+it,Ce[Ie+6]=Tt-it;var kt=.382683433*((rt=at+Ke)-(Ue=Rt+jt)),We=.5411961*rt+kt,It=1.306562965*Ue+kt,ir=.707106781*(Te=Ke+Rt),St=jt+ir,Ht=jt-ir;Ce[Ie+5]=Ht+We,Ce[Ie+3]=Ht-We,Ce[Ie+1]=St+It,Ce[Ie+7]=St-It,Ie+=8}for(Ie=0,ht=0;ht<8;++ht){Pe=Ce[Ie],we=Ce[Ie+8],ae=Ce[Ie+16],qe=Ce[Ie+24],ft=Ce[Ie+32],Et=Ce[Ie+40],Bt=Ce[Ie+48];var ar=Pe+(vt=Ce[Ie+56]),cr=Pe-vt,Ur=we+Bt,Ar=we-Bt,or=ae+Et,fr=ae-Et,gr=qe+ft,Fa=qe-ft,nn=ar+gr,sa=ar-gr,Ba=Ur+or,dn=Ur-or;Ce[Ie]=nn+Ba,Ce[Ie+32]=nn-Ba;var Oa=.707106781*(dn+sa);Ce[Ie+16]=sa+Oa,Ce[Ie+48]=sa-Oa;var Wr=.382683433*((nn=Fa+fr)-(dn=Ar+cr)),yn=.5411961*nn+Wr,Yr=1.306562965*dn+Wr,lr=.707106781*(Ba=fr+Ar),ia=cr+lr,ni=cr-lr;Ce[Ie+40]=ni+yn,Ce[Ie+24]=ni-yn,Ce[Ie+8]=ia+Yr,Ce[Ie+56]=ia-Yr,Ie++}for(ht=0;ht<64;++ht)Dt=Ce[ht]*ze[ht],x[ht]=Dt>0?Dt+.5|0:Dt-.5|0;return x}(P,K),ve=0;ve<64;++ve)j[U[ve]]=De[ve];var Z=j[0]-le;le=j[0],Z==0?fe(ee[0]):(fe(ee[v[ke=32767+Z]]),fe(g[ke]));for(var te=63;te>0&&j[te]==0;)te--;if(te==0)return fe(Ae),le;for(var re,$=1;$<=te;){for(var ne=$;j[$]==0&&$<=te;)++$;var W=$-ne;if(W>=16){re=W>>4;for(var be=1;be<=re;++be)fe(xe);W&=15}ke=32767+j[$],fe(me[(W<<4)+v[ke]]),fe(g[ke]),$++}return te!=63&&fe(Ae),le}function ye(P){P=Math.min(Math.max(P,1),100),i!=P&&(function(K){for(var le=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var me=l((le[ee]*K+50)/100);me=Math.min(Math.max(me,1),255),u[U[ee]]=me}for(var ke=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ae=0;Ae<64;Ae++){var xe=l((ke[Ae]*K+50)/100);xe=Math.min(Math.max(xe,1),255),d[U[Ae]]=xe}for(var De=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ve=0,Z=0;Z<8;Z++)for(var te=0;te<8;te++)f[ve]=1/(u[U[ve]]*De[Z]*De[te]*8),m[ve]=1/(d[U[ve]]*De[Z]*De[te]*8),ve++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),i=P)}this.encode=function(P,K){K&&ye(K),b=new Array,S=0,A=7,Se(65496),Se(65504),Se(16),oe(74),oe(70),oe(73),oe(70),oe(0),oe(1),oe(1),oe(0),Se(1),Se(1),oe(0),oe(0),function(){Se(65499),Se(132),oe(0);for(var we=0;we<64;we++)oe(u[we]);oe(1);for(var ae=0;ae<64;ae++)oe(d[ae])}(),function(we,ae){Se(65472),Se(17),oe(8),Se(ae),Se(we),oe(3),oe(1),oe(17),oe(0),oe(2),oe(17),oe(1),oe(3),oe(17),oe(1)}(P.width,P.height),function(){Se(65476),Se(418),oe(0);for(var we=0;we<16;we++)oe(I[we+1]);for(var ae=0;ae<=11;ae++)oe(F[ae]);oe(16);for(var qe=0;qe<16;qe++)oe(pe[qe+1]);for(var ft=0;ft<=161;ft++)oe(L[ft]);oe(1);for(var Et=0;Et<16;Et++)oe(q[Et+1]);for(var Bt=0;Bt<=11;Bt++)oe(z[Bt]);oe(17);for(var vt=0;vt<16;vt++)oe(V[vt+1]);for(var ht=0;ht<=161;ht++)oe(de[ht])}(),Se(65498),Se(12),oe(3),oe(1),oe(0),oe(2),oe(17),oe(3),oe(17),oe(0),oe(63),oe(0);var le=0,ee=0,me=0;S=0,A=7,this.encode.displayName="_encode_";for(var ke,Ae,xe,De,ve,Z,te,re,$,ne=P.data,W=P.width,be=P.height,Ce=4*W,ze=0;ze<be;){for(ke=0;ke<Ce;){for(ve=Ce*ze+ke,te=-1,re=0,$=0;$<64;$++)Z=ve+(re=$>>3)*Ce+(te=4*(7&$)),ze+re>=be&&(Z-=Ce*(ze+1+re-be)),ke+te>=Ce&&(Z-=ke+te-Ce+4),Ae=ne[Z++],xe=ne[Z++],De=ne[Z++],E[$]=(B[Ae]+B[xe+256|0]+B[De+512|0]>>16)-128,T[$]=(B[Ae+768|0]+B[xe+1024|0]+B[De+1280|0]>>16)-128,D[$]=(B[Ae+1280|0]+B[xe+1536|0]+B[De+1792|0]>>16)-128;le=Y(E,f,le,t,a),ee=Y(T,m,ee,r,s),me=Y(D,m,me,r,s),ke+=32}ze+=8}if(A>=0){var Pe=[];Pe[1]=A+1,Pe[0]=(1<<A+1)-1,fe(Pe)}return Se(65497),new Uint8Array(b)},e=e||50,function(){for(var P=String.fromCharCode,K=0;K<256;K++)R[K]=P(K)}(),t=se(I,F),r=se(q,z),a=se(pe,L),s=se(V,de),function(){for(var P=1,K=2,le=1;le<=15;le++){for(var ee=P;ee<K;ee++)v[32767+ee]=le,g[32767+ee]=[],g[32767+ee][1]=le,g[32767+ee][0]=ee;for(var me=-(K-1);me<=-P;me++)v[32767+me]=le,g[32767+me]=[],g[32767+me][1]=le,g[32767+me][0]=K-1+me;P<<=1,K<<=1}}(),function(){for(var P=0;P<256;P++)B[P]=19595*P,B[P+256|0]=38470*P,B[P+512|0]=7471*P+32768,B[P+768|0]=-11059*P,B[P+1024|0]=-21709*P,B[P+1280|0]=32768*P+8421375,B[P+1536|0]=-27439*P,B[P+1792|0]=-5329*P}(),ye(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function al(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ik(e){function t(F){if(!F)throw Error("assert :P")}function r(F,pe,L){for(var q=0;4>q;q++)if(F[pe+q]!=L.charCodeAt(q))return!0;return!1}function a(F,pe,L,q,z){for(var V=0;V<z;V++)F[pe+V]=L[q+V]}function s(F,pe,L,q){for(var z=0;z<q;z++)F[pe+z]=L}function i(F){return new Int32Array(F)}function l(F,pe){for(var L=[],q=0;q<F;q++)L.push(new pe);return L}function u(F,pe){var L=[];return function q(z,V,de){for(var se=de[V],fe=0;fe<se&&(z.push(de.length>V+1?[]:new pe),!(de.length<V+1));fe++)q(z[fe],V+1,de)}(L,0,F),L}var d=function(){var F=this;function pe(y,N){for(var O=1<<N-1>>>0;y&O;)O>>>=1;return O?(y&O-1)+O:y}function L(y,N,O,M,Q){t(!(M%O));do y[N+(M-=O)]=Q;while(0<M)}function q(y,N,O,M,Q){if(t(2328>=Q),512>=Q)var ie=i(512);else if((ie=i(Q))==null)return 0;return function(ce,he,ge,_e,Fe,Ze){var je,$e,Ge=he,st=1<<ge,Xe=i(16),dt=i(16);for(t(Fe!=0),t(_e!=null),t(ce!=null),t(0<ge),$e=0;$e<Fe;++$e){if(15<_e[$e])return 0;++Xe[_e[$e]]}if(Xe[0]==Fe)return 0;for(dt[1]=0,je=1;15>je;++je){if(Xe[je]>1<<je)return 0;dt[je+1]=dt[je]+Xe[je]}for($e=0;$e<Fe;++$e)je=_e[$e],0<_e[$e]&&(Ze[dt[je]++]=$e);if(dt[15]==1)return(_e=new z).g=0,_e.value=Ze[0],L(ce,Ge,1,st,_e),st;var ct,At=-1,bt=st-1,Qt=0,$t=1,wr=1,Vt=1<<ge;for($e=0,je=1,Fe=2;je<=ge;++je,Fe<<=1){if($t+=wr<<=1,0>(wr-=Xe[je]))return 0;for(;0<Xe[je];--Xe[je])(_e=new z).g=je,_e.value=Ze[$e++],L(ce,Ge+Qt,Fe,Vt,_e),Qt=pe(Qt,je)}for(je=ge+1,Fe=2;15>=je;++je,Fe<<=1){if($t+=wr<<=1,0>(wr-=Xe[je]))return 0;for(;0<Xe[je];--Xe[je]){if(_e=new z,(Qt&bt)!=At){for(Ge+=Vt,ct=1<<(At=je)-ge;15>At&&!(0>=(ct-=Xe[At]));)++At,ct<<=1;st+=Vt=1<<(ct=At-ge),ce[he+(At=Qt&bt)].g=ct+ge,ce[he+At].value=Ge-he-At}_e.g=je-ge,_e.value=Ze[$e++],L(ce,Ge+(Qt>>ge),Fe,Vt,_e),Qt=pe(Qt,je)}}return $t!=2*dt[15]-1?0:st}(y,N,O,M,Q,ie)}function z(){this.value=this.g=0}function V(){this.value=this.g=0}function de(){this.G=l(5,z),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Bo,V)}function se(y,N,O,M){t(y!=null),t(N!=null),t(2147483648>M),y.Ca=254,y.I=0,y.b=-8,y.Ka=0,y.oa=N,y.pa=O,y.Jd=N,y.Yc=O+M,y.Zc=4<=M?O+M-4+1:O,Ae(y)}function fe(y,N){for(var O=0;0<N--;)O|=De(y,128)<<N;return O}function oe(y,N){var O=fe(y,N);return xe(y)?-O:O}function Se(y,N,O,M){var Q,ie=0;for(t(y!=null),t(N!=null),t(4294967288>M),y.Sb=M,y.Ra=0,y.u=0,y.h=0,4<M&&(M=4),Q=0;Q<M;++Q)ie+=N[O+Q]<<8*Q;y.Ra=ie,y.bb=M,y.oa=N,y.pa=O}function Y(y){for(;8<=y.u&&y.bb<y.Sb;)y.Ra>>>=8,y.Ra+=y.oa[y.pa+y.bb]<<Uo-8>>>0,++y.bb,y.u-=8;ee(y)&&(y.h=1,y.u=0)}function ye(y,N){if(t(0<=N),!y.h&&N<=Rs){var O=le(y)&vs[N];return y.u+=N,Y(y),O}return y.h=1,y.u=0}function P(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function K(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function le(y){return y.Ra>>>(y.u&Uo-1)>>>0}function ee(y){return t(y.bb<=y.Sb),y.h||y.bb==y.Sb&&y.u>Uo}function me(y,N){y.u=N,y.h=ee(y)}function ke(y){y.u>=Qi&&(t(y.u>=Qi),Y(y))}function Ae(y){t(y!=null&&y.oa!=null),y.pa<y.Zc?(y.I=(y.oa[y.pa++]|y.I<<8)>>>0,y.b+=8):(t(y!=null&&y.oa!=null),y.pa<y.Yc?(y.b+=8,y.I=y.oa[y.pa++]|y.I<<8):y.Ka?y.b=0:(y.I<<=8,y.b+=8,y.Ka=1))}function xe(y){return fe(y,1)}function De(y,N){var O=y.Ca;0>y.b&&Ae(y);var M=y.b,Q=O*N>>>8,ie=(y.I>>>M>Q)+0;for(ie?(O-=Q,y.I-=Q+1<<M>>>0):O=Q+1,M=O,Q=0;256<=M;)Q+=8,M>>=8;return M=7^Q+Dl[M],y.b-=M,y.Ca=(O<<M)-1,ie}function ve(y,N,O){y[N+0]=O>>24&255,y[N+1]=O>>16&255,y[N+2]=O>>8&255,y[N+3]=255&O}function Z(y,N){return y[N+0]|y[N+1]<<8}function te(y,N){return Z(y,N)|y[N+2]<<16}function re(y,N){return Z(y,N)|Z(y,N+2)<<16}function $(y,N){var O=1<<N;return t(y!=null),t(0<N),y.X=i(O),y.X==null?0:(y.Mb=32-N,y.Xa=N,1)}function ne(y,N){t(y!=null),t(N!=null),t(y.Xa==N.Xa),a(N.X,0,y.X,0,1<<N.Xa)}function W(){this.X=[],this.Xa=this.Mb=0}function be(y,N,O,M){t(O!=null),t(M!=null);var Q=O[0],ie=M[0];return Q==0&&(Q=(y*ie+N/2)/N),ie==0&&(ie=(N*Q+y/2)/y),0>=Q||0>=ie?0:(O[0]=Q,M[0]=ie,1)}function Ce(y,N){return y+(1<<N)-1>>>N}function ze(y,N){return((4278255360&y)+(4278255360&N)>>>0&4278255360)+((16711935&y)+(16711935&N)>>>0&16711935)>>>0}function Pe(y,N){F[N]=function(O,M,Q,ie,ce,he,ge){var _e;for(_e=0;_e<ce;++_e){var Fe=F[y](he[ge+_e-1],Q,ie+_e);he[ge+_e]=ze(O[M+_e],Fe)}}}function we(){this.ud=this.hd=this.jd=0}function ae(y,N){return((4278124286&(y^N))>>>1)+(y&N)>>>0}function qe(y){return 0<=y&&256>y?y:0>y?0:255<y?255:void 0}function ft(y,N){return qe(y+(y-N+.5>>1))}function Et(y,N,O){return Math.abs(N-O)-Math.abs(y-O)}function Bt(y,N,O,M,Q,ie,ce){for(M=ie[ce-1],O=0;O<Q;++O)ie[ce+O]=M=ze(y[N+O],M)}function vt(y,N,O,M,Q){var ie;for(ie=0;ie<O;++ie){var ce=y[N+ie],he=ce>>8&255,ge=16711935&(ge=(ge=16711935&ce)+((he<<16)+he));M[Q+ie]=(4278255360&ce)+ge>>>0}}function ht(y,N){N.jd=255&y,N.hd=y>>8&255,N.ud=y>>16&255}function Dt(y,N,O,M,Q,ie){var ce;for(ce=0;ce<M;++ce){var he=N[O+ce],ge=he>>>8,_e=he,Fe=255&(Fe=(Fe=he>>>16)+((y.jd<<24>>24)*(ge<<24>>24)>>>5));_e=255&(_e=(_e+=(y.hd<<24>>24)*(ge<<24>>24)>>>5)+((y.ud<<24>>24)*(Fe<<24>>24)>>>5)),Q[ie+ce]=(4278255360&he)+(Fe<<16)+_e}}function Ie(y,N,O,M,Q){F[N]=function(ie,ce,he,ge,_e,Fe,Ze,je,$e){for(ge=Ze;ge<je;++ge)for(Ze=0;Ze<$e;++Ze)_e[Fe++]=Q(he[M(ie[ce++])])},F[y]=function(ie,ce,he,ge,_e,Fe,Ze){var je=8>>ie.b,$e=ie.Ea,Ge=ie.K[0],st=ie.w;if(8>je)for(ie=(1<<ie.b)-1,st=(1<<je)-1;ce<he;++ce){var Xe,dt=0;for(Xe=0;Xe<$e;++Xe)Xe&ie||(dt=M(ge[_e++])),Fe[Ze++]=Q(Ge[dt&st]),dt>>=je}else F["VP8LMapColor"+O](ge,_e,Ge,st,Fe,Ze,ce,he,$e)}}function _t(y,N,O,M,Q){for(O=N+O;N<O;){var ie=y[N++];M[Q++]=ie>>16&255,M[Q++]=ie>>8&255,M[Q++]=255&ie}}function jt(y,N,O,M,Q){for(O=N+O;N<O;){var ie=y[N++];M[Q++]=ie>>16&255,M[Q++]=ie>>8&255,M[Q++]=255&ie,M[Q++]=ie>>24&255}}function Pt(y,N,O,M,Q){for(O=N+O;N<O;){var ie=(ce=y[N++])>>16&240|ce>>12&15,ce=240&ce|ce>>28&15;M[Q++]=ie,M[Q++]=ce}}function Rt(y,N,O,M,Q){for(O=N+O;N<O;){var ie=(ce=y[N++])>>16&248|ce>>13&7,ce=ce>>5&224|ce>>3&31;M[Q++]=ie,M[Q++]=ce}}function rr(y,N,O,M,Q){for(O=N+O;N<O;){var ie=y[N++];M[Q++]=255&ie,M[Q++]=ie>>8&255,M[Q++]=ie>>16&255}}function Ke(y,N,O,M,Q,ie){if(ie==0)for(O=N+O;N<O;)ve(M,((ie=y[N++])[0]>>24|ie[1]>>8&65280|ie[2]<<8&16711680|ie[3]<<24)>>>0),Q+=32;else a(M,Q,y,N,O)}function Re(y,N){F[N][0]=F[y+"0"],F[N][1]=F[y+"1"],F[N][2]=F[y+"2"],F[N][3]=F[y+"3"],F[N][4]=F[y+"4"],F[N][5]=F[y+"5"],F[N][6]=F[y+"6"],F[N][7]=F[y+"7"],F[N][8]=F[y+"8"],F[N][9]=F[y+"9"],F[N][10]=F[y+"10"],F[N][11]=F[y+"11"],F[N][12]=F[y+"12"],F[N][13]=F[y+"13"],F[N][14]=F[y+"0"],F[N][15]=F[y+"0"]}function at(y){return y==Ed||y==Ll||y==Ho||y==ju}function rt(){this.eb=[],this.size=this.A=this.fb=0}function Tt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Te(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new rt,this.f.kb=new Tt,this.sd=null}function Ue(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function it(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function kt(y){return alert("todo:WebPSamplerProcessPlane"),y.T}function We(y,N){var O=y.T,M=N.ba.f.RGBA,Q=M.eb,ie=M.fb+y.ka*M.A,ce=In[N.ba.S],he=y.y,ge=y.O,_e=y.f,Fe=y.N,Ze=y.ea,je=y.W,$e=N.cc,Ge=N.dc,st=N.Mc,Xe=N.Nc,dt=y.ka,ct=y.ka+y.T,At=y.U,bt=At+1>>1;for(dt==0?ce(he,ge,null,null,_e,Fe,Ze,je,_e,Fe,Ze,je,Q,ie,null,null,At):(ce(N.ec,N.fc,he,ge,$e,Ge,st,Xe,_e,Fe,Ze,je,Q,ie-M.A,Q,ie,At),++O);dt+2<ct;dt+=2)$e=_e,Ge=Fe,st=Ze,Xe=je,Fe+=y.Rc,je+=y.Rc,ie+=2*M.A,ce(he,(ge+=2*y.fa)-y.fa,he,ge,$e,Ge,st,Xe,_e,Fe,Ze,je,Q,ie-M.A,Q,ie,At);return ge+=y.fa,y.j+ct<y.o?(a(N.ec,N.fc,he,ge,At),a(N.cc,N.dc,_e,Fe,bt),a(N.Mc,N.Nc,Ze,je,bt),O--):1&ct||ce(he,ge,null,null,_e,Fe,Ze,je,_e,Fe,Ze,je,Q,ie+M.A,null,null,At),O}function It(y,N,O){var M=y.F,Q=[y.J];if(M!=null){var ie=y.U,ce=N.ba.S,he=ce==yc||ce==Ho;N=N.ba.f.RGBA;var ge=[0],_e=y.ka;ge[0]=y.T,y.Kb&&(_e==0?--ge[0]:(--_e,Q[0]-=y.width),y.j+y.ka+y.T==y.o&&(ge[0]=y.o-y.j-_e));var Fe=N.eb;_e=N.fb+_e*N.A,y=Ys(M,Q[0],y.width,ie,ge,Fe,_e+(he?0:3),N.A),t(O==ge),y&&at(ce)&&bu(Fe,_e,he,ie,ge,N.A)}return 0}function ir(y){var N=y.ma,O=N.ba.S,M=11>O,Q=O==wu||O==kd||O==yc||O==Vo||O==12||at(O);if(N.memory=null,N.Ib=null,N.Jb=null,N.Nd=null,!Ol(N.Oa,y,Q?11:12))return 0;if(Q&&at(O)&&Rf(),y.da)alert("todo:use_scaling");else{if(M){if(N.Ib=kt,y.Kb){if(O=y.U+1>>1,N.memory=i(y.U+2*O),N.memory==null)return 0;N.ec=N.memory,N.fc=0,N.cc=N.ec,N.dc=N.fc+y.U,N.Mc=N.cc,N.Nc=N.dc+O,N.Ib=We,Rf()}}else alert("todo:EmitYUV");Q&&(N.Jb=It,M&&ii())}if(M&&!gg){for(y=0;256>y;++y)Fv[y]=89858*(y-128)+Nn>>io,Od[y]=-22014*(y-128)+Nn,ym[y]=-45773*(y-128),Sn[y]=113618*(y-128)+Nn>>io;for(y=ql;y<Gf;++y)N=76283*(y-16)+Nn>>io,Dd[y-ql]=Ga(N,255),bm[y-ql]=Ga(N+8>>4,15);gg=1}return 1}function St(y){var N=y.ma,O=y.U,M=y.T;return t(!(1&y.ka)),0>=O||0>=M?0:(O=N.Ib(y,N),N.Jb!=null&&N.Jb(y,N,O),N.Dc+=O,1)}function Ht(y){y.ma.memory=null}function ar(y,N,O,M){return ye(y,8)!=47?0:(N[0]=ye(y,14)+1,O[0]=ye(y,14)+1,M[0]=ye(y,1),ye(y,3)!=0?0:!y.h)}function cr(y,N){if(4>y)return y+1;var O=y-2>>1;return(2+(1&y)<<O)+ye(N,O)+1}function Ur(y,N){return 120<N?N-120:1<=(O=((O=Ko[N-1])>>4)*y+(8-(15&O)))?O:1;var O}function Ar(y,N,O){var M=le(O),Q=y[N+=255&M].g-8;return 0<Q&&(me(O,O.u+8),M=le(O),N+=y[N].value,N+=M&(1<<Q)-1),me(O,O.u+y[N].g),y[N].value}function or(y,N,O){return O.g+=y.g,O.value+=y.value<<N>>>0,t(8>=O.g),y.g}function fr(y,N,O){var M=y.xc;return t((N=M==0?0:y.vc[y.md*(O>>M)+(N>>M)])<y.Wb),y.Ya[N]}function gr(y,N,O,M){var Q=y.ab,ie=y.c*N,ce=y.C;N=ce+N;var he=O,ge=M;for(M=y.Ta,O=y.Ua;0<Q--;){var _e=y.gc[Q],Fe=ce,Ze=N,je=he,$e=ge,Ge=(ge=M,he=O,_e.Ea);switch(t(Fe<Ze),t(Ze<=_e.nc),_e.hc){case 2:sn(je,$e,(Ze-Fe)*Ge,ge,he);break;case 0:var st=Fe,Xe=Ze,dt=ge,ct=he,At=(Vt=_e).Ea;st==0&&(Sd(je,$e,null,null,1,dt,ct),Bt(je,$e+1,0,0,At-1,dt,ct+1),$e+=At,ct+=At,++st);for(var bt=1<<Vt.b,Qt=bt-1,$t=Ce(At,Vt.b),wr=Vt.K,Vt=Vt.w+(st>>Vt.b)*$t;st<Xe;){var Rr=wr,mn=Vt,vr=1;for(mu(je,$e,dt,ct-At,1,dt,ct);vr<At;){var Kt=(vr&~Qt)+bt;Kt>At&&(Kt=At),(0,gu[Rr[mn++]>>8&15])(je,$e+ +vr,dt,ct+vr-At,Kt-vr,dt,ct+vr),vr=Kt}$e+=At,ct+=At,++st&Qt||(Vt+=$t)}Ze!=_e.nc&&a(ge,he-Ge,ge,he+(Ze-Fe-1)*Ge,Ge);break;case 1:for(Ge=je,Xe=$e,At=(je=_e.Ea)-(ct=je&~(dt=($e=1<<_e.b)-1)),st=Ce(je,_e.b),bt=_e.K,_e=_e.w+(Fe>>_e.b)*st;Fe<Ze;){for(Qt=bt,$t=_e,wr=new we,Vt=Xe+ct,Rr=Xe+je;Xe<Vt;)ht(Qt[$t++],wr),xu(wr,Ge,Xe,$e,ge,he),Xe+=$e,he+=$e;Xe<Rr&&(ht(Qt[$t++],wr),xu(wr,Ge,Xe,At,ge,he),Xe+=At,he+=At),++Fe&dt||(_e+=st)}break;case 3:if(je==ge&&$e==he&&0<_e.b){for(Xe=ge,je=Ge=he+(Ze-Fe)*Ge-(ct=(Ze-Fe)*Ce(_e.Ea,_e.b)),$e=ge,dt=he,st=[],ct=(At=ct)-1;0<=ct;--ct)st[ct]=$e[dt+ct];for(ct=At-1;0<=ct;--ct)Xe[je+ct]=st[ct];Lf(_e,Fe,Ze,ge,Ge,ge,he)}else Lf(_e,Fe,Ze,je,$e,ge,he)}he=M,ge=O}ge!=O&&a(M,O,he,ge,ie)}function Fa(y,N){var O=y.V,M=y.Ba+y.c*y.C,Q=N-y.C;if(t(N<=y.l.o),t(16>=Q),0<Q){var ie=y.l,ce=y.Ta,he=y.Ua,ge=ie.width;if(gr(y,Q,O,M),Q=he=[he],t((O=y.C)<(M=N)),t(ie.v<ie.va),M>ie.o&&(M=ie.o),O<ie.j){var _e=ie.j-O;O=ie.j,Q[0]+=_e*ge}if(O>=M?O=0:(Q[0]+=4*ie.v,ie.ka=O-ie.j,ie.U=ie.va-ie.v,ie.T=M-O,O=1),O){if(he=he[0],11>(O=y.ca).S){var Fe=O.f.RGBA,Ze=(M=O.S,Q=ie.U,ie=ie.T,_e=Fe.eb,Fe.A),je=ie;for(Fe=Fe.fb+y.Ma*Fe.A;0<je--;){var $e=ce,Ge=he,st=Q,Xe=_e,dt=Fe;switch(M){case ts:vu($e,Ge,st,Xe,dt);break;case wu:eo($e,Ge,st,Xe,dt);break;case Ed:eo($e,Ge,st,Xe,dt),bu(Xe,dt,0,st,1,0);break;case ro:$o($e,Ge,st,Xe,dt);break;case kd:Ke($e,Ge,st,Xe,dt,1);break;case Ll:Ke($e,Ge,st,Xe,dt,1),bu(Xe,dt,0,st,1,0);break;case yc:Ke($e,Ge,st,Xe,dt,0);break;case Ho:Ke($e,Ge,st,Xe,dt,0),bu(Xe,dt,1,st,1,0);break;case Vo:Rl($e,Ge,st,Xe,dt);break;case ju:Rl($e,Ge,st,Xe,dt),Ws(Xe,dt,st,1,0);break;case Uf:Gs($e,Ge,st,Xe,dt);break;default:t(0)}he+=ge,Fe+=Ze}y.Ma+=ie}else alert("todo:EmitRescaledRowsYUVA");t(y.Ma<=O.height)}}y.C=N,t(y.C<=y.i)}function nn(y){var N;if(0<y.ua)return 0;for(N=0;N<y.Wb;++N){var O=y.Ya[N].G,M=y.Ya[N].H;if(0<O[1][M[1]+0].g||0<O[2][M[2]+0].g||0<O[3][M[3]+0].g)return 0}return 1}function sa(y,N,O,M,Q,ie){if(y.Z!=0){var ce=y.qd,he=y.rd;for(t(no[y.Z]!=null);N<O;++N)no[y.Z](ce,he,M,Q,M,Q,ie),ce=M,he=Q,Q+=ie;y.qd=ce,y.rd=he}}function Ba(y,N){var O=y.l.ma,M=O.Z==0||O.Z==1?y.l.j:y.C;if(M=y.C<M?M:y.C,t(N<=y.l.o),N>M){var Q=y.l.width,ie=O.ca,ce=O.tb+Q*M,he=y.V,ge=y.Ba+y.c*M,_e=y.gc;t(y.ab==1),t(_e[0].hc==3),Ls(_e[0],M,N,he,ge,ie,ce),sa(O,M,N,ie,ce,Q)}y.C=y.Ma=N}function dn(y,N,O,M,Q,ie,ce){var he=y.$/M,ge=y.$%M,_e=y.m,Fe=y.s,Ze=O+y.$,je=Ze;Q=O+M*Q;var $e=O+M*ie,Ge=280+Fe.ua,st=y.Pb?he:16777216,Xe=0<Fe.ua?Fe.Wa:null,dt=Fe.wc,ct=Ze<$e?fr(Fe,ge,he):null;t(y.C<ie),t($e<=Q);var At=!1;e:for(;;){for(;At||Ze<$e;){var bt=0;if(he>=st){var Qt=Ze-O;t((st=y).Pb),st.wd=st.m,st.xd=Qt,0<st.s.ua&&ne(st.s.Wa,st.s.vb),st=he+hg}if(ge&dt||(ct=fr(Fe,ge,he)),t(ct!=null),ct.Qb&&(N[Ze]=ct.qb,At=!0),!At)if(ke(_e),ct.jc){bt=_e,Qt=N;var $t=Ze,wr=ct.pd[le(bt)&Bo-1];t(ct.jc),256>wr.g?(me(bt,bt.u+wr.g),Qt[$t]=wr.value,bt=0):(me(bt,bt.u+wr.g-256),t(256<=wr.value),bt=wr.value),bt==0&&(At=!0)}else bt=Ar(ct.G[0],ct.H[0],_e);if(_e.h)break;if(At||256>bt){if(!At)if(ct.nd)N[Ze]=(ct.qb|bt<<8)>>>0;else{if(ke(_e),At=Ar(ct.G[1],ct.H[1],_e),ke(_e),Qt=Ar(ct.G[2],ct.H[2],_e),$t=Ar(ct.G[3],ct.H[3],_e),_e.h)break;N[Ze]=($t<<24|At<<16|bt<<8|Qt)>>>0}if(At=!1,++Ze,++ge>=M&&(ge=0,++he,ce!=null&&he<=ie&&!(he%16)&&ce(y,he),Xe!=null))for(;je<Ze;)bt=N[je++],Xe.X[(506832829*bt&4294967295)>>>Xe.Mb]=bt}else if(280>bt){if(bt=cr(bt-256,_e),Qt=Ar(ct.G[4],ct.H[4],_e),ke(_e),Qt=Ur(M,Qt=cr(Qt,_e)),_e.h)break;if(Ze-O<Qt||Q-Ze<bt)break e;for($t=0;$t<bt;++$t)N[Ze+$t]=N[Ze+$t-Qt];for(Ze+=bt,ge+=bt;ge>=M;)ge-=M,++he,ce!=null&&he<=ie&&!(he%16)&&ce(y,he);if(t(Ze<=Q),ge&dt&&(ct=fr(Fe,ge,he)),Xe!=null)for(;je<Ze;)bt=N[je++],Xe.X[(506832829*bt&4294967295)>>>Xe.Mb]=bt}else{if(!(bt<Ge))break e;for(At=bt-280,t(Xe!=null);je<Ze;)bt=N[je++],Xe.X[(506832829*bt&4294967295)>>>Xe.Mb]=bt;bt=Ze,t(!(At>>>(Qt=Xe).Xa)),N[bt]=Qt.X[At],At=!0}At||t(_e.h==ee(_e))}if(y.Pb&&_e.h&&Ze<Q)t(y.m.h),y.a=5,y.m=y.wd,y.$=y.xd,0<y.s.ua&&ne(y.s.vb,y.s.Wa);else{if(_e.h)break e;ce!=null&&ce(y,he>ie?ie:he),y.a=0,y.$=Ze-O}return 1}return y.a=3,0}function Oa(y){t(y!=null),y.vc=null,y.yc=null,y.Ya=null;var N=y.Wa;N!=null&&(N.X=null),y.vb=null,t(y!=null)}function Wr(){var y=new tr;return y==null?null:(y.a=0,y.xb=_u,Re("Predictor","VP8LPredictors"),Re("Predictor","VP8LPredictors_C"),Re("PredictorAdd","VP8LPredictorsAdd"),Re("PredictorAdd","VP8LPredictorsAdd_C"),sn=vt,xu=Dt,vu=_t,eo=jt,Rl=Pt,Gs=Rt,$o=rr,F.VP8LMapColor32b=Ka,F.VP8LMapColor8b=pu,y)}function yn(y,N,O,M,Q){var ie=1,ce=[y],he=[N],ge=M.m,_e=M.s,Fe=null,Ze=0;e:for(;;){if(O)for(;ie&&ye(ge,1);){var je=ce,$e=he,Ge=M,st=1,Xe=Ge.m,dt=Ge.gc[Ge.ab],ct=ye(Xe,2);if(Ge.Oc&1<<ct)ie=0;else{switch(Ge.Oc|=1<<ct,dt.hc=ct,dt.Ea=je[0],dt.nc=$e[0],dt.K=[null],++Ge.ab,t(4>=Ge.ab),ct){case 0:case 1:dt.b=ye(Xe,3)+2,st=yn(Ce(dt.Ea,dt.b),Ce(dt.nc,dt.b),0,Ge,dt.K),dt.K=dt.K[0];break;case 3:var At,bt=ye(Xe,8)+1,Qt=16<bt?0:4<bt?1:2<bt?2:3;if(je[0]=Ce(dt.Ea,Qt),dt.b=Qt,At=st=yn(bt,1,0,Ge,dt.K)){var $t,wr=bt,Vt=dt,Rr=1<<(8>>Vt.b),mn=i(Rr);if(mn==null)At=0;else{var vr=Vt.K[0],Kt=Vt.w;for(mn[0]=Vt.K[0][0],$t=1;$t<1*wr;++$t)mn[$t]=ze(vr[Kt+$t],mn[$t-1]);for(;$t<4*Rr;++$t)mn[$t]=0;Vt.K[0]=null,Vt.K[0]=mn,At=1}}st=At;break;case 2:break;default:t(0)}ie=st}}if(ce=ce[0],he=he[0],ie&&ye(ge,1)&&!(ie=1<=(Ze=ye(ge,4))&&11>=Ze)){M.a=3;break e}var Mt;if(Mt=ie)t:{var $a,jr,kr,Xt=M,Sr=ce,$r=he,Ca=Ze,on=O,ln=Xt.m,Xa=Xt.s,Dr=[null],zr=1,Za=0,hr=wc[Ca];r:for(;;){if(on&&ye(ln,1)){var An=ye(ln,3)+2,Js=Ce(Sr,An),Ja=Ce($r,An),bs=Js*Ja;if(!yn(Js,Ja,0,Xt,Dr))break r;for(Dr=Dr[0],Xa.xc=An,$a=0;$a<bs;++$a){var pa=Dr[$a]>>8&65535;Dr[$a]=pa,pa>=zr&&(zr=pa+1)}}if(ln.h)break r;for(jr=0;5>jr;++jr){var cn=Xs[jr];!jr&&0<Ca&&(cn+=1<<Ca),Za<cn&&(Za=cn)}var ws=l(zr*hr,z),Vn=zr,ja=l(Vn,de);if(ja==null)var Zr=null;else t(65536>=Vn),Zr=ja;var rs=i(Za);if(Zr==null||rs==null||ws==null){Xt.a=1;break r}var Hn=ws;for($a=kr=0;$a<zr;++$a){var la=Zr[$a],js=la.G,Cn=la.H,oo=0,Ai=1,kn=0;for(jr=0;5>jr;++jr){cn=Xs[jr],js[jr]=Hn,Cn[jr]=kr,!jr&&0<Ca&&(cn+=1<<Ca);n:{var Rd,Kf=cn,Ld=Xt,Su=rs,yg=Hn,bg=kr,Md=0,Zo=Ld.m,Uv=ye(Zo,1);if(s(Su,0,0,Kf),Uv){var wg=ye(Zo,1)+1,jg=ye(Zo,1),wm=ye(Zo,jg==0?1:8);Su[wm]=1,wg==2&&(Su[wm=ye(Zo,8)]=1);var Au=1}else{var jm=i(19),_m=ye(Zo,4)+4;if(19<_m){Ld.a=3;var Id=0;break n}for(Rd=0;Rd<_m;++Rd)jm[Go[Rd]]=ye(Zo,3);var Wf=void 0,Cu=void 0,_g=Ld,Ng=jm,Jo=Kf,qd=Su,Yf=0,Ci=_g.m,ku=8,Nm=l(128,z);a:for(;q(Nm,0,7,Ng,19);){if(ye(Ci,1)){var Sg=2+2*ye(Ci,3);if((Wf=2+ye(Ci,Sg))>Jo)break a}else Wf=Jo;for(Cu=0;Cu<Jo&&Wf--;){ke(Ci);var Sm=Nm[0+(127&le(Ci))];me(Ci,Ci.u+Sm.g);var Nc=Sm.value;if(16>Nc)qd[Cu++]=Nc,Nc!=0&&(ku=Nc);else{var Ag=Nc==16,Am=Nc-16,Cm=di[Am],km=ye(Ci,$f[Am])+Cm;if(Cu+km>Jo)break a;for(var Cg=Ag?ku:0;0<km--;)qd[Cu++]=Cg}}Yf=1;break a}Yf||(_g.a=3),Au=Yf}(Au=Au&&!Zo.h)&&(Md=q(yg,bg,8,Su,Kf)),Au&&Md!=0?Id=Md:(Ld.a=3,Id=0)}if(Id==0)break r;if(Ai&&bc[jr]==1&&(Ai=Hn[kr].g==0),oo+=Hn[kr].g,kr+=Id,3>=jr){var Sc,Xf=rs[0];for(Sc=1;Sc<cn;++Sc)rs[Sc]>Xf&&(Xf=rs[Sc]);kn+=Xf}}if(la.nd=Ai,la.Qb=0,Ai&&(la.qb=(js[3][Cn[3]+0].value<<24|js[1][Cn[1]+0].value<<16|js[2][Cn[2]+0].value)>>>0,oo==0&&256>js[0][Cn[0]+0].value&&(la.Qb=1,la.qb+=js[0][Cn[0]+0].value<<8)),la.jc=!la.Qb&&6>kn,la.jc){var Fd,Qo=la;for(Fd=0;Fd<Bo;++Fd){var lo=Fd,el=Qo.pd[lo],Bd=Qo.G[0][Qo.H[0]+lo];256<=Bd.value?(el.g=Bd.g+256,el.value=Bd.value):(el.g=0,el.value=0,lo>>=or(Bd,8,el),lo>>=or(Qo.G[1][Qo.H[1]+lo],16,el),lo>>=or(Qo.G[2][Qo.H[2]+lo],0,el),or(Qo.G[3][Qo.H[3]+lo],24,el))}}}Xa.vc=Dr,Xa.Wb=zr,Xa.Ya=Zr,Xa.yc=ws,Mt=1;break t}Mt=0}if(!(ie=Mt)){M.a=3;break e}if(0<Ze){if(_e.ua=1<<Ze,!$(_e.Wa,Ze)){M.a=1,ie=0;break e}}else _e.ua=0;var Ud=M,Em=ce,kg=he,Pm=Ud.s,Tm=Pm.xc;if(Ud.c=Em,Ud.i=kg,Pm.md=Ce(Em,Tm),Pm.wc=Tm==0?-1:(1<<Tm)-1,O){M.xb=pg;break e}if((Fe=i(ce*he))==null){M.a=1,ie=0;break e}ie=(ie=dn(M,Fe,0,ce,he,he,null))&&!ge.h;break e}return ie?(Q!=null?Q[0]=Fe:(t(Fe==null),t(O)),M.$=0,O||Oa(_e)):Oa(_e),ie}function Yr(y,N){var O=y.c*y.i,M=O+N+16*N;return t(y.c<=N),y.V=i(M),y.V==null?(y.Ta=null,y.Ua=0,y.a=1,0):(y.Ta=y.V,y.Ua=y.Ba+O+N,1)}function lr(y,N){var O=y.C,M=N-O,Q=y.V,ie=y.Ba+y.c*O;for(t(N<=y.l.o);0<M;){var ce=16<M?16:M,he=y.l.ma,ge=y.l.width,_e=ge*ce,Fe=he.ca,Ze=he.tb+ge*O,je=y.Ta,$e=y.Ua;gr(y,ce,Q,ie),gc(je,$e,Fe,Ze,_e),sa(he,O,O+ce,Fe,Ze,ge),M-=ce,Q+=ce*y.c,O+=ce}t(O==N),y.C=y.Ma=N}function ia(){this.ub=this.yd=this.td=this.Rb=0}function ni(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function bn(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function gl(){this.Yb=function(){var y=[];return function N(O,M,Q){for(var ie=Q[M],ce=0;ce<ie&&(O.push(Q.length>M+1?[]:0),!(Q.length<M+1));ce++)N(O[ce],M+1,Q)}(y,0,[3,11]),y}()}function cu(){this.jb=i(3),this.Wc=u([4,8],gl),this.Xc=u([4,17],gl)}function Do(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Un(){this.ld=this.La=this.dd=this.tc=0}function gs(){this.Na=this.la=0}function xl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function vl(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function bi(){this.uc=this.M=this.Nb=0,this.wa=Array(new Un),this.Y=0,this.ya=Array(new vl),this.aa=0,this.l=new wl}function yl(){this.y=i(16),this.f=i(8),this.ea=i(8)}function bl(){this.cb=this.a=0,this.sc="",this.m=new P,this.Od=new ia,this.Kc=new ni,this.ed=new Do,this.Qa=new bn,this.Ic=this.$c=this.Aa=0,this.D=new bi,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,P),this.ia=0,this.pb=l(4,xl),this.Pa=new cu,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new yl),this.Hd=0,this.rb=Array(new gs),this.sb=0,this.wa=Array(new Un),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new vl),this.L=this.aa=0,this.gd=u([4,2],Un),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function wl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function uu(){var y=new bl;return y!=null&&(y.a=0,y.sc="OK",y.cb=0,y.Xb=0,_n||(_n=Os)),y}function Vr(y,N,O){return y.a==0&&(y.a=N,y.sc=O,y.cb=0),0}function ic(y,N,O){return 3<=O&&y[N+0]==157&&y[N+1]==1&&y[N+2]==42}function du(y,N){if(y==null)return 0;if(y.a=0,y.sc="OK",N==null)return Vr(y,2,"null VP8Io passed to VP8GetHeaders()");var O=N.data,M=N.w,Q=N.ha;if(4>Q)return Vr(y,7,"Truncated header.");var ie=O[M+0]|O[M+1]<<8|O[M+2]<<16,ce=y.Od;if(ce.Rb=!(1&ie),ce.td=ie>>1&7,ce.yd=ie>>4&1,ce.ub=ie>>5,3<ce.td)return Vr(y,3,"Incorrect keyframe parameters.");if(!ce.yd)return Vr(y,4,"Frame not displayable.");M+=3,Q-=3;var he=y.Kc;if(ce.Rb){if(7>Q)return Vr(y,7,"cannot parse picture header");if(!ic(O,M,Q))return Vr(y,3,"Bad code word");he.c=16383&(O[M+4]<<8|O[M+3]),he.Td=O[M+4]>>6,he.i=16383&(O[M+6]<<8|O[M+5]),he.Ud=O[M+6]>>6,M+=7,Q-=7,y.za=he.c+15>>4,y.Ub=he.i+15>>4,N.width=he.c,N.height=he.i,N.Da=0,N.j=0,N.v=0,N.va=N.width,N.o=N.height,N.da=0,N.ib=N.width,N.hb=N.height,N.U=N.width,N.T=N.height,s((ie=y.Pa).jb,0,255,ie.jb.length),t((ie=y.Qa)!=null),ie.Cb=0,ie.Bb=0,ie.Fb=1,s(ie.Zb,0,0,ie.Zb.length),s(ie.Lb,0,0,ie.Lb)}if(ce.ub>Q)return Vr(y,7,"bad partition length");se(ie=y.m,O,M,ce.ub),M+=ce.ub,Q-=ce.ub,ce.Rb&&(he.Ld=xe(ie),he.Kd=xe(ie)),he=y.Qa;var ge,_e=y.Pa;if(t(ie!=null),t(he!=null),he.Cb=xe(ie),he.Cb){if(he.Bb=xe(ie),xe(ie)){for(he.Fb=xe(ie),ge=0;4>ge;++ge)he.Zb[ge]=xe(ie)?oe(ie,7):0;for(ge=0;4>ge;++ge)he.Lb[ge]=xe(ie)?oe(ie,6):0}if(he.Bb)for(ge=0;3>ge;++ge)_e.jb[ge]=xe(ie)?fe(ie,8):255}else he.Bb=0;if(ie.Ka)return Vr(y,3,"cannot parse segment header");if((he=y.ed).zd=xe(ie),he.Tb=fe(ie,6),he.wb=fe(ie,3),he.Pc=xe(ie),he.Pc&&xe(ie)){for(_e=0;4>_e;++_e)xe(ie)&&(he.vd[_e]=oe(ie,6));for(_e=0;4>_e;++_e)xe(ie)&&(he.od[_e]=oe(ie,6))}if(y.L=he.Tb==0?0:he.zd?1:2,ie.Ka)return Vr(y,3,"cannot parse filter header");var Fe=Q;if(Q=ge=M,M=ge+Fe,he=Fe,y.Xb=(1<<fe(y.m,2))-1,Fe<3*(_e=y.Xb))O=7;else{for(ge+=3*_e,he-=3*_e,Fe=0;Fe<_e;++Fe){var Ze=O[Q+0]|O[Q+1]<<8|O[Q+2]<<16;Ze>he&&(Ze=he),se(y.Jc[+Fe],O,ge,Ze),ge+=Ze,he-=Ze,Q+=3}se(y.Jc[+_e],O,ge,he),O=ge<M?0:5}if(O!=0)return Vr(y,O,"cannot parse partitions");for(O=fe(ge=y.m,7),Q=xe(ge)?oe(ge,4):0,M=xe(ge)?oe(ge,4):0,he=xe(ge)?oe(ge,4):0,_e=xe(ge)?oe(ge,4):0,ge=xe(ge)?oe(ge,4):0,Fe=y.Qa,Ze=0;4>Ze;++Ze){if(Fe.Cb){var je=Fe.Zb[Ze];Fe.Fb||(je+=O)}else{if(0<Ze){y.pb[Ze]=y.pb[0];continue}je=O}var $e=y.pb[Ze];$e.Sc[0]=Pd[Ga(je+Q,127)],$e.Sc[1]=Td[Ga(je+0,127)],$e.Eb[0]=2*Pd[Ga(je+M,127)],$e.Eb[1]=101581*Td[Ga(je+he,127)]>>16,8>$e.Eb[1]&&($e.Eb[1]=8),$e.Qc[0]=Pd[Ga(je+_e,117)],$e.Qc[1]=Td[Ga(je+ge,127)],$e.lc=je+ge}if(!ce.Rb)return Vr(y,4,"Not a key frame.");for(xe(ie),ce=y.Pa,O=0;4>O;++O){for(Q=0;8>Q;++Q)for(M=0;3>M;++M)for(he=0;11>he;++he)_e=De(ie,jc[O][Q][M][he])?fe(ie,8):ao[O][Q][M][he],ce.Wc[O][Q].Yb[M][he]=_e;for(Q=0;17>Q;++Q)ce.Xc[O][Q]=ce.Wc[O][mg[Q]]}return y.kc=xe(ie),y.kc&&(y.Bd=fe(ie,8)),y.cb=1}function Os(y,N,O,M,Q,ie,ce){var he=N[Q].Yb[O];for(O=0;16>Q;++Q){if(!De(y,he[O+0]))return Q;for(;!De(y,he[O+1]);)if(he=N[++Q].Yb[0],O=0,Q==16)return 16;var ge=N[Q+1].Yb;if(De(y,he[O+2])){var _e=y,Fe=0;if(De(_e,(je=he)[(Ze=O)+3]))if(De(_e,je[Ze+6])){for(he=0,Ze=2*(Fe=De(_e,je[Ze+8]))+(je=De(_e,je[Ze+9+Fe])),Fe=0,je=Ya[Ze];je[he];++he)Fe+=Fe+De(_e,je[he]);Fe+=3+(8<<Ze)}else De(_e,je[Ze+7])?(Fe=7+2*De(_e,165),Fe+=De(_e,145)):Fe=5+De(_e,159);else Fe=De(_e,je[Ze+4])?3+De(_e,je[Ze+5]):2;he=ge[2]}else Fe=1,he=ge[1];ge=ce+ea[Q],0>(_e=y).b&&Ae(_e);var Ze,je=_e.b,$e=(Ze=_e.Ca>>1)-(_e.I>>je)>>31;--_e.b,_e.Ca+=$e,_e.Ca|=1,_e.I-=(Ze+1&$e)<<je,ie[ge]=((Fe^$e)-$e)*M[(0<Q)+0]}return 16}function Xi(y){var N=y.rb[y.sb-1];N.la=0,N.Na=0,s(y.zc,0,0,y.zc.length),y.ja=0}function Ln(y,N,O,M,Q){Q=y[N+O+32*M]+(Q>>3),y[N+O+32*M]=-256&Q?0>Q?0:255:Q}function Ro(y,N,O,M,Q,ie){Ln(y,N,0,O,M+Q),Ln(y,N,1,O,M+ie),Ln(y,N,2,O,M-ie),Ln(y,N,3,O,M-Q)}function Mr(y){return(20091*y>>16)+y}function wi(y,N,O,M){var Q,ie=0,ce=i(16);for(Q=0;4>Q;++Q){var he=y[N+0]+y[N+8],ge=y[N+0]-y[N+8],_e=(35468*y[N+4]>>16)-Mr(y[N+12]),Fe=Mr(y[N+4])+(35468*y[N+12]>>16);ce[ie+0]=he+Fe,ce[ie+1]=ge+_e,ce[ie+2]=ge-_e,ce[ie+3]=he-Fe,ie+=4,N++}for(Q=ie=0;4>Q;++Q)he=(y=ce[ie+0]+4)+ce[ie+8],ge=y-ce[ie+8],_e=(35468*ce[ie+4]>>16)-Mr(ce[ie+12]),Ln(O,M,0,0,he+(Fe=Mr(ce[ie+4])+(35468*ce[ie+12]>>16))),Ln(O,M,1,0,ge+_e),Ln(O,M,2,0,ge-_e),Ln(O,M,3,0,he-Fe),ie++,M+=32}function si(y,N,O,M){var Q=y[N+0]+4,ie=35468*y[N+4]>>16,ce=Mr(y[N+4]),he=35468*y[N+1]>>16;Ro(O,M,0,Q+ce,y=Mr(y[N+1]),he),Ro(O,M,1,Q+ie,y,he),Ro(O,M,2,Q-ie,y,he),Ro(O,M,3,Q-ce,y,he)}function oc(y,N,O,M,Q){wi(y,N,O,M),Q&&wi(y,N+16,O,M+4)}function ji(y,N,O,M){zo(y,N+0,O,M,1),zo(y,N+32,O,M+128,1)}function Hs(y,N,O,M){var Q;for(y=y[N+0]+4,Q=0;4>Q;++Q)for(N=0;4>N;++N)Ln(O,M,N,Q,y)}function lc(y,N,O,M){y[N+0]&&Ir(y,N+0,O,M),y[N+16]&&Ir(y,N+16,O,M+4),y[N+32]&&Ir(y,N+32,O,M+128),y[N+48]&&Ir(y,N+48,O,M+128+4)}function X(y,N,O,M){var Q,ie=i(16);for(Q=0;4>Q;++Q){var ce=y[N+0+Q]+y[N+12+Q],he=y[N+4+Q]+y[N+8+Q],ge=y[N+4+Q]-y[N+8+Q],_e=y[N+0+Q]-y[N+12+Q];ie[0+Q]=ce+he,ie[8+Q]=ce-he,ie[4+Q]=_e+ge,ie[12+Q]=_e-ge}for(Q=0;4>Q;++Q)ce=(y=ie[0+4*Q]+3)+ie[3+4*Q],he=ie[1+4*Q]+ie[2+4*Q],ge=ie[1+4*Q]-ie[2+4*Q],_e=y-ie[3+4*Q],O[M+0]=ce+he>>3,O[M+16]=_e+ge>>3,O[M+32]=ce-he>>3,O[M+48]=_e-ge>>3,M+=64}function Ee(y,N,O){var M,Q=N-32,ie=Mn,ce=255-y[Q-1];for(M=0;M<O;++M){var he,ge=ie,_e=ce+y[N-1];for(he=0;he<O;++he)y[N+he]=ge[_e+y[Q+he]];N+=32}}function lt(y,N){Ee(y,N,4)}function yt(y,N){Ee(y,N,8)}function ot(y,N){Ee(y,N,16)}function ut(y,N){var O;for(O=0;16>O;++O)a(y,N+32*O,y,N-32,16)}function Lt(y,N){var O;for(O=16;0<O;--O)s(y,N,y[N-1],16),N+=32}function qt(y,N,O){var M;for(M=0;16>M;++M)s(N,O+32*M,y,16)}function gt(y,N){var O,M=16;for(O=0;16>O;++O)M+=y[N-1+32*O]+y[N+O-32];qt(M>>5,y,N)}function ur(y,N){var O,M=8;for(O=0;16>O;++O)M+=y[N-1+32*O];qt(M>>4,y,N)}function dr(y,N){var O,M=8;for(O=0;16>O;++O)M+=y[N+O-32];qt(M>>4,y,N)}function Hr(y,N){qt(128,y,N)}function Gt(y,N,O){return y+2*N+O+2>>2}function Gr(y,N){var O,M=N-32;for(M=new Uint8Array([Gt(y[M-1],y[M+0],y[M+1]),Gt(y[M+0],y[M+1],y[M+2]),Gt(y[M+1],y[M+2],y[M+3]),Gt(y[M+2],y[M+3],y[M+4])]),O=0;4>O;++O)a(y,N+32*O,M,0,M.length)}function Qr(y,N){var O=y[N-1],M=y[N-1+32],Q=y[N-1+64],ie=y[N-1+96];ve(y,N+0,16843009*Gt(y[N-1-32],O,M)),ve(y,N+32,16843009*Gt(O,M,Q)),ve(y,N+64,16843009*Gt(M,Q,ie)),ve(y,N+96,16843009*Gt(Q,ie,ie))}function Da(y,N){var O,M=4;for(O=0;4>O;++O)M+=y[N+O-32]+y[N-1+32*O];for(M>>=3,O=0;4>O;++O)s(y,N+32*O,M,4)}function Er(y,N){var O=y[N-1+0],M=y[N-1+32],Q=y[N-1+64],ie=y[N-1-32],ce=y[N+0-32],he=y[N+1-32],ge=y[N+2-32],_e=y[N+3-32];y[N+0+96]=Gt(M,Q,y[N-1+96]),y[N+1+96]=y[N+0+64]=Gt(O,M,Q),y[N+2+96]=y[N+1+64]=y[N+0+32]=Gt(ie,O,M),y[N+3+96]=y[N+2+64]=y[N+1+32]=y[N+0+0]=Gt(ce,ie,O),y[N+3+64]=y[N+2+32]=y[N+1+0]=Gt(he,ce,ie),y[N+3+32]=y[N+2+0]=Gt(ge,he,ce),y[N+3+0]=Gt(_e,ge,he)}function Ut(y,N){var O=y[N+1-32],M=y[N+2-32],Q=y[N+3-32],ie=y[N+4-32],ce=y[N+5-32],he=y[N+6-32],ge=y[N+7-32];y[N+0+0]=Gt(y[N+0-32],O,M),y[N+1+0]=y[N+0+32]=Gt(O,M,Q),y[N+2+0]=y[N+1+32]=y[N+0+64]=Gt(M,Q,ie),y[N+3+0]=y[N+2+32]=y[N+1+64]=y[N+0+96]=Gt(Q,ie,ce),y[N+3+32]=y[N+2+64]=y[N+1+96]=Gt(ie,ce,he),y[N+3+64]=y[N+2+96]=Gt(ce,he,ge),y[N+3+96]=Gt(he,ge,ge)}function ma(y,N){var O=y[N-1+0],M=y[N-1+32],Q=y[N-1+64],ie=y[N-1-32],ce=y[N+0-32],he=y[N+1-32],ge=y[N+2-32],_e=y[N+3-32];y[N+0+0]=y[N+1+64]=ie+ce+1>>1,y[N+1+0]=y[N+2+64]=ce+he+1>>1,y[N+2+0]=y[N+3+64]=he+ge+1>>1,y[N+3+0]=ge+_e+1>>1,y[N+0+96]=Gt(Q,M,O),y[N+0+64]=Gt(M,O,ie),y[N+0+32]=y[N+1+96]=Gt(O,ie,ce),y[N+1+32]=y[N+2+96]=Gt(ie,ce,he),y[N+2+32]=y[N+3+96]=Gt(ce,he,ge),y[N+3+32]=Gt(he,ge,_e)}function Ra(y,N){var O=y[N+0-32],M=y[N+1-32],Q=y[N+2-32],ie=y[N+3-32],ce=y[N+4-32],he=y[N+5-32],ge=y[N+6-32],_e=y[N+7-32];y[N+0+0]=O+M+1>>1,y[N+1+0]=y[N+0+64]=M+Q+1>>1,y[N+2+0]=y[N+1+64]=Q+ie+1>>1,y[N+3+0]=y[N+2+64]=ie+ce+1>>1,y[N+0+32]=Gt(O,M,Q),y[N+1+32]=y[N+0+96]=Gt(M,Q,ie),y[N+2+32]=y[N+1+96]=Gt(Q,ie,ce),y[N+3+32]=y[N+2+96]=Gt(ie,ce,he),y[N+3+64]=Gt(ce,he,ge),y[N+3+96]=Gt(he,ge,_e)}function jl(y,N){var O=y[N-1+0],M=y[N-1+32],Q=y[N-1+64],ie=y[N-1+96];y[N+0+0]=O+M+1>>1,y[N+2+0]=y[N+0+32]=M+Q+1>>1,y[N+2+32]=y[N+0+64]=Q+ie+1>>1,y[N+1+0]=Gt(O,M,Q),y[N+3+0]=y[N+1+32]=Gt(M,Q,ie),y[N+3+32]=y[N+1+64]=Gt(Q,ie,ie),y[N+3+64]=y[N+2+64]=y[N+0+96]=y[N+1+96]=y[N+2+96]=y[N+3+96]=ie}function fa(y,N){var O=y[N-1+0],M=y[N-1+32],Q=y[N-1+64],ie=y[N-1+96],ce=y[N-1-32],he=y[N+0-32],ge=y[N+1-32],_e=y[N+2-32];y[N+0+0]=y[N+2+32]=O+ce+1>>1,y[N+0+32]=y[N+2+64]=M+O+1>>1,y[N+0+64]=y[N+2+96]=Q+M+1>>1,y[N+0+96]=ie+Q+1>>1,y[N+3+0]=Gt(he,ge,_e),y[N+2+0]=Gt(ce,he,ge),y[N+1+0]=y[N+3+32]=Gt(O,ce,he),y[N+1+32]=y[N+3+64]=Gt(M,O,ce),y[N+1+64]=y[N+3+96]=Gt(Q,M,O),y[N+1+96]=Gt(ie,Q,M)}function xs(y,N){var O;for(O=0;8>O;++O)a(y,N+32*O,y,N-32,8)}function wn(y,N){var O;for(O=0;8>O;++O)s(y,N,y[N-1],8),N+=32}function Lo(y,N,O){var M;for(M=0;8>M;++M)s(N,O+32*M,y,8)}function cc(y,N){var O,M=8;for(O=0;8>O;++O)M+=y[N+O-32]+y[N-1+32*O];Lo(M>>4,y,N)}function Jn(y,N){var O,M=4;for(O=0;8>O;++O)M+=y[N+O-32];Lo(M>>3,y,N)}function _i(y,N){var O,M=4;for(O=0;8>O;++O)M+=y[N-1+32*O];Lo(M>>3,y,N)}function _l(y,N){Lo(128,y,N)}function Ni(y,N,O){var M=y[N-O],Q=y[N+0],ie=3*(Q-M)+Bf[1020+y[N-2*O]-y[N+O]],ce=vc[112+(ie+4>>3)];y[N-O]=Mn[255+M+vc[112+(ie+3>>3)]],y[N+0]=Mn[255+Q-ce]}function uc(y,N,O,M){var Q=y[N+0],ie=y[N+O];return ui[255+y[N-2*O]-y[N-O]]>M||ui[255+ie-Q]>M}function dc(y,N,O,M){return 4*ui[255+y[N-O]-y[N+0]]+ui[255+y[N-2*O]-y[N+O]]<=M}function Nl(y,N,O,M,Q){var ie=y[N-3*O],ce=y[N-2*O],he=y[N-O],ge=y[N+0],_e=y[N+O],Fe=y[N+2*O],Ze=y[N+3*O];return 4*ui[255+he-ge]+ui[255+ce-_e]>M?0:ui[255+y[N-4*O]-ie]<=Q&&ui[255+ie-ce]<=Q&&ui[255+ce-he]<=Q&&ui[255+Ze-Fe]<=Q&&ui[255+Fe-_e]<=Q&&ui[255+_e-ge]<=Q}function Mo(y,N,O,M){var Q=2*M+1;for(M=0;16>M;++M)dc(y,N+M,O,Q)&&Ni(y,N+M,O)}function Zi(y,N,O,M){var Q=2*M+1;for(M=0;16>M;++M)dc(y,N+M*O,1,Q)&&Ni(y,N+M*O,1)}function jd(y,N,O,M){var Q;for(Q=3;0<Q;--Q)Mo(y,N+=4*O,O,M)}function Tf(y,N,O,M){var Q;for(Q=3;0<Q;--Q)Zi(y,N+=4,O,M)}function Io(y,N,O,M,Q,ie,ce,he){for(ie=2*ie+1;0<Q--;){if(Nl(y,N,O,ie,ce))if(uc(y,N,O,he))Ni(y,N,O);else{var ge=y,_e=N,Fe=O,Ze=ge[_e-2*Fe],je=ge[_e-Fe],$e=ge[_e+0],Ge=ge[_e+Fe],st=ge[_e+2*Fe],Xe=27*(ct=Bf[1020+3*($e-je)+Bf[1020+Ze-Ge]])+63>>7,dt=18*ct+63>>7,ct=9*ct+63>>7;ge[_e-3*Fe]=Mn[255+ge[_e-3*Fe]+ct],ge[_e-2*Fe]=Mn[255+Ze+dt],ge[_e-Fe]=Mn[255+je+Xe],ge[_e+0]=Mn[255+$e-Xe],ge[_e+Fe]=Mn[255+Ge-dt],ge[_e+2*Fe]=Mn[255+st-ct]}N+=M}}function qo(y,N,O,M,Q,ie,ce,he){for(ie=2*ie+1;0<Q--;){if(Nl(y,N,O,ie,ce))if(uc(y,N,O,he))Ni(y,N,O);else{var ge=y,_e=N,Fe=O,Ze=ge[_e-Fe],je=ge[_e+0],$e=ge[_e+Fe],Ge=vc[112+(4+(st=3*(je-Ze))>>3)],st=vc[112+(st+3>>3)],Xe=Ge+1>>1;ge[_e-2*Fe]=Mn[255+ge[_e-2*Fe]+Xe],ge[_e-Fe]=Mn[255+Ze+st],ge[_e+0]=Mn[255+je-Ge],ge[_e+Fe]=Mn[255+$e-Xe]}N+=M}}function fu(y,N,O,M,Q,ie){Io(y,N,O,1,16,M,Q,ie)}function Of(y,N,O,M,Q,ie){Io(y,N,1,O,16,M,Q,ie)}function fc(y,N,O,M,Q,ie){var ce;for(ce=3;0<ce;--ce)qo(y,N+=4*O,O,1,16,M,Q,ie)}function Df(y,N,O,M,Q,ie){var ce;for(ce=3;0<ce;--ce)qo(y,N+=4,1,O,16,M,Q,ie)}function k(y,N,O,M,Q,ie,ce,he){Io(y,N,Q,1,8,ie,ce,he),Io(O,M,Q,1,8,ie,ce,he)}function J(y,N,O,M,Q,ie,ce,he){Io(y,N,1,Q,8,ie,ce,he),Io(O,M,1,Q,8,ie,ce,he)}function Ne(y,N,O,M,Q,ie,ce,he){qo(y,N+4*Q,Q,1,8,ie,ce,he),qo(O,M+4*Q,Q,1,8,ie,ce,he)}function Me(y,N,O,M,Q,ie,ce,he){qo(y,N+4,1,Q,8,ie,ce,he),qo(O,M+4,1,Q,8,ie,ce,he)}function He(){this.ba=new Te,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new it,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function mt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Nt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function zt(){this.ua=0,this.Wa=new W,this.vb=new W,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new de,this.yc=new z}function tr(){this.xb=this.a=0,this.l=new wl,this.ca=new Te,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new K,this.Pb=0,this.wd=new K,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new zt,this.ab=0,this.gc=l(4,Nt),this.Oc=0}function xr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new wl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Nr(y,N,O,M,Q,ie,ce){for(y=y==null?0:y[N+0],N=0;N<ce;++N)Q[ie+N]=y+O[M+N]&255,y=Q[ie+N]}function Xr(y,N,O,M,Q,ie,ce){var he;if(y==null)Nr(null,null,O,M,Q,ie,ce);else for(he=0;he<ce;++he)Q[ie+he]=y[N+he]+O[M+he]&255}function Ua(y,N,O,M,Q,ie,ce){if(y==null)Nr(null,null,O,M,Q,ie,ce);else{var he,ge=y[N+0],_e=ge,Fe=ge;for(he=0;he<ce;++he)_e=Fe+(ge=y[N+he])-_e,Fe=O[M+he]+(-256&_e?0>_e?0:255:_e)&255,_e=ge,Q[ie+he]=Fe}}function fn(y,N,O,M){var Q=N.width,ie=N.o;if(t(y!=null&&N!=null),0>O||0>=M||O+M>ie)return null;if(!y.Cc){if(y.ga==null){var ce;if(y.ga=new xr,(ce=y.ga==null)||(ce=N.width*N.o,t(y.Gb.length==0),y.Gb=i(ce),y.Uc=0,y.Gb==null?ce=0:(y.mb=y.Gb,y.nb=y.Uc,y.rc=null,ce=1),ce=!ce),!ce){ce=y.ga;var he=y.Fa,ge=y.P,_e=y.qc,Fe=y.mb,Ze=y.nb,je=ge+1,$e=_e-1,Ge=ce.l;if(t(he!=null&&Fe!=null&&N!=null),no[0]=null,no[1]=Nr,no[2]=Xr,no[3]=Ua,ce.ca=Fe,ce.tb=Ze,ce.c=N.width,ce.i=N.height,t(0<ce.c&&0<ce.i),1>=_e)N=0;else if(ce.$a=3&he[ge+0],ce.Z=he[ge+0]>>2&3,ce.Lc=he[ge+0]>>4&3,ge=he[ge+0]>>6&3,0>ce.$a||1<ce.$a||4<=ce.Z||1<ce.Lc||ge)N=0;else if(Ge.put=St,Ge.ac=ir,Ge.bc=Ht,Ge.ma=ce,Ge.width=N.width,Ge.height=N.height,Ge.Da=N.Da,Ge.v=N.v,Ge.va=N.va,Ge.j=N.j,Ge.o=N.o,ce.$a)e:{t(ce.$a==1),N=Wr();t:for(;;){if(N==null){N=0;break e}if(t(ce!=null),ce.mc=N,N.c=ce.c,N.i=ce.i,N.l=ce.l,N.l.ma=ce,N.l.width=ce.c,N.l.height=ce.i,N.a=0,Se(N.m,he,je,$e),!yn(ce.c,ce.i,1,N,null)||(N.ab==1&&N.gc[0].hc==3&&nn(N.s)?(ce.ic=1,he=N.c*N.i,N.Ta=null,N.Ua=0,N.V=i(he),N.Ba=0,N.V==null?(N.a=1,N=0):N=1):(ce.ic=0,N=Yr(N,ce.c)),!N))break t;N=1;break e}ce.mc=null,N=0}else N=$e>=ce.c*ce.i;ce=!N}if(ce)return null;y.ga.Lc!=1?y.Ga=0:M=ie-O}t(y.ga!=null),t(O+M<=ie);e:{if(N=(he=y.ga).c,ie=he.l.o,he.$a==0){if(je=y.rc,$e=y.Vc,Ge=y.Fa,ge=y.P+1+O*N,_e=y.mb,Fe=y.nb+O*N,t(ge<=y.P+y.qc),he.Z!=0)for(t(no[he.Z]!=null),ce=0;ce<M;++ce)no[he.Z](je,$e,Ge,ge,_e,Fe,N),je=_e,$e=Fe,Fe+=N,ge+=N;else for(ce=0;ce<M;++ce)a(_e,Fe,Ge,ge,N),je=_e,$e=Fe,Fe+=N,ge+=N;y.rc=je,y.Vc=$e}else{if(t(he.mc!=null),N=O+M,t((ce=he.mc)!=null),t(N<=ce.i),ce.C>=N)N=1;else if(he.ic||ii(),he.ic){he=ce.V,je=ce.Ba,$e=ce.c;var st=ce.i,Xe=(Ge=1,ge=ce.$/$e,_e=ce.$%$e,Fe=ce.m,Ze=ce.s,ce.$),dt=$e*st,ct=$e*N,At=Ze.wc,bt=Xe<ct?fr(Ze,_e,ge):null;t(Xe<=dt),t(N<=st),t(nn(Ze));t:for(;;){for(;!Fe.h&&Xe<ct;){if(_e&At||(bt=fr(Ze,_e,ge)),t(bt!=null),ke(Fe),256>(st=Ar(bt.G[0],bt.H[0],Fe)))he[je+Xe]=st,++Xe,++_e>=$e&&(_e=0,++ge<=N&&!(ge%16)&&Ba(ce,ge));else{if(!(280>st)){Ge=0;break t}st=cr(st-256,Fe);var Qt,$t=Ar(bt.G[4],bt.H[4],Fe);if(ke(Fe),!(Xe>=($t=Ur($e,$t=cr($t,Fe)))&&dt-Xe>=st)){Ge=0;break t}for(Qt=0;Qt<st;++Qt)he[je+Xe+Qt]=he[je+Xe+Qt-$t];for(Xe+=st,_e+=st;_e>=$e;)_e-=$e,++ge<=N&&!(ge%16)&&Ba(ce,ge);Xe<ct&&_e&At&&(bt=fr(Ze,_e,ge))}t(Fe.h==ee(Fe))}Ba(ce,ge>N?N:ge);break t}!Ge||Fe.h&&Xe<dt?(Ge=0,ce.a=Fe.h?5:3):ce.$=Xe,N=Ge}else N=dn(ce,ce.V,ce.Ba,ce.c,ce.i,N,lr);if(!N){M=0;break e}}O+M>=ie&&(y.Cc=1),M=1}if(!M)return null;if(y.Cc&&((M=y.ga)!=null&&(M.mc=null),y.ga=null,0<y.Ga))return alert("todo:WebPDequantizeLevels"),null}return y.nb+O*Q}function wa(y,N,O,M,Q,ie){for(;0<Q--;){var ce,he=y,ge=N+(O?1:0),_e=y,Fe=N+(O?0:3);for(ce=0;ce<M;++ce){var Ze=_e[Fe+4*ce];Ze!=255&&(Ze*=32897,he[ge+4*ce+0]=he[ge+4*ce+0]*Ze>>23,he[ge+4*ce+1]=he[ge+4*ce+1]*Ze>>23,he[ge+4*ce+2]=he[ge+4*ce+2]*Ze>>23)}N+=ie}}function jn(y,N,O,M,Q){for(;0<M--;){var ie;for(ie=0;ie<O;++ie){var ce=y[N+2*ie+0],he=15&(_e=y[N+2*ie+1]),ge=4369*he,_e=(240&_e|_e>>4)*ge>>16;y[N+2*ie+0]=(240&ce|ce>>4)*ge>>16&240|(15&ce|ce<<4)*ge>>16>>4&15,y[N+2*ie+1]=240&_e|he}N+=Q}}function hn(y,N,O,M,Q,ie,ce,he){var ge,_e,Fe=255;for(_e=0;_e<Q;++_e){for(ge=0;ge<M;++ge){var Ze=y[N+ge];ie[ce+4*ge]=Ze,Fe&=Ze}N+=O,ce+=he}return Fe!=255}function $n(y,N,O,M,Q){var ie;for(ie=0;ie<Q;++ie)O[M+ie]=y[N+ie]>>8}function ii(){bu=wa,Ws=jn,Ys=hn,gc=$n}function Ds(y,N,O){F[y]=function(M,Q,ie,ce,he,ge,_e,Fe,Ze,je,$e,Ge,st,Xe,dt,ct,At){var bt,Qt=At-1>>1,$t=he[ge+0]|_e[Fe+0]<<16,wr=Ze[je+0]|$e[Ge+0]<<16;t(M!=null);var Vt=3*$t+wr+131074>>2;for(N(M[Q+0],255&Vt,Vt>>16,st,Xe),ie!=null&&(Vt=3*wr+$t+131074>>2,N(ie[ce+0],255&Vt,Vt>>16,dt,ct)),bt=1;bt<=Qt;++bt){var Rr=he[ge+bt]|_e[Fe+bt]<<16,mn=Ze[je+bt]|$e[Ge+bt]<<16,vr=$t+Rr+wr+mn+524296,Kt=vr+2*(Rr+wr)>>3;Vt=Kt+$t>>1,$t=(vr=vr+2*($t+mn)>>3)+Rr>>1,N(M[Q+2*bt-1],255&Vt,Vt>>16,st,Xe+(2*bt-1)*O),N(M[Q+2*bt-0],255&$t,$t>>16,st,Xe+(2*bt-0)*O),ie!=null&&(Vt=vr+wr>>1,$t=Kt+mn>>1,N(ie[ce+2*bt-1],255&Vt,Vt>>16,dt,ct+(2*bt-1)*O),N(ie[ce+2*bt+0],255&$t,$t>>16,dt,ct+(2*bt+0)*O)),$t=Rr,wr=mn}1&At||(Vt=3*$t+wr+131074>>2,N(M[Q+At-1],255&Vt,Vt>>16,st,Xe+(At-1)*O),ie!=null&&(Vt=3*wr+$t+131074>>2,N(ie[ce+At-1],255&Vt,Vt>>16,dt,ct+(At-1)*O)))}}function Rf(){In[ts]=Yo,In[wu]=so,In[ro]=Il,In[kd]=zf,In[yc]=Vf,In[Vo]=Nu,In[Uf]=Hf,In[Ed]=so,In[Ll]=zf,In[Ho]=Vf,In[ju]=Nu}function Sl(y){return y&-16384?0>y?0:255:y>>qv}function Si(y,N){return Sl((19077*y>>8)+(26149*N>>8)-14234)}function Al(y,N,O){return Sl((19077*y>>8)-(6419*N>>8)-(13320*O>>8)+8708)}function Cl(y,N){return Sl((19077*y>>8)+(33050*N>>8)-17685)}function kl(y,N,O,M,Q){M[Q+0]=Si(y,O),M[Q+1]=Al(y,N,O),M[Q+2]=Cl(y,N)}function El(y,N,O,M,Q){M[Q+0]=Cl(y,N),M[Q+1]=Al(y,N,O),M[Q+2]=Si(y,O)}function zn(y,N,O,M,Q){var ie=Al(y,N,O);N=ie<<3&224|Cl(y,N)>>3,M[Q+0]=248&Si(y,O)|ie>>5,M[Q+1]=N}function Pl(y,N,O,M,Q){var ie=240&Cl(y,N)|15;M[Q+0]=240&Si(y,O)|Al(y,N,O)>>4,M[Q+1]=ie}function oi(y,N,O,M,Q){M[Q+0]=255,kl(y,N,O,M,Q+1)}function _d(y,N,O,M,Q){El(y,N,O,M,Q),M[Q+3]=255}function Nd(y,N,O,M,Q){kl(y,N,O,M,Q),M[Q+3]=255}function Ga(y,N){return 0>y?0:y>N?N:y}function Ji(y,N,O){F[y]=function(M,Q,ie,ce,he,ge,_e,Fe,Ze){for(var je=Fe+(-2&Ze)*O;Fe!=je;)N(M[Q+0],ie[ce+0],he[ge+0],_e,Fe),N(M[Q+1],ie[ce+0],he[ge+0],_e,Fe+O),Q+=2,++ce,++ge,Fe+=2*O;1&Ze&&N(M[Q+0],ie[ce+0],he[ge+0],_e,Fe)}}function hc(y,N,O){return O==0?y==0?N==0?6:5:N==0?4:0:O}function Tl(y,N,O,M,Q){switch(y>>>30){case 3:zo(N,O,M,Q,0);break;case 2:Ks(N,O,M,Q);break;case 1:Ir(N,O,M,Q)}}function Qn(y,N){var O,M,Q=N.M,ie=N.Nb,ce=y.oc,he=y.pc+40,ge=y.oc,_e=y.pc+584,Fe=y.oc,Ze=y.pc+600;for(O=0;16>O;++O)ce[he+32*O-1]=129;for(O=0;8>O;++O)ge[_e+32*O-1]=129,Fe[Ze+32*O-1]=129;for(0<Q?ce[he-1-32]=ge[_e-1-32]=Fe[Ze-1-32]=129:(s(ce,he-32-1,127,21),s(ge,_e-32-1,127,9),s(Fe,Ze-32-1,127,9)),M=0;M<y.za;++M){var je=N.ya[N.aa+M];if(0<M){for(O=-1;16>O;++O)a(ce,he+32*O-4,ce,he+32*O+12,4);for(O=-1;8>O;++O)a(ge,_e+32*O-4,ge,_e+32*O+4,4),a(Fe,Ze+32*O-4,Fe,Ze+32*O+4,4)}var $e=y.Gd,Ge=y.Hd+M,st=je.ad,Xe=je.Hc;if(0<Q&&(a(ce,he-32,$e[Ge].y,0,16),a(ge,_e-32,$e[Ge].f,0,8),a(Fe,Ze-32,$e[Ge].ea,0,8)),je.Za){var dt=ce,ct=he-32+16;for(0<Q&&(M>=y.za-1?s(dt,ct,$e[Ge].y[15],4):a(dt,ct,$e[Ge+1].y,0,4)),O=0;4>O;O++)dt[ct+128+O]=dt[ct+256+O]=dt[ct+384+O]=dt[ct+0+O];for(O=0;16>O;++O,Xe<<=2)dt=ce,ct=he+_c[O],ys[je.Ob[O]](dt,ct),Tl(Xe,st,16*+O,dt,ct)}else if(dt=hc(M,Q,je.Ob[0]),Wo[dt](ce,he),Xe!=0)for(O=0;16>O;++O,Xe<<=2)Tl(Xe,st,16*+O,ce,he+_c[O]);for(O=je.Gc,dt=hc(M,Q,je.Dd),Zs[dt](ge,_e),Zs[dt](Fe,Ze),Xe=st,dt=ge,ct=_e,255&(je=0|O)&&(170&je?es(Xe,256,dt,ct):oa(Xe,256,dt,ct)),je=Fe,Xe=Ze,255&(O>>=8)&&(170&O?es(st,320,je,Xe):oa(st,320,je,Xe)),Q<y.Ub-1&&(a($e[Ge].y,0,ce,he+480,16),a($e[Ge].f,0,ge,_e+224,8),a($e[Ge].ea,0,Fe,Ze+224,8)),O=8*ie*y.B,$e=y.sa,Ge=y.ta+16*M+16*ie*y.R,st=y.qa,je=y.ra+8*M+O,Xe=y.Ha,dt=y.Ia+8*M+O,O=0;16>O;++O)a($e,Ge+O*y.R,ce,he+32*O,16);for(O=0;8>O;++O)a(st,je+O*y.B,ge,_e+32*O,8),a(Xe,dt+O*y.B,Fe,Ze+32*O,8)}}function mc(y,N,O,M,Q,ie,ce,he,ge){var _e=[0],Fe=[0],Ze=0,je=ge!=null?ge.kd:0,$e=ge??new mt;if(y==null||12>O)return 7;$e.data=y,$e.w=N,$e.ha=O,N=[N],O=[O],$e.gb=[$e.gb];e:{var Ge=N,st=O,Xe=$e.gb;if(t(y!=null),t(st!=null),t(Xe!=null),Xe[0]=0,12<=st[0]&&!r(y,Ge[0],"RIFF")){if(r(y,Ge[0]+8,"WEBP")){Xe=3;break e}var dt=re(y,Ge[0]+4);if(12>dt||4294967286<dt){Xe=3;break e}if(je&&dt>st[0]-8){Xe=7;break e}Xe[0]=dt,Ge[0]+=12,st[0]-=12}Xe=0}if(Xe!=0)return Xe;for(dt=0<$e.gb[0],O=O[0];;){e:{var ct=y;st=N,Xe=O;var At=_e,bt=Fe,Qt=Ge=[0];if((Vt=Ze=[Ze])[0]=0,8>Xe[0])Xe=7;else{if(!r(ct,st[0],"VP8X")){if(re(ct,st[0]+4)!=10){Xe=3;break e}if(18>Xe[0]){Xe=7;break e}var $t=re(ct,st[0]+8),wr=1+te(ct,st[0]+12);if(2147483648<=wr*(ct=1+te(ct,st[0]+15))){Xe=3;break e}Qt!=null&&(Qt[0]=$t),At!=null&&(At[0]=wr),bt!=null&&(bt[0]=ct),st[0]+=18,Xe[0]-=18,Vt[0]=1}Xe=0}}if(Ze=Ze[0],Ge=Ge[0],Xe!=0)return Xe;if(st=!!(2&Ge),!dt&&Ze)return 3;if(ie!=null&&(ie[0]=!!(16&Ge)),ce!=null&&(ce[0]=st),he!=null&&(he[0]=0),ce=_e[0],Ge=Fe[0],Ze&&st&&ge==null){Xe=0;break}if(4>O){Xe=7;break}if(dt&&Ze||!dt&&!Ze&&!r(y,N[0],"ALPH")){O=[O],$e.na=[$e.na],$e.P=[$e.P],$e.Sa=[$e.Sa];e:{$t=y,Xe=N,dt=O;var Vt=$e.gb;At=$e.na,bt=$e.P,Qt=$e.Sa,wr=22,t($t!=null),t(dt!=null),ct=Xe[0];var Rr=dt[0];for(t(At!=null),t(Qt!=null),At[0]=null,bt[0]=null,Qt[0]=0;;){if(Xe[0]=ct,dt[0]=Rr,8>Rr){Xe=7;break e}var mn=re($t,ct+4);if(4294967286<mn){Xe=3;break e}var vr=8+mn+1&-2;if(wr+=vr,0<Vt&&wr>Vt){Xe=3;break e}if(!r($t,ct,"VP8 ")||!r($t,ct,"VP8L")){Xe=0;break e}if(Rr[0]<vr){Xe=7;break e}r($t,ct,"ALPH")||(At[0]=$t,bt[0]=ct+8,Qt[0]=mn),ct+=vr,Rr-=vr}}if(O=O[0],$e.na=$e.na[0],$e.P=$e.P[0],$e.Sa=$e.Sa[0],Xe!=0)break}O=[O],$e.Ja=[$e.Ja],$e.xa=[$e.xa];e:if(Vt=y,Xe=N,dt=O,At=$e.gb[0],bt=$e.Ja,Qt=$e.xa,$t=Xe[0],ct=!r(Vt,$t,"VP8 "),wr=!r(Vt,$t,"VP8L"),t(Vt!=null),t(dt!=null),t(bt!=null),t(Qt!=null),8>dt[0])Xe=7;else{if(ct||wr){if(Vt=re(Vt,$t+4),12<=At&&Vt>At-12){Xe=3;break e}if(je&&Vt>dt[0]-8){Xe=7;break e}bt[0]=Vt,Xe[0]+=8,dt[0]-=8,Qt[0]=wr}else Qt[0]=5<=dt[0]&&Vt[$t+0]==47&&!(Vt[$t+4]>>5),bt[0]=dt[0];Xe=0}if(O=O[0],$e.Ja=$e.Ja[0],$e.xa=$e.xa[0],N=N[0],Xe!=0)break;if(4294967286<$e.Ja)return 3;if(he==null||st||(he[0]=$e.xa?2:1),ce=[ce],Ge=[Ge],$e.xa){if(5>O){Xe=7;break}he=ce,je=Ge,st=ie,y==null||5>O?y=0:5<=O&&y[N+0]==47&&!(y[N+4]>>5)?(dt=[0],Vt=[0],At=[0],Se(bt=new K,y,N,O),ar(bt,dt,Vt,At)?(he!=null&&(he[0]=dt[0]),je!=null&&(je[0]=Vt[0]),st!=null&&(st[0]=At[0]),y=1):y=0):y=0}else{if(10>O){Xe=7;break}he=Ge,y==null||10>O||!ic(y,N+3,O-3)?y=0:(je=y[N+0]|y[N+1]<<8|y[N+2]<<16,st=16383&(y[N+7]<<8|y[N+6]),y=16383&(y[N+9]<<8|y[N+8]),1&je||3<(je>>1&7)||!(je>>4&1)||je>>5>=$e.Ja||!st||!y?y=0:(ce&&(ce[0]=st),he&&(he[0]=y),y=1))}if(!y||(ce=ce[0],Ge=Ge[0],Ze&&(_e[0]!=ce||Fe[0]!=Ge)))return 3;ge!=null&&(ge[0]=$e,ge.offset=N-ge.w,t(4294967286>N-ge.w),t(ge.offset==ge.ha-O));break}return Xe==0||Xe==7&&Ze&&ge==null?(ie!=null&&(ie[0]|=$e.na!=null&&0<$e.na.length),M!=null&&(M[0]=ce),Q!=null&&(Q[0]=Ge),0):Xe}function Ol(y,N,O){var M=N.width,Q=N.height,ie=0,ce=0,he=M,ge=Q;if(N.Da=y!=null&&0<y.Da,N.Da&&(he=y.cd,ge=y.bd,ie=y.v,ce=y.j,11>O||(ie&=-2,ce&=-2),0>ie||0>ce||0>=he||0>=ge||ie+he>M||ce+ge>Q))return 0;if(N.v=ie,N.j=ce,N.va=ie+he,N.o=ce+ge,N.U=he,N.T=ge,N.da=y!=null&&0<y.da,N.da){if(!be(he,ge,O=[y.ib],ie=[y.hb]))return 0;N.ib=O[0],N.hb=ie[0]}return N.ob=y!=null&&y.ob,N.Kb=y==null||!y.Sd,N.da&&(N.ob=N.ib<3*M/4&&N.hb<3*Q/4,N.Kb=0),1}function hu(y){if(y==null)return 2;if(11>y.S){var N=y.f.RGBA;N.fb+=(y.height-1)*N.A,N.A=-N.A}else N=y.f.kb,y=y.height,N.O+=(y-1)*N.fa,N.fa=-N.fa,N.N+=(y-1>>1)*N.Ab,N.Ab=-N.Ab,N.W+=(y-1>>1)*N.Db,N.Db=-N.Db,N.F!=null&&(N.J+=(y-1)*N.lb,N.lb=-N.lb);return 0}function Fo(y,N,O,M){if(M==null||0>=y||0>=N)return 2;if(O!=null){if(O.Da){var Q=O.cd,ie=O.bd,ce=-2&O.v,he=-2&O.j;if(0>ce||0>he||0>=Q||0>=ie||ce+Q>y||he+ie>N)return 2;y=Q,N=ie}if(O.da){if(!be(y,N,Q=[O.ib],ie=[O.hb]))return 2;y=Q[0],N=ie[0]}}M.width=y,M.height=N;e:{var ge=M.width,_e=M.height;if(y=M.S,0>=ge||0>=_e||!(y>=ts&&13>y))y=2;else{if(0>=M.Rd&&M.sd==null){ce=ie=Q=N=0;var Fe=(he=ge*vg[y])*_e;if(11>y||(ie=(_e+1)/2*(N=(ge+1)/2),y==12&&(ce=(Q=ge)*_e)),(_e=i(Fe+2*ie+ce))==null){y=1;break e}M.sd=_e,11>y?((ge=M.f.RGBA).eb=_e,ge.fb=0,ge.A=he,ge.size=Fe):((ge=M.f.kb).y=_e,ge.O=0,ge.fa=he,ge.Fd=Fe,ge.f=_e,ge.N=0+Fe,ge.Ab=N,ge.Cd=ie,ge.ea=_e,ge.W=0+Fe+ie,ge.Db=N,ge.Ed=ie,y==12&&(ge.F=_e,ge.J=0+Fe+2*ie),ge.Tc=ce,ge.lb=Q)}if(N=1,Q=M.S,ie=M.width,ce=M.height,Q>=ts&&13>Q)if(11>Q)y=M.f.RGBA,N&=(he=Math.abs(y.A))*(ce-1)+ie<=y.size,N&=he>=ie*vg[Q],N&=y.eb!=null;else{y=M.f.kb,he=(ie+1)/2,Fe=(ce+1)/2,ge=Math.abs(y.fa),_e=Math.abs(y.Ab);var Ze=Math.abs(y.Db),je=Math.abs(y.lb),$e=je*(ce-1)+ie;N&=ge*(ce-1)+ie<=y.Fd,N&=_e*(Fe-1)+he<=y.Cd,N=(N&=Ze*(Fe-1)+he<=y.Ed)&ge>=ie&_e>=he&Ze>=he,N&=y.y!=null,N&=y.f!=null,N&=y.ea!=null,Q==12&&(N&=je>=ie,N&=$e<=y.Tc,N&=y.F!=null)}else N=0;y=N?0:2}}return y!=0||O!=null&&O.fd&&(y=hu(M)),y}var Bo=64,vs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Rs=24,Uo=32,Qi=8,Dl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Pe("Predictor0","PredictorAdd0"),F.Predictor0=function(){return 4278190080},F.Predictor1=function(y){return y},F.Predictor2=function(y,N,O){return N[O+0]},F.Predictor3=function(y,N,O){return N[O+1]},F.Predictor4=function(y,N,O){return N[O-1]},F.Predictor5=function(y,N,O){return ae(ae(y,N[O+1]),N[O+0])},F.Predictor6=function(y,N,O){return ae(y,N[O-1])},F.Predictor7=function(y,N,O){return ae(y,N[O+0])},F.Predictor8=function(y,N,O){return ae(N[O-1],N[O+0])},F.Predictor9=function(y,N,O){return ae(N[O+0],N[O+1])},F.Predictor10=function(y,N,O){return ae(ae(y,N[O-1]),ae(N[O+0],N[O+1]))},F.Predictor11=function(y,N,O){var M=N[O+0];return 0>=Et(M>>24&255,y>>24&255,(N=N[O-1])>>24&255)+Et(M>>16&255,y>>16&255,N>>16&255)+Et(M>>8&255,y>>8&255,N>>8&255)+Et(255&M,255&y,255&N)?M:y},F.Predictor12=function(y,N,O){var M=N[O+0];return(qe((y>>24&255)+(M>>24&255)-((N=N[O-1])>>24&255))<<24|qe((y>>16&255)+(M>>16&255)-(N>>16&255))<<16|qe((y>>8&255)+(M>>8&255)-(N>>8&255))<<8|qe((255&y)+(255&M)-(255&N)))>>>0},F.Predictor13=function(y,N,O){var M=N[O-1];return(ft((y=ae(y,N[O+0]))>>24&255,M>>24&255)<<24|ft(y>>16&255,M>>16&255)<<16|ft(y>>8&255,M>>8&255)<<8|ft(255&y,255&M))>>>0};var Sd=F.PredictorAdd0;F.PredictorAdd1=Bt,Pe("Predictor2","PredictorAdd2"),Pe("Predictor3","PredictorAdd3"),Pe("Predictor4","PredictorAdd4"),Pe("Predictor5","PredictorAdd5"),Pe("Predictor6","PredictorAdd6"),Pe("Predictor7","PredictorAdd7"),Pe("Predictor8","PredictorAdd8"),Pe("Predictor9","PredictorAdd9"),Pe("Predictor10","PredictorAdd10"),Pe("Predictor11","PredictorAdd11"),Pe("Predictor12","PredictorAdd12"),Pe("Predictor13","PredictorAdd13");var mu=F.PredictorAdd2;Ie("ColorIndexInverseTransform","MapARGB","32b",function(y){return y>>8&255},function(y){return y}),Ie("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(y){return y},function(y){return y>>8&255});var sn,Lf=F.ColorIndexInverseTransform,Ka=F.MapARGB,Ls=F.VP8LColorIndexInverseTransformAlpha,pu=F.MapAlpha,gu=F.VP8LPredictorsAdd=[];gu.length=16,(F.VP8LPredictors=[]).length=16,(F.VP8LPredictorsAdd_C=[]).length=16,(F.VP8LPredictors_C=[]).length=16;var xu,vu,eo,Rl,Gs,$o,li,zo,Ks,es,Ir,oa,Wa,Aa,to,yu,pc,Mf,dg,fg,gm,xm,If,ci,bu,Ws,Ys,gc,qf=i(511),Ad=i(2041),Cd=i(225),Ff=i(767),xc=0,Bf=Ad,vc=Cd,Mn=Ff,ui=qf,ts=0,wu=1,ro=2,kd=3,yc=4,Vo=5,Uf=6,Ed=7,Ll=8,Ho=9,ju=10,$f=[2,3,7],di=[3,3,11],Xs=[280,256,256,256,40],bc=[0,1,1,1,0],Go=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ko=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],wc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],hg=8,Pd=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Td=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],_n=null,Ya=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ea=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ml=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ao=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],vm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],jc=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],mg=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Wo=[],ys=[],Zs=[],pg=1,_u=2,no=[],In=[];Ds("UpsampleRgbLinePair",kl,3),Ds("UpsampleBgrLinePair",El,3),Ds("UpsampleRgbaLinePair",Nd,4),Ds("UpsampleBgraLinePair",_d,4),Ds("UpsampleArgbLinePair",oi,4),Ds("UpsampleRgba4444LinePair",Pl,2),Ds("UpsampleRgb565LinePair",zn,2);var Yo=F.UpsampleRgbLinePair,Il=F.UpsampleBgrLinePair,so=F.UpsampleRgbaLinePair,zf=F.UpsampleBgraLinePair,Vf=F.UpsampleArgbLinePair,Nu=F.UpsampleRgba4444LinePair,Hf=F.UpsampleRgb565LinePair,io=16,Nn=1<<io-1,ql=-227,Gf=482,qv=6,gg=0,Fv=i(256),Sn=i(256),ym=i(256),Od=i(256),Dd=i(Gf-ql),bm=i(Gf-ql);Ji("YuvToRgbRow",kl,3),Ji("YuvToBgrRow",El,3),Ji("YuvToRgbaRow",Nd,4),Ji("YuvToBgraRow",_d,4),Ji("YuvToArgbRow",oi,4),Ji("YuvToRgba4444Row",Pl,2),Ji("YuvToRgb565Row",zn,2);var _c=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Xo=[0,2,8],Bv=[8,7,6,4,4,2,2,2,1,1,1,1],xg=1;this.WebPDecodeRGBA=function(y,N,O,M,Q){var ie=wu,ce=new He,he=new Te;ce.ba=he,he.S=ie,he.width=[he.width],he.height=[he.height];var ge=he.width,_e=he.height,Fe=new Ue;if(Fe==null||y==null)var Ze=2;else t(Fe!=null),Ze=mc(y,N,O,Fe.width,Fe.height,Fe.Pd,Fe.Qd,Fe.format,null);if(Ze!=0?ge=0:(ge!=null&&(ge[0]=Fe.width[0]),_e!=null&&(_e[0]=Fe.height[0]),ge=1),ge){he.width=he.width[0],he.height=he.height[0],M!=null&&(M[0]=he.width),Q!=null&&(Q[0]=he.height);e:{if(M=new wl,(Q=new mt).data=y,Q.w=N,Q.ha=O,Q.kd=1,N=[0],t(Q!=null),((y=mc(Q.data,Q.w,Q.ha,null,null,null,N,null,Q))==0||y==7)&&N[0]&&(y=4),(N=y)==0){if(t(ce!=null),M.data=Q.data,M.w=Q.w+Q.offset,M.ha=Q.ha-Q.offset,M.put=St,M.ac=ir,M.bc=Ht,M.ma=ce,Q.xa){if((y=Wr())==null){ce=1;break e}if(function(je,$e){var Ge=[0],st=[0],Xe=[0];t:for(;;){if(je==null)return 0;if($e==null)return je.a=2,0;if(je.l=$e,je.a=0,Se(je.m,$e.data,$e.w,$e.ha),!ar(je.m,Ge,st,Xe)){je.a=3;break t}if(je.xb=_u,$e.width=Ge[0],$e.height=st[0],!yn(Ge[0],st[0],1,je,null))break t;return 1}return t(je.a!=0),0}(y,M)){if(M=(N=Fo(M.width,M.height,ce.Oa,ce.ba))==0){t:{M=y;r:for(;;){if(M==null){M=0;break t}if(t(M.s.yc!=null),t(M.s.Ya!=null),t(0<M.s.Wb),t((O=M.l)!=null),t((Q=O.ma)!=null),M.xb!=0){if(M.ca=Q.ba,M.tb=Q.tb,t(M.ca!=null),!Ol(Q.Oa,O,kd)){M.a=2;break r}if(!Yr(M,O.width)||O.da)break r;if((O.da||at(M.ca.S))&&ii(),11>M.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),M.ca.f.kb.F!=null&&ii()),M.Pb&&0<M.s.ua&&M.s.vb.X==null&&!$(M.s.vb,M.s.Wa.Xa)){M.a=1;break r}M.xb=0}if(!dn(M,M.V,M.Ba,M.c,M.i,O.o,Fa))break r;Q.Dc=M.Ma,M=1;break t}t(M.a!=0),M=0}M=!M}M&&(N=y.a)}else N=y.a}else{if((y=new uu)==null){ce=1;break e}if(y.Fa=Q.na,y.P=Q.P,y.qc=Q.Sa,du(y,M)){if((N=Fo(M.width,M.height,ce.Oa,ce.ba))==0){if(y.Aa=0,O=ce.Oa,t((Q=y)!=null),O!=null){if(0<(ge=0>(ge=O.Md)?0:100<ge?255:255*ge/100)){for(_e=Fe=0;4>_e;++_e)12>(Ze=Q.pb[_e]).lc&&(Ze.ia=ge*Bv[0>Ze.lc?0:Ze.lc]>>3),Fe|=Ze.ia;Fe&&(alert("todo:VP8InitRandom"),Q.ia=1)}Q.Ga=O.Id,100<Q.Ga?Q.Ga=100:0>Q.Ga&&(Q.Ga=0)}(function(je,$e){if(je==null)return 0;if($e==null)return Vr(je,2,"NULL VP8Io parameter in VP8Decode().");if(!je.cb&&!du(je,$e))return 0;if(t(je.cb),$e.ac==null||$e.ac($e)){$e.ob&&(je.L=0);var Ge=Xo[je.L];if(je.L==2?(je.yb=0,je.zb=0):(je.yb=$e.v-Ge>>4,je.zb=$e.j-Ge>>4,0>je.yb&&(je.yb=0),0>je.zb&&(je.zb=0)),je.Va=$e.o+15+Ge>>4,je.Hb=$e.va+15+Ge>>4,je.Hb>je.za&&(je.Hb=je.za),je.Va>je.Ub&&(je.Va=je.Ub),0<je.L){var st=je.ed;for(Ge=0;4>Ge;++Ge){var Xe;if(je.Qa.Cb){var dt=je.Qa.Lb[Ge];je.Qa.Fb||(dt+=st.Tb)}else dt=st.Tb;for(Xe=0;1>=Xe;++Xe){var ct=je.gd[Ge][Xe],At=dt;if(st.Pc&&(At+=st.vd[0],Xe&&(At+=st.od[0])),0<(At=0>At?0:63<At?63:At)){var bt=At;0<st.wb&&(bt=4<st.wb?bt>>2:bt>>1)>9-st.wb&&(bt=9-st.wb),1>bt&&(bt=1),ct.dd=bt,ct.tc=2*At+bt,ct.ld=40<=At?2:15<=At?1:0}else ct.tc=0;ct.La=Xe}}}Ge=0}else Vr(je,6,"Frame setup failed"),Ge=je.a;if(Ge=Ge==0){if(Ge){je.$c=0,0<je.Aa||(je.Ic=xg);t:{Ge=je.Ic,st=4*(bt=je.za);var Qt=32*bt,$t=bt+1,wr=0<je.L?bt*(0<je.Aa?2:1):0,Vt=(je.Aa==2?2:1)*bt;if((ct=st+832+(Xe=3*(16*Ge+Xo[je.L])/2*Qt)+(dt=je.Fa!=null&&0<je.Fa.length?je.Kc.c*je.Kc.i:0))!=ct)Ge=0;else{if(ct>je.Vb){if(je.Vb=0,je.Ec=i(ct),je.Fc=0,je.Ec==null){Ge=Vr(je,1,"no memory during frame initialization.");break t}je.Vb=ct}ct=je.Ec,At=je.Fc,je.Ac=ct,je.Bc=At,At+=st,je.Gd=l(Qt,yl),je.Hd=0,je.rb=l($t+1,gs),je.sb=1,je.wa=wr?l(wr,Un):null,je.Y=0,je.D.Nb=0,je.D.wa=je.wa,je.D.Y=je.Y,0<je.Aa&&(je.D.Y+=bt),t(!0),je.oc=ct,je.pc=At,At+=832,je.ya=l(Vt,vl),je.aa=0,je.D.ya=je.ya,je.D.aa=je.aa,je.Aa==2&&(je.D.aa+=bt),je.R=16*bt,je.B=8*bt,bt=(Qt=Xo[je.L])*je.R,Qt=Qt/2*je.B,je.sa=ct,je.ta=At+bt,je.qa=je.sa,je.ra=je.ta+16*Ge*je.R+Qt,je.Ha=je.qa,je.Ia=je.ra+8*Ge*je.B+Qt,je.$c=0,At+=Xe,je.mb=dt?ct:null,je.nb=dt?At:null,t(At+dt<=je.Fc+je.Vb),Xi(je),s(je.Ac,je.Bc,0,st),Ge=1}}if(Ge){if($e.ka=0,$e.y=je.sa,$e.O=je.ta,$e.f=je.qa,$e.N=je.ra,$e.ea=je.Ha,$e.Vd=je.Ia,$e.fa=je.R,$e.Rc=je.B,$e.F=null,$e.J=0,!xc){for(Ge=-255;255>=Ge;++Ge)qf[255+Ge]=0>Ge?-Ge:Ge;for(Ge=-1020;1020>=Ge;++Ge)Ad[1020+Ge]=-128>Ge?-128:127<Ge?127:Ge;for(Ge=-112;112>=Ge;++Ge)Cd[112+Ge]=-16>Ge?-16:15<Ge?15:Ge;for(Ge=-255;510>=Ge;++Ge)Ff[255+Ge]=0>Ge?0:255<Ge?255:Ge;xc=1}li=X,zo=oc,es=ji,Ir=Hs,oa=lc,Ks=si,Wa=fu,Aa=Of,to=k,yu=J,pc=fc,Mf=Df,dg=Ne,fg=Me,gm=Mo,xm=Zi,If=jd,ci=Tf,ys[0]=Da,ys[1]=lt,ys[2]=Gr,ys[3]=Qr,ys[4]=Er,ys[5]=ma,ys[6]=Ut,ys[7]=Ra,ys[8]=fa,ys[9]=jl,Wo[0]=gt,Wo[1]=ot,Wo[2]=ut,Wo[3]=Lt,Wo[4]=ur,Wo[5]=dr,Wo[6]=Hr,Zs[0]=cc,Zs[1]=yt,Zs[2]=xs,Zs[3]=wn,Zs[4]=_i,Zs[5]=Jn,Zs[6]=_l,Ge=1}else Ge=0}Ge&&(Ge=function(Rr,mn){for(Rr.M=0;Rr.M<Rr.Va;++Rr.M){var vr,Kt=Rr.Jc[Rr.M&Rr.Xb],Mt=Rr.m,$a=Rr;for(vr=0;vr<$a.za;++vr){var jr=Mt,kr=$a,Xt=kr.Ac,Sr=kr.Bc+4*vr,$r=kr.zc,Ca=kr.ya[kr.aa+vr];if(kr.Qa.Bb?Ca.$b=De(jr,kr.Pa.jb[0])?2+De(jr,kr.Pa.jb[2]):De(jr,kr.Pa.jb[1]):Ca.$b=0,kr.kc&&(Ca.Ad=De(jr,kr.Bd)),Ca.Za=!De(jr,145)+0,Ca.Za){var on=Ca.Ob,ln=0;for(kr=0;4>kr;++kr){var Xa,Dr=$r[0+kr];for(Xa=0;4>Xa;++Xa){Dr=vm[Xt[Sr+Xa]][Dr];for(var zr=Ml[De(jr,Dr[0])];0<zr;)zr=Ml[2*zr+De(jr,Dr[zr])];Dr=-zr,Xt[Sr+Xa]=Dr}a(on,ln,Xt,Sr,4),ln+=4,$r[0+kr]=Dr}}else Dr=De(jr,156)?De(jr,128)?1:3:De(jr,163)?2:0,Ca.Ob[0]=Dr,s(Xt,Sr,Dr,4),s($r,0,Dr,4);Ca.Dd=De(jr,142)?De(jr,114)?De(jr,183)?1:3:2:0}if($a.m.Ka)return Vr(Rr,7,"Premature end-of-partition0 encountered.");for(;Rr.ja<Rr.za;++Rr.ja){if($a=Kt,jr=(Mt=Rr).rb[Mt.sb-1],Xt=Mt.rb[Mt.sb+Mt.ja],vr=Mt.ya[Mt.aa+Mt.ja],Sr=Mt.kc?vr.Ad:0)jr.la=Xt.la=0,vr.Za||(jr.Na=Xt.Na=0),vr.Hc=0,vr.Gc=0,vr.ia=0;else{var Za,hr;if(jr=Xt,Xt=$a,Sr=Mt.Pa.Xc,$r=Mt.ya[Mt.aa+Mt.ja],Ca=Mt.pb[$r.$b],kr=$r.ad,on=0,ln=Mt.rb[Mt.sb-1],Dr=Xa=0,s(kr,on,0,384),$r.Za)var An=0,Js=Sr[3];else{zr=i(16);var Ja=jr.Na+ln.Na;if(Ja=_n(Xt,Sr[1],Ja,Ca.Eb,0,zr,0),jr.Na=ln.Na=(0<Ja)+0,1<Ja)li(zr,0,kr,on);else{var bs=zr[0]+3>>3;for(zr=0;256>zr;zr+=16)kr[on+zr]=bs}An=1,Js=Sr[0]}var pa=15&jr.la,cn=15&ln.la;for(zr=0;4>zr;++zr){var ws=1&cn;for(bs=hr=0;4>bs;++bs)pa=pa>>1|(ws=(Ja=_n(Xt,Js,Ja=ws+(1&pa),Ca.Sc,An,kr,on))>An)<<7,hr=hr<<2|(3<Ja?3:1<Ja?2:kr[on+0]!=0),on+=16;pa>>=4,cn=cn>>1|ws<<7,Xa=(Xa<<8|hr)>>>0}for(Js=pa,An=cn>>4,Za=0;4>Za;Za+=2){for(hr=0,pa=jr.la>>4+Za,cn=ln.la>>4+Za,zr=0;2>zr;++zr){for(ws=1&cn,bs=0;2>bs;++bs)Ja=ws+(1&pa),pa=pa>>1|(ws=0<(Ja=_n(Xt,Sr[2],Ja,Ca.Qc,0,kr,on)))<<3,hr=hr<<2|(3<Ja?3:1<Ja?2:kr[on+0]!=0),on+=16;pa>>=2,cn=cn>>1|ws<<5}Dr|=hr<<4*Za,Js|=pa<<4<<Za,An|=(240&cn)<<Za}jr.la=Js,ln.la=An,$r.Hc=Xa,$r.Gc=Dr,$r.ia=43690&Dr?0:Ca.ia,Sr=!(Xa|Dr)}if(0<Mt.L&&(Mt.wa[Mt.Y+Mt.ja]=Mt.gd[vr.$b][vr.Za],Mt.wa[Mt.Y+Mt.ja].La|=!Sr),$a.Ka)return Vr(Rr,7,"Premature end-of-file encountered.")}if(Xi(Rr),Mt=mn,$a=1,vr=(Kt=Rr).D,jr=0<Kt.L&&Kt.M>=Kt.zb&&Kt.M<=Kt.Va,Kt.Aa==0)t:{if(vr.M=Kt.M,vr.uc=jr,Qn(Kt,vr),$a=1,vr=(hr=Kt.D).Nb,jr=(Dr=Xo[Kt.L])*Kt.R,Xt=Dr/2*Kt.B,zr=16*vr*Kt.R,bs=8*vr*Kt.B,Sr=Kt.sa,$r=Kt.ta-jr+zr,Ca=Kt.qa,kr=Kt.ra-Xt+bs,on=Kt.Ha,ln=Kt.Ia-Xt+bs,cn=(pa=hr.M)==0,Xa=pa>=Kt.Va-1,Kt.Aa==2&&Qn(Kt,hr),hr.uc)for(ws=(Ja=Kt).D.M,t(Ja.D.uc),hr=Ja.yb;hr<Ja.Hb;++hr){An=hr,Js=ws;var Vn=(ja=(kn=Ja).D).Nb;Za=kn.R;var ja=ja.wa[ja.Y+An],Zr=kn.sa,rs=kn.ta+16*Vn*Za+16*An,Hn=ja.dd,la=ja.tc;if(la!=0)if(t(3<=la),kn.L==1)0<An&&xm(Zr,rs,Za,la+4),ja.La&&ci(Zr,rs,Za,la),0<Js&&gm(Zr,rs,Za,la+4),ja.La&&If(Zr,rs,Za,la);else{var js=kn.B,Cn=kn.qa,oo=kn.ra+8*Vn*js+8*An,Ai=kn.Ha,kn=kn.Ia+8*Vn*js+8*An;Vn=ja.ld,0<An&&(Aa(Zr,rs,Za,la+4,Hn,Vn),yu(Cn,oo,Ai,kn,js,la+4,Hn,Vn)),ja.La&&(Mf(Zr,rs,Za,la,Hn,Vn),fg(Cn,oo,Ai,kn,js,la,Hn,Vn)),0<Js&&(Wa(Zr,rs,Za,la+4,Hn,Vn),to(Cn,oo,Ai,kn,js,la+4,Hn,Vn)),ja.La&&(pc(Zr,rs,Za,la,Hn,Vn),dg(Cn,oo,Ai,kn,js,la,Hn,Vn))}}if(Kt.ia&&alert("todo:DitherRow"),Mt.put!=null){if(hr=16*pa,pa=16*(pa+1),cn?(Mt.y=Kt.sa,Mt.O=Kt.ta+zr,Mt.f=Kt.qa,Mt.N=Kt.ra+bs,Mt.ea=Kt.Ha,Mt.W=Kt.Ia+bs):(hr-=Dr,Mt.y=Sr,Mt.O=$r,Mt.f=Ca,Mt.N=kr,Mt.ea=on,Mt.W=ln),Xa||(pa-=Dr),pa>Mt.o&&(pa=Mt.o),Mt.F=null,Mt.J=null,Kt.Fa!=null&&0<Kt.Fa.length&&hr<pa&&(Mt.J=fn(Kt,Mt,hr,pa-hr),Mt.F=Kt.mb,Mt.F==null&&Mt.F.length==0)){$a=Vr(Kt,3,"Could not decode alpha data.");break t}hr<Mt.j&&(Dr=Mt.j-hr,hr=Mt.j,t(!(1&Dr)),Mt.O+=Kt.R*Dr,Mt.N+=Kt.B*(Dr>>1),Mt.W+=Kt.B*(Dr>>1),Mt.F!=null&&(Mt.J+=Mt.width*Dr)),hr<pa&&(Mt.O+=Mt.v,Mt.N+=Mt.v>>1,Mt.W+=Mt.v>>1,Mt.F!=null&&(Mt.J+=Mt.v),Mt.ka=hr-Mt.j,Mt.U=Mt.va-Mt.v,Mt.T=pa-hr,$a=Mt.put(Mt))}vr+1!=Kt.Ic||Xa||(a(Kt.sa,Kt.ta-jr,Sr,$r+16*Kt.R,jr),a(Kt.qa,Kt.ra-Xt,Ca,kr+8*Kt.B,Xt),a(Kt.Ha,Kt.Ia-Xt,on,ln+8*Kt.B,Xt))}if(!$a)return Vr(Rr,6,"Output aborted.")}return 1}(je,$e)),$e.bc!=null&&$e.bc($e),Ge&=1}return Ge?(je.cb=0,Ge):0})(y,M)||(N=y.a)}}else N=y.a}N==0&&ce.Oa!=null&&ce.Oa.fd&&(N=hu(ce.ba))}ce=N}ie=ce!=0?null:11>ie?he.f.RGBA.eb:he.f.kb.y}else ie=null;return ie};var vg=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(F,pe){for(var L="",q=0;q<4;q++)L+=String.fromCharCode(F[pe++]);return L}function m(F,pe){return F[pe+0]|F[pe+1]<<8}function g(F,pe){return(F[pe+0]|F[pe+1]<<8|F[pe+2]<<16)>>>0}function v(F,pe){return(F[pe+0]|F[pe+1]<<8|F[pe+2]<<16|F[pe+3]<<24)>>>0}new d;var x=[0],j=[0],b=[],S=new d,A=e,E=function(F,pe){var L={},q=0,z=!1,V=0,de=0;if(L.frames=[],!function(P,K){for(var le=0;le<4;le++)if(P[K+le]!="RIFF".charCodeAt(le))return!0;return!1}(F,pe)){for(v(F,pe+=4),pe+=8;pe<F.length;){var se=f(F,pe),fe=v(F,pe+=4);pe+=4;var oe=fe+(1&fe);switch(se){case"VP8 ":case"VP8L":L.frames[q]===void 0&&(L.frames[q]={}),(ye=L.frames[q]).src_off=z?de:pe-8,ye.src_size=V+fe+8,q++,z&&(z=!1,V=0,de=0);break;case"VP8X":(ye=L.header={}).feature_flags=F[pe];var Se=pe+4;ye.canvas_width=1+g(F,Se),Se+=3,ye.canvas_height=1+g(F,Se),Se+=3;break;case"ALPH":z=!0,V=oe+8,de=pe-8;break;case"ANIM":(ye=L.header).bgcolor=v(F,pe),Se=pe+4,ye.loop_count=m(F,Se),Se+=2;break;case"ANMF":var Y,ye;(ye=L.frames[q]={}).offset_x=2*g(F,pe),pe+=3,ye.offset_y=2*g(F,pe),pe+=3,ye.width=1+g(F,pe),pe+=3,ye.height=1+g(F,pe),pe+=3,ye.duration=g(F,pe),pe+=3,Y=F[pe++],ye.dispose=1&Y,ye.blend=Y>>1&1}se!="ANMF"&&(pe+=oe)}return L}}(A,0);E.response=A,E.rgbaoutput=!0,E.dataurl=!1;var T=E.header?E.header:null,D=E.frames?E.frames:null;if(T){T.loop_counter=T.loop_count,x=[T.canvas_height],j=[T.canvas_width];for(var R=0;R<D.length&&D[R].blend!=0;R++);}var B=D[0],U=S.WebPDecodeRGBA(A,B.src_off,B.src_size,j,x);B.rgba=U,B.imgwidth=j[0],B.imgheight=x[0];for(var I=0;I<j[0]*x[0]*4;I++)b[I]=U[I];return this.width=j,this.height=x,this.data=b,this}(function(e){var t,r,a,s,i,l,u,d,f,m=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new d,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new l,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new l,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new g(this),t=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,l=this.internal.Point,u=this.internal.Rectangle,d=this.internal.Matrix,f=new m}]);var g=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=P;Object.defineProperty(this,"pdf",{get:function(){return K}});var le=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return le},set:function(re){le=!!re}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(re){ee=!!re}});var me=0;Object.defineProperty(this,"posX",{get:function(){return me},set:function(re){isNaN(re)||(me=re)}});var ke=0;Object.defineProperty(this,"posY",{get:function(){return ke},set:function(re){isNaN(re)||(ke=re)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(re){var $;typeof re=="number"?$=[re,re,re,re]:(($=new Array(4))[0]=re[0],$[1]=re.length>=2?re[1]:$[0],$[2]=re.length>=3?re[2]:$[0],$[3]=re.length>=4?re[3]:$[1]),f.margin=$}});var Ae=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ae},set:function(re){Ae=re}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(re){xe=re}});var De=[];Object.defineProperty(this,"pageBreaks",{get:function(){return De},set:function(re){De=re}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(re){re instanceof m&&(f=re)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(re){f.path=re}});var ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return ve},set:function(re){ve=re}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(re){var $;$=v(re),this.ctx.fillStyle=$.style,this.ctx.isFillTransparent=$.a===0,this.ctx.fillOpacity=$.a,this.pdf.setFillColor($.r,$.g,$.b,{a:$.a}),this.pdf.setTextColor($.r,$.g,$.b,{a:$.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(re){var $=v(re);this.ctx.strokeStyle=$.style,this.ctx.isStrokeTransparent=$.a===0,this.ctx.strokeOpacity=$.a,$.a===0?this.pdf.setDrawColor(255,255,255):($.a,this.pdf.setDrawColor($.r,$.g,$.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(re){["butt","round","square"].indexOf(re)!==-1&&(this.ctx.lineCap=re,this.pdf.setLineCap(re))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(re){isNaN(re)||(this.ctx.lineWidth=re,this.pdf.setLineWidth(re))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(re){["bevel","round","miter"].indexOf(re)!==-1&&(this.ctx.lineJoin=re,this.pdf.setLineJoin(re))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(re){isNaN(re)||(this.ctx.miterLimit=re,this.pdf.setMiterLimit(re))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(re){this.ctx.textBaseline=re}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(re){["right","end","center","left","start"].indexOf(re)!==-1&&(this.ctx.textAlign=re)}});var Z=null,te=null;Object.defineProperty(this,"fontFaces",{get:function(){return te},set:function(re){Z=null,te=re}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(re){var $;if(this.ctx.font=re,($=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(re))!==null){var ne=$[1];$[2];var W=$[3],be=$[4];$[5];var Ce=$[6],ze=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(be)[2];be=Math.floor(ze==="px"?parseFloat(be)*this.pdf.internal.scaleFactor:ze==="em"?parseFloat(be)*this.pdf.getFontSize():parseFloat(be)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(be);var Pe=function(Dt){var Ie,_t,jt=[],Pt=Dt.trim();if(Pt==="")return i2;if(Pt in HC)return[HC[Pt]];for(;Pt!=="";){switch(_t=null,Ie=(Pt=KC(Pt)).charAt(0)){case'"':case"'":_t=Kre(Pt.substring(1),Ie);break;default:_t=Wre(Pt)}if(_t===null||(jt.push(_t[0]),(Pt=KC(_t[1]))!==""&&Pt.charAt(0)!==","))return i2;Pt=Pt.replace(/^,/,"")}return jt}(Ce);if(this.fontFaces){var we=function(Dt,Ie){if(Z===null){var _t=function(jt){var Pt=[];return Object.keys(jt).forEach(function(Rt){jt[Rt].forEach(function(rr){var Ke=null;switch(rr){case"bold":Ke={family:Rt,weight:"bold"};break;case"italic":Ke={family:Rt,style:"italic"};break;case"bolditalic":Ke={family:Rt,weight:"bold",style:"italic"};break;case"":case"normal":Ke={family:Rt}}Ke!==null&&(Ke.ref={name:Rt,style:rr},Pt.push(Ke))})}),Pt}(Dt.getFontList());Z=function(jt){for(var Pt={},Rt=0;Rt<jt.length;++Rt){var rr=s2(jt[Rt]),Ke=rr.family,Re=rr.stretch,at=rr.style,rt=rr.weight;Pt[Ke]=Pt[Ke]||{},Pt[Ke][Re]=Pt[Ke][Re]||{},Pt[Ke][Re][at]=Pt[Ke][Re][at]||{},Pt[Ke][Re][at][rt]=rr}return Pt}(_t.concat(Ie))}return Z}(this.pdf,this.fontFaces),ae=Pe.map(function(Dt){return{family:Dt,stretch:"normal",weight:W,style:ne}}),qe=function(Dt,Ie,_t){for(var jt=(_t=_t||{}).defaultFontFamily||"times",Pt=Object.assign({},Gre,_t.genericFontFamilies||{}),Rt=null,rr=null,Ke=0;Ke<Ie.length;++Ke)if(Pt[(Rt=s2(Ie[Ke])).family]&&(Rt.family=Pt[Rt.family]),Dt.hasOwnProperty(Rt.family)){rr=Dt[Rt.family];break}if(!(rr=rr||Dt[jt]))throw new Error("Could not find a font-family for the rule '"+GC(Rt)+"' and default family '"+jt+"'.");if(rr=function(Re,at){if(at[Re])return at[Re];var rt=Mw[Re],Tt=rt<=Mw.normal?-1:1,Te=VC(at,hD,rt,Tt);if(!Te)throw new Error("Could not find a matching font-stretch value for "+Re);return Te}(Rt.stretch,rr),rr=function(Re,at){if(at[Re])return at[Re];for(var rt=fD[Re],Tt=0;Tt<rt.length;++Tt)if(at[rt[Tt]])return at[rt[Tt]];throw new Error("Could not find a matching font-style for "+Re)}(Rt.style,rr),!(rr=function(Re,at){if(at[Re])return at[Re];if(Re===400&&at[500])return at[500];if(Re===500&&at[400])return at[400];var rt=Hre[Re],Tt=VC(at,mD,rt,Re<400?-1:1);if(!Tt)throw new Error("Could not find a matching font-weight for value "+Re);return Tt}(Rt.weight,rr)))throw new Error("Failed to resolve a font for the rule '"+GC(Rt)+"'.");return rr}(we,ae);this.pdf.setFont(qe.ref.name,qe.ref.style)}else{var ft="";(W==="bold"||parseInt(W,10)>=700||ne==="bold")&&(ft="bold"),ne==="italic"&&(ft+="italic"),ft.length===0&&(ft="normal");for(var Et="",Bt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},vt=0;vt<Pe.length;vt++){if(this.pdf.internal.getFont(Pe[vt],ft,{noFallback:!0,disableWarning:!0})!==void 0){Et=Pe[vt];break}if(ft==="bolditalic"&&this.pdf.internal.getFont(Pe[vt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Et=Pe[vt],ft="bold";else if(this.pdf.internal.getFont(Pe[vt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Et=Pe[vt],ft="normal";break}}if(Et===""){for(var ht=0;ht<Pe.length;ht++)if(Bt[Pe[ht]]){Et=Bt[Pe[ht]];break}}Et=Et===""?"Times":Et,this.pdf.setFont(Et,ft)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(re){this.ctx.globalCompositeOperation=re}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(re){this.ctx.globalAlpha=re}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(re){this.ctx.lineDashOffset=re,ye.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(re){this.ctx.lineDash=re,ye.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(re){this.ctx.ignoreClearRect=!!re}})};g.prototype.setLineDash=function(P){this.lineDash=P},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){D.call(this,"fill",!1)},g.prototype.stroke=function(){D.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(P,K){if(isNaN(P)||isNaN(K))throw Ea.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var le=this.ctx.transform.applyToPoint(new l(P,K));this.path.push({type:"mt",x:le.x,y:le.y}),this.ctx.lastPoint=new l(P,K)},g.prototype.closePath=function(){var P=new l(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&ba(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){P=new l(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(P.x,P.y)},g.prototype.lineTo=function(P,K){if(isNaN(P)||isNaN(K))throw Ea.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var le=this.ctx.transform.applyToPoint(new l(P,K));this.path.push({type:"lt",x:le.x,y:le.y}),this.ctx.lastPoint=new l(le.x,le.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),D.call(this,null,!0)},g.prototype.quadraticCurveTo=function(P,K,le,ee){if(isNaN(le)||isNaN(ee)||isNaN(P)||isNaN(K))throw Ea.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var me=this.ctx.transform.applyToPoint(new l(le,ee)),ke=this.ctx.transform.applyToPoint(new l(P,K));this.path.push({type:"qct",x1:ke.x,y1:ke.y,x:me.x,y:me.y}),this.ctx.lastPoint=new l(me.x,me.y)},g.prototype.bezierCurveTo=function(P,K,le,ee,me,ke){if(isNaN(me)||isNaN(ke)||isNaN(P)||isNaN(K)||isNaN(le)||isNaN(ee))throw Ea.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ae=this.ctx.transform.applyToPoint(new l(me,ke)),xe=this.ctx.transform.applyToPoint(new l(P,K)),De=this.ctx.transform.applyToPoint(new l(le,ee));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:De.x,y2:De.y,x:Ae.x,y:Ae.y}),this.ctx.lastPoint=new l(Ae.x,Ae.y)},g.prototype.arc=function(P,K,le,ee,me,ke){if(isNaN(P)||isNaN(K)||isNaN(le)||isNaN(ee)||isNaN(me))throw Ea.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ke=!!ke,!this.ctx.transform.isIdentity){var Ae=this.ctx.transform.applyToPoint(new l(P,K));P=Ae.x,K=Ae.y;var xe=this.ctx.transform.applyToPoint(new l(0,le)),De=this.ctx.transform.applyToPoint(new l(0,0));le=Math.sqrt(Math.pow(xe.x-De.x,2)+Math.pow(xe.y-De.y,2))}Math.abs(me-ee)>=2*Math.PI&&(ee=0,me=2*Math.PI),this.path.push({type:"arc",x:P,y:K,radius:le,startAngle:ee,endAngle:me,counterclockwise:ke})},g.prototype.arcTo=function(P,K,le,ee,me){throw new Error("arcTo not implemented.")},g.prototype.rect=function(P,K,le,ee){if(isNaN(P)||isNaN(K)||isNaN(le)||isNaN(ee))throw Ea.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,K),this.lineTo(P+le,K),this.lineTo(P+le,K+ee),this.lineTo(P,K+ee),this.lineTo(P,K),this.lineTo(P+le,K),this.lineTo(P,K)},g.prototype.fillRect=function(P,K,le,ee){if(isNaN(P)||isNaN(K)||isNaN(le)||isNaN(ee))throw Ea.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var me={};this.lineCap!=="butt"&&(me.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(me.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,K,le,ee),this.fill(),me.hasOwnProperty("lineCap")&&(this.lineCap=me.lineCap),me.hasOwnProperty("lineJoin")&&(this.lineJoin=me.lineJoin)}},g.prototype.strokeRect=function(P,K,le,ee){if(isNaN(P)||isNaN(K)||isNaN(le)||isNaN(ee))throw Ea.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");j.call(this)||(this.beginPath(),this.rect(P,K,le,ee),this.stroke())},g.prototype.clearRect=function(P,K,le,ee){if(isNaN(P)||isNaN(K)||isNaN(le)||isNaN(ee))throw Ea.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,K,le,ee))},g.prototype.save=function(P){P=typeof P!="boolean"||P;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,le=0;le<this.pdf.internal.getNumberOfPages();le++)this.pdf.setPage(le+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},g.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,le=0;le<this.pdf.internal.getNumberOfPages();le++)this.pdf.setPage(le+1),this.pdf.internal.out("Q");this.pdf.setPage(K),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(P){var K,le,ee,me;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))K=0,le=0,ee=0,me=0;else{var ke=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(ke!==null)K=parseInt(ke[1]),le=parseInt(ke[2]),ee=parseInt(ke[3]),me=1;else if((ke=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)K=parseInt(ke[1]),le=parseInt(ke[2]),ee=parseInt(ke[3]),me=parseFloat(ke[4]);else{if(me=1,typeof P=="string"&&P.charAt(0)!=="#"){var Ae=new sD(P);P=Ae.ok?Ae.toHex():"#000000"}P.length===4?(K=P.substring(1,2),K+=K,le=P.substring(2,3),le+=le,ee=P.substring(3,4),ee+=ee):(K=P.substring(1,3),le=P.substring(3,5),ee=P.substring(5,7)),K=parseInt(K,16),le=parseInt(le,16),ee=parseInt(ee,16)}}return{r:K,g:le,b:ee,a:me,style:P}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},j=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(P,K,le,ee){if(isNaN(K)||isNaN(le)||typeof P!="string")throw Ea.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!x.call(this)){var me=oe(this.ctx.transform.rotation),ke=this.ctx.transform.scaleX;q.call(this,{text:P,x:K,y:le,scale:ke,angle:me,align:this.textAlign,maxWidth:ee})}},g.prototype.strokeText=function(P,K,le,ee){if(isNaN(K)||isNaN(le)||typeof P!="string")throw Ea.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!j.call(this)){ee=isNaN(ee)?void 0:ee;var me=oe(this.ctx.transform.rotation),ke=this.ctx.transform.scaleX;q.call(this,{text:P,x:K,y:le,scale:ke,renderingMode:"stroke",angle:me,align:this.textAlign,maxWidth:ee})}},g.prototype.measureText=function(P){if(typeof P!="string")throw Ea.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,le=this.pdf.internal.scaleFactor,ee=K.internal.getFontSize(),me=K.getStringUnitWidth(P)*ee/K.internal.scaleFactor;return new function(ke){var Ae=(ke=ke||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ae}}),this}({width:me*=Math.round(96*le/72*1e4)/1e4})},g.prototype.scale=function(P,K){if(isNaN(P)||isNaN(K))throw Ea.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var le=new d(P,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(le)},g.prototype.rotate=function(P){if(isNaN(P))throw Ea.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new d(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},g.prototype.translate=function(P,K){if(isNaN(P)||isNaN(K))throw Ea.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var le=new d(1,0,0,1,P,K);this.ctx.transform=this.ctx.transform.multiply(le)},g.prototype.transform=function(P,K,le,ee,me,ke){if(isNaN(P)||isNaN(K)||isNaN(le)||isNaN(ee)||isNaN(me)||isNaN(ke))throw Ea.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ae=new d(P,K,le,ee,me,ke);this.ctx.transform=this.ctx.transform.multiply(Ae)},g.prototype.setTransform=function(P,K,le,ee,me,ke){P=isNaN(P)?1:P,K=isNaN(K)?0:K,le=isNaN(le)?0:le,ee=isNaN(ee)?1:ee,me=isNaN(me)?0:me,ke=isNaN(ke)?0:ke,this.ctx.transform=new d(P,K,le,ee,me,ke)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(P,K,le,ee,me,ke,Ae,xe,De){var ve=this.pdf.getImageProperties(P),Z=1,te=1,re=1,$=1;ee!==void 0&&xe!==void 0&&(re=xe/ee,$=De/me,Z=ve.width/ee*xe/ee,te=ve.height/me*De/me),ke===void 0&&(ke=K,Ae=le,K=0,le=0),ee!==void 0&&xe===void 0&&(xe=ee,De=me),ee===void 0&&xe===void 0&&(xe=ve.width,De=ve.height);for(var ne,W=this.ctx.transform.decompose(),be=oe(W.rotate.shx),Ce=new d,ze=(Ce=(Ce=(Ce=Ce.multiply(W.translate)).multiply(W.skew)).multiply(W.scale)).applyToRectangle(new u(ke-K*re,Ae-le*$,ee*Z,me*te)),Pe=S.call(this,ze),we=[],ae=0;ae<Pe.length;ae+=1)we.indexOf(Pe[ae])===-1&&we.push(Pe[ae]);if(T(we),this.autoPaging)for(var qe=we[0],ft=we[we.length-1],Et=qe;Et<ft+1;Et++){this.pdf.setPage(Et);var Bt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],vt=Et===1?this.posY+this.margin[0]:this.margin[0],ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Dt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ie=Et===1?0:ht+(Et-2)*Dt;if(this.ctx.clip_path.length!==0){var _t=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(ne,this.posX+this.margin[3],-Ie+vt+this.ctx.prevPageLastElemOffset),R.call(this,"fill",!0),this.path=_t}var jt=JSON.parse(JSON.stringify(ze));jt=E([jt],this.posX+this.margin[3],-Ie+vt+this.ctx.prevPageLastElemOffset)[0];var Pt=(Et>qe||Et<ft)&&b.call(this);Pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Bt,Dt,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",jt.x,jt.y,jt.w,jt.h,null,null,be),Pt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",ze.x,ze.y,ze.w,ze.h,null,null,be)};var S=function(P,K,le){var ee=[];K=K||this.pdf.internal.pageSize.width,le=le||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var me=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":ee.push(Math.floor((P.y+me)/le)+1);break;case"arc":ee.push(Math.floor((P.y+me-P.radius)/le)+1),ee.push(Math.floor((P.y+me+P.radius)/le)+1);break;case"qct":var ke=Se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);ee.push(Math.floor((ke.y+me)/le)+1),ee.push(Math.floor((ke.y+ke.h+me)/le)+1);break;case"bct":var Ae=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);ee.push(Math.floor((Ae.y+me)/le)+1),ee.push(Math.floor((Ae.y+Ae.h+me)/le)+1);break;case"rect":ee.push(Math.floor((P.y+me)/le)+1),ee.push(Math.floor((P.y+P.h+me)/le)+1)}for(var xe=0;xe<ee.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<ee[xe];)A.call(this);return ee},A=function(){var P=this.fillStyle,K=this.strokeStyle,le=this.font,ee=this.lineCap,me=this.lineWidth,ke=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=K,this.font=le,this.lineCap=ee,this.lineWidth=me,this.lineJoin=ke},E=function(P,K,le){for(var ee=0;ee<P.length;ee++)switch(P[ee].type){case"bct":P[ee].x2+=K,P[ee].y2+=le;case"qct":P[ee].x1+=K,P[ee].y1+=le;default:P[ee].x+=K,P[ee].y+=le}return P},T=function(P){return P.sort(function(K,le){return K-le})},D=function(P,K){for(var le,ee,me=this.fillStyle,ke=this.strokeStyle,Ae=this.lineCap,xe=this.lineWidth,De=Math.abs(xe*this.ctx.transform.scaleX),ve=this.lineJoin,Z=JSON.parse(JSON.stringify(this.path)),te=JSON.parse(JSON.stringify(this.path)),re=[],$=0;$<te.length;$++)if(te[$].x!==void 0)for(var ne=S.call(this,te[$]),W=0;W<ne.length;W+=1)re.indexOf(ne[W])===-1&&re.push(ne[W]);for(var be=0;be<re.length;be++)for(;this.pdf.internal.getNumberOfPages()<re[be];)A.call(this);if(T(re),this.autoPaging)for(var Ce=re[0],ze=re[re.length-1],Pe=Ce;Pe<ze+1;Pe++){this.pdf.setPage(Pe),this.fillStyle=me,this.strokeStyle=ke,this.lineCap=Ae,this.lineWidth=De,this.lineJoin=ve;var we=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ae=Pe===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Et=Pe===1?0:qe+(Pe-2)*ft;if(this.ctx.clip_path.length!==0){var Bt=this.path;le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(le,this.posX+this.margin[3],-Et+ae+this.ctx.prevPageLastElemOffset),R.call(this,P,!0),this.path=Bt}if(ee=JSON.parse(JSON.stringify(Z)),this.path=E(ee,this.posX+this.margin[3],-Et+ae+this.ctx.prevPageLastElemOffset),K===!1||Pe===0){var vt=(Pe>Ce||Pe<ze)&&b.call(this);vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],we,ft,null).clip().discardPath()),R.call(this,P,K),vt&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}else this.lineWidth=De,R.call(this,P,K),this.lineWidth=xe;this.path=Z},R=function(P,K){if((P!=="stroke"||K||!j.call(this))&&(P==="stroke"||K||!x.call(this))){for(var le,ee,me=[],ke=this.path,Ae=0;Ae<ke.length;Ae++){var xe=ke[Ae];switch(xe.type){case"begin":me.push({begin:!0});break;case"close":me.push({close:!0});break;case"mt":me.push({start:xe,deltas:[],abs:[]});break;case"lt":var De=me.length;if(ke[Ae-1]&&!isNaN(ke[Ae-1].x)&&(le=[xe.x-ke[Ae-1].x,xe.y-ke[Ae-1].y],De>0)){for(;De>=0;De--)if(me[De-1].close!==!0&&me[De-1].begin!==!0){me[De-1].deltas.push(le),me[De-1].abs.push(xe);break}}break;case"bct":le=[xe.x1-ke[Ae-1].x,xe.y1-ke[Ae-1].y,xe.x2-ke[Ae-1].x,xe.y2-ke[Ae-1].y,xe.x-ke[Ae-1].x,xe.y-ke[Ae-1].y],me[me.length-1].deltas.push(le);break;case"qct":var ve=ke[Ae-1].x+2/3*(xe.x1-ke[Ae-1].x),Z=ke[Ae-1].y+2/3*(xe.y1-ke[Ae-1].y),te=xe.x+2/3*(xe.x1-xe.x),re=xe.y+2/3*(xe.y1-xe.y),$=xe.x,ne=xe.y;le=[ve-ke[Ae-1].x,Z-ke[Ae-1].y,te-ke[Ae-1].x,re-ke[Ae-1].y,$-ke[Ae-1].x,ne-ke[Ae-1].y],me[me.length-1].deltas.push(le);break;case"arc":me.push({deltas:[],abs:[],arc:!0}),Array.isArray(me[me.length-1].abs)&&me[me.length-1].abs.push(xe)}}ee=K?null:P==="stroke"?"stroke":"fill";for(var W=!1,be=0;be<me.length;be++)if(me[be].arc)for(var Ce=me[be].abs,ze=0;ze<Ce.length;ze++){var Pe=Ce[ze];Pe.type==="arc"?I.call(this,Pe.x,Pe.y,Pe.radius,Pe.startAngle,Pe.endAngle,Pe.counterclockwise,void 0,K,!W):z.call(this,Pe.x,Pe.y),W=!0}else if(me[be].close===!0)this.pdf.internal.out("h"),W=!1;else if(me[be].begin!==!0){var we=me[be].start.x,ae=me[be].start.y;V.call(this,me[be].deltas,we,ae),W=!0}ee&&F.call(this,ee),K&&pe.call(this)}},B=function(P){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,le=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-le;case"top":return P+K-le;case"hanging":return P+K-2*le;case"middle":return P+K/2-le;default:return P}},U=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(K,le){this.colorStops.push([K,le])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var I=function(P,K,le,ee,me,ke,Ae,xe,De){for(var ve=se.call(this,le,ee,me,ke),Z=0;Z<ve.length;Z++){var te=ve[Z];Z===0&&(De?L.call(this,te.x1+P,te.y1+K):z.call(this,te.x1+P,te.y1+K)),de.call(this,P,K,te.x2,te.y2,te.x3,te.y3,te.x4,te.y4)}xe?pe.call(this):F.call(this,Ae)},F=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},pe=function(){this.pdf.clip(),this.pdf.discardPath()},L=function(P,K){this.pdf.internal.out(r(P)+" "+a(K)+" m")},q=function(P){var K;switch(P.align){case"right":case"end":K="right";break;case"center":K="center";break;default:K="left"}var le=this.pdf.getTextDimensions(P.text),ee=B.call(this,P.y),me=U.call(this,ee)-le.h,ke=this.ctx.transform.applyToPoint(new l(P.x,ee)),Ae=this.ctx.transform.decompose(),xe=new d;xe=(xe=(xe=xe.multiply(Ae.translate)).multiply(Ae.skew)).multiply(Ae.scale);for(var De,ve,Z,te=this.ctx.transform.applyToRectangle(new u(P.x,ee,le.w,le.h)),re=xe.applyToRectangle(new u(P.x,me,le.w,le.h)),$=S.call(this,re),ne=[],W=0;W<$.length;W+=1)ne.indexOf($[W])===-1&&ne.push($[W]);if(T(ne),this.autoPaging)for(var be=ne[0],Ce=ne[ne.length-1],ze=be;ze<Ce+1;ze++){this.pdf.setPage(ze);var Pe=ze===1?this.posY+this.margin[0]:this.margin[0],we=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ae=this.pdf.internal.pageSize.height-this.margin[2],qe=ae-this.margin[0],ft=this.pdf.internal.pageSize.width-this.margin[1],Et=ft-this.margin[3],Bt=ze===1?0:we+(ze-2)*qe;if(this.ctx.clip_path.length!==0){var vt=this.path;De=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(De,this.posX+this.margin[3],-1*Bt+Pe),R.call(this,"fill",!0),this.path=vt}var ht=E([JSON.parse(JSON.stringify(re))],this.posX+this.margin[3],-Bt+Pe+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ve*P.scale),Z=this.lineWidth,this.lineWidth=Z*P.scale);var Dt=this.autoPaging!=="text";if(Dt||ht.y+ht.h<=ae){if(Dt||ht.y>=Pe&&ht.x<=ft){var Ie=Dt?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||ft-ht.x)[0],_t=E([JSON.parse(JSON.stringify(te))],this.posX+this.margin[3],-Bt+Pe+this.ctx.prevPageLastElemOffset)[0],jt=Dt&&(ze>be||ze<Ce)&&b.call(this);jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Et,qe,null).clip().discardPath()),this.pdf.text(Ie,_t.x,_t.y,{angle:P.angle,align:K,renderingMode:P.renderingMode}),jt&&this.pdf.restoreGraphicsState()}}else ht.y<ae&&(this.ctx.prevPageLastElemOffset+=ae-ht.y);P.scale>=.01&&(this.pdf.setFontSize(ve),this.lineWidth=Z)}else P.scale>=.01&&(ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ve*P.scale),Z=this.lineWidth,this.lineWidth=Z*P.scale),this.pdf.text(P.text,ke.x+this.posX,ke.y+this.posY,{angle:P.angle,align:K,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(ve),this.lineWidth=Z)},z=function(P,K,le,ee){le=le||0,ee=ee||0,this.pdf.internal.out(r(P+le)+" "+a(K+ee)+" l")},V=function(P,K,le){return this.pdf.lines(P,K,le,null,null)},de=function(P,K,le,ee,me,ke,Ae,xe){this.pdf.internal.out([t(s(le+P)),t(i(ee+K)),t(s(me+P)),t(i(ke+K)),t(s(Ae+P)),t(i(xe+K)),"c"].join(" "))},se=function(P,K,le,ee){for(var me=2*Math.PI,ke=Math.PI/2;K>le;)K-=me;var Ae=Math.abs(le-K);Ae<me&&ee&&(Ae=me-Ae);for(var xe=[],De=ee?-1:1,ve=K;Ae>1e-5;){var Z=ve+De*Math.min(Ae,ke);xe.push(fe.call(this,P,ve,Z)),Ae-=Math.abs(Z-ve),ve=Z}return xe},fe=function(P,K,le){var ee=(le-K)/2,me=P*Math.cos(ee),ke=P*Math.sin(ee),Ae=me,xe=-ke,De=Ae*Ae+xe*xe,ve=De+Ae*me+xe*ke,Z=4/3*(Math.sqrt(2*De*ve)-ve)/(Ae*ke-xe*me),te=Ae-Z*xe,re=xe+Z*Ae,$=te,ne=-re,W=ee+K,be=Math.cos(W),Ce=Math.sin(W);return{x1:P*Math.cos(K),y1:P*Math.sin(K),x2:te*be-re*Ce,y2:te*Ce+re*be,x3:$*be-ne*Ce,y3:$*Ce+ne*be,x4:P*Math.cos(le),y4:P*Math.sin(le)}},oe=function(P){return 180*P/Math.PI},Se=function(P,K,le,ee,me,ke){var Ae=P+.5*(le-P),xe=K+.5*(ee-K),De=me+.5*(le-me),ve=ke+.5*(ee-ke),Z=Math.min(P,me,Ae,De),te=Math.max(P,me,Ae,De),re=Math.min(K,ke,xe,ve),$=Math.max(K,ke,xe,ve);return new u(Z,re,te-Z,$-re)},Y=function(P,K,le,ee,me,ke,Ae,xe){var De,ve,Z,te,re,$,ne,W,be,Ce,ze,Pe,we,ae,qe=le-P,ft=ee-K,Et=me-le,Bt=ke-ee,vt=Ae-me,ht=xe-ke;for(ve=0;ve<41;ve++)be=(ne=(Z=P+(De=ve/40)*qe)+De*((re=le+De*Et)-Z))+De*(re+De*(me+De*vt-re)-ne),Ce=(W=(te=K+De*ft)+De*(($=ee+De*Bt)-te))+De*($+De*(ke+De*ht-$)-W),ve==0?(ze=be,Pe=Ce,we=be,ae=Ce):(ze=Math.min(ze,be),Pe=Math.min(Pe,Ce),we=Math.max(we,be),ae=Math.max(ae,Ce));return new u(Math.round(ze),Math.round(Pe),Math.round(we-ze),Math.round(ae-Pe))},ye=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,K,le=(P=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:K}));this.prevLineDash!==le&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=le)}}})(nr.API),function(e){var t=function(l){var u,d,f,m,g,v,x,j,b,S;for(d=[],f=0,m=(l+=u="\0\0\0\0".slice(l.length%4||4)).length;m>f;f+=4)(g=(l.charCodeAt(f)<<24)+(l.charCodeAt(f+1)<<16)+(l.charCodeAt(f+2)<<8)+l.charCodeAt(f+3))!==0?(v=(g=((g=((g=((g=(g-(S=g%85))/85)-(b=g%85))/85)-(j=g%85))/85)-(x=g%85))/85)%85,d.push(v+33,x+33,j+33,b+33,S+33)):d.push(122);return function(A,E){for(var T=E;T>0;T--)A.pop()}(d,u.length),String.fromCharCode.apply(String,d)+"~>"},r=function(l){var u,d,f,m,g,v=String,x="length",j=255,b="charCodeAt",S="slice",A="replace";for(l[S](-2),l=l[S](0,-2)[A](/\s/g,"")[A]("z","!!!!!"),f=[],m=0,g=(l+=u="uuuuu"[S](l[x]%5||5))[x];g>m;m+=5)d=52200625*(l[b](m)-33)+614125*(l[b](m+1)-33)+7225*(l[b](m+2)-33)+85*(l[b](m+3)-33)+(l[b](m+4)-33),f.push(j&d>>24,j&d>>16,j&d>>8,j&d);return function(E,T){for(var D=T;D>0;D--)E.pop()}(f,u[x]),v.fromCharCode.apply(v,f)},a=function(l){return l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(l){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),u.test(l)===!1)return"";for(var d="",f=0;f<l.length;f+=2)d+=String.fromCharCode("0x"+(l[f]+l[f+1]));return d},i=function(l){for(var u=new Uint8Array(l.length),d=l.length;d--;)u[d]=l.charCodeAt(d);return(u=Ew(u)).reduce(function(f,m){return f+String.fromCharCode(m)},"")};e.processDataByFilters=function(l,u){var d=0,f=l||"",m=[];for(typeof(u=u||[])=="string"&&(u=[u]),d=0;d<u.length;d+=1)switch(u[d]){case"ASCII85Decode":case"/ASCII85Decode":f=r(f),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=t(f),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=s(f),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=a(f),m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=i(f),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[d]+'" is not implemented')}return{data:f,reverseChain:m.reverse().join(" ")}}}(nr.API),function(e){e.loadFile=function(t,r,a){return function(s,i,l){i=i!==!1,l=typeof l=="function"?l:function(){};var u=void 0;try{u=function(d,f,m){var g=new XMLHttpRequest,v=0,x=function(j){var b=j.length,S=[],A=String.fromCharCode;for(v=0;v<b;v+=1)S.push(A(255&j.charCodeAt(v)));return S.join("")};if(g.open("GET",d,!f),g.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(g.onload=function(){g.status===200?m(x(this.responseText)):m(void 0)}),g.send(null),f&&g.status===200)return x(g.responseText)}(s,i,l)}catch{}return u}(t,r,a)},e.loadImageFile=e.loadFile}(nr.API),function(e){function t(){return(_r.html2canvas?Promise.resolve(_r.html2canvas):So(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function r(){return(_r.DOMPurify?Promise.resolve(_r.DOMPurify):So(()=>import("./purify.es-aGzT-_H7.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var a=function(u){var d=ba(u);return d==="undefined"?"undefined":d==="string"||u instanceof String?"string":d==="number"||u instanceof Number?"number":d==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":d==="object"?"object":"unknown"},s=function(u,d){var f=document.createElement(u);for(var m in d.className&&(f.className=d.className),d.innerHTML&&d.dompurify&&(f.innerHTML=d.dompurify.sanitize(d.innerHTML)),d.style)f.style[m]=d.style[m];return f},i=function u(d,f){for(var m=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),g=d.firstChild;g;g=g.nextSibling)f!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||m.appendChild(u(g,f));return d.nodeType===1&&(d.nodeName==="CANVAS"?(m.width=d.width,m.height=d.height,m.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(m.value=d.value),m.addEventListener("load",function(){m.scrollTop=d.scrollTop,m.scrollLeft=d.scrollLeft},!0)),m},l=function u(d){var f=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),m=u.convert(Promise.resolve(),f);return(m=m.setProgress(1,u,1,[u])).set(d)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(u,d){return u.__proto__=d||l.prototype,u},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(u,d){return this.then(function(){switch(d=d||function(f){switch(a(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(u),d){case"string":return this.then(r).then(function(f){return this.set({src:s("div",{innerHTML:u,dompurify:f})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},l.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},d=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);d.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(d),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(t).then(function(d){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,d(this.prop.container,f)}).then(function(d){(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(t).then(function(d){var f=this.opt.jsPDF,m=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=m,m)for(var x=0;x<m.length;++x){var j=m[x],b=j.src.find(function(S){return S.format==="truetype"});b&&f.addFont(b.url,j.ref.name,j.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,f.context2d.save(!0),d(this.prop.container,v)}).then(function(d){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(u,d,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(u,d):this.outputPdf(u,d)},l.prototype.outputPdf=function(u,d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,d)})},l.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},l.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(u){if(a(u)!=="object")return this;var d=Object.keys(u||{}).map(function(f){if(f in l.template.prop)return function(){this.prop[f]=u[f]};switch(f){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[f]=u[f]}}},this);return this.then(function(){return this.thenList(d)})},l.prototype.get=function(u,d){return this.then(function(){var f=u in l.template.prop?this.prop[u]:this.opt[u];return d?d(f):f})},l.prototype.setMargin=function(u){return this.then(function(){switch(a(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},l.prototype.setPageSize=function(u){function d(f,m){return Math.floor(f*m/72*96)}return this.then(function(){(u=u||nr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:d(u.inner.width,u.k),height:d(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},l.prototype.setProgress=function(u,d,f,m){return u!=null&&(this.progress.val=u),d!=null&&(this.progress.state=d),f!=null&&(this.progress.n=f),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(u,d,f,m){return this.setProgress(u?this.progress.val+u:null,d||null,f?this.progress.n+f:null,m?this.progress.stack.concat(m):null)},l.prototype.then=function(u,d){var f=this;return this.thenCore(u,d,function(m,g){return f.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(v){return f.updateProgress(null,m),v}).then(m,g).then(function(v){return f.updateProgress(1),v})})},l.prototype.thenCore=function(u,d,f){f=f||Promise.prototype.then;var m=this;u&&(u=u.bind(m)),d&&(d=d.bind(m));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?m:l.convert(Object.assign({},m),Promise.prototype),v=f.call(g,u,d);return l.convert(v,m.__proto__)},l.prototype.thenExternal=function(u,d){return Promise.prototype.then.call(this,u,d)},l.prototype.thenList=function(u){var d=this;return u.forEach(function(f){d=d.thenCore(f)}),d},l.prototype.catch=function(u){u&&(u=u.bind(this));var d=Promise.prototype.catch.call(this,u);return l.convert(d,this)},l.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},l.prototype.error=function(u){return this.then(function(){throw new Error(u)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,nr.getPageSize=function(u,d,f){if(ba(u)==="object"){var m=u;u=m.orientation,d=m.unit||d,f=m.format||f}d=d||"mm",f=f||"a4",u=(""+(u||"P")).toLowerCase();var g,v=(""+f).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(d){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+d}var j,b=0,S=0;if(x.hasOwnProperty(v))b=x[v][1]/g,S=x[v][0]/g;else try{b=f[1],S=f[0]}catch{throw new Error("Invalid format: "+f)}if(u==="p"||u==="portrait")u="p",S>b&&(j=S,S=b,b=j);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",b>S&&(j=S,S=b,b=j)}return{width:S,height:b,unit:d,k:g,orientation:u}},e.html=function(u,d){(d=d||{}).callback=d.callback||function(){},d.html2canvas=d.html2canvas||{},d.html2canvas.canvas=d.html2canvas.canvas||this.canvas,d.jsPDF=d.jsPDF||this,d.fontFaces=d.fontFaces?d.fontFaces.map(s2):null;var f=new l(d);return d.worker?f:f.from(u).doCallback()}}(nr.API),nr.API.addJS=function(e){return YC=e,this.internal.events.subscribe("postPutResources",function(){V0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(V0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),WC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+YC+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){V0!==void 0&&WC!==void 0&&this.internal.out("/Names <</JavaScript "+V0+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var l=s[i],u=a.exec(l);if(u!=null){var d=u[1];r.internal.newObjectDeferredBegin(d,!1)}r.internal.write(l)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,m=[];for(i=0;i<f;i++){var g=r.internal.newObject();m.push(g);var v=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var x=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<m.length;i++)r.internal.write("(page_"+(i+1)+")"+m[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+x+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,s,i){var l={title:s,options:i,children:[]};return a==null&&(a=this.root),a.children.push(l),l},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var s=0;s<a.children.length;s++)this.genIds_r(a.children[s])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<a.children.length;i++){var l=a.children[i];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(a)),i>0&&this.line("/Prev "+this.makeRef(a.children[i-1])),i<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[i+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var u=this.count=this.count_r({count:0},l);if(u>0&&this.line("/Count "+u),l.options&&l.options.pageNumber){var d=r.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var f=0;f<a.children.length;f++)this.renderItems(a.children[f])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,s){for(var i=0;i<s.children.length;i++)a.count++,this.count_r(a,s.children[i]);return a.count}}])}(nr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,a,s,i,l,u){var d,f=this.decode.DCT_DECODE,m=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=l||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,d=function(g){for(var v,x=256*g.charCodeAt(4)+g.charCodeAt(5),j=g.length,b={width:0,height:0,numcomponents:1},S=4;S<j;S+=2){if(S+=x,t.indexOf(g.charCodeAt(S+1))!==-1){v=256*g.charCodeAt(S+5)+g.charCodeAt(S+6),b={width:256*g.charCodeAt(S+7)+g.charCodeAt(S+8),height:v,numcomponents:g.charCodeAt(S+9)};break}x=256*g.charCodeAt(S+2)+g.charCodeAt(S+3)}return b}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),d.numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}m={data:r,width:d.width,height:d.height,colorSpace:u,bitsPerComponent:8,filter:f,index:a,alias:s}}return m}}(nr.API),nr.API.processPNG=function(e,t,r,a){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var s,i=Tre(e,{checkCrc:!0}),l=i.width,u=i.height,d=i.channels,f=i.palette,m=i.depth;s=f&&d===1?function(I){for(var F=I.width,pe=I.height,L=I.data,q=I.palette,z=I.depth,V=!1,de=[],se=[],fe=void 0,oe=!1,Se=0,Y=0;Y<q.length;Y++){var ye=Q6(q[Y],4),P=ye[0],K=ye[1],le=ye[2],ee=ye[3];de.push(P,K,le),ee!=null&&(ee===0?(Se++,se.length<1&&se.push(Y)):ee<255&&(oe=!0))}if(oe||Se>1){V=!0,se=void 0;var me=F*pe;fe=new Uint8Array(me);for(var ke=new DataView(L.buffer),Ae=0;Ae<me;Ae++){var xe=o2(ke,Ae,z),De=Q6(q[xe],4)[3];fe[Ae]=De}}else Se===0&&(se=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:V?8:void 0,colorBytes:L,alphaBytes:fe,needSMask:V,palette:de,mask:se}}(i):d===2||d===4?function(I){for(var F=I.data,pe=I.width,L=I.height,q=I.channels,z=I.depth,V=q===2?"DeviceGray":"DeviceRGB",de=q-1,se=pe*L,fe=de,oe=se*fe,Se=1*se,Y=Math.ceil(oe*z/8),ye=Math.ceil(Se*z/8),P=new Uint8Array(Y),K=new Uint8Array(ye),le=new DataView(F.buffer),ee=new DataView(P.buffer),me=new DataView(K.buffer),ke=!1,Ae=0;Ae<se;Ae++){for(var xe=Ae*q,De=0;De<fe;De++)nk(ee,o2(le,xe+De,z),Ae*fe+De,z);var ve=o2(le,xe+fe,z);ve<(1<<z)-1&&(ke=!0),nk(me,ve,1*Ae,z)}return{colorSpace:V,colorsPerPixel:de,sMaskBitsPerComponent:ke?z:void 0,colorBytes:P,alphaBytes:K,needSMask:ke}}(i):function(I){var F=I.data,pe=I.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:pe,colorsPerPixel:pe==="DeviceGray"?1:3,colorBytes:F instanceof Uint16Array?function(L){for(var q=L.length,z=new Uint8Array(2*q),V=new DataView(z.buffer,z.byteOffset,z.byteLength),de=0;de<q;de++)V.setUint16(2*de,L[de],!1);return z}(F):F,needSMask:!1}}(i);var g,v,x,j=s,b=j.colorSpace,S=j.colorsPerPixel,A=j.sMaskBitsPerComponent,E=j.colorBytes,T=j.alphaBytes,D=j.needSMask,R=j.palette,B=j.mask,U=null;return a!==nr.API.image_compression.NONE&&typeof Ew=="function"?(U=function(I){var F;switch(I){case nr.API.image_compression.FAST:F=11;break;case nr.API.image_compression.MEDIUM:F=13;break;case nr.API.image_compression.SLOW:F=14;break;default:F=12}return F}(a),g=this.decode.FLATE_DECODE,v="/Predictor ".concat(U," /Colors ").concat(S," /BitsPerComponent ").concat(m," /Columns ").concat(l),e=QC(E,Math.ceil(l*S*m/8),S,m,a),D&&(x=QC(T,Math.ceil(l*A/8),1,A,a))):(g=void 0,v=void 0,e=E,D&&(x=T)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(x&&this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),{alias:r,data:e,index:t,filter:g,decodeParameters:v,transparency:B,palette:R,sMask:x,predictor:U,width:l,height:u,bitsPerComponent:m,sMaskBitsPerComponent:A,colorSpace:b}}},function(e){e.processGIF89A=function(t,r,a,s){var i=new Jre(t),l=i.width,u=i.height,d=[];i.decodeAndBlitFrameRGBA(0,d);var f={data:d,width:l,height:u},m=new l2(100).encode(f,100);return e.processJPEG.call(this,m,r,a,s)},e.processGIF87A=e.processGIF89A}(nr.API),al.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:a,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},al.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Ea.log("bit decode error:"+r)}},al.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),l=a*this.width*4+8*s*4,u=0;u<8&&8*s+u<this.width;u++){var d=this.palette[i>>7-u&1];this.data[l+4*u]=d.blue,this.data[l+4*u+1]=d.green,this.data[l+4*u+2]=d.red,this.data[l+4*u+3]=255}r!==0&&(this.pos+=4-r)}},al.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),l=a*this.width*4+2*s*4,u=i>>4,d=15&i,f=this.palette[u];if(this.data[l]=f.blue,this.data[l+1]=f.green,this.data[l+2]=f.red,this.data[l+3]=255,2*s+1>=this.width)break;f=this.palette[d],this.data[l+4]=f.blue,this.data[l+4+1]=f.green,this.data[l+4+2]=f.red,this.data[l+4+3]=255}t!==0&&(this.pos+=4-t)}},al.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*a;if(s<this.palette.length){var l=this.palette[s];this.data[i]=l.red,this.data[i+1]=l.green,this.data[i+2]=l.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},al.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(i&t)/t*255|0,u=(i>>5&t)/t*255|0,d=(i>>10&t)/t*255|0,f=i>>15?255:0,m=a*this.width*4+4*s;this.data[m]=d,this.data[m+1]=u,this.data[m+2]=l,this.data[m+3]=f}this.pos+=e}},al.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var s=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(l&t)/t*255|0,d=(l>>5&r)/r*255|0,f=(l>>11)/t*255|0,m=s*this.width*4+4*i;this.data[m]=f,this.data[m+1]=d,this.data[m+2]=u,this.data[m+3]=255}this.pos+=e}},al.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=a,this.data[l+3]=255}this.pos+=this.width%4}},al.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*r;this.data[u]=i,this.data[u+1]=s,this.data[u+2]=a,this.data[u+3]=l}},al.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,a,s){var i=new al(t,!1),l=i.width,u=i.height,d={data:i.getData(),width:l,height:u},f=new l2(100).encode(d,100);return e.processJPEG.call(this,f,r,a,s)}}(nr.API),ik.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,a,s){var i=new ik(t),l=i.width,u=i.height,d={data:i.getData(),width:l,height:u},f=new l2(100).encode(d,100);return e.processJPEG.call(this,f,r,a,s)}}(nr.API),nr.API.processRGBA=function(e,t,r){for(var a=e.data,s=a.length,i=new Uint8Array(s/4*3),l=new Uint8Array(s/4),u=0,d=0,f=0;f<s;f+=4){var m=a[f],g=a[f+1],v=a[f+2],x=a[f+3];i[u++]=m,i[u++]=g,i[u++]=v,l[d++]=x}var j=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:j,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},nr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ch=nr.API,H0=Ch.getCharWidthsArray=function(e,t){var r,a,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),l=t.charSpace||this.internal.getCharSpace(),u=t.widths?t.widths:s.metadata.Unicode.widths,d=u.fof?u.fof:1,f=t.kerning?t.kerning:s.metadata.Unicode.kerning,m=f.fof?f.fof:1,g=t.doKerning!==!1,v=0,x=e.length,j=0,b=u[0]||d,S=[];for(r=0;r<x;r++)a=e.charCodeAt(r),typeof s.metadata.widthOfString=="function"?S.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(a))+l*(1e3/i)||0)/1e3):(v=g&&ba(f[a])==="object"&&!isNaN(parseInt(f[a][j],10))?f[a][j]/m:0,S.push((u[a]||b)/d+v)),j=a;return S},XC=Ch.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return Ch.processArabic&&(e=Ch.processArabic(e)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(e,r,s)/r:H0.apply(this,arguments).reduce(function(i,l){return i+l},0)},ZC=function(e,t,r,a){for(var s=[],i=0,l=e.length,u=0;i!==l&&u+t[i]<r;)u+=t[i],i++;s.push(e.slice(0,i));var d=i;for(u=0;i!==l;)u+t[i]>a&&(s.push(e.slice(d,i)),u=0,d=i),u+=t[i],i++;return d!==i&&s.push(e.slice(d,i)),s},JC=function(e,t,r){r||(r={});var a,s,i,l,u,d,f,m=[],g=[m],v=r.textIndent||0,x=0,j=0,b=e.split(" "),S=H0.apply(this,[" ",r])[0];if(d=r.lineIndent===-1?b[0].length+2:r.lineIndent||0){var A=Array(d).join(" "),E=[];b.map(function(D){(D=D.split(/\s*\n/)).length>1?E=E.concat(D.map(function(R,B){return(B&&R.length?`
`:"")+R})):E.push(D[0])}),b=E,d=XC.apply(this,[A,r])}for(i=0,l=b.length;i<l;i++){var T=0;if(a=b[i],d&&a[0]==`
`&&(a=a.substr(1),T=1),v+x+(j=(s=H0.apply(this,[a,r])).reduce(function(D,R){return D+R},0))>t||T){if(j>t){for(u=ZC.apply(this,[a,s,t-(v+x),t]),m.push(u.shift()),m=[u.pop()];u.length;)g.push([u.shift()]);j=s.slice(a.length-(m[0]?m[0].length:0)).reduce(function(D,R){return D+R},0)}else m=[a];g.push(m),v=j+d,x=S}else m.push(a),v+=x+j,x=S}return f=d?function(D,R){return(R?A:"")+D.join(" ")}:function(D){return D.join(" ")},g.map(f)},Ch.splitTextToSize=function(e,t,r){var a,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var g=this.internal.getFont(m.fontName,m.fontStyle),v="Unicode";return g.metadata[v]?{widths:g.metadata[v].widths||{0:1},kerning:g.metadata[v].kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var l=1*this.internal.scaleFactor*t/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var u,d,f=[];for(u=0,d=a.length;u<d;u++)f=f.concat(JC.apply(this,[a[u],l,i]));return f},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",a={},s={},i=0;i<16;i++)a[r[i]]=t[i],s[t[i]]=r[i];var l=function(v){return"0x"+parseInt(v,10).toString(16)},u=e.__fontmetrics__.compress=function(v){var x,j,b,S,A=["{"];for(var E in v){if(x=v[E],isNaN(parseInt(E,10))?j="'"+E+"'":(E=parseInt(E,10),j=(j=l(E).slice(2)).slice(0,-1)+s[j.slice(-1)]),typeof x=="number")x<0?(b=l(x).slice(3),S="-"):(b=l(x).slice(2),S=""),b=S+b.slice(0,-1)+s[b.slice(-1)];else{if(ba(x)!=="object")throw new Error("Don't know what to do with value type "+ba(x)+".");b=u(x)}A.push(j+b)}return A.push("}"),A.join("")},d=e.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,j,b,S,A={},E=1,T=A,D=[],R="",B="",U=v.length-1,I=1;I<U;I+=1)(S=v[I])=="'"?x?(b=x.join(""),x=void 0):x=[]:x?x.push(S):S=="{"?(D.push([T,b]),T={},b=void 0):S=="}"?((j=D.pop())[0][j[1]]=T,b=void 0,T=j[0]):S=="-"?E=-1:b===void 0?a.hasOwnProperty(S)?(R+=a[S],b=parseInt(R,16)*E,E=1,R=""):R+=S:a.hasOwnProperty(S)?(B+=a[S],T[b]=parseInt(B,16)*E,E=1,b=void 0,B=""):B+=S;return A},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:d("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},g={Unicode:{"Courier-Oblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":d("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":d("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:d("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:d("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":d("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":d("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(v){var x=v.font,j=g.Unicode[x.postScriptName];j&&(x.metadata.Unicode={},x.metadata.Unicode.widths=j.widths,x.metadata.Unicode.kerning=j.kerning);var b=m.Unicode[x.postScriptName];b&&(x.metadata.Unicode.encoding=b,x.encoding=b.codePages[0])}])}(nr.API),function(e){var t=function(r){for(var a=r.length,s=new Uint8Array(a),i=0;i<a;i++)s[i]=r.charCodeAt(i);return s};e.API.events.push(["addFont",function(r){var a=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(a=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(l,u){u=/^\x00\x01\x00\x00/.test(u)?t(u):t(Y0(u)),l.metadata=e.API.TTFFont.open(u),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(s,a)}}])}(nr),nr.API.addSvgAsImage=function(e,t,r,a,s,i,l,u){if(isNaN(t)||isNaN(r))throw Ea.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(s))throw Ea.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=a,d.height=s;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return(_r.canvg?Promise.resolve(_r.canvg):So(()=>import("./index.es-COVUTm5_.js"),[])).catch(function(v){return Promise.reject(new Error("Could not load canvg: "+v))}).then(function(v){return v.default?v.default:v}).then(function(v){return v.fromString(f,e,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(m)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),t,r,a,s,l,u)})},nr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var s=0;s<this.internal.pages[a].length;s++)this.internal.pages[a][s]=this.internal.pages[a][s].replace(t,r);return this},nr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var a,s,i,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(l),d=[],f=0,m=0,g=0;function v(j,b){var S,A=!1;for(S=0;S<j.length;S+=1)j[S]===b&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var x=u.length;for(g=0;g<x;g+=1)r[u[g]].value=r[u[g]].defaultValue,r[u[g]].explicitSet=!1}if(ba(e)==="object"){for(s in e)if(i=e[s],v(u,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&v(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(f=0;f<i.length;f+=1)if(a=!0,i[f].length===1&&typeof i[f][0]=="number")d.push(String(i[f]-1));else if(i[f].length>1){for(m=0;m<i[f].length;m+=1)typeof i[f][m]!="number"&&(a=!1);a===!0&&d.push([i[f][0]-1,i[f][1]-1].join(" "))}r[s].value="["+d.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var j,b=[];for(j in r)r[j].explicitSet===!0&&(r[j].type==="name"?b.push("/"+j+" /"+r[j].value):b.push("/"+j+" "+r[j].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(a)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),f=i.length+l.length+u.length+s.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(s+i+l+u+d),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(a,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(nr.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,l){for(var u,d=l.metadata.Unicode.widths,f=["","0","00","000","0000"],m=[""],g=0,v=i.length;g<v;++g){if(u=l.metadata.characterToGlyph(i.charCodeAt(g)),l.metadata.glyIdsUsed.push(u),l.metadata.toUnicode[u]=i.charCodeAt(g),d.indexOf(u)==-1&&(d.push(u),d.push([parseInt(l.metadata.widthOfGlyph(u),10)])),u=="0")return m.join("");u=u.toString(16),m.push(f[4-u.length],u)}return m.join("")},a=function(i){var l,u,d,f,m,g,v;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],g=0,v=(u=Object.keys(i).sort(function(x,j){return x-j})).length;g<v;g++)l=u[g],d.length>=100&&(m+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),i[l]!==void 0&&i[l]!==null&&typeof i[l].toString=="function"&&(f=("0000"+i[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),d.push("<"+l+"><"+f+">"));return d.length&&(m+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),m+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(l){var u=l.font,d=l.out,f=l.newObject,m=l.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="Identity-H"){for(var g=u.metadata.Unicode.widths,v=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),x="",j=0;j<v.length;j++)x+=String.fromCharCode(v[j]);var b=f();m({data:x,addLength1:!0,objectId:b}),d("endobj");var S=f();m({data:a(u.metadata.toUnicode),addLength1:!0,objectId:S}),d("endobj");var A=f();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+Oh(u.fontName)),d("/FontFile2 "+b+" 0 R"),d("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),d("/Flags "+u.metadata.flags),d("/StemV "+u.metadata.stemV),d("/ItalicAngle "+u.metadata.italicAngle),d("/Ascent "+u.metadata.ascender),d("/Descent "+u.metadata.decender),d("/CapHeight "+u.metadata.capHeight),d(">>"),d("endobj");var E=f();d("<<"),d("/Type /Font"),d("/BaseFont /"+Oh(u.fontName)),d("/FontDescriptor "+A+" 0 R"),d("/W "+e.API.PDFObject.convert(g)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+u.encoding+")"),d(">>"),d(">>"),d("endobj"),u.objectNumber=f(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+S+" 0 R"),d("/BaseFont /"+Oh(u.fontName)),d("/Encoding /"+u.encoding),d("/DescendantFonts ["+E+" 0 R]"),d(">>"),d("endobj"),u.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(l){var u=l.font,d=l.out,f=l.newObject,m=l.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var g=u.metadata.rawData,v="",x=0;x<g.length;x++)v+=String.fromCharCode(g[x]);var j=f();m({data:v,addLength1:!0,objectId:j}),d("endobj");var b=f();m({data:a(u.metadata.toUnicode),addLength1:!0,objectId:b}),d("endobj");var S=f();d("<<"),d("/Descent "+u.metadata.decender),d("/CapHeight "+u.metadata.capHeight),d("/StemV "+u.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+j+" 0 R"),d("/Flags 96"),d("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),d("/FontName /"+Oh(u.fontName)),d("/ItalicAngle "+u.metadata.italicAngle),d("/Ascent "+u.metadata.ascender),d(">>"),d("endobj"),u.objectNumber=f();for(var A=0;A<u.metadata.hmtx.widths.length;A++)u.metadata.hmtx.widths[A]=parseInt(u.metadata.hmtx.widths[A]*(1e3/u.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+Oh(u.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),d("endobj"),u.isAlreadyPutted=!0}})(i)}]);var s=function(i){var l,u=i.text||"",d=i.x,f=i.y,m=i.options||{},g=i.mutex||{},v=g.pdfEscape,x=g.activeFontKey,j=g.fonts,b=x,S="",A=0,E="",T=j[b].encoding;if(j[b].encoding!=="Identity-H")return{text:u,x:d,y:f,options:m,mutex:g};for(E=u,b=x,Array.isArray(u)&&(E=u[0]),A=0;A<E.length;A+=1)j[b].metadata.hasOwnProperty("cmap")&&(l=j[b].metadata.cmap.unicode.codeMap[E[A].charCodeAt(0)]),l||E[A].charCodeAt(0)<256&&j[b].metadata.hasOwnProperty("Unicode")?S+=E[A]:S+="";var D="";return parseInt(b.slice(1))<14||T==="WinAnsiEncoding"?D=v(S,b).split("").map(function(R){return R.charCodeAt(0).toString(16)}).join(""):T==="Identity-H"&&(D=r(S,j[b])),g.isHex=!0,{text:D,x:d,y:f,options:m,mutex:g}};t.events.push(["postProcessText",function(i){var l=i.text||"",u=[],d={text:l,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(l)){var f=0;for(f=0;f<l.length;f+=1)Array.isArray(l[f])&&l[f].length===3?u.push([s(Object.assign({},d,{text:l[f][0]})).text,l[f][1],l[f][2]]):u.push(s(Object.assign({},d,{text:l[f]})).text);i.text=u}else i.text=s(Object.assign({},d,{text:l})).text}])}(nr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,a){return t.call(this),this.internal.vFS[r]=a,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(nr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(a){var s,i,l,u,d,f,m,g=t,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],j={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),E=!1,T=0;this.__bidiEngine__={};var D=function(L){var q=L.charCodeAt(),z=q>>8,V=b[z];return V!==void 0?g[256*V+(255&q)]:z===252||z===253?"AL":A.test(z)?"L":z===8?"R":"N"},R=function(L){for(var q,z=0;z<L.length;z++){if((q=D(L.charAt(z)))==="L")return!1;if(q==="R")return!0}return!1},B=function(L,q,z,V){var de,se,fe,oe,Se=q[V];switch(Se){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":E=!1;break;case"N":case"AN":break;case"EN":E&&(Se="AN");break;case"AL":E=!0,Se="R";break;case"WS":case"BN":Se="N";break;case"CS":V<1||V+1>=q.length||(de=z[V-1])!=="EN"&&de!=="AN"||(se=q[V+1])!=="EN"&&se!=="AN"?Se="N":E&&(se="AN"),Se=se===de?se:"N";break;case"ES":Se=(de=V>0?z[V-1]:"B")==="EN"&&V+1<q.length&&q[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&z[V-1]==="EN"){Se="EN";break}if(E){Se="N";break}for(fe=V+1,oe=q.length;fe<oe&&q[fe]==="ET";)fe++;Se=fe<oe&&q[fe]==="EN"?"EN":"N";break;case"NSM":if(l&&!u){for(oe=q.length,fe=V+1;fe<oe&&q[fe]==="NSM";)fe++;if(fe<oe){var Y=L[V],ye=Y>=1425&&Y<=2303||Y===64286;if(de=q[fe],ye&&(de==="R"||de==="AL")){Se="R";break}}}Se=V<1||(de=q[V-1])==="B"?"N":z[V-1];break;case"B":E=!1,s=!0,Se=T;break;case"S":i=!0,Se="N"}return Se},U=function(L,q,z){var V=L.split("");return z&&I(V,z,{hiLevel:T}),V.reverse(),q&&q.reverse(),V.join("")},I=function(L,q,z){var V,de,se,fe,oe,Se=-1,Y=L.length,ye=0,P=[],K=T?x:v,le=[];for(E=!1,s=!1,i=!1,de=0;de<Y;de++)le[de]=D(L[de]);for(se=0;se<Y;se++){if(oe=ye,P[se]=B(L,le,P,se),V=240&(ye=K[oe][j[P[se]]]),ye&=15,q[se]=fe=K[ye][5],V>0)if(V===16){for(de=Se;de<se;de++)q[de]=1;Se=-1}else Se=-1;if(K[ye][6])Se===-1&&(Se=se);else if(Se>-1){for(de=Se;de<se;de++)q[de]=fe;Se=-1}le[se]==="B"&&(q[se]=0),z.hiLevel|=fe}i&&function(ee,me,ke){for(var Ae=0;Ae<ke;Ae++)if(ee[Ae]==="S"){me[Ae]=T;for(var xe=Ae-1;xe>=0&&ee[xe]==="WS";xe--)me[xe]=T}}(le,q,Y)},F=function(L,q,z,V,de){if(!(de.hiLevel<L)){if(L===1&&T===1&&!s)return q.reverse(),void(z&&z.reverse());for(var se,fe,oe,Se,Y=q.length,ye=0;ye<Y;){if(V[ye]>=L){for(oe=ye+1;oe<Y&&V[oe]>=L;)oe++;for(Se=ye,fe=oe-1;Se<fe;Se++,fe--)se=q[Se],q[Se]=q[fe],q[fe]=se,z&&(se=z[Se],z[Se]=z[fe],z[fe]=se);ye=oe}ye++}}},pe=function(L,q,z){var V=L.split(""),de={hiLevel:T};return z||(z=[]),I(V,z,de),function(se,fe,oe){if(oe.hiLevel!==0&&m)for(var Se,Y=0;Y<se.length;Y++)fe[Y]===1&&(Se=S.indexOf(se[Y]))>=0&&(se[Y]=S[Se+1])}(V,z,de),F(2,V,q,z,de),F(1,V,q,z,de),V.join("")};return this.__bidiEngine__.doBidiReorder=function(L,q,z){if(function(de,se){if(se)for(var fe=0;fe<de.length;fe++)se[fe]=fe;u===void 0&&(u=R(de)),f===void 0&&(f=R(de))}(L,q),l||!d||f)if(l&&d&&u^f)T=u?1:0,L=U(L,q,z);else if(!l&&d&&f)T=u?1:0,L=pe(L,q,z),L=U(L,q);else if(!l||u||d||f){if(l&&!d&&u^f)L=U(L,q),u?(T=0,L=pe(L,q,z)):(T=1,L=pe(L,q,z),L=U(L,q));else if(l&&u&&!d&&f)T=1,L=pe(L,q,z),L=U(L,q);else if(!l&&!d&&u^f){var V=m;u?(T=1,L=pe(L,q,z),T=0,m=!1,L=pe(L,q,z),m=V):(T=0,L=pe(L,q,z),L=U(L,q),T=1,m=!1,L=pe(L,q,z),m=V,L=U(L,q))}}else T=0,L=pe(L,q,z);else T=u?1:0,L=pe(L,q,z);return L},this.__bidiEngine__.setOptions=function(L){L&&(l=L.isInputVisual,d=L.isOutputVisual,u=L.isInputRtl,f=L.isOutputRtl,m=L.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(a){var s=a.text;a.x,a.y;var i=a.options||{};a.mutex,i.lang;var l=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var u=0;for(l=[],u=0;u<s.length;u+=1)Object.prototype.toString.call(s[u])==="[object Array]"?l.push([r.doBidiReorder(s[u][0]),s[u][1],s[u][2]]):l.push([r.doBidiReorder(s[u])]);a.text=l}else a.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(nr),nr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new pd(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new hae(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Qre(this.contents),this.head=new tae(this),this.name=new iae(this),this.cmap=new gD(this),this.toUnicode={},this.hhea=new rae(this),this.maxp=new oae(this),this.hmtx=new lae(this),this.post=new nae(this),this.os2=new aae(this),this.loca=new fae(this),this.glyf=new cae(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,a,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,u,d,f;for(f=[],l=0,u=(d=this.bbox).length;l<u;l++)t=d[l],f.push(Math.round(t*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(a=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,a){var s,i,l,u;for(l=0,i=0,u=(t=""+t).length;0<=u?i<u:i>u;i=0<=u?++i:--i)s=t.charCodeAt(i),l+=this.widthOfGlyph(this.characterToGlyph(s))+a*(1e3/r)||0;return l*(r/1e3)},e.prototype.lineHeight=function(t,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},e}();var pl,pd=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,a;for(a=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},e.prototype.writeString=function(t){var r,a,s;for(s=[],r=0,a=t.length;0<=a?r<a:r>a;r=0<=a?++r:--r)s.push(this.writeByte(t.charCodeAt(r)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,a,s,i,l,u,d;return t=this.readByte(),r=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),l=this.readByte(),u=this.readByte(),d=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^s)+16777216*(255^i)+65536*(255^l)+256*(255^u)+(255^d)+1):72057594037927940*t+281474976710656*r+1099511627776*a+4294967296*s+16777216*i+65536*l+256*u+d},e.prototype.writeLongLong=function(t){var r,a;return r=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,a;for(r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push(this.readByte());return r},e.prototype.write=function(t){var r,a,s,i;for(i=[],a=0,s=t.length;a<s;a++)r=t[a],i.push(this.writeByte(r));return i},e}(),Qre=function(){var e;function t(r){var a,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(r){var a,s,i,l,u,d,f,m,g,v,x,j,b;for(b in x=Object.keys(r).length,d=Math.log(2),g=16*Math.floor(Math.log(x)/d),l=Math.floor(g/d),m=16*x-g,(s=new pd).writeInt(this.scalarType),s.writeShort(x),s.writeShort(g),s.writeShort(l),s.writeShort(m),i=16*x,f=s.pos+i,u=null,j=[],r)for(v=r[b],s.writeString(b),s.writeInt(e(v)),s.writeInt(f),s.writeInt(v.length),j=j.concat(v),b==="head"&&(u=f),f+=v.length;f%4;)j.push(0),f++;return s.write(j),a=2981146554-e(s.data),s.pos=u+8,s.writeUInt32(a),s.data},e=function(r){var a,s,i,l;for(r=xD.call(r);r.length%4;)r.push(0);for(i=new pd(r),s=0,a=0,l=r.length;a<l;a=a+=4)s+=i.readUInt32();return 4294967295&s},t}(),eae={}.hasOwnProperty,sc=function(e,t){for(var r in t)eae.call(t,r)&&(e[r]=t[r]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e};pl=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var tae=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sc(e,pl),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new pd).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),ok=function(){function e(t,r){var a,s,i,l,u,d,f,m,g,v,x,j,b,S,A,E,T;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),g=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=t.readByte();break;case 4:for(x=t.readUInt16(),v=x/2,t.pos+=6,i=function(){var D,R;for(R=[],d=D=0;0<=v?D<v:D>v;d=0<=v?++D:--D)R.push(t.readUInt16());return R}(),t.pos+=2,b=function(){var D,R;for(R=[],d=D=0;0<=v?D<v:D>v;d=0<=v?++D:--D)R.push(t.readUInt16());return R}(),f=function(){var D,R;for(R=[],d=D=0;0<=v?D<v:D>v;d=0<=v?++D:--D)R.push(t.readUInt16());return R}(),m=function(){var D,R;for(R=[],d=D=0;0<=v?D<v:D>v;d=0<=v?++D:--D)R.push(t.readUInt16());return R}(),s=(this.length-t.pos+this.offset)/2,u=function(){var D,R;for(R=[],d=D=0;0<=s?D<s:D>s;d=0<=s?++D:--D)R.push(t.readUInt16());return R}(),d=A=0,T=i.length;A<T;d=++A)for(S=i[d],a=E=j=b[d];j<=S?E<=S:E>=S;a=j<=S?++E:--E)m[d]===0?l=a+f[d]:(l=u[m[d]/2+(a-j)-(v-d)]||0)!==0&&(l+=f[d]),this.codeMap[a]=65535&l}t.pos=g}return e.encode=function(t,r){var a,s,i,l,u,d,f,m,g,v,x,j,b,S,A,E,T,D,R,B,U,I,F,pe,L,q,z,V,de,se,fe,oe,Se,Y,ye,P,K,le,ee,me,ke,Ae,xe,De,ve,Z;switch(V=new pd,l=Object.keys(t).sort(function(te,re){return te-re}),r){case"macroman":for(b=0,S=function(){var te=[];for(j=0;j<256;++j)te.push(0);return te}(),E={0:0},i={},de=0,Se=l.length;de<Se;de++)E[xe=t[s=l[de]]]==null&&(E[xe]=++b),i[s]={old:t[s],new:E[t[s]]},S[s]=E[t[s]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(S),{charMap:i,subtable:V.data,maxGlyphID:b+1};case"unicode":for(q=[],g=[],T=0,E={},a={},A=f=null,se=0,Y=l.length;se<Y;se++)E[R=t[s=l[se]]]==null&&(E[R]=++T),a[s]={old:R,new:E[R]},u=E[R]-s,A!=null&&u===f||(A&&g.push(A),q.push(s),f=u),A=s;for(A&&g.push(A),g.push(65535),q.push(65535),pe=2*(F=q.length),I=2*Math.pow(Math.log(F)/Math.LN2,2),v=Math.log(I/2)/Math.LN2,U=2*F-I,d=[],B=[],x=[],j=fe=0,ye=q.length;fe<ye;j=++fe){if(L=q[j],m=g[j],L===65535){d.push(0),B.push(0);break}if(L-(z=a[L].new)>=32768)for(d.push(0),B.push(2*(x.length+F-j)),s=oe=L;L<=m?oe<=m:oe>=m;s=L<=m?++oe:--oe)x.push(a[s].new);else d.push(z-L),B.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*F+2*x.length),V.writeUInt16(0),V.writeUInt16(pe),V.writeUInt16(I),V.writeUInt16(v),V.writeUInt16(U),ke=0,P=g.length;ke<P;ke++)s=g[ke],V.writeUInt16(s);for(V.writeUInt16(0),Ae=0,K=q.length;Ae<K;Ae++)s=q[Ae],V.writeUInt16(s);for(De=0,le=d.length;De<le;De++)u=d[De],V.writeUInt16(u);for(ve=0,ee=B.length;ve<ee;ve++)D=B[ve],V.writeUInt16(D);for(Z=0,me=x.length;Z<me;Z++)b=x[Z],V.writeUInt16(b);return{charMap:a,subtable:V.data,maxGlyphID:T+1}}},e}(),gD=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sc(e,pl),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,a,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)r=new ok(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var a,s;return r==null&&(r="macroman"),a=ok.encode(t,r),(s=new pd).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},e}(),rae=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sc(e,pl),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),aae=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sc(e,pl),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,a;for(a=[],r=0;r<10;++r)a.push(t.readByte());return a}(),this.charRange=function(){var r,a;for(a=[],r=0;r<4;++r)a.push(t.readInt());return a}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,a;for(a=[],r=0;r<2;r=++r)a.push(t.readInt());return a}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),nae=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sc(e,pl),e.prototype.tag="post",e.prototype.parse=function(t){var r,a,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(a=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return a=t.readUInt16(),this.offsets=t.read(a);case 262144:return this.map=(function(){var l,u,d;for(d=[],i=l=0,u=this.file.maxp.numGlyphs;0<=u?l<u:l>u;i=0<=u?++l:--l)d.push(t.readUInt32());return d}).call(this)}},e}(),sae=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},iae=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sc(e,pl),e.prototype.tag="name",e.prototype.parse=function(t){var r,a,s,i,l,u,d,f,m,g,v;for(t.pos=this.offset,t.readShort(),r=t.readShort(),u=t.readShort(),a=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)a.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+u+t.readShort()});for(d={},i=m=0,g=a.length;m<g;i=++m)s=a[i],t.pos=s.offset,f=t.readString(s.length),l=new sae(f,s),d[v=s.nameID]==null&&(d[v]=[]),d[s.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e}(),oae=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sc(e,pl),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),lae=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sc(e,pl),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,a,s,i,l,u,d;for(t.pos=this.offset,this.metrics=[],r=0,u=this.file.hhea.numberOfMetrics;0<=u?r<u:r>u;r=0<=u?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,m;for(m=[],r=f=0;0<=s?f<s:f>s;r=0<=s?++f:--f)m.push(t.readInt16());return m}(),this.widths=(function(){var f,m,g,v;for(v=[],f=0,m=(g=this.metrics).length;f<m;f++)i=g[f],v.push(i.advance);return v}).call(this),a=this.widths[this.widths.length-1],d=[],r=l=0;0<=s?l<s:l>s;r=0<=s?++l:--l)d.push(this.widths.push(a));return d},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),xD=[].slice,cae=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sc(e,pl),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,a,s,i,l,u,d,f,m,g;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,a=i.indexOf(t),(s=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+a,l=(u=new pd(r.read(s))).readShort(),f=u.readShort(),g=u.readShort(),d=u.readShort(),m=u.readShort(),this.cache[t]=l===-1?new dae(u,f,g,d,m):new uae(u,l,f,g,d,m),this.cache[t]))},e.prototype.encode=function(t,r,a){var s,i,l,u,d;for(l=[],i=[],u=0,d=r.length;u<d;u++)s=t[r[u]],i.push(l.length),s&&(l=l.concat(s.encode(a)));return i.push(l.length),{table:l,offsets:i}},e}(),uae=function(){function e(t,r,a,s,i,l){this.raw=t,this.numberOfContours=r,this.xMin=a,this.yMin=s,this.xMax=i,this.yMax=l,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),dae=function(){function e(t,r,a,s,i){var l,u;for(this.raw=t,this.xMin=r,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;u=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&u;)l.pos+=1&u?4:2,128&u?l.pos+=8:64&u?l.pos+=4:8&u&&(l.pos+=2)}return e.prototype.encode=function(){var t,r,a;for(r=new pd(xD.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),fae=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sc(e,pl),e.prototype.tag="loca",e.prototype.parse=function(t){var r,a;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,l=0;l<a.length;++l)if(a[l]=s,i<r.length&&r[i]==l){++i,a[l]=s;var u=this.offsets[l],d=this.offsets[l+1]-u;d>0&&(s+=d)}for(var f=new Array(4*a.length),m=0;m<a.length;++m)f[4*m+3]=255&a[m],f[4*m+2]=(65280&a[m])>>8,f[4*m+1]=(16711680&a[m])>>16,f[4*m]=(4278190080&a[m])>>24;return f},e}(),hae=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,a,s,i;for(r in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)a=i[r],t[r]=s[a];return t},e.prototype.glyphsFor=function(t){var r,a,s,i,l,u,d;for(s={},l=0,u=t.length;l<u;l++)s[i=t[l]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(a=s[i])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(i in d=this.glyphsFor(r))a=d[i],s[i]=a;return s},e.prototype.encode=function(t,r){var a,s,i,l,u,d,f,m,g,v,x,j,b,S,A;for(s in a=gD.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(t),x={0:0},A=a.charMap)x[(d=A[s]).old]=d.new;for(j in v=a.maxGlyphID,l)j in x||(x[j]=v++);return m=function(E){var T,D;for(T in D={},E)D[E[T]]=T;return D}(x),g=Object.keys(m).sort(function(E,T){return E-T}),b=function(){var E,T,D;for(D=[],E=0,T=g.length;E<T;E++)u=g[E],D.push(m[u]);return D}(),i=this.font.glyf.encode(l,b,x),f=this.font.loca.encode(i.offsets,b),S={cmap:this.font.cmap.raw(),glyf:i.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},e}();nr.API.PDFObject=function(){var e;function t(){}return e=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},t.convert=function(r){var a,s,i,l;if(Array.isArray(r))return"["+function(){var u,d,f;for(f=[],u=0,d=r.length;u<d;u++)a=r[u],f.push(t.convert(a));return f}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)l=r[s],i.push("/"+s+" "+t.convert(l));return i.push(">>"),i.join(`
`)}return""+r},t}();const vD=async()=>nr;async function mae(e,t){const r=await vD(),a=new r("p","mm","a4"),s=a.internal.pageSize.getWidth(),i=20;a.setFontSize(20),a.setFont("helvetica","bold"),a.text(t.title,i,30),t.subtitle&&(a.setFontSize(14),a.setFont("helvetica","normal"),a.text(t.subtitle,i,40)),a.setFontSize(12),a.setFont("helvetica","normal"),a.text(`Company: ${t.companyName}`,i,55),a.text(`Generated: ${t.generatedDate}`,i,65),a.text(`Currency: ${t.currency}`,i,75),a.setLineWidth(.5),a.line(i,85,s-i,85);const l=95,u=[40,35,25,25,25,30],d=["Investor",`Amount (${t.currency})`,"Equity %",`Utilized (${t.currency})`,`Remaining (${t.currency})`,"Date"];a.setFontSize(10),a.setFont("helvetica","bold");let f=i;d.forEach((v,x)=>{a.text(v,f,l),f+=u[x]}),a.setFont("helvetica","normal");let m=l+10;e.forEach((v,x)=>{m>250&&(a.addPage(),m=30,a.setFont("helvetica","bold"),f=i,d.forEach((b,S)=>{a.text(b,f,m),f+=u[S]}),m+=10,a.setFont("helvetica","normal")),f=i,[v.investorName,v.investmentAmount,v.equityAllocated,v.utilized,v.remainingFunds,v.investmentDate].forEach((b,S)=>{const A=Math.floor(u[S]/2),E=b.length>A?b.substring(0,A-3)+"...":b;a.text(E,f,m),f+=u[S]}),m+=8});const g=a.getNumberOfPages();for(let v=1;v<=g;v++)a.setPage(v),a.setFontSize(8),a.setFont("helvetica","normal"),a.text(`Page ${v} of ${g}`,s-i-20,a.internal.pageSize.getHeight()-10);return a.output("blob")}async function pae(e,t,r){const a=await vD(),s=new a("p","mm","a4"),i=s.internal.pageSize.getWidth(),l=20;s.setFontSize(20),s.setFont("helvetica","bold"),s.text(`${r.title} - ${e}`,l,30),r.subtitle&&(s.setFontSize(14),s.setFont("helvetica","normal"),s.text(r.subtitle,l,40)),s.setFontSize(12),s.setFont("helvetica","normal"),s.text(`Company: ${r.companyName}`,l,55),s.text(`Investor: ${e}`,l,65),s.text(`Generated: ${r.generatedDate}`,l,75),s.text(`Currency: ${r.currency}`,l,85);let u;r.investmentAmount||r.equityAllocated||r.utilizedAmount||r.remainingAmount?(s.text(`Investment Amount: ${r.investmentAmount||"N/A"} ${r.currency}`,l,95),s.text(`Equity Allocated: ${r.equityAllocated||"N/A"}`,l,105),s.text(`Utilized Amount: ${r.utilizedAmount||"N/A"} ${r.currency}`,l,115),s.text(`Remaining Amount: ${r.remainingAmount||"N/A"} ${r.currency}`,l,125),s.setLineWidth(.5),s.line(l,135,i-l,135),u=145):(s.setLineWidth(.5),s.line(l,95,i-l,95),u=105);const d=[25,50,25,30,30],f=["Date","Description",`Amount (${r.currency})`,"Source",`Remaining (${r.currency})`];s.setFontSize(10),s.setFont("helvetica","bold");let m=l;f.forEach((b,S)=>{s.text(b,m,u),m+=d[S]}),s.setFont("helvetica","normal");let g=u+10;t.forEach((b,S)=>{g>250&&(s.addPage(),g=30,s.setFont("helvetica","bold"),m=l,f.forEach((E,T)=>{s.text(E,m,g),m+=d[T]}),g+=10,s.setFont("helvetica","normal")),m=l,[b.date,b.description,b.amount,b.fundingSource,b.remainingFunds].forEach((E,T)=>{const D=Math.floor(d[T]/2),R=E.length>D?E.substring(0,D-3)+"...":E;s.text(R,m,g),m+=d[T]}),g+=8}),g+=20,s.setFontSize(12),s.setFont("helvetica","bold"),s.text("Summary",l,g),g+=10,s.setFontSize(10),s.setFont("helvetica","normal");const v=t.length,x=t.reduce((b,S)=>{const A=parseFloat(S.amount.replace(/[^0-9.-]/g,""))||0;return b+A},0);s.text(`Total Transactions: ${v}`,l,g),g+=8,s.text(`Total Amount: ${x.toLocaleString()} ${r.currency}`,l,g),v===0&&(g+=15,s.setFontSize(10),s.setFont("helvetica","italic"),s.text("Note: No detailed expense transactions found for this investor.",l,g),g+=8,s.text("This may indicate that funds were utilized through other means",l,g),g+=8,s.text("or that expense records are not properly linked to this funding source.",l,g));const j=s.getNumberOfPages();for(let b=1;b<=j;b++)s.setPage(b),s.setFontSize(8),s.setFont("helvetica","normal"),s.text(`Page ${b} of ${j}`,i-l-20,s.internal.pageSize.getHeight()-10);return s.output("blob")}function lk(e,t){const r=URL.createObjectURL(e),a=document.createElement("a");a.href=r,a.download=t,a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}const c2=(e,t)=>nd(e,t),ck=["#1e40af","#1d4ed8","#3b82f6","#60a5fa"],gae=({startup:e,userRole:t,user:r,onActivateFundraising:a,onInvestorAdded:s,onUpdateFounders:i,isViewOnly:l})=>{const u=Lv(e),[d,f]=_.useState(!1),[m,g]=_.useState(!1),[v,x]=_.useState(!1),[j,b]=_.useState(!0),[S,A]=_.useState(null);_.useEffect(()=>{(async()=>{if(e!=null&&e.id){console.log("🔍 DIRECT DATABASE CHECK FOR STARTUP ID:",e.id);const{data:Ee,error:lt}=await G.from("founders").select("*").eq("startup_id",e.id);console.log("🔍 Direct founders query result:",Ee,lt);const{data:yt,error:ot}=await G.from("startup_shares").select("*").eq("startup_id",e.id);console.log("🔍 Direct shares query result:",yt,ot);const{data:ut,error:Lt}=await G.from("startups").select("country_of_registration, company_type, registration_date, currency, country, total_shares, price_per_share, esop_reserved_shares").eq("id",e.id);console.log("🔍 Direct profile query result:",ut,Lt)}})()},[e==null?void 0:e.id]);const[E,T]=_.useState([]),[D,R]=_.useState([]),[B,U]=_.useState([]),[I,F]=_.useState([]),[pe,L]=_.useState([]),[q,z]=_.useState([]),[V,de]=_.useState([]),[se,fe]=_.useState({totalEquityFunding:0,totalDebtFunding:0,totalGrantFunding:0,totalInvestments:0,avgEquityAllocated:0}),[oe,Se]=_.useState("investment"),[Y,ye]=_.useState(Zu.Free),P=(t==="Startup"||t==="Admin")&&!l;console.log("CapTableTab - userRole:",t,"isViewOnly:",l,"canEdit:",P);const[K,le]=_.useState(!1),[ee,me]=_.useState({active:!1,type:va.SeriesA,value:5e6,equity:15,validationRequested:!1,pitchDeckUrl:"",pitchVideoUrl:""}),[ke,Ae]=_.useState(!1),[xe,De]=_.useState([]),[ve,Z]=_.useState(!1),[te,re]=_.useState(null),[$,ne]=_.useState(!1),[W,be]=_.useState(null),[Ce,ze]=_.useState(!1),[Pe,we]=_.useState(null),[ae,qe]=_.useState(!1),[ft,Et]=_.useState(null),[Bt,vt]=_.useState([]),[ht,Dt]=_.useState(!1),[Ie,_t]=_.useState(null),[jt,Pt]=_.useState([]),[Rt,rr]=_.useState([]),[Ke,Re]=_.useState(0),[at,rt]=_.useState(null),[Tt,Te]=_.useState(""),[Ue,it]=_.useState(""),[kt,We]=_.useState(""),[It,ir]=_.useState(""),[St,Ht]=_.useState(""),[ar,cr]=_.useState(""),[Ur,Ar]=_.useState(""),[or,fr]=_.useState(""),[gr,Fa]=_.useState(""),[nn,sa]=_.useState(""),Ba=()=>{const X=B.reduce((ot,ut)=>ot+(ut.shares||0),0),Ee=E.reduce((ot,ut)=>ot+(ut.shares||0),0),lt=e.esopReservedShares||0,yt=D.filter(ot=>(ot.feeType==="Equity"||ot.feeType==="Hybrid")&&ot.shares).reduce((ot,ut)=>ot+(ut.shares||0),0);return X+Ee+lt+yt},dn=(X,Ee)=>({isValid:!0,availableShares:0}),[Oa,Wr]=_.useState([]),[yn,Yr]=_.useState(!1);_.useEffect(()=>{console.log("🔄 useEffect triggered - loading data for startup:",e==null?void 0:e.id),e!=null&&e.id&&(lr(),si(),ia())},[e==null?void 0:e.id]),_.useEffect(()=>{B.length>0},[B,E,e.esopReservedShares]),_.useEffect(()=>{const X=Number(It),Ee=Number(St);if(console.log("🔄 Auto-calculation triggered:",{shares:X,pricePerShare:Ee,invSharesDraft:It,invPricePerShareDraft:St}),Number.isFinite(X)&&X>0&&Number.isFinite(Ee)&&Ee>0){const lt=X*Ee;Te(String(lt));const yt=Ba(),ot=yt+X;if(console.log("📊 Share calculation details:",{currentTotalShares:yt,postMoneyTotalShares:ot,shares:X}),ot>0){const ut=X/ot*100;it(String(ut.toFixed(2)));const Lt=lt*100/ut;We(String(Lt.toFixed(2))),console.log("✅ Calculations completed:",{amount:lt,equityPercentage:ut.toFixed(2),postMoney:Lt.toFixed(2),currentTotalShares:yt,postMoneyTotalShares:ot,shares:X})}else{console.log("⚠️ No existing shares found, using fallback calculation");const ut=X*4,Lt=ut+X,qt=X/Lt*100;it(String(qt.toFixed(2))),We(String(lt.toFixed(2))),console.log("📊 Fallback calculation:",{assumedFounderShares:ut,totalSharesWithFounders:Lt,equityPercentage:qt.toFixed(2),amount:lt})}}else(X===0||Ee===0)&&(Te(""),it(""),We(""))},[It,St,B,E,e.esopReservedShares,D]),_.useEffect(()=>{const X=Number(ar),Ee=Number(Ur);if(console.log("🔄 Recognition auto-calculation triggered:",{shares:X,pricePerShare:Ee,recSharesDraft:ar,recPricePerShareDraft:Ur}),Number.isFinite(X)&&X>0&&Number.isFinite(Ee)&&Ee>0){const lt=X*Ee;fr(String(lt));const yt=Ba(),ot=yt+X;if(console.log("📊 Recognition share calculation details:",{currentTotalShares:yt,postMoneyTotalShares:ot,shares:X}),ot>0){const ut=X/ot*100;Fa(String(ut.toFixed(2)));const Lt=lt*100/ut;sa(String(Lt.toFixed(2))),console.log("✅ Recognition calculations completed:",{amount:lt,equityPercentage:ut.toFixed(2),postMoney:Lt.toFixed(2),currentTotalShares:yt,postMoneyTotalShares:ot,shares:X})}else{console.log("⚠️ No existing shares found for recognition, using fallback calculation");const ut=X*4,Lt=ut+X,qt=X/Lt*100;Fa(String(qt.toFixed(2))),sa(String(lt.toFixed(2))),console.log("📊 Recognition fallback calculation:",{assumedFounderShares:ut,totalSharesWithFounders:Lt,equityPercentage:qt.toFixed(2),amount:lt})}}else(X===0||Ee===0)&&(fr(""),Fa(""),sa(""))},[ar,Ur,B,E,e.esopReservedShares,D]),_.useEffect(()=>{const X=Ba();if(X<=0){Re(0);return}let Ee=e.currentValuation||0;if(E&&E.length>0){const yt=[...E].sort((ot,ut)=>new Date(ut.date).getTime()-new Date(ot.date).getTime())[0];yt!=null&&yt.postMoneyValuation&&yt.postMoneyValuation>0&&(Ee=yt.postMoneyValuation)}const lt=Ee>0?Ee/X:0;Re(lt)},[B,E,e.currentValuation,e.esopReservedShares,D]),_.useEffect(()=>{if(!(e!=null&&e.id))return;console.log("🔔 Setting up real-time subscription for startup:",e.id);const X=G.channel("offers_received_changes").on("postgres_changes",{event:"*",schema:"public",table:"opportunity_applications",filter:`startup_id=eq.${e.id}`},async Ee=>{console.log("🔄 Offers received change detected:",Ee),console.log("📝 Change details:",{event:Ee.eventType,table:Ee.table,record:Ee.new,old:Ee.old}),await si()}).subscribe(Ee=>{console.log("📡 Real-time subscription status:",Ee)});return()=>{console.log("🔌 Unsubscribing from offers received changes"),X.unsubscribe()}},[e.id]),_.useEffect(()=>{if(!(e!=null&&e.id))return;console.log("🔔 Setting up real-time subscription for recognition records:",e.id);const X=G.channel("recognition_records_changes").on("postgres_changes",{event:"*",schema:"public",table:"recognition_records",filter:`startup_id=eq.${e.id}`},async Ee=>{console.log("🔄 Recognition records change detected:",Ee),console.log("📝 Change details:",{event:Ee.eventType,table:Ee.table,record:Ee.new,old:Ee.old});const lt=await M0.getRecognitionRecordsByStartupId(e.id);R(lt)}).subscribe(Ee=>{console.log("📡 Recognition records real-time subscription status:",Ee)});return()=>{console.log("🔌 Unsubscribing from recognition records changes"),X.unsubscribe()}},[e.id]);const lr=async()=>{var X;if(e!=null&&e.id){console.log("🔍 CapTableTab loading data for startup ID:",e.id),console.log("🔍 Startup object:",e),b(!0),A(null);try{const[Ee,lt,yt,ot,ut,Lt,qt,gt,ur,dr,Hr,Gt,Gr]=await Promise.allSettled([ha.getInvestmentRecords(e.id),ha.getFounders(e.id),ha.getFundraisingDetails(e.id),ha.getValuationHistoryData(e.id),ha.getEquityDistributionData(e.id),ha.getInvestmentSummary(e.id),ha.getStartupSharesData(e.id),L0.getIncubationPrograms(e.id),L0.getPopularPrograms(),os.getFinancialRecords(e.id),M0.getRecognitionRecordsByStartupId(e.id),G.from("startups").select("country_of_registration, company_type, registration_date, currency, country, total_shares, price_per_share, esop_reserved_shares").eq("id",e.id).single(),rd.getEmployees(e.id)]);if(T(Ee.status==="fulfilled"?Ee.value:[]),e.founders&&e.founders.length>0)console.log("🔍 Startup already has founders data, preserving it:",e.founders),U(e.founders);else{const Ut=lt.status==="fulfilled"?lt.value:[];console.log("🔍 Founders data loaded from database:",Ut),console.log("🔍 Founders data status:",lt.status),lt.status==="rejected"&&console.error("❌ Founders data loading failed:",lt.reason),U(Ut)}if(console.log("🔍 All data loading results:"),console.log("Records:",Ee.status,Ee.status==="fulfilled"?Ee.value.length:Ee.reason),console.log("Founders:",lt.status,lt.status==="fulfilled"?lt.value.length:lt.reason),console.log("Total Shares:",qt.status,qt.status==="fulfilled"?qt.value:qt.reason),F(yt.status==="fulfilled"?yt.value:[]),L(ot.status==="fulfilled"?ot.value.map(Ut=>({roundName:Ut.round_name,valuation:Ut.valuation,investmentAmount:Ut.investment_amount,date:Ut.date})):[]),z(ut.status==="fulfilled"?ut.value.map(Ut=>({holderType:Ut.holder_type,equityPercentage:Ut.equity_percentage,totalAmount:Ut.total_amount})):[]),de(Gr.status==="fulfilled"?Gr.value:[]),fe(Lt.status==="fulfilled"?{totalEquityFunding:Lt.value.total_equity_funding||0,totalDebtFunding:Lt.value.total_debt_funding||0,totalGrantFunding:Lt.value.total_grant_funding||0,totalInvestments:Lt.value.total_investments||0,avgEquityAllocated:Lt.value.avg_equity_allocated||0}:{totalEquityFunding:0,totalDebtFunding:0,totalGrantFunding:0,totalInvestments:0,avgEquityAllocated:0}),e.esopReservedShares!==void 0||e.pricePerShare!==void 0)console.log("🔍 Startup already has share data, preserving it:",{esopReservedShares:e.esopReservedShares,pricePerShare:e.pricePerShare,totalShares:e.totalShares}),Re(e.pricePerShare||0);else if(qt.status==="fulfilled"){const Ut=qt.value,ma=Number(Ut.esopReservedShares)||0,Ra=Number(Ut.pricePerShare)||0;console.log("🔍 Shares data loaded from database:",{esopShares:ma,pricePerShare:Ra}),console.log("🔍 Raw shares data:",Ut),console.log("🔍 Setting price per share to:",Ra),Re(Ra),e&&(e.esopReservedShares=ma)}else{console.error("❌ Shares data loading failed:",qt.reason);try{const{data:Ut}=await G.from("startup_profiles").select("price_per_share, esop_reserved_shares").eq("startup_id",e.id).single();Ut?(console.log("🔄 Fallback: Loading shares from startup_profiles:",Ut),Re(Ut.price_per_share||0),e&&(e.esopReservedShares=Ut.esop_reserved_shares||0)):Re(0)}catch(Ut){console.error("❌ Fallback shares loading also failed:",Ut),Re(0)}}yt.status==="fulfilled"&&yt.value.length>0&&me(yt.value[0]),Hr.status==="fulfilled"?(R(Hr.value),console.log("✅ Recognition records loaded:",Hr.value.length)):console.error("Failed to load recognition records:",Hr.reason),console.log("🔍 Processing startup profile data..."),console.log("🔍 Startup data status:",Gt.status),Gt.status==="rejected"&&console.error("❌ Startup data loading failed:",Gt.reason);const Er=Gt.status==="fulfilled"?Gt.value:null;if(console.log("🔍 Startup data result:",Er),Er?(rt(Er),console.log("✅ Startup profile data loaded and set:",Er)):console.log("⚠️ No startup profile data available"),[Ee,lt,yt,ot,ut,Lt,gt,ur,dr,Hr].forEach((Ut,ma)=>{Ut.status==="rejected"&&console.warn(`Failed to load data ${ma}:`,Ut.reason)}),console.log("📊 Cap Table Data Loaded:",{investmentRecords:Ee.status==="fulfilled"?Ee.value.length:"failed",founders:lt.status==="fulfilled"?lt.value.length:"failed",fundraisingDetails:yt.status==="fulfilled"?yt.value.length:"failed",valuationHistory:ot.status==="fulfilled"?ot.value.length:"failed",equityDistribution:ut.status==="fulfilled"?ut.value.length:"failed",investmentSummary:Lt.status==="fulfilled"?Lt.value:"failed",totalShares:qt.status==="fulfilled"?qt.value:"failed",incubationPrograms:gt.status==="fulfilled"?gt.value.length:"failed",popularPrograms:ur.status==="fulfilled"?ur.value.length:"failed",financialRecords:dr.status==="fulfilled"?dr.value.length:"failed",recognitionRecords:Hr.status==="fulfilled"?Hr.value.length:"failed"}),Lt.status==="fulfilled"&&(console.log("💰 Investment Summary Raw Data:",Lt.value),console.log("💰 Investment Summary Mapped Data:",{totalEquityFunding:Lt.value.total_equity_funding||0,totalDebtFunding:Lt.value.total_debt_funding||0,totalGrantFunding:Lt.value.total_grant_funding||0,totalInvestments:Lt.value.total_investments||0,avgEquityAllocated:Lt.value.avg_equity_allocated||0})),ot.status==="fulfilled"?(console.log("📈 Valuation History Raw Data:",ot.value),console.log("📈 Valuation History Mapped Data:",ot.value.map(Ut=>({roundName:Ut.round_name,valuation:Ut.valuation,investmentAmount:Ut.investment_amount,date:Ut.date})))):ot.status==="rejected"&&console.error("❌ Valuation History Failed:",ot.reason),ut.status==="fulfilled"?(console.log("🥧 Equity Distribution Raw Data:",ut.value),console.log("🥧 Equity Distribution Mapped Data:",ut.value.map(Ut=>({holderType:Ut.holder_type,equityPercentage:Ut.equity_percentage,totalAmount:Ut.total_amount})))):ut.status==="rejected"&&console.error("❌ Equity Distribution Failed:",ut.reason),gt.status==="fulfilled"?(vt(gt.value),console.log("🎓 Incubation Programs Data:",gt.value),console.log("🎓 Incubation Programs Count:",((X=gt.value)==null?void 0:X.length)||0)):gt.status==="rejected"?(console.error("❌ Incubation Programs Failed:",gt.reason),vt([])):(console.log("⚠️ Incubation Programs Status: unavailable"),vt([])),ur.status==="fulfilled"&&(Pt(ur.value),console.log("📚 Popular Programs:",ur.value)),dr.status==="fulfilled"){rr(dr.value),console.log("💰 Financial Records:",dr.value.length,"records loaded");const Ut=dr.value.filter(Ra=>Ra.funding_source&&Ra.funding_source.toLowerCase().includes("pooja"));Ut.length>0?console.log("🔍 Found Pooja Financial Records:",Ut):console.log("⚠️ No Pooja financial records found");const ma=dr.value.filter(Ra=>Ra.funding_source).map(Ra=>Ra.funding_source);console.log("📋 All Funding Sources:",ma)}else dr.status==="rejected"&&console.error("❌ Financial Records Failed:",dr.reason)}catch(Ee){console.error("Error loading cap table data:",Ee),A("Failed to load cap table data")}finally{b(!1)}}},ia=()=>{if(!(e!=null&&e.id))return;const X=ha.subscribeToInvestmentRecords(e.id,ot=>{T(ot)}),Ee=ha.subscribeToFounders(e.id,ot=>{U(ot)}),lt=ha.subscribeToFundraisingDetails(e.id,ot=>{F(ot),ot.length>0&&me(ot[0])}),yt=L0.subscribeToIncubationPrograms(e.id,ot=>{vt(ot)});return()=>{X==null||X.unsubscribe(),Ee==null||Ee.unsubscribe(),lt==null||lt.unsubscribe(),yt==null||yt.unsubscribe()}},ni=()=>{console.log("🔧 Opening founder edit modal with founders:",B),De(B.map(X=>({...X,id:Math.random()*1e4}))),Ae(!0)},bn=(X,Ee,lt)=>{console.log("✏️ Editing founder:",{id:X,field:Ee,value:lt}),De(xe.map(yt=>{if(yt.id===X){const ot={...yt};return Ee==="equityPercentage"||Ee==="shares"?ot[Ee]=lt===""?void 0:Number(lt):ot[Ee]=lt,ot}return yt}))},gl=()=>{De([...xe,{id:Date.now(),name:"",email:"",equityPercentage:void 0,shares:void 0}])},cu=X=>{xe.length>1&&De(xe.filter(Ee=>Ee.id!==X))},Do=async()=>{if(e!=null&&e.id)try{const X=xe.map(({id:ut,...Lt})=>Lt),Ee=X.reduce((ut,Lt)=>ut+(Lt.shares||0),0),lt=E.reduce((ut,Lt)=>ut+(Lt.shares||0),0),yt=e.esopReservedShares||0,ot=Ee+lt+yt;console.log("💾 Saving founders with equity data:",X.map(ut=>({name:ut.name,email:ut.email,equityPercentage:ut.equityPercentage,shares:ut.shares}))),await ha.deleteAllFounders(e.id),console.log("🗑️ Deleted existing founders");for(const ut of X)await ha.addFounder(e.id,ut),console.log("➕ Added founder with equity:",{name:ut.name,equityPercentage:ut.equityPercentage,shares:ut.shares});i(e.id,X),Ae(!1),A(null),console.log("✅ Founders saved successfully")}catch(X){console.error("Error saving founders:",X),A("Failed to save founder information")}},Un=async()=>{var X;if(e!=null&&e.id)try{if(!ee.type){A("Fundraising type is required");return}if(!ee.value||ee.value<=0){A("Valid fundraising value is required");return}if(!ee.equity||ee.equity<=0||ee.equity>100){A("Valid equity percentage (1-100%) is required");return}b(!0),A(null);const Ee=document.getElementById("fr-deck"),lt=(X=Ee==null?void 0:Ee.files)==null?void 0:X[0];let yt=ee.pitchDeckUrl;lt&&(console.log("📁 Uploading pitch deck:",lt.name),yt=await ha.uploadPitchDeck(lt,e.id),console.log("✅ Pitch deck uploaded:",yt));const ot={...ee,pitchDeckUrl:yt};console.log("💾 Saving fundraising details:",ot);const ut=await ha.updateFundraisingDetails(e.id,ot);if(console.log("✅ Fundraising details saved:",ut),me(ut),F([ut]),ut.validationRequested)try{console.log("🔄 Creating/updating validation request for startup:",e.name);const Lt=await sx.createValidationRequest(e.id,e.name);console.log("✅ Validation request processed:",Lt),alert(`${e.name} fundraising is now active! A Startup Nation validation request has been submitted and is pending admin approval.`)}catch(Lt){console.error("❌ Error processing validation request:",Lt),alert(`${e.name} fundraising is now active! However, there was an issue submitting the validation request. Please contact support.`)}else{try{console.log("🔄 Removing validation request for startup:",e.name),await sx.removeValidationRequest(e.id),console.log("✅ Validation request removed")}catch(Lt){console.error("❌ Error removing validation request:",Lt)}a(ut,e),alert(`${e.name} fundraising is now active!`)}le(!1),console.log("🎉 Fundraising details updated successfully!"),await lr()}catch(Ee){console.error("❌ Error saving fundraising details:",Ee);let lt="Failed to save fundraising details. Please try again.";Ee instanceof Error&&(Ee.message.includes("RLS")?lt="Permission denied. Please check your authentication.":Ee.message.includes("foreign key")?lt="Invalid startup reference. Please refresh the page.":Ee.message.includes("unique constraint")?lt="Fundraising details already exist for this startup.":Ee.message.includes("not null")?lt="Please fill in all required fields.":lt=`Database error: ${Ee.message}`),A(lt)}finally{b(!1)}},gs=async X=>{var Ee,lt;if(console.log("🎯 handleAddInvestment called!"),X.preventDefault(),!(e!=null&&e.id)){console.error("❌ No startup ID found!");return}try{const yt=new FormData(X.currentTarget),ot=(lt=(Ee=X.currentTarget.querySelector('input[name="inv-proof"]'))==null?void 0:Ee.files)==null?void 0:lt[0];console.log("🔍 Investment Form Debug:"),console.log("Form data entries:");for(const[fa,xs]of yt.entries())console.log(`${fa}: ${xs}`);console.log("Current state values:"),console.log("invSharesDraft:",It),console.log("invPricePerShareDraft:",St),console.log("invAmountDraft:",Tt),console.log("invEquityDraft:",Ue),console.log("invPostMoneyDraft:",kt),console.log("esopReservedShares:",e.esopReservedShares),console.log("founders:",B.map(fa=>({name:fa.name,shares:fa.shares}))),console.log("investmentRecords:",E.map(fa=>({name:fa.investorName,shares:fa.shares})));const ut=yt.get("inv-date"),Lt=yt.get("inv-investor-type"),qt=yt.get("inv-type"),gt=yt.get("inv-name"),ur=yt.get("inv-code"),dr=Number(It),Hr=Number(St),Gt=Number(Tt),Gr=Number(Ue),Qr=Number(kt)||(Gr&&Gr>0?Gt*100/Gr:0);if(!ut){A("Date is required");return}if(!Lt){A("Investor type is required");return}if(!qt){A("Investment type is required");return}if(!gt){A("Investor name is required");return}if(!dr||dr<=0){A("Valid number of shares is required");return}if(!Hr||Hr<=0){A("Valid price per share is required");return}if(!Gt||Gt<=0){A("Valid investment amount is required");return}if(!Gr||Gr<0){A("Valid equity allocation is required");return}console.log("🔍 Shares Validation Debug:"),console.log("Requested shares:",dr),console.log("ESOP reserved shares:",e.esopReservedShares),console.log("Founder shares:",B.reduce((fa,xs)=>fa+(xs.shares||0),0)),console.log("Existing investor shares:",E.reduce((fa,xs)=>fa+(xs.shares||0),0));const Da=dn(dr);if(console.log("Validation result:",Da),Da.isValid,!Qr||Qr<=0){A("Post-money valuation could not be calculated");return}let Er="";ot&&(Er=await ha.uploadProofDocument(e.id,ot));const Ut={id:Date.now().toString(),startupId:e.id,date:ut,investorType:Lt,investmentType:qt,investorName:gt,investorCode:ur,amount:Gt,equityAllocated:Gr,shares:dr,pricePerShare:Hr,postMoneyValuation:Qr,proofUrl:Er};console.log("Adding investment:",Ut),console.log("Startup ID:",e.id),console.log("Investment data type:",typeof Ut),console.log("Investment data keys:",Object.keys(Ut));const{startupId:ma,...Ra}=Ut;console.log("Investment data for service:",Ra);const jl=await ha.addInvestmentRecord(e.id,Ra);if(console.log("✅ Investment record saved successfully:",jl),Te(""),it(""),We(""),ir(""),Ht(""),ur&&ur.trim().length>0){console.log("Investor code provided:",ur),console.log("🔄 Calling onInvestorAdded callback...");try{s(jl,e),console.log("✅ onInvestorAdded callback executed successfully")}catch(fa){console.error("❌ Error in onInvestorAdded callback:",fa)}}else console.log("⚠️ No investor code provided, skipping onInvestorAdded callback");X.currentTarget&&X.currentTarget.reset(),A(null),console.log("🔄 Reloading data after adding investment..."),await lr();try{const[fa,xs]=await Promise.allSettled([ha.getValuationHistoryData(e.id),ha.getEquityDistributionData(e.id)]);fa.status==="fulfilled"&&(L(fa.value.map(wn=>({roundName:wn.round_name,valuation:wn.valuation,investmentAmount:wn.investment_amount,date:wn.date}))),console.log("✅ Valuation history updated after investment")),xs.status==="fulfilled"&&(z(xs.value.map(wn=>({holderType:wn.holder_type,equityPercentage:wn.equity_percentage,totalAmount:wn.total_amount}))),console.log("✅ Equity distribution updated after investment"))}catch(fa){console.error("Error updating chart data:",fa)}}catch(yt){console.error("Error adding investment:",yt),A("Failed to add investment")}},xl=async X=>{if(!(!(e!=null&&e.id)||!P))try{A(null),b(!0),console.log("🗑️ Deleting investment:",X),console.log("💰 Amount to remove from total funding:",X.amount),console.log("🏷️ Investor code to clean up:",X.investorCode),await ha.deleteInvestmentRecord(X.id);try{console.log("💰 Updating startup funding after investment deletion"),await ha.updateStartupFundingAfterDeletion(e.id,X.amount)}catch(Ee){console.warn("⚠️ Warning: Could not update startup funding:",Ee)}if(X.investorCode)try{console.log("🧹 Cleaning up startup addition requests for investor code:",X.investorCode),await N2.cleanupOrphanedRequests()}catch(Ee){console.warn("⚠️ Warning: Could not clean up startup addition requests:",Ee)}T(Ee=>Ee.filter(lt=>lt.id!==X.id)),Z(!1),re(null),console.log("🔄 Reloading all data after investment deletion..."),await lr(),console.log("✅ Investment and all related data deleted successfully from Supabase")}catch(Ee){console.error("❌ Error deleting investment:",Ee),A("Failed to delete investment. Please try again."),b(!1)}finally{b(!1)}},vl=async X=>{if(X.preventDefault(),!(e!=null&&e.id))return;const Ee=new FormData(X.currentTarget),lt=Ee.get("rec-program-name"),yt=Ee.get("rec-facilitator-name"),ot=Ee.get("rec-facilitator-code"),ut=Ee.get("rec-incubation-type"),Lt=Ee.get("rec-fee-type"),qt=Ee.get("rec-fee-amount")?parseFloat(Ee.get("rec-fee-amount")):void 0,gt=Ee.get("rec-shares")?parseInt(Ee.get("rec-shares")):void 0,ur=Ee.get("rec-price-per-share")?parseFloat(Ee.get("rec-price-per-share")):void 0,dr=Ee.get("rec-amount")?parseFloat(Ee.get("rec-amount")):void 0,Hr=Ee.get("rec-equity")?parseFloat(Ee.get("rec-equity")):void 0,Gt=Ee.get("rec-postmoney")?parseFloat(Ee.get("rec-postmoney")):void 0,Gr=Ee.get("rec-agreement");if(!lt||!yt||!ot||!ut||!Lt||!Gr){A("Please fill in all required fields");return}try{A(null),b(!0);let Qr="";if(Gr&&Gr.size>0)try{const Er=await ds.uploadFile(Gr,"startup-documents",`agreements/${e.id}/signed_agreement_${Date.now()}_${Gr.name}`);if(Er.success&&Er.url)Qr=Er.url;else throw new Error(Er.error||"Upload failed")}catch(Er){console.error("Failed to upload agreement file:",Er),A("Failed to upload agreement file");return}console.log("🔍 Debug - Data being sent to createRecognitionRecord:",{startupId:e.id,programName:lt,facilitatorName:yt,facilitatorCode:ot,incubationType:ut,feeType:Lt,feeAmount:qt,shares:gt,pricePerShare:ur,investmentAmount:dr,equityAllocated:Hr,postMoneyValuation:Gt,signedAgreementUrl:Qr});const Da=await M0.createRecognitionRecord({startupId:e.id,programName:lt,facilitatorName:yt,facilitatorCode:ot,incubationType:ut,feeType:Lt,feeAmount:qt,shares:gt,pricePerShare:ur,investmentAmount:dr,equityAllocated:Hr,postMoneyValuation:Gt,signedAgreementUrl:Qr});R(Er=>[Da,...Er]),X.currentTarget&&X.currentTarget.reset(),A(null),ye(Zu.Free),cr(""),Ar(""),fr(""),Fa(""),sa(""),console.log("✅ Recognition record added successfully to backend"),console.log("📋 New record:",Da)}catch(Qr){console.error("❌ Error adding recognition record:",Qr),Qr instanceof Error?A(Qr.message):A("Failed to add recognition record")}finally{b(!1)}},bi=async X=>{if(X.preventDefault(),!(e!=null&&e.id)||!Pe)return;const Ee=new FormData(X.currentTarget),lt=Ee.get("rec-program-name"),yt=Ee.get("rec-facilitator-name"),ot=Ee.get("rec-facilitator-code"),ut=Ee.get("rec-incubation-type"),Lt=Ee.get("rec-fee-type"),qt=Ee.get("rec-fee-amount")?parseFloat(Ee.get("rec-fee-amount")):void 0,gt=Ee.get("rec-shares")?parseInt(Ee.get("rec-shares")):void 0,ur=Ee.get("rec-price-per-share")?parseFloat(Ee.get("rec-price-per-share")):void 0,dr=Ee.get("rec-amount")?parseFloat(Ee.get("rec-amount")):void 0,Hr=Ee.get("rec-equity")?parseFloat(Ee.get("rec-equity")):void 0,Gt=Ee.get("rec-postmoney")?parseFloat(Ee.get("rec-postmoney")):void 0,Gr=Ee.get("rec-agreement");if(!lt||!yt||!ot||!ut||!Lt){A("Please fill in all required fields");return}try{A(null),b(!0);let Qr=Pe.signedAgreementUrl;if(Gr&&Gr.size>0)try{const Er=await ds.uploadFile(Gr,"startup-documents",`agreements/${e.id}/signed_agreement_${Date.now()}_${Gr.name}`);if(Er.success&&Er.url)Qr=Er.url;else throw new Error(Er.error||"Upload failed")}catch(Er){console.error("Failed to upload agreement file:",Er),A("Failed to upload agreement file");return}const Da=await M0.updateRecognitionRecord(Pe.id,{programName:lt,facilitatorName:yt,facilitatorCode:ot,incubationType:ut,feeType:Lt,feeAmount:qt,shares:gt,pricePerShare:ur,investmentAmount:dr,equityAllocated:Hr,postMoneyValuation:Gt,signedAgreementUrl:Qr});R(Er=>Er.map(Ut=>Ut.id===Pe.id?Da:Ut)),ze(!1),we(null),A(null),console.log("✅ Recognition record updated successfully"),console.log("📋 Updated record:",Da)}catch(Qr){console.error("❌ Error updating recognition record:",Qr),Qr instanceof Error?A(Qr.message):A("Failed to update recognition record")}finally{b(!1)}},yl=async X=>{console.log("🚀 Form submitted! Entry type:",oe),X.preventDefault();try{oe==="investment"?(console.log("📈 Calling handleAddInvestment..."),await gs(X)):(console.log("🏆 Calling handleAddRecognition..."),await vl(X))}catch(Ee){console.error("❌ Error in handleEntrySubmit:",Ee),A("Failed to submit form. Please try again.")}},bl=X=>{console.log("🔧 Editing investment:",X),be(X),ne(!0)},wl=X=>{console.log("🔧 Editing recognition:",X),we(X),ze(!0)},uu=X=>{console.log("🗑️ Deleting recognition:",X),Et(X),qe(!0)},Vr=async X=>{try{b(!0);const{error:Ee}=await G.from("recognition_records").delete().eq("id",parseInt(X));if(Ee){console.error("Error deleting recognition record:",Ee),A("Failed to delete recognition record. Please try again.");return}R(lt=>lt.filter(yt=>yt.id!==X)),qe(!1),Et(null),console.log("✅ Recognition record deleted successfully")}catch(Ee){console.error("Error deleting recognition record:",Ee),A("Failed to delete recognition record. Please try again.")}finally{b(!1)}},ic=X=>{console.log("🔧 Editing incubation program:",X),alert("Edit functionality will be implemented in the next update")},du=async X=>{if(e!=null&&e.id)try{await L0.deleteIncubationProgram(X),Dt(!1),_t(null),await lr()}catch(Ee){console.error("Error deleting program:",Ee),A("Failed to delete program")}},Os=async()=>{try{const X=E.map(ot=>{const ut=Ln(ot.investorName,ot.amount);return{investorName:ot.investorName,investmentAmount:ot.amount.toLocaleString(),equityAllocated:`${ot.equityAllocated}%`,utilized:ut.utilized.toLocaleString(),remainingFunds:(ot.amount-ut.utilized).toLocaleString(),investmentDate:new Date(ot.date).toLocaleDateString()}}),Ee={title:"Fund Utilization Report",subtitle:"Investor Investment Summary",companyName:e.name,generatedDate:new Date().toLocaleDateString(),currency:u},lt=await mae(X,Ee),yt=`fund-utilization-report-${e.name.replace(/[^a-zA-Z0-9]/g,"-")}-${new Date().toISOString().split("T")[0]}.pdf`;lk(lt,yt),console.log("✅ Fund utilization report downloaded successfully as PDF")}catch(X){console.error("❌ Error generating fund utilization report:",X),alert("Failed to generate fund utilization report. Please try again.")}},Xi=async X=>{try{const Ee=Ln(X.investorName,X.amount),lt=X.investorName,yt=Rt.filter(gt=>gt.record_type==="expense"&&gt.funding_source&&gt.funding_source.toLowerCase()===lt.toLowerCase());console.log("🔍 PDF Generation Debug:",{investorName:X.investorName,investorFundingSource:lt,totalFinancialRecords:Rt.length,expenseRecordsFound:yt.length,utilization:Ee,allFundingSources:Rt.filter(gt=>gt.funding_source).map(gt=>gt.funding_source).filter((gt,ur,dr)=>dr.indexOf(gt)===ur)});const ot=yt.map(gt=>({date:new Date(gt.date).toLocaleDateString(),description:gt.description||"N/A",amount:(gt.amount||0).toLocaleString(),fundingSource:gt.funding_source||"N/A",remainingFunds:(X.amount-Ee.utilized).toLocaleString()})),ut={title:"Individual Fund Utilization Report",subtitle:`Detailed expense breakdown for ${X.investorName} (${Ee.percentage.toFixed(2)}% utilized)`,companyName:e.name,generatedDate:new Date().toLocaleDateString(),currency:u,investmentAmount:X.amount.toLocaleString(),equityAllocated:`${X.equityAllocated}%`,utilizedAmount:Ee.utilized.toLocaleString(),remainingAmount:(X.amount-Ee.utilized).toLocaleString()},Lt=await pae(X.investorName,ot,ut),qt=`fund-utilization-${X.investorName.replace(/[^a-zA-Z0-9]/g,"-")}-${new Date().toISOString().split("T")[0]}.pdf`;lk(Lt,qt),console.log("✅ Individual fund utilization report downloaded successfully as PDF")}catch(Ee){console.error("❌ Error generating individual fund utilization report:",Ee),alert("Failed to generate individual fund utilization report. Please try again.")}},Ln=(X,Ee)=>{const lt=X;X.toLowerCase().includes("pooja")&&console.log("🔍 Debugging Pooja Utilization:",{investorName:X,investmentAmount:Ee,expectedFundingSource:lt,totalFinancialRecords:Rt.length,matchingRecords:Rt.filter(ut=>ut.record_type==="expense"&&ut.funding_source&&ut.funding_source.toLowerCase()===lt.toLowerCase()),allFundingSources:Rt.filter(ut=>ut.funding_source).map(ut=>ut.funding_source)});const yt=Rt.filter(ut=>ut.record_type==="expense"&&ut.funding_source&&ut.funding_source.toLowerCase()===lt.toLowerCase()).reduce((ut,Lt)=>ut+(Lt.amount||0),0),ot=Ee>0?yt/Ee*100:0;return{utilized:yt,percentage:Math.min(ot,100)}},Ro=({utilized:X,total:Ee,percentage:lt})=>{const yt=X>0?Math.max(lt,1):0;return n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${yt}%`}})}),n.jsxs("div",{className:"text-xs text-slate-600",children:[Or(X,u)," Utilized (",lt.toFixed(4),"%)"]})]})},Mr=E.length>0?E.map(X=>({name:X.investmentType||"Investment Round",valuation:Number(X.preMoneyValuation)||0,investment:Number(X.amount)||0})).filter(X=>X.valuation>0||X.investment>0):[],wi=(()=>{const X=[],Ee=B.reduce((qt,gt)=>qt+(gt.shares||0),0),lt=E.reduce((qt,gt)=>qt+(gt.shares||0),0),yt=e.esopReservedShares||0,ot=Ee+lt+yt;if(B.forEach(qt=>{if(qt.shares&&qt.shares>0&&ot>0){const gt=qt.shares/ot*100;gt>0&&X.push({name:`Founder (${qt.name})`,value:gt})}}),E.forEach(qt=>{if(qt.shares&&qt.shares>0&&ot>0){const gt=qt.shares/ot*100;gt>0&&X.push({name:`Investor (${qt.investorName})`,value:gt})}else qt.equityAllocated&&qt.equityAllocated>0&&X.push({name:`Investor (${qt.investorName})`,value:qt.equityAllocated})}),yt>0&&ot>0){const qt=yt/ot*100;qt>0&&X.push({name:"ESOP Pool",value:qt})}const Lt=100-X.reduce((qt,gt)=>qt+gt.value,0);return Lt>.1&&X.push({name:"Unallocated",value:Lt}),X.filter(qt=>qt.value>0)})(),si=async()=>{if(console.log("🚀 loadOffersReceived function called!"),!!(e!=null&&e.id))try{console.log("🔍 Loading offers for startup ID:",e.id),console.log("🔍 Startup object:",e),console.log("🔍 User role:",t),console.log("🔍 Is view only:",l),console.log("💰 Fetching investment offers...");const X=await Wn.getOffersForStartup(e.id);console.log("💰 Investment offers fetched:",X);const{data:Ee,error:lt}=await G.from("opportunity_applications").select(`
                    id,
                    startup_id,
                    opportunity_id,
                    status,
                    diligence_status,
                    agreement_url,
                    created_at,
                    incubation_opportunities(
                        id,
                        program_name,
                        facilitator_id,
                        facilitator_code
                    )
                `).eq("startup_id",e.id).order("created_at",{ascending:!1});if(lt)throw console.error("Error fetching applications:",lt),lt;console.log("📋 Raw applications data:",Ee),console.log("📋 Applications count:",(Ee==null?void 0:Ee.length)||0),console.log("📋 Startup ID being queried:",e.id),Ee&&Ee.length>0&&Ee.forEach((gt,ur)=>{console.log(`🔍 App ${ur}:`,{id:gt.id,startup_id:gt.startup_id,opportunity_id:gt.opportunity_id,status:gt.status,diligence_status:gt.diligence_status,incubation_opportunities:gt.incubation_opportunities})});const yt=[...new Set((Ee==null?void 0:Ee.map(gt=>{var dr;const ur=gt.incubation_opportunities;return Array.isArray(ur)&&ur.length>0?(dr=ur[0])==null?void 0:dr.facilitator_id:ur==null?void 0:ur.facilitator_id}).filter(Boolean))||[])];let ot={};if(yt.length>0){const{data:gt,error:ur}=await G.from("users").select("id, name").in("id",yt);ur?console.error("Error fetching facilitators:",ur):ot=(gt||[]).reduce((dr,Hr)=>(dr[Hr.id]=Hr.name,dr),{})}console.log("👥 Facilitator names:",ot),console.log("🔍 Applications before filtering:",Ee),console.log('🔍 Applications with status "accepted":',Ee==null?void 0:Ee.filter(gt=>gt.status==="accepted")),console.log('🔍 Applications with diligence_status "requested":',Ee==null?void 0:Ee.filter(gt=>gt.diligence_status==="requested")),console.log("🔍 Applications that will pass filter:",Ee==null?void 0:Ee.filter(gt=>gt.status==="accepted"||gt.diligence_status==="requested"));const ut=X.map(gt=>({id:`investment_${gt.id}`,from:gt.investorName||gt.investorEmail||"Unknown Investor",type:"Investment",offerDetails:`${Or(gt.offerAmount,u)} for ${gt.equityPercentage}% equity`,status:gt.status,code:gt.id.toString(),createdAt:gt.createdAt,isInvestmentOffer:!0,investmentOfferId:gt.id,startupScoutingFee:gt.startup_scouting_fee_paid||0,investorScoutingFee:gt.investor_scouting_fee_paid||0,contactDetailsRevealed:gt.contact_details_revealed||!1})),Lt=(Ee||[]).filter(gt=>{const ur=gt.status==="accepted"||gt.diligence_status==="requested";return console.log(`🔍 App ${gt.id}: status=${gt.status}, diligence_status=${gt.diligence_status}, passesFilter=${ur}`),ur}).map(gt=>{console.log(`📝 Processing app ${gt.id}:`,gt);const ur=gt.status==="accepted",dr=gt.diligence_status==="requested",Hr=gt.diligence_status==="approved",Gt=(()=>{var ma;const Ut=gt.incubation_opportunities;return Array.isArray(Ut)&&Ut.length>0?ot[(ma=Ut[0])==null?void 0:ma.facilitator_id]||"Program Facilitator":ot[Ut==null?void 0:Ut.facilitator_id]||"Program Facilitator"})();let Gr,Qr,Da;dr&&!Hr?(Gr="Due Diligence",Qr=`Request for Compliance access until ${new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0]}`,Da="pending"):Hr?(Gr="Due Diligence",Qr="Compliance access granted",Da="accepted"):ur&&!dr?(Gr="Incubation",Qr="Accepted into Program",Da="accepted"):ur&&dr?(Gr="Incubation",Qr="Accepted into Program - Diligence may be requested later",Da="accepted"):(Gr="Incubation",Qr="Application Submitted",Da="pending");const Er={id:gt.id,from:Gt,type:Gr,offerDetails:Qr,status:Da,code:(()=>{var ma;const Ut=gt.incubation_opportunities;return Array.isArray(Ut)&&Ut.length>0?((ma=Ut[0])==null?void 0:ma.facilitator_code)||"FAC-XXXXXX":(Ut==null?void 0:Ut.facilitator_code)||"FAC-XXXXXX"})(),agreementUrl:gt.agreement_url,applicationId:gt.id,createdAt:gt.created_at};return console.log("📝 Created offer:",Er),Er}),qt=[...ut,...Lt].sort((gt,ur)=>new Date(ur.createdAt).getTime()-new Date(gt.createdAt).getTime());console.log("🎯 Investment offers:",ut),console.log("🎯 Incubation offers:",Lt),console.log("🎯 Combined offers array:",qt),console.log("🎯 Final offers count:",qt.length),console.log("🎯 Setting offersReceived state to:",qt),Wr(qt),console.log("🎯 State set complete")}catch(X){console.error("Error loading offers received:",X),Wr([])}},oc=async X=>{if(e!=null&&e.id){if(X.status==="accepted"||yn){console.log("⚠️ Offer already accepted or processing, preventing duplicate acceptance");return}Yr(!0);try{console.log("🔄 Accepting diligence request for offer:",X.id),console.log("📋 Offer details:",{id:X.id,applicationId:X.applicationId,type:X.type,status:X.status,from:X.from});const{data:Ee,error:lt}=await G.from("opportunity_applications").select("diligence_status").eq("id",X.applicationId).single();if(lt)throw console.error("Error checking current status:",lt),lt;if(Ee.diligence_status==="approved"){console.log("⚠️ Diligence already approved in database"),await si();return}if(!window.confirm("By accepting this due diligence request, you are granting the facilitator view-only access to your compliance tab. Do you want to continue?")){Yr(!1);return}let ot=null;try{const{data:gt,error:ur}=await G.rpc("safe_update_diligence_status",{p_application_id:X.applicationId,p_new_status:"approved",p_old_status:"requested"});if(ur)throw console.error("RPC function error:",ur),ur;ot=gt}catch(gt){throw console.error("RPC function failed:",gt),gt}if(!ot){console.log("⚠️ Diligence was already approved or status changed"),await si();return}const{data:ut,error:Lt}=await G.from("opportunity_applications").select("agreement_url").eq("id",X.applicationId).single();Lt&&console.warn("Could not fetch updated agreement URL:",Lt),console.log("✅ Diligence request approved in database"),console.log("🔄 Updating local state for offer:",X.id),Wr(gt=>{const ur=gt.map(dr=>dr.id===X.id?{...dr,status:"accepted",type:"Due Diligence",offerDetails:"Compliance access granted",agreementUrl:(ut==null?void 0:ut.agreement_url)||dr.agreementUrl}:dr);return console.log("🔄 Local state updated:",ur),ur}),await si();const qt=document.createElement("div");qt.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",qt.innerHTML=`
                <div class="bg-white rounded-lg p-6 max-w-sm mx-4 text-center">
                    <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Due Diligence Accepted!</h3>
                    <p class="text-gray-600 mb-4">The facilitator now has view-only access to your compliance tab.</p>
                    <button onclick="this.parentElement.parentElement.remove()" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors">
                        Continue
                    </button>
                </div>
            `,document.body.appendChild(qt)}catch(Ee){console.error("Error accepting diligence request:",Ee);let lt="Failed to accept diligence request. Please try again.";Ee&&typeof Ee=="object"&&"message"in Ee&&(lt=`Error: ${Ee.message}`),alert(lt)}finally{Yr(!1)}}},ji=async X=>{try{console.log("📥 Downloading agreement from:",X);const Ee=document.createElement("a");Ee.href=X,Ee.download=`facilitation-agreement-${Date.now()}.pdf`,Ee.target="_blank",Ee.rel="noopener noreferrer",document.body.appendChild(Ee),Ee.click(),document.body.removeChild(Ee),console.log("✅ Agreement download initiated")}catch(Ee){console.error("Error downloading agreement:",Ee),alert("Failed to download agreement. Please try again.")}},Hs=async X=>{if(X.investmentOfferId)try{console.log("💰 Accepting investment offer:",X.investmentOfferId);try{await Wn.acceptOfferSimple(X.investmentOfferId),console.log("✅ Investment offer accepted successfully (simple)"),alert("Investment offer accepted! Contact details have been revealed to both parties.")}catch(Ee){console.log("⚠️ Simple accept failed, trying with fee:",Ee),await Wn.acceptOfferWithFee(X.investmentOfferId,"United States",e.totalFunding||0),console.log("✅ Investment offer accepted successfully with investor scouting fee"),alert("Investment offer accepted! Investor scouting fee has been paid. Contact details will be revealed based on investment advisor assignment.")}await si()}catch(Ee){console.error("Error accepting investment offer:",Ee),alert("Failed to accept investment offer. Please try again.")}},lc=async X=>{if(X.investmentOfferId)try{console.log("💰 Rejecting investment offer:",X.investmentOfferId),await Wn.rejectOffer(X.investmentOfferId),await si(),console.log("✅ Investment offer rejected successfully"),alert("Investment offer rejected successfully.")}catch(Ee){console.error("Error rejecting investment offer:",Ee),alert("Failed to reject investment offer. Please try again.")}};if(j)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-600",children:"Loading cap table data..."})]})});if(S)return n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-red-600 mb-4",children:S}),n.jsx(Oe,{onClick:lr,children:"Retry"})]});try{return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(et,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Current Valuation"}),n.jsx("p",{className:"text-2xl font-bold",children:(()=>{if(E.length>0){const X=[...E].sort((lt,yt)=>new Date(yt.date).getTime()-new Date(lt.date).getTime())[0],Ee=X==null?void 0:X.postMoneyValuation;if(Ee&&Ee>0)return Or(Ee,u)}return Or(e.currentValuation,u)})()})]}),n.jsxs(et,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Shares"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-2xl font-bold text-slate-900",children:(()=>{const X=B.reduce((ot,ut)=>ot+(ut.shares||0),0),Ee=E.reduce((ot,ut)=>ot+(ut.shares||0),0),lt=e.esopReservedShares||0;return(X+Ee+lt).toLocaleString()})()}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Calculated automatically"})]}),n.jsx("div",{className:"text-right",children:n.jsx("p",{className:"text-sm text-slate-500",children:(()=>{const X=B.reduce((ot,ut)=>ot+(ut.shares||0),0),Ee=E.reduce((ot,ut)=>ot+(ut.shares||0),0),lt=e.esopReservedShares||0,yt=X+Ee+lt;if(yt>0){let ot=e.currentValuation||0;if(E&&E.length>0){const Lt=[...E].sort((qt,gt)=>new Date(gt.date).getTime()-new Date(qt.date).getTime())[0];Lt!=null&&Lt.postMoneyValuation&&Lt.postMoneyValuation>0&&(ot=Lt.postMoneyValuation)}const ut=ot/yt;return`Price/Share: ${Or(ut,u)}`}return"Price/Share: —"})()})})]}),(()=>{const X=B.reduce((ot,ut)=>ot+(ut.shares||0),0),Ee=E.reduce((ot,ut)=>ot+(ut.shares||0),0),lt=e.esopReservedShares||0,yt=X+Ee+lt;return yt>0?n.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-200",children:[n.jsx("p",{className:"text-xs font-medium text-slate-600 mb-2",children:"Shares Allocation"}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-500",children:"Founders:"}),n.jsx("span",{className:"text-slate-700",children:X.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-500",children:"Investors:"}),n.jsx("span",{className:"text-slate-700",children:Ee.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-500",children:"ESOP Reserved:"}),n.jsx("span",{className:"text-slate-700",children:lt.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between font-medium pt-1 border-t border-slate-100",children:[n.jsx("span",{className:"text-slate-600",children:"Total:"}),n.jsx("span",{className:"text-slate-900 font-bold",children:yt.toLocaleString()})]})]})]}):null})()]}),n.jsxs(et,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Funding"}),n.jsx("p",{className:"text-2xl font-bold",children:(()=>{const X=E.filter(yt=>yt.investmentType===qi.Equity).reduce((yt,ot)=>yt+(ot.amount||0),0),Ee=E.filter(yt=>yt.investmentType===qi.Debt).reduce((yt,ot)=>yt+(ot.amount||0),0),lt=E.filter(yt=>yt.investmentType===qi.Grant).reduce((yt,ot)=>yt+(ot.amount||0),0);return Or(X+Ee+lt,u)})()})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsxs(et,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Investments"}),n.jsx("p",{className:"text-xl font-bold",children:E.length})]}),n.jsxs(et,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Equity Funding"}),n.jsx("p",{className:"text-xl font-bold",children:c2(E.filter(X=>X.investmentType===qi.Equity).reduce((X,Ee)=>X+(Ee.amount||0),0),u)})]}),n.jsxs(et,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Debt Funding"}),n.jsx("p",{className:"text-xl font-bold",children:c2(E.filter(X=>X.investmentType===qi.Debt).reduce((X,Ee)=>X+(Ee.amount||0),0),u)})]}),n.jsxs(et,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Grant Funding"}),n.jsx("p",{className:"text-xl font-bold",children:c2(E.filter(X=>X.investmentType===qi.Grant).reduce((X,Ee)=>X+(Ee.amount||0),0),u)})]})]}),at&&n.jsxs(et,{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Ps,{className:"w-5 h-5 text-blue-600"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Company Information"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[at.country_of_registration&&n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Country of Registration"}),n.jsx("p",{className:"text-sm text-slate-600",children:at.country_of_registration})]}),at.company_type&&n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Company Type"}),n.jsx("p",{className:"text-sm text-slate-600",children:at.company_type})]}),at.registration_date&&n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Registration Date"}),n.jsx("p",{className:"text-sm text-slate-600",children:new Date(at.registration_date).toLocaleDateString()})]}),at.currency&&n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Currency"}),n.jsx("p",{className:"text-sm text-slate-600",children:at.currency})]}),at.total_shares&&n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Total Shares (Profile)"}),n.jsx("p",{className:"text-sm text-slate-600",children:at.total_shares.toLocaleString()})]}),at.price_per_share&&n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Price Per Share (Profile)"}),n.jsx("p",{className:"text-sm text-slate-600",children:Or(at.price_per_share,at.currency||u)})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsxs(et,{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Valuation History"}),n.jsx(Oe,{variant:"outline",size:"sm",onClick:async()=>{console.log("🔄 Manual refresh of investment data...");try{const X=await ha.getInvestmentRecords(e.id);T(X),console.log("✅ Investment records manually refreshed")}catch(X){console.error("Error refreshing investment records:",X)}},title:"Refresh chart data",children:n.jsx(md,{className:"h-4 w-4"})})]}),Mr.length>0?n.jsx("div",{style:{width:"100%",height:300},children:n.jsx(ti,{width:"100%",height:"100%",children:n.jsxs(Pv,{data:Mr,children:[n.jsx(eu,{strokeDasharray:"3 3"}),n.jsx(ac,{dataKey:"name",fontSize:12}),n.jsx(dl,{yAxisId:"left",orientation:"left",stroke:"#16a34a",fontSize:12,tickFormatter:X=>nd(X,u)}),n.jsx(dl,{yAxisId:"right",orientation:"right",stroke:"#3b82f6",fontSize:12,tickFormatter:X=>nd(X,u)}),n.jsx(ei,{formatter:X=>Or(X,u)}),n.jsx(Es,{}),n.jsx(fd,{yAxisId:"left",dataKey:"valuation",fill:"#16a34a",name:"Valuation"}),n.jsx(fd,{yAxisId:"right",dataKey:"investment",fill:"#3b82f6",name:"Investment"})]})})}):n.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:n.jsxs("div",{children:[n.jsx(md,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500 mb-2",children:"No valuation history available"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Add investment records to see valuation trends"})]})})]}),n.jsxs(et,{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Equity Holdings"}),n.jsx(Oe,{variant:"outline",size:"sm",onClick:async()=>{console.log("🔄 Manual refresh of investment and founder data...");try{const[X,Ee]=await Promise.all([ha.getInvestmentRecords(e.id),ha.getFounders(e.id)]);T(X),U(Ee),console.log("✅ Investment and founder data manually refreshed")}catch(X){console.error("Error refreshing investment and founder data:",X)}},title:"Refresh chart data",children:n.jsx(ww,{className:"h-4 w-4"})})]}),(()=>{const X=B.reduce((ot,ut)=>ot+(ut.shares||0),0),Ee=E.reduce((ot,ut)=>ot+(ut.shares||0),0),lt=e.esopReservedShares||0,yt=X+Ee+lt;return null})(),wi.length>0?n.jsx("div",{style:{width:"100%",height:300},children:n.jsx(ti,{width:"100%",height:"100%",children:n.jsxs(yf,{children:[n.jsx(Qc,{data:wi,cx:"50%",cy:"50%",labelLine:!1,outerRadius:110,fill:"#8884d8",dataKey:"value",nameKey:"name",label:({name:X,percent:Ee})=>`${X} ${(Ee*100).toFixed(0)}%`,children:wi.map((X,Ee)=>n.jsx(ul,{fill:ck[Ee%ck.length]},`cell-${Ee}`))}),n.jsx(ei,{formatter:X=>`${X}%`}),n.jsx(Es,{})]})})}):n.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:n.jsxs("div",{children:[n.jsx(ww,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500 mb-2",children:"No equity distribution available"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Add founders and investments to see equity breakdown"})]})})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs(et,{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Founder Information"}),n.jsxs(Oe,{variant:"outline",size:"sm",onClick:ni,disabled:!P,children:[n.jsx(lf,{className:"h-4 w-4 mr-2"}),"Edit"]})]}),n.jsx("div",{className:"space-y-4",children:B&&B.length>0?B.map((X,Ee)=>n.jsx("div",{className:"border-b border-slate-200 pb-3 last:border-b-0",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:X.name}),n.jsx("p",{className:"text-sm text-slate-500",children:X.email})]}),n.jsx("div",{className:"text-right",children:(()=>{const lt=B.reduce((qt,gt)=>qt+(gt.shares||0),0),yt=E.reduce((qt,gt)=>qt+(gt.shares||0),0),ot=e.esopReservedShares||0,ut=lt+yt+ot;console.log("🔍 Founder equity check:",{name:X.name,equityPercentage:X.equityPercentage,equityType:typeof X.equityPercentage,shares:X.shares,sharesType:typeof X.shares,calculatedTotalShares:ut});const Lt=X.shares&&ut>0?X.shares/ut*100:X.equityPercentage||0;return X.shares&&X.shares>0?n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-slate-700",children:[Lt.toFixed(1),"% Equity"]}),n.jsxs("p",{className:"text-xs text-slate-500",children:[X.shares.toLocaleString()," shares"]}),Lt>100&&n.jsx("p",{className:"text-xs text-red-500 font-medium",children:"⚠️ Exceeds total shares"})]}):X.equityPercentage&&X.equityPercentage>0?n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-slate-700",children:[X.equityPercentage.toFixed(1),"% Equity"]}),n.jsx("p",{className:"text-xs text-slate-500",children:"No shares specified"})]}):n.jsx("p",{className:"text-sm text-slate-400",children:"No equity data"})})()})]})},Ee)):n.jsx("p",{className:"text-sm text-slate-500",children:"No founder information available."})})]}),n.jsxs(et,{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Fundraising"}),ee.active&&n.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Active"})]}),K?n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Oe,{variant:"secondary",size:"sm",onClick:()=>le(!1),children:n.jsx(Ql,{className:"h-4 w-4"})}),n.jsx(Oe,{size:"sm",onClick:Un,disabled:j,children:j?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Dv,{className:"h-4 w-4 mr-2"}),"Save"]})})]}):n.jsxs(Oe,{variant:"outline",size:"sm",onClick:()=>le(!0),disabled:!P,children:[n.jsx(lf,{className:"h-4 w-4 mr-2"}),"Edit"]})]}),K?n.jsx("fieldset",{disabled:!K,children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"fundraising-active",className:"h-4 w-4 rounded border-gray-300 text-brand-primary focus:ring-brand-primary",checked:ee.active,onChange:X=>me({...ee,active:X.target.checked})}),n.jsx("label",{htmlFor:"fundraising-active",className:"ml-2 block text-sm text-gray-900",children:"Activate Fundraising Round"})]}),n.jsx(wo,{label:"Type",id:"fr-type",value:ee.type,onChange:X=>me({...ee,type:X.target.value}),children:Object.values(va).map(X=>n.jsx("option",{value:X,children:X},X))}),n.jsx(Ot,{label:"Value",id:"fr-value",type:"number",value:ee.value,onChange:X=>me({...ee,value:Number(X.target.value)})}),n.jsx(Ot,{label:"Equity",id:"fr-equity",type:"number",value:ee.equity,onChange:X=>me({...ee,equity:Number(X.target.value)})}),n.jsx(Ot,{label:"Pitch Deck",id:"fr-deck",type:"file"}),n.jsx(Ot,{label:"Pitch Video (YouTube Link)",id:"fr-video",type:"url",placeholder:"https://www.youtube.com/watch?v=...",value:ee.pitchVideoUrl||"",onChange:X=>me({...ee,pitchVideoUrl:X.target.value})}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"fr-validation",className:"h-4 w-4 rounded border-gray-300 text-brand-primary focus:ring-brand-primary",checked:ee.validationRequested,onChange:X=>me({...ee,validationRequested:X.target.checked})}),n.jsx("label",{htmlFor:"fr-validation",className:"ml-2 block text-sm text-gray-900",children:"Startup Nation Validation Requested"})]}),ee.validationRequested&&n.jsx("div",{className:"p-3 bg-blue-50 border-l-4 border-brand-accent text-sm text-slate-600",children:"Startup Nation will charge 3% of fund raised or 4% to total equity raised as fees for validation, documentation and connection."})]})}):n.jsx("div",{className:"space-y-4",children:I.length>0?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700",children:"Round Type"}),n.jsx("p",{className:"text-slate-600",children:ee.type})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700",children:"Target Value"}),n.jsx("p",{className:"text-slate-600",children:Or(ee.value,u)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700",children:"Equity Offered"}),n.jsxs("p",{className:"text-slate-600",children:[ee.equity,"%"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700",children:"Status"}),n.jsx("p",{className:"text-slate-600",children:ee.active?"Active":"Inactive"})]})]}),ee.pitchDeckUrl&&n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700 mb-2",children:"Pitch Deck"}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>window.open(ee.pitchDeckUrl,"_blank"),children:[n.jsx(gi,{className:"h-4 w-4 mr-2"}),"View Pitch Deck"]})]}),ee.pitchVideoUrl&&n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700 mb-2",children:"Pitch Video"}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>window.open(ee.pitchVideoUrl,"_blank"),children:[n.jsx(gi,{className:"h-4 w-4 mr-2"}),"Watch Video"]})]}),ee.validationRequested&&n.jsxs("div",{className:"p-3 bg-blue-50 border-l-4 border-brand-accent text-sm text-slate-600",children:[n.jsx("p",{className:"font-medium",children:"Startup Nation Validation Requested"}),n.jsx("p",{children:"3% of fund raised or 4% of total equity raised as fees for validation, documentation and connection."})]})]}):n.jsxs("div",{className:"text-center py-6",children:[n.jsx("p",{className:"text-slate-500 mb-2",children:"No fundraising details configured"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Click Edit to set up your fundraising round"})]})})]})]})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Offers Received"}),l&&n.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Debug Info:"})," Loading offers for startup ID: ",e.id," | Offers loaded: ",Oa.length," | User role: ",t," | View only: ",l?"Yes":"No"]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"From"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Offer Details"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Scouting Fees"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions / Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Code"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-slate-200",children:[Oa.map(X=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:X.from}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:X.type}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:X.offerDetails}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:X.type==="Investment"?n.jsxs("div",{className:"text-xs",children:[n.jsxs("div",{children:["Startup: ",Or(X.startupScoutingFee||0)]}),n.jsxs("div",{children:["Investor: ",Or(X.investorScoutingFee||0)]})]}):n.jsx("span",{className:"text-slate-400",children:"N/A"})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[X.type==="Incubation"&&X.status==="accepted"&&X.agreementUrl&&n.jsxs("button",{onClick:()=>ji(X.agreementUrl),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[n.jsx(gi,{className:"h-4 w-4"}),"Download Agreement"]}),X.type==="Due Diligence"&&X.status==="pending"&&n.jsxs(Oe,{size:"sm",onClick:()=>oc(X),disabled:yn||X.status!=="pending",className:"flex items-center gap-1",children:[n.jsx(_o,{className:"h-4 w-4"}),yn?"Accepting...":"Accept Request"]}),X.type==="Due Diligence"&&X.status==="accepted"&&X.agreementUrl&&n.jsxs("button",{onClick:()=>ji(X.agreementUrl),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[n.jsx(gi,{className:"h-4 w-4"}),"Download Agreement"]}),X.type==="Due Diligence"&&X.status==="accepted"&&!X.agreementUrl&&n.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[n.jsx(_o,{className:"h-4 w-4"}),"Accepted"]}),X.type==="Investment"&&(X.status==="pending"||X.status==="startup_advisor_approved")&&n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Oe,{size:"sm",onClick:()=>Hs(X),className:"bg-green-600 hover:bg-green-700 text-white",children:[n.jsx(_o,{className:"h-4 w-4 mr-1"}),"Accept"]}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>lc(X),className:"border-red-300 text-red-600 hover:bg-red-50",children:[n.jsx(Ql,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),X.type==="Investment"&&X.status==="accepted"&&n.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[n.jsx(_o,{className:"h-4 w-4"}),"Accepted"]}),X.type==="Investment"&&X.status==="rejected"&&n.jsxs("span",{className:"text-red-600 flex items-center gap-1",children:[n.jsx(Ql,{className:"h-4 w-4"}),"Rejected"]})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:X.code})]},X.id)),Oa.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-slate-500",children:l?n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm",children:"No offers or opportunities received yet."}),n.jsx("p",{className:"text-xs text-slate-400",children:"This startup hasn't applied to any incubation programs or received investment offers."})]}):"No offers received yet."})})]})]})})]}),n.jsxs(Yn,{isOpen:ke,onClose:()=>Ae(!1),title:"Edit Founder Information",children:[n.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[xe.map((X,Ee)=>n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2 relative border p-4 rounded-lg bg-slate-50/50",children:[n.jsx(Ot,{label:`Founder ${Ee+1} Name`,id:`founder-name-${X.id}`,type:"text",value:X.name,onChange:lt=>bn(X.id,"name",lt.target.value),required:!0}),n.jsx(Ot,{label:`Founder ${Ee+1} Email`,id:`founder-email-${X.id}`,type:"email",value:X.email,onChange:lt=>bn(X.id,"email",lt.target.value),required:!0}),n.jsx(Ot,{label:"Equity Percentage (%)",id:`founder-equity-${X.id}`,type:"number",step:"0.1",min:"0",max:"100",value:X.equityPercentage||"",onChange:lt=>bn(X.id,"equityPercentage",lt.target.value),placeholder:"e.g., 25.5"}),n.jsx(Ot,{label:"Shares",id:`founder-shares-${X.id}`,type:"number",min:"0",value:X.shares||"",onChange:lt=>bn(X.id,"shares",lt.target.value),placeholder:"e.g., 1000000"}),xe.length>1&&n.jsx(Oe,{type:"button",onClick:()=>cu(X.id),className:"absolute top-2 right-2 p-1.5 h-auto bg-transparent hover:bg-red-100 text-slate-400 hover:text-red-500 shadow-none border-none",variant:"secondary",size:"sm","aria-label":"Remove founder",children:n.jsx(qa,{className:"h-4 w-4"})})]},X.id)),n.jsxs(Oe,{type:"button",variant:"outline",size:"sm",onClick:gl,children:[n.jsx(OQ,{className:"h-4 w-4 mr-2"}),"Add Another Founder"]}),xe.length>0&&n.jsxs("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg border",children:[n.jsx("h4",{className:"text-sm font-medium text-slate-700 mb-3",children:"Shares Allocation Summary"}),(()=>{const X=xe.reduce((ot,ut)=>ot+(ut.shares||0),0),Ee=E.reduce((ot,ut)=>ot+(ut.shares||0),0),lt=e.esopReservedShares||0,yt=X+Ee+lt;return n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Founder Shares:"}),n.jsx("span",{className:"text-slate-700",children:X.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Investor Shares:"}),n.jsx("span",{className:"text-slate-700",children:Ee.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"ESOP Reserved:"}),n.jsx("span",{className:"text-slate-700",children:lt.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between font-medium pt-2 border-t border-slate-200",children:[n.jsx("span",{className:"text-slate-600",children:"Total Shares:"}),n.jsx("span",{className:"text-slate-900 font-bold",children:yt.toLocaleString()})]})]})})()]})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t mt-4",children:[n.jsx(Oe,{type:"button",variant:"secondary",onClick:()=>Ae(!1),children:"Cancel"}),n.jsx(Oe,{type:"button",onClick:Do,children:"Save Changes"})]})]}),n.jsxs(Yn,{isOpen:ve,onClose:()=>Z(!1),title:"Delete Investment",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("p",{className:"text-slate-600",children:["Are you sure you want to delete the investment from"," ",n.jsx("span",{className:"font-semibold",children:te==null?void 0:te.investorName}),"?"]}),n.jsx("p",{className:"text-sm text-slate-500",children:"This action cannot be undone. The investment record will be permanently removed."})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t mt-4",children:[n.jsx(Oe,{type:"button",variant:"secondary",onClick:()=>Z(!1),children:"Cancel"}),n.jsx(Oe,{type:"button",variant:"destructive",onClick:()=>te&&xl(te),children:"Delete Investment"})]})]}),n.jsx(Yn,{isOpen:Ce,onClose:()=>ze(!1),title:"Edit Recognition Record",children:n.jsxs("form",{onSubmit:bi,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Program Name"}),n.jsx("input",{type:"text",name:"rec-program-name",defaultValue:(Pe==null?void 0:Pe.programName)||"",className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Facilitator Name"}),n.jsx("input",{type:"text",name:"rec-facilitator-name",defaultValue:(Pe==null?void 0:Pe.facilitatorName)||"",className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Facilitator Code"}),n.jsx("input",{type:"text",name:"rec-facilitator-code",defaultValue:(Pe==null?void 0:Pe.facilitatorCode)||"",className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Incubation Type"}),n.jsxs("select",{name:"rec-incubation-type",defaultValue:(Pe==null?void 0:Pe.incubationType)||"",className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[n.jsx("option",{value:"",children:"Select Type"}),n.jsx("option",{value:"Incubation Center",children:"Incubation Center"}),n.jsx("option",{value:"Accelerator Program",children:"Accelerator Program"}),n.jsx("option",{value:"Government Scheme",children:"Government Scheme"}),n.jsx("option",{value:"Private Program",children:"Private Program"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Fee Type"}),n.jsxs("select",{name:"rec-fee-type",defaultValue:(Pe==null?void 0:Pe.feeType)||"",className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[n.jsx("option",{value:"",children:"Select Fee Type"}),n.jsx("option",{value:"Free",children:"Free"}),n.jsx("option",{value:"Paid",children:"Paid"}),n.jsx("option",{value:"Equity",children:"Equity"}),n.jsx("option",{value:"Revenue Share",children:"Revenue Share"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Fee Amount"}),n.jsx("input",{type:"number",name:"rec-fee-amount",defaultValue:(Pe==null?void 0:Pe.feeAmount)||"",step:"0.01",className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Shares"}),n.jsx("input",{type:"number",name:"rec-shares",defaultValue:(Pe==null?void 0:Pe.shares)||"",className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Price per Share"}),n.jsx("input",{type:"number",name:"rec-price-per-share",defaultValue:(Pe==null?void 0:Pe.pricePerShare)||"",step:"0.01",className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Investment Amount"}),n.jsx("input",{type:"number",name:"rec-amount",defaultValue:(Pe==null?void 0:Pe.investmentAmount)||"",step:"0.01",className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Equity Allocated (%)"}),n.jsx("input",{type:"number",name:"rec-equity",defaultValue:(Pe==null?void 0:Pe.equityAllocated)||"",step:"0.01",min:"0",max:"100",className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Post-Money Valuation"}),n.jsx("input",{type:"number",name:"rec-postmoney",defaultValue:(Pe==null?void 0:Pe.postMoneyValuation)||"",step:"0.01",className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Signed Agreement (Optional)"}),n.jsx("input",{type:"file",name:"rec-agreement",accept:".pdf,.doc,.docx",className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(Pe==null?void 0:Pe.signedAgreementUrl)&&n.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["Current file: ",n.jsx("a",{href:Pe.signedAgreementUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"View current agreement"})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t mt-4",children:[n.jsx(Oe,{type:"button",variant:"secondary",onClick:()=>ze(!1),children:"Cancel"}),n.jsx(Oe,{type:"submit",disabled:j,children:j?"Updating...":"Update Recognition Record"})]})]})}),n.jsxs(Yn,{isOpen:ae,onClose:()=>qe(!1),title:"Delete Recognition Record",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("p",{className:"text-slate-600",children:["Are you sure you want to delete the recognition record for"," ",n.jsx("span",{className:"font-semibold",children:ft==null?void 0:ft.programName}),"?"]}),n.jsx("p",{className:"text-sm text-slate-500",children:"This action cannot be undone. The recognition record will be permanently removed."})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t mt-4",children:[n.jsx(Oe,{type:"button",variant:"secondary",onClick:()=>qe(!1),children:"Cancel"}),n.jsx(Oe,{type:"button",variant:"destructive",onClick:()=>ft&&Vr(ft.id),children:"Delete Recognition Record"})]})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Recognition and Incubation"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-sm",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Program Name"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Facilitator"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Fee Type"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Fee Amount"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Shares"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Price per Share"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Investment Amount"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Equity (%)"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Date Added"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Signed Agreement"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Actions"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-slate-200",children:[D.map(X=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2 font-medium text-slate-900",children:X.programName}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:X.facilitatorName}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:n.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${X.feeType==="Equity"?"bg-green-100 text-green-800":X.feeType==="Hybrid"?"bg-blue-100 text-blue-800":X.feeType==="Fees"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:X.feeType})}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:X.feeAmount?`${u} ${X.feeAmount.toLocaleString()}`:"—"}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:(X.feeType==="Equity"||X.feeType==="Hybrid")&&X.shares?X.shares.toLocaleString():"—"}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:(X.feeType==="Equity"||X.feeType==="Hybrid")&&X.pricePerShare?`${u} ${X.pricePerShare.toFixed(2)}`:"—"}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:(X.feeType==="Equity"||X.feeType==="Hybrid")&&X.investmentAmount?`${u} ${X.investmentAmount.toLocaleString()}`:"—"}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:(X.feeType==="Equity"||X.feeType==="Hybrid")&&X.equityAllocated?`${X.equityAllocated.toFixed(2)}%`:"—"}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:X.dateAdded}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:n.jsxs("a",{href:X.signedAgreementUrl,className:"flex items-center text-brand-primary hover:underline",children:[n.jsx(gi,{className:"h-4 w-4 mr-1"})," View Document"]})}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>wl(X),className:"text-blue-600 border-blue-600 hover:bg-blue-50",title:"Edit recognition record",children:n.jsx(Gl,{className:"h-4 w-4"})}),n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>uu(X),className:"text-red-600 border-red-600 hover:bg-red-50",title:"Delete recognition record",children:n.jsx(qa,{className:"h-4 w-4"})})]})})]},X.id)),D.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:11,className:"text-center py-6 text-slate-500",children:"No recognitions added yet."})})]})]})})]}),n.jsxs(et,{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Investor List"}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:Os,className:"flex items-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download Fund Utilization Report (PDF)"]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-sm",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Investor Name"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Investor Code"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Amount"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Equity"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Post-Money"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Fund Utilization"}),n.jsx("th",{className:"px-4 py-2 text-right font-medium text-slate-500",children:"Actions"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-slate-200",children:[E.map(X=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2 font-medium text-slate-900",children:X.investorName}),n.jsx("td",{className:"px-4 py-2 text-slate-500 font-mono text-xs",children:X.investorCode?n.jsx("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded border border-blue-200",children:X.investorCode}):n.jsx("span",{className:"text-slate-400",children:"No code"})}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:Or(X.amount,u)}),n.jsxs("td",{className:"px-4 py-2 text-slate-500",children:[X.equityAllocated,"%"]}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:Or(X.postMoneyValuation||(X.equityAllocated&&X.equityAllocated>0?X.amount*100/X.equityAllocated:0),u)}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:(()=>{const Ee=Ln(X.investorName,X.amount);return n.jsx(Ro,{utilized:Ee.utilized,total:X.amount,percentage:Ee.percentage})})()}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>Xi(X),className:"text-blue-600 border-blue-300 hover:bg-blue-50",title:"Download Fund Utilization Report (PDF)",children:n.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),n.jsx(Oe,{size:"sm",variant:"outline",disabled:!P,onClick:()=>bl(X),children:n.jsx(lf,{className:"h-4 w-4"})}),P&&n.jsx(Oe,{size:"sm",variant:"outline",className:"text-red-600 border-red-300 hover:bg-red-50",onClick:()=>{re(X),Z(!0)},children:n.jsx(qa,{className:"h-4 w-4"})})]})})]},X.id)),E.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-6 text-slate-500",children:"No investments added yet."})})]})]})})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Incubation & Acceleration Programs"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-sm",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Program Name"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Program Type"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Start Date"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"End Date"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Status"}),n.jsx("th",{className:"px-4 py-2 text-right font-medium text-slate-500",children:"Actions"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-slate-200",children:[Bt.map(X=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2 font-medium text-slate-900",children:X.programName}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:X.programType}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:X.startDate}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:X.endDate}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${X.status==="Active"?"bg-green-100 text-green-800":X.status==="Completed"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:X.status})}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx(Oe,{size:"sm",variant:"outline",disabled:!P,onClick:()=>ic(X),children:n.jsx(lf,{className:"h-4 w-4"})})})]},X.id)),Bt.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"px-6 py-6 text-center text-slate-500",children:l?n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm",children:"No incubation programs enrolled yet."}),n.jsx("p",{className:"text-xs text-slate-400",children:"This startup hasn't joined any incubation or acceleration programs."})]}):"No incubation programs added yet."})})]})]})})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Add New Entry to Cap Table"}),S&&n.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-red-500 mr-2",children:"⚠️"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Form Error"}),n.jsx("p",{className:"text-sm",children:S})]})]})}),n.jsx("fieldset",{disabled:!P,children:n.jsxs("form",{onSubmit:yl,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Entry Type"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Oe,{type:"button",variant:oe==="investment"?"default":"outline",onClick:()=>Se("investment"),className:`flex-1 border-2 ${oe==="investment"?"border-blue-600":"border-slate-300"}`,children:"Investment"}),n.jsx(Oe,{type:"button",variant:oe==="recognition"?"default":"outline",onClick:()=>Se("recognition"),className:`flex-1 border-2 ${oe==="recognition"?"border-blue-600":"border-slate-300"}`,children:"Recognition / Incubation"})]})]}),oe==="investment"&&n.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[(()=>{const X=B.reduce((ot,ut)=>ot+(ut.shares||0),0),Ee=E.reduce((ot,ut)=>ot+(ut.shares||0),0),lt=e.esopReservedShares||0,yt=X+Ee+lt;return yt>0?n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[n.jsx("h4",{className:"text-sm font-medium text-slate-700 mb-2",children:"Shares Allocation Summary"}),n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Total Shares:"}),n.jsx("span",{className:"font-medium",children:yt.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Founder Shares:"}),n.jsx("span",{children:X.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Investor Shares:"}),n.jsx("span",{children:Ee.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"ESOP Reserved:"}),n.jsx("span",{children:lt.toLocaleString()})]})]})]}):null})(),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(Ot,{label:"Investment Date",name:"inv-date",id:"inv-date",type:"date",max:new Date().toISOString().split("T")[0],required:!0}),n.jsx(wo,{label:"Investor Type",name:"inv-investor-type",id:"inv-investor-type",required:!0,children:Object.values(ex).map(X=>n.jsx("option",{value:X,children:X},X))}),n.jsx(wo,{label:"Investment Type",name:"inv-type",id:"inv-type",required:!0,children:Object.values(qi).map(X=>n.jsx("option",{value:X,children:X},X))}),n.jsx(Ot,{label:"Investor Name",name:"inv-name",id:"inv-name",required:!0}),n.jsx(Ot,{label:"Investor Code",name:"inv-code",id:"inv-code",placeholder:"e.g., INV-A7B3C9"}),n.jsx(Ot,{label:"Number of Shares",name:"inv-shares",id:"inv-shares",type:"number",required:!0,value:It,onChange:X=>ir(X.target.value),placeholder:"e.g., 10000"}),n.jsx(Ot,{label:`Price per Share (${u})`,name:"inv-price-per-share",id:"inv-price-per-share",type:"number",step:"0.01",required:!0,value:St,onChange:X=>Ht(X.target.value),placeholder:"e.g., 1.50"}),n.jsx(Ot,{label:"Investment Amount (auto)",name:"inv-amount",id:"inv-amount",type:"number",readOnly:!0,value:Tt}),n.jsx(Ot,{label:"Equity Allocated (%) (auto)",name:"inv-equity",id:"inv-equity",type:"number",readOnly:!0,value:Ue}),n.jsx(Ot,{label:"Post-Money Valuation (auto)",name:"inv-postmoney",id:"inv-postmoney",type:"number",readOnly:!0,value:kt}),n.jsx(Ot,{label:"Proof of Investment",name:"inv-proof",id:"inv-proof",type:"file"})]})]}),oe==="recognition"&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t",children:[n.jsx(Ot,{label:"Program Name",name:"rec-program-name",id:"rec-program-name",required:!0,containerClassName:"md:col-span-2"}),n.jsx(Ot,{label:"Facilitator Name",name:"rec-facilitator-name",id:"rec-facilitator-name",required:!0}),n.jsx(Ot,{label:"Facilitator Code",name:"rec-facilitator-code",id:"rec-facilitator-code",placeholder:"e.g., FAC-D4E5F6",required:!0}),n.jsx(wo,{label:"Incubation Type",name:"rec-incubation-type",id:"rec-incubation-type",required:!0,children:Object.values(gk).map(X=>n.jsx("option",{value:X,children:X},X))}),n.jsx(wo,{label:"Fee Type",name:"rec-fee-type",id:"rec-fee-type",value:Y,onChange:X=>ye(X.target.value),required:!0,children:Object.values(Zu).map(X=>n.jsx("option",{value:X,children:X},X))}),(Y===Zu.Fees||Y===Zu.Hybrid)&&n.jsx(Ot,{label:"Fee Amount",name:"rec-fee-amount",id:"rec-fee-amount",type:"number",required:!0}),(Y===Zu.Equity||Y===Zu.Hybrid)&&n.jsxs(n.Fragment,{children:[n.jsx(Ot,{label:"Number of Shares",name:"rec-shares",id:"rec-shares",type:"number",required:!0,value:ar,onChange:X=>cr(X.target.value),placeholder:"e.g., 10000"}),n.jsx(Ot,{label:`Price per Share (${u})`,name:"rec-price-per-share",id:"rec-price-per-share",type:"number",step:"0.01",required:!0,value:Ur,onChange:X=>Ar(X.target.value),placeholder:"e.g., 1.50"}),n.jsx(Ot,{label:"Investment Amount (auto)",name:"rec-amount",id:"rec-amount",type:"number",readOnly:!0,value:or}),n.jsx(Ot,{label:"Equity Allocated (%) (auto)",name:"rec-equity",id:"rec-equity",type:"number",readOnly:!0,value:gr}),n.jsx(Ot,{label:"Post-Money Valuation (auto)",name:"rec-postmoney",id:"rec-postmoney",type:"number",readOnly:!0,value:nn})]}),n.jsx(Ot,{label:"Upload Signed Agreement",name:"rec-agreement",id:"rec-agreement",type:"file",required:!0,containerClassName:"md:col-span-2"})]}),n.jsx("div",{className:"flex items-end pt-4 border-t",children:n.jsxs(Oe,{type:"submit",children:[n.jsx(zi,{className:"h-4 w-4 mr-2"}),"Add Entry"]})})]})})]}),n.jsx(Yn,{isOpen:ht,onClose:()=>Dt(!1),title:"Delete Program",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("p",{children:['Are you sure you want to delete the program "',Ie==null?void 0:Ie.programName,'"?']}),n.jsx("p",{className:"text-sm text-slate-500",children:"This action cannot be undone."}),n.jsxs("div",{className:"flex gap-3 justify-end",children:[n.jsx(Oe,{type:"button",variant:"outline",onClick:()=>Dt(!1),children:"Cancel"}),n.jsx(Oe,{type:"button",variant:"destructive",onClick:()=>Ie&&du(Ie.id),children:"Delete Program"})]})]})}),n.jsx(Yn,{isOpen:$,onClose:()=>ne(!1),title:"Edit Investment",children:W&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Investment Date"}),n.jsx("input",{type:"date",value:W.investmentDate,onChange:X=>be({...W,investmentDate:X.target.value}),max:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Investor Type"}),n.jsx("select",{value:W.investorType||"Individual",onChange:X=>be({...W,investorType:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:Object.values(ex).map(X=>n.jsx("option",{value:X,children:X},X))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Investment Type"}),n.jsx("select",{value:W.investmentType,onChange:X=>be({...W,investmentType:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:Object.values(qi).map(X=>n.jsx("option",{value:X,children:X},X))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Investor Name"}),n.jsx("input",{type:"text",value:W.investorName,onChange:X=>be({...W,investorName:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Investor Code"}),n.jsx("input",{type:"text",value:W.investorCode||"",onChange:X=>be({...W,investorCode:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., INV-A7B3C9"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Shares"}),n.jsx("input",{type:"number",value:W.shares||0,onChange:X=>be({...W,shares:parseInt(X.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 10000",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Price per Share (",u,")"]}),n.jsx("input",{type:"number",step:"0.01",value:W.pricePerShare||0,onChange:X=>be({...W,pricePerShare:parseFloat(X.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 1.50",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Investment Amount (auto)"}),n.jsx("input",{type:"number",value:((W.shares||0)*(W.pricePerShare||0)).toFixed(2),readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equity Allocated (%) (auto)"}),n.jsx("input",{type:"number",value:W.equityAllocated||0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Post-Money Valuation (auto)"}),n.jsx("input",{type:"number",value:W.postMoneyValuation||0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Proof of Investment"}),n.jsx("input",{type:"file",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png"}),W.proofOfInvestment&&n.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Current file: ",W.proofOfInvestment]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{value:W.notes||"",onChange:X=>be({...W,notes:X.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Additional notes about this investment..."})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[n.jsx(Oe,{variant:"outline",onClick:()=>ne(!1),children:"Cancel"}),n.jsx(Oe,{onClick:async()=>{try{console.log("Saving investment:",W),alert("Investment updated successfully! (This is a placeholder - actual save functionality will be implemented)"),ne(!1),await lr()}catch(X){console.error("Error updating investment:",X),alert("Failed to update investment")}},children:"Save Changes"})]})]})})]})}catch(X){return console.error("CapTableTab render error:",X),n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-red-600 mb-4",children:"An error occurred while loading the cap table."}),n.jsx(Oe,{onClick:()=>window.location.reload(),children:"Reload Page"})]})}},xae=({currentUser:e,startup:t,onBack:r,onProfileUpdate:a,onLogout:s})=>{var T,D,R,B,U,I,F,pe,L;const[i,l]=_.useState(!1),[u,d]=_.useState(e),[f,m]=_.useState(!1);_.useEffect(()=>{e!=null&&e.id&&g()},[]);const g=async()=>{if(e!=null&&e.id)try{m(!0),console.log("🔄 Refreshing startup profile data for user:",e.id);const q=await br.getCurrentUser();console.log("✅ Fresh startup profile data loaded:",q),d(q),a&&JSON.stringify(q)!==JSON.stringify(e)?(console.log("🔄 Startup profile data changed, updating parent component"),a(q)):console.log("✅ Startup profile data unchanged, no parent update needed")}catch(q){console.error("❌ Error refreshing startup profile data:",q),d(e)}finally{m(!1)}},[v,x]=_.useState(!1),[j,b]=_.useState(!1),S=[{id:"account",icon:n.jsx(mm,{className:"h-5 w-5"}),title:"Account",description:"Manage your account settings",onClick:()=>l(!0)},{id:"notifications",icon:n.jsx(Fp,{className:"h-5 w-5"}),title:"Notifications",description:"Manage notification preferences",onClick:()=>x(!0)},{id:"help",icon:n.jsx(em,{className:"h-5 w-5"}),title:"Help & Support",description:"Get help and contact support",onClick:()=>b(!0)}],A=()=>{console.log("Logging out..."),s?s():window.location.href="/logout"},E=async q=>{if(!(e!=null&&e.id)){console.error("No user ID available");return}try{if(console.log("Saving startup profile:",q),a){const z={...e,...q,profile_photo_url:q.profile_photo_url||e.profile_photo_url,logo_url:q.logo_url||e.logo_url,name:q.name||e.name,phone:q.phone||e.phone,address:q.address||e.address,city:q.city||e.city,state:q.state||e.state,country:q.country||e.country,company:q.company||e.company};console.log("✅ Startup profile updated, calling onProfileUpdate with:",z),a(z)}console.log("Startup profile saved successfully!")}catch(z){console.error("Error in handleSaveProfile:",z)}};return n.jsxs("div",{className:"min-h-screen bg-slate-50",children:[n.jsxs("div",{className:"bg-blue-600 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 py-3 sm:py-4",children:[n.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-blue-700 transition-colors","aria-label":"Go back",children:n.jsx(nc,{className:"h-5 w-5 sm:h-6 sm:w-6"})}),n.jsx("h1",{className:"text-lg sm:text-xl font-semibold",children:"Startup Profile"}),n.jsx("button",{onClick:g,disabled:f,className:"p-2 rounded-full hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Refresh profile data",title:f?"Refreshing...":"Refresh profile data",children:n.jsx(rm,{className:`h-5 w-5 sm:h-6 sm:w-6 ${f?"animate-spin":""}`})})]}),u&&n.jsxs("div",{className:"text-xs text-blue-200 text-center pb-2",children:["Last updated: ",new Date().toLocaleTimeString()]})]}),n.jsx("div",{className:"bg-white px-4 sm:px-6 py-6 sm:py-8",children:n.jsxs("div",{className:"flex flex-col items-center text-center",children:[n.jsxs("div",{className:"relative mb-4 sm:mb-6",children:[u!=null&&u.profile_photo_url?n.jsxs("div",{className:"w-20 h-20 sm:w-24 sm:h-24 lg:w-32 lg:h-32 rounded-full overflow-hidden border-4 border-blue-600",children:[n.jsx("img",{src:u.profile_photo_url,alt:`${u.name||"User"}'s profile photo`,className:"w-full h-full object-cover",onError:q=>{var V;const z=q.target;z.style.display="none",(V=z.nextElementSibling)==null||V.classList.remove("hidden")}}),n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center text-white text-xl sm:text-2xl lg:text-3xl font-bold hidden",children:((D=(T=u==null?void 0:u.name)==null?void 0:T.charAt(0))==null?void 0:D.toUpperCase())||((B=(R=u==null?void 0:u.email)==null?void 0:R.charAt(0))==null?void 0:B.toUpperCase())||"S"})]}):n.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 lg:w-32 lg:h-32 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center text-white text-xl sm:text-2xl lg:text-3xl font-bold",children:((I=(U=u==null?void 0:u.name)==null?void 0:U.charAt(0))==null?void 0:I.toUpperCase())||((pe=(F=u==null?void 0:u.email)==null?void 0:F.charAt(0))==null?void 0:pe.toUpperCase())||"S"}),n.jsx("button",{className:"absolute bottom-0 right-0 w-6 h-6 sm:w-8 sm:h-8 lg:w-10 lg:h-10 bg-blue-600 rounded-full flex items-center justify-center text-white hover:bg-blue-700 transition-colors",onClick:()=>l(!0),children:n.jsx(lf,{className:"h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5"})})]}),n.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-slate-900 mb-2 sm:mb-3",children:(u==null?void 0:u.name)||((L=u==null?void 0:u.email)==null?void 0:L.split("@")[0])||"Startup User"}),n.jsx("p",{className:"text-sm sm:text-base text-slate-600 mb-3 sm:mb-4 break-all px-2",children:u==null?void 0:u.email}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 mb-3 sm:mb-4",children:[n.jsx("span",{className:"text-xs sm:text-sm text-slate-500",children:"Role:"}),n.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 sm:px-3 sm:py-1 rounded-full text-xs sm:text-sm font-medium flex items-center gap-1",children:[n.jsx(Jl,{className:"h-3 w-3"}),"Startup"]})]}),(u==null?void 0:u.company)&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 mb-4 sm:mb-6",children:[n.jsx("span",{className:"text-xs sm:text-sm text-slate-500",children:"Company:"}),n.jsx("span",{className:"bg-slate-100 text-slate-800 px-2 py-1 sm:px-3 sm:py-1 rounded-md text-xs sm:text-sm font-medium",children:u.company})]}),n.jsx(Oe,{variant:"primary",className:"w-full max-w-xs sm:max-w-sm lg:max-w-md text-sm sm:text-base",onClick:()=>l(!0),children:"Edit Profile"})]})}),((u==null?void 0:u.government_id)||(u==null?void 0:u.verification_documents)&&u.verification_documents.length>0)&&n.jsxs("div",{className:"bg-white mt-4 px-4 sm:px-6 py-6",children:[n.jsx("h3",{className:"text-base sm:text-lg font-medium text-slate-900 mb-4",children:"Verification Documents"}),n.jsx("div",{className:"space-y-3",children:(u==null?void 0:u.government_id)&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 p-3 bg-green-50 border border-green-200 rounded-md",children:[n.jsx(Cs,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-green-800",children:"Government ID"}),n.jsx("p",{className:"text-xs text-green-600 break-all",children:u.government_id})]}),n.jsx("button",{onClick:()=>window.open(u.government_id,"_blank"),className:"text-green-600 hover:text-green-800 text-sm underline flex-shrink-0",children:"View"})]})})]}),u&&n.jsx("div",{className:"mt-4",children:n.jsx(A8,{userId:u.id,userType:"Startup"})}),u&&n.jsx("div",{className:"mt-4",children:n.jsx(S8,{userId:u.id,userType:"Startup",country:u.country||"Global",startupCount:t!=null&&t.id?1:0})}),n.jsx("div",{className:"bg-white mt-4",children:S.map((q,z)=>n.jsxs("div",{children:[n.jsxs("button",{onClick:q.onClick,className:"w-full px-4 sm:px-6 py-3 sm:py-4 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[n.jsx("div",{className:"text-slate-600 flex-shrink-0",children:q.icon}),n.jsxs("div",{className:"text-left min-w-0 flex-1",children:[n.jsx("p",{className:"text-sm sm:text-base font-medium text-slate-900",children:q.title}),n.jsx("p",{className:"text-xs sm:text-sm text-slate-500",children:q.description})]})]}),n.jsx("div",{className:"text-slate-400 flex-shrink-0",children:n.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),z<S.length-1&&n.jsx("div",{className:"border-b border-slate-100 mx-4 sm:mx-6"})]},q.id))}),n.jsx("div",{className:"bg-white mt-4",children:n.jsxs("button",{onClick:A,className:"w-full px-4 sm:px-6 py-3 sm:py-4 flex items-center gap-3 text-red-600 hover:bg-red-50 transition-colors",children:[n.jsx(Tv,{className:"h-4 w-4 sm:h-5 sm:w-5"}),n.jsx("span",{className:"text-sm sm:text-base font-medium",children:"Logout"})]})}),n.jsx(N8,{currentUser:u,isOpen:i,onClose:()=>l(!1),onSave:E}),v&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Fp,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Notifications"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"You're all caught up! No new notifications at this time."}),n.jsx(Oe,{variant:"primary",onClick:()=>x(!1),className:"w-full",children:"Got it"})]})})}),j&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx(em,{className:"h-12 w-12 text-blue-500 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Help & Support"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"Our detailed help documentation and support system is coming soon. We're working hard to provide you with the best assistance."}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[n.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Coming Soon Features:"}),n.jsxs("ul",{className:"text-sm text-blue-700 mt-2 space-y-1",children:[n.jsx("li",{children:"• Comprehensive FAQ section"}),n.jsx("li",{children:"• Live chat support"}),n.jsx("li",{children:"• Video tutorials"}),n.jsx("li",{children:"• Contact support team"})]})]}),n.jsx(Oe,{variant:"primary",onClick:()=>b(!1),className:"w-full",children:"Understood"})]})})})]})},uk=({startup:e,userRole:t,user:r,onBack:a,onActivateFundraising:s,onInvestorAdded:i,onUpdateFounders:l,isViewOnly:u=!1,investmentOffers:d=[],onProcessOffer:f})=>{var q;const m=u&&t==="Startup Facilitation Center",g=window.facilitatorTargetTab,[v,x]=_.useState(()=>{if(m)return g==="full"?"dashboard":"compliance";const z=localStorage.getItem("startupHealthActiveTab");return z&&["dashboard","opportunities","profile","compliance","financials","employees","capTable"].includes(z)?z:"dashboard"}),[j,b]=_.useState(e),[S,A]=_.useState(d||[]),[E,T]=_.useState(!1),[D,R]=_.useState(!1);_.useEffect(()=>{console.log("🔄 StartupHealthView: Startup prop changed, updating currentStartup"),console.log("📊 New startup data:",e),b(e)},[e]);const B=(S||d||[]).filter(z=>z.startupId===j.id||z.startup&&z.startup.id===j.id||z.startupName===j.name);_.useEffect(()=>{d&&d.length>0&&A(d)},[d]),_.useEffect(()=>{let z=!1;return((d==null?void 0:d.length)||0)===0&&(j==null?void 0:j.id)&&Wn.getOffersForStartup(j.id).then(de=>{z||A(de)}).catch(()=>{}),()=>{z=!0}},[j==null?void 0:j.id]),_.useEffect(()=>{localStorage.setItem("startupHealthActiveTab",v)},[v]);const U=z=>{b(z)},I=(z,V,de,se)=>{var oe;const fe=((oe=j.complianceChecks)==null?void 0:oe.map(Se=>Se.taskId===V?{...Se,[de==="ca"?"caStatus":"csStatus"]:se}:Se))||[];b(Se=>({...Se,complianceChecks:fe}))},F=z=>{x(z),T(!1)},pe=m?[{id:"dashboard",name:"Dashboard",icon:n.jsx(B6,{className:"w-4 h-4"})},{id:"profile",name:"Profile",icon:n.jsx(Jl,{className:"w-4 h-4"})},{id:"compliance",name:"Compliance",icon:n.jsx(_p,{className:"w-4 h-4"})},{id:"financials",name:"Financials",icon:n.jsx(I6,{className:"w-4 h-4"})},{id:"employees",name:"Employees",icon:n.jsx(Ps,{className:"w-4 h-4"})},{id:"capTable",name:"Cap Table",icon:n.jsx(B1,{className:"w-4 h-4"})}]:[{id:"dashboard",name:"Dashboard",icon:n.jsx(B6,{className:"w-4 h-4"})},{id:"opportunities",name:"Opportunities",icon:n.jsx(B1,{className:"w-4 h-4"})},{id:"profile",name:"Profile",icon:n.jsx(Jl,{className:"w-4 h-4"})},{id:"compliance",name:"Compliance",icon:n.jsx(_p,{className:"w-4 h-4"})},{id:"financials",name:"Financials",icon:n.jsx(I6,{className:"w-4 h-4"})},{id:"employees",name:"Employees",icon:n.jsx(Ps,{className:"w-4 h-4"})},{id:"capTable",name:"Cap Table",icon:n.jsx(B1,{className:"w-4 h-4"})}],L=()=>{switch(v){case"dashboard":return n.jsx(KQ,{startup:j,isViewOnly:u,offers:B,onProcessOffer:f,currentUser:r});case"opportunities":return n.jsx(WQ,{startup:{id:j.id,name:j.name}});case"profile":return n.jsx(aee,{startup:j,userRole:t,onProfileUpdate:U,isViewOnly:u});case"compliance":return n.jsx(uee,{startup:j,currentUser:r,onUpdateCompliance:I,isViewOnly:u,allowCAEdit:t==="CA"||t==="CS"});case"financials":return n.jsx(fee,{startup:j,userRole:t,isViewOnly:u});case"employees":return n.jsx(_ee,{startup:j,userRole:t,isViewOnly:u});case"capTable":return n.jsx(gae,{startup:j,userRole:t,user:r,onActivateFundraising:s,onInvestorAdded:i,onUpdateFounders:l,isViewOnly:u});default:return null}};return D?n.jsx(xae,{currentUser:r,startup:j,onBack:()=>R(!1),onProfileUpdate:z=>{console.log("Profile updated:",z)}}):n.jsxs("div",{className:"min-h-screen bg-slate-50",children:[n.jsx("div",{className:"bg-white shadow-sm border-b",children:n.jsx("div",{className:"w-full px-3 sm:px-4 lg:px-8",children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-start sm:justify-between items-start sm:items-center py-3 sm:py-4 gap-3 sm:gap-0",children:[n.jsxs("div",{className:"flex items-start sm:items-center space-x-2 sm:space-x-3 w-full sm:w-auto",children:[n.jsx("div",{className:"bg-blue-100 p-1.5 sm:p-2 rounded-lg flex-shrink-0",children:n.jsx(Jl,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-slate-900 truncate",children:m?`${j.name} - Facilitator Access`:u?`${j.name} - CA Review`:j.name}),n.jsx("p",{className:"text-xs sm:text-sm text-slate-500 mt-1",children:m?g==="full"?"Facilitator view-only access to all tabs (except opportunities)":"Facilitator view-only access to compliance tab only":u?"CA compliance review and monitoring dashboard":"Comprehensive startup monitoring dashboard"}),m&&n.jsx("div",{className:"mt-1",children:n.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${g==="full"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:["🔒 Facilitator ",g==="full"?"Full Access":"Compliance Access Only"]})})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 w-full sm:w-auto",children:[t==="Startup"&&!u&&n.jsxs(Oe,{onClick:()=>R(!0),variant:"outline",size:"sm",className:"w-full sm:w-auto",children:[n.jsx(mm,{className:"mr-2 h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Account"}),n.jsx("span",{className:"sm:hidden",children:"Account"})]}),t!=="Startup"&&a&&n.jsxs(Oe,{onClick:a,variant:"secondary",size:"sm",className:"w-full sm:w-auto",children:[n.jsx(nc,{className:"mr-2 h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Back to Portfolio"}),n.jsx("span",{className:"sm:hidden",children:"Back"})]})]})]})})}),n.jsxs(et,{className:"!p-0 sm:!p-0",children:[n.jsx("div",{className:"sm:hidden border-b border-slate-200 p-3",children:n.jsxs(Oe,{onClick:()=>T(!E),variant:"outline",className:"w-full flex items-center justify-center gap-2",size:"sm",children:[n.jsx(Ov,{className:"h-4 w-4"}),((q=pe.find(z=>z.id===v))==null?void 0:q.name)||"Dashboard"]})}),E&&n.jsx("div",{className:"sm:hidden bg-white border-b border-slate-200 p-3 space-y-1",children:pe.map(z=>n.jsxs("button",{onClick:()=>F(z.id),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium flex items-center gap-2 ${v===z.id?"bg-brand-primary text-white":"text-slate-700 hover:bg-slate-100"}`,children:[z.icon,z.name]},z.id))}),n.jsx("div",{className:"hidden sm:block border-b border-slate-200",children:n.jsx("nav",{className:"-mb-px flex space-x-1 sm:space-x-4 px-4 overflow-x-auto","aria-label":"Tabs",children:pe.map(z=>n.jsxs("button",{onClick:()=>F(z.id),className:`${v===z.id?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} flex items-center whitespace-nowrap py-4 px-1 sm:px-2 border-b-2 font-medium text-sm transition-colors`,children:[z.icon,n.jsx("span",{className:"ml-2",children:z.name})]},z.id))})}),n.jsx("div",{className:"p-3 sm:p-4 lg:p-6",children:L()})]})]})},yD=({users:e})=>{const r=(()=>{const a={};return e.forEach(i=>{try{const l=new Date(i.registrationDate);if(isNaN(l.getTime()))return;const u=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}`;a[u]=(a[u]||0)+1}catch{console.error("Could not parse date:",i.registrationDate)}}),Object.keys(a).sort().map(i=>{const[l,u]=i.split("-");return{name:new Date(Number(l),Number(u)-1).toLocaleString("default",{month:"short",year:"numeric"}),"New Users":a[i]}})})();return n.jsxs("div",{children:[n.jsx("h4",{className:"text-md font-semibold mb-4 text-slate-600",children:"User Signups Over Time"}),n.jsx("div",{style:{width:"100%",height:300},children:n.jsx(ti,{children:n.jsxs(Pv,{data:r,margin:{top:5,right:20,left:-10,bottom:5},children:[n.jsx(eu,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),n.jsx(ac,{dataKey:"name",stroke:"#64748b",fontSize:12}),n.jsx(dl,{allowDecimals:!1,stroke:"#64748b",fontSize:12}),n.jsx(ei,{cursor:{fill:"rgba(239, 246, 255, 0.5)"},contentStyle:{backgroundColor:"#fff",borderRadius:"0.5rem",borderColor:"#e2e8f0"}}),n.jsx(Es,{wrapperStyle:{fontSize:"14px"}}),n.jsx(fd,{dataKey:"New Users",fill:"#3b82f6",radius:[4,4,0,0]})]})})})]})},dk=["#1e40af","#1d4ed8","#3b82f6","#60a5fa","#93c5fd","#dbeafe"],bD=({users:e})=>{const r=(()=>{const a={};return e.forEach(s=>{a[s.role]=(a[s.role]||0)+1}),Object.keys(a).map(s=>({name:s,value:a[s]})).sort((s,i)=>i.value-s.value)})();return n.jsxs("div",{children:[n.jsx("h4",{className:"text-md font-semibold mb-4 text-slate-600",children:"User Distribution by Role"}),n.jsx("div",{style:{width:"100%",height:300},children:n.jsx(ti,{children:n.jsxs(yf,{children:[n.jsx(Qc,{data:r,cx:"50%",cy:"50%",labelLine:!1,outerRadius:100,fill:"#8884d8",dataKey:"value",nameKey:"name",label:({name:a,percent:s})=>`${(s*100).toFixed(0)}%`,children:r.map((a,s)=>n.jsx(ul,{fill:dk[s%dk.length]},`cell-${s}`))}),n.jsx(ei,{formatter:(a,s)=>[`${a} users`,s]}),n.jsx(Es,{wrapperStyle:{fontSize:"14px"}})]})})})]})},fk={async checkDataExists(){try{const{data:e}=await G.from("startups").select("id").limit(1);return e&&e.length>0}catch(e){return console.error("Error checking data existence:",e),!1}},async migrateAllData(){if(console.log("Starting data migration..."),await this.checkDataExists())return console.log("Data already exists, skipping migration"),{success:!0,error:null,message:"Data already exists"};try{return await this.migrateUsers(),await this.migrateStartups(),await this.migrateNewInvestments(),await this.migrateStartupAdditionRequests(),await this.migrateVerificationRequests(),await this.migrateInvestmentOffers(),console.log("Data migration completed successfully!"),{success:!0,error:null,message:"Data migration completed successfully"}}catch(t){return console.error("Data migration failed:",t),{success:!1,error:t.message,message:"Data migration failed"}}},async migrateUsers(){console.log("Migrating users...");for(const e of ZQ)try{const{data:t}=await G.from("users").select("id").eq("email",e.email).single();if(!t){const{error:r}=await G.from("users").insert({id:e.id,email:e.email,name:e.name,role:e.role,registration_date:e.registrationDate});r?console.error(`Failed to migrate user ${e.email}:`,r):console.log(`Migrated user: ${e.email}`)}}catch(t){console.error(`Error migrating user ${e.email}:`,t)}},async migrateStartups(){console.log("Migrating startups...");for(const e of YQ)try{const{data:t}=await G.from("startups").select("id").eq("name",e.name).single();if(!t){const{data:r,error:a}=await G.from("startups").insert({id:e.id,name:e.name,investment_type:e.investmentType,investment_value:e.investmentValue,equity_allocation:e.equityAllocation,current_valuation:e.currentValuation,compliance_status:e.complianceStatus,sector:e.sector,total_funding:e.totalFunding,total_revenue:e.totalRevenue,registration_date:e.registrationDate}).select().single();if(a)console.error(`Failed to migrate startup ${e.name}:`,a);else if(console.log(`Migrated startup: ${e.name}`),e.founders&&e.founders.length>0){const s=e.founders.map(l=>({startup_id:r.id,name:l.name,email:l.email})),{error:i}=await G.from("founders").insert(s);i?console.error(`Failed to migrate founders for ${e.name}:`,i):console.log(`Migrated ${e.founders.length} founders for ${e.name}`)}}}catch(t){console.error(`Error migrating startup ${e.name}:`,t)}},async migrateNewInvestments(){console.log("Migrating new investments...");for(const e of Sw)try{const{data:t}=await G.from("new_investments").select("id").eq("name",e.name).single();if(!t){const{error:r}=await G.from("new_investments").insert({id:e.id,name:e.name,investment_type:e.investmentType,investment_value:e.investmentValue,equity_allocation:e.equityAllocation,sector:e.sector,total_funding:e.totalFunding,total_revenue:e.totalRevenue,registration_date:e.registrationDate,pitch_deck_url:e.pitchDeckUrl,pitch_video_url:e.pitchVideoUrl,compliance_status:e.complianceStatus});r?console.error(`Failed to migrate investment ${e.name}:`,r):console.log(`Migrated investment: ${e.name}`)}}catch(t){console.error(`Error migrating investment ${e.name}:`,t)}},async migrateStartupAdditionRequests(){console.log("Migrating startup addition requests...");for(const e of XQ)try{const{data:t}=await G.from("startup_addition_requests").select("id").eq("name",e.name).single();if(!t){const{error:r}=await G.from("startup_addition_requests").insert({id:e.id,name:e.name,investment_type:e.investmentType,investment_value:e.investmentValue,equity_allocation:e.equityAllocation,sector:e.sector,total_funding:e.totalFunding,total_revenue:e.totalRevenue,registration_date:e.registrationDate});r?console.error(`Failed to migrate request ${e.name}:`,r):console.log(`Migrated request: ${e.name}`)}}catch(t){console.error(`Error migrating request ${e.name}:`,t)}},async migrateVerificationRequests(){console.log("Migrating verification requests...");for(const e of JQ)try{const{data:t}=await G.from("verification_requests").select("id").eq("startup_name",e.startupName).single();if(!t){const{error:r}=await G.from("verification_requests").insert({id:e.id,startup_id:e.startupId,startup_name:e.startupName,request_date:e.requestDate});r?console.error(`Failed to migrate verification request for ${e.startupName}:`,r):console.log(`Migrated verification request: ${e.startupName}`)}}catch(t){console.error(`Error migrating verification request for ${e.startupName}:`,t)}},async migrateInvestmentOffers(){console.log("Migrating investment offers...");for(const e of QQ)try{const{data:t}=await G.from("investment_offers").select("id").eq("investor_email",e.investorEmail).eq("startup_name",e.startupName).single();if(!t){const{error:r}=await G.from("investment_offers").insert({id:e.id,investor_email:e.investorEmail,startup_name:e.startupName,investment_id:e.investment.id,offer_amount:e.offerAmount,equity_percentage:e.equityPercentage,status:e.status});r?console.error(`Failed to migrate offer for ${e.startupName}:`,r):console.log(`Migrated investment offer: ${e.startupName}`)}}catch(t){console.error(`Error migrating investment offer for ${e.startupName}:`,t)}},async clearAllData(){console.log("Clearing all data...");try{return await G.from("investment_offers").delete().neq("id",0),await G.from("verification_requests").delete().neq("id",0),await G.from("startup_addition_requests").delete().neq("id",0),await G.from("new_investments").delete().neq("id",0),await G.from("founders").delete().neq("id",0),await G.from("startups").delete().neq("id",0),console.log("All data cleared successfully!"),{success:!0,error:null}}catch(e){return console.error("Error clearing data:",e),{success:!1,error:e.message}}}},vae=()=>{const[e,t]=_.useState(!1),[r,a]=_.useState(null),s=async()=>{t(!0),a(null);try{const d=await fk.migrateAllData();d.success?a({type:"success",text:d.message||"Data migration completed successfully!"}):a({type:"error",text:d.message||"Data migration failed!"})}catch{a({type:"error",text:"An unexpected error occurred during migration."})}finally{t(!1)}},i=async()=>{if(confirm("Are you sure you want to clear all data? This action cannot be undone.")){t(!0),a(null);try{(await fk.clearAllData()).success?a({type:"success",text:"All data cleared successfully!"}):a({type:"error",text:"Failed to clear data!"})}catch{a({type:"error",text:"An unexpected error occurred while clearing data."})}finally{t(!1)}}},l=()=>{if(!r)return null;switch(r.type){case"success":return n.jsx(ua,{className:"h-5 w-5 text-green-500"});case"error":return n.jsx(tu,{className:"h-5 w-5 text-red-500"});case"info":return n.jsx(tu,{className:"h-5 w-5 text-blue-500"});default:return null}},u=()=>{if(!r)return"";switch(r.type){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return""}};return n.jsx("div",{className:"max-w-2xl mx-auto p-6",children:n.jsxs(et,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx($x,{className:"h-8 w-8 text-blue-600"}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Data Manager"}),n.jsx("p",{className:"text-slate-600",children:"Manage database data and migrations"})]})]}),r&&n.jsxs("div",{className:`flex items-center gap-3 p-4 mb-6 rounded-lg border ${u()}`,children:[l(),n.jsx("p",{className:"font-medium",children:r.text})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Data Migration"}),n.jsx("p",{className:"text-blue-700 text-sm mb-4",children:"Populate the database with sample data including startups, investments, and user requests."}),n.jsxs(Oe,{onClick:s,disabled:e,className:"flex items-center gap-2",children:[e?n.jsx(rm,{className:"h-4 w-4 animate-spin"}):n.jsx($x,{className:"h-4 w-4"}),e?"Migrating...":"Migrate Sample Data"]})]}),n.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"Clear All Data"}),n.jsx("p",{className:"text-red-700 text-sm mb-4",children:"Warning: This will permanently delete all data from the database. This action cannot be undone."}),n.jsxs(Oe,{onClick:i,disabled:e,variant:"outline",className:"flex items-center gap-2 text-red-600 border-red-600 hover:bg-red-50",children:[e?n.jsx(rm,{className:"h-4 w-4 animate-spin"}):n.jsx(qa,{className:"h-4 w-4"}),e?"Clearing...":"Clear All Data"]})]})]}),n.jsxs("div",{className:"mt-8 p-4 bg-slate-50 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Database Information"}),n.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[n.jsx("p",{children:"• Sample data includes 20+ startups across various sectors"}),n.jsx("p",{children:"• Investment opportunities with different funding stages"}),n.jsx("p",{children:"• User requests and verification workflows"}),n.jsx("p",{children:"• Mock users for testing different roles"})]})]})]})})},yae=({currentUser:e})=>{const[t,r]=_.useState([]),[a,s]=_.useState(!0),[i,l]=_.useState(null),[u,d]=_.useState(null),[f,m]=_.useState(!1),[g,v]=_.useState({status:"under_review",review_notes:""}),[x,j]=_.useState({total:0,pending:0,approved:0,rejected:0,under_review:0}),b=async()=>{try{s(!0),l(null);const[R,B]=await Promise.all([Ph.getAllSubmissions(),Ph.getSubmissionStats()]);r(R),j(B)}catch(R){console.error("Error loading submissions:",R),l("Failed to load submissions")}finally{s(!1)}};_.useEffect(()=>{b()},[]);const S=async R=>{try{l(null),await Ph.approveAndPromoteToMainRules(R),await b(),m(!1),d(null),alert("Compliance approved and added to main rules successfully!")}catch(B){console.error("Error approving submission:",B),l("Failed to approve submission")}},A=async()=>{if(u)try{l(null),await Ph.updateSubmissionStatus(u.id,g),await b(),m(!1),d(null),v({status:"under_review",review_notes:""}),alert("Submission rejected successfully!")}catch(R){console.error("Error rejecting submission:",R),l("Failed to reject submission")}},E=async R=>{if(confirm("Are you sure you want to delete this submission? This action cannot be undone."))try{l(null),await Ph.deleteSubmission(R),await b(),alert("Submission deleted successfully!")}catch(B){console.error("Error deleting submission:",B),l("Failed to delete submission")}},T=R=>{const B={pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",under_review:"bg-blue-100 text-blue-800"};return n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${B[R]}`,children:R.replace("_"," ").toUpperCase()})},D=R=>{const B={parent:"bg-purple-100 text-purple-800",subsidiary:"bg-indigo-100 text-indigo-800",international:"bg-orange-100 text-orange-800"};return n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${B[R]}`,children:R.toUpperCase()})};return a?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"New Compliances Added by Users"}),n.jsx("p",{className:"text-gray-600",children:"Review and approve compliance submissions from users"})]}),n.jsx("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:x.total}),n.jsx("div",{className:"text-sm text-gray-600",children:"Total Submissions"})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:x.pending}),n.jsx("div",{className:"text-sm text-gray-600",children:"Pending Review"})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x.under_review}),n.jsx("div",{className:"text-sm text-gray-600",children:"Under Review"})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:x.approved}),n.jsx("div",{className:"text-sm text-gray-600",children:"Approved"})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:x.rejected}),n.jsx("div",{className:"text-sm text-gray-600",children:"Rejected"})]})]}),i&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:i}),n.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted By"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company & Operation"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Compliance"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Country"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(R=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:R.submitted_by_name}),n.jsxs("div",{className:"text-sm text-gray-500",children:[R.submitted_by_role," • ",R.submitted_by_email]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:R.company_name}),n.jsx("div",{className:"text-sm text-gray-500",children:R.company_type}),n.jsx("div",{className:"mt-1",children:D(R.operation_type)})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:R.compliance_name}),n.jsxs("div",{className:"text-sm text-gray-500",children:[R.frequency," • ",R.verification_required]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"text-sm text-gray-900",children:[R.country_name," (",R.country_code,")"]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:T(R.status)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(R.created_at).toLocaleDateString()}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[R.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{d(R),v({status:"approved",review_notes:""}),m(!0)},className:"text-green-600 hover:text-green-900",children:"Approve"}),n.jsx("button",{onClick:()=>{d(R),v({status:"rejected",review_notes:""}),m(!0)},className:"text-red-600 hover:text-red-900",children:"Reject"})]}),n.jsx("button",{onClick:()=>E(R.id),className:"text-gray-600 hover:text-gray-900",children:"Delete"})]})]},R.id))})]})}),t.length===0&&n.jsx("div",{className:"text-center py-12",children:n.jsx("div",{className:"text-gray-500",children:"No user submissions found"})})]}),f&&u&&n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:n.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:n.jsxs("div",{className:"mt-3",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:[g.status==="approved"?"Approve":"Reject"," Submission"]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[n.jsx("strong",{children:"Compliance:"})," ",u.compliance_name]}),n.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[n.jsx("strong",{children:"Company:"})," ",u.company_name]}),n.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[n.jsx("strong",{children:"Operation Type:"})," ",u.operation_type]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Review Notes"}),n.jsx("textarea",{value:g.review_notes,onChange:R=>v(B=>({...B,review_notes:R.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Add review notes..."})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{onClick:()=>{m(!1),d(null),v({status:"under_review",review_notes:""})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),g.status==="approved"?n.jsx("button",{onClick:()=>S(u.id),className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700",children:"Approve & Add to Main Rules"}):n.jsx("button",{onClick:A,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Reject"})]})]})})})]})},bae=()=>{const[e,t]=_.useState([]),[r,a]=_.useState(!0),[s,i]=_.useState(!1),[l,u]=_.useState(null),[d,f]=_.useState({country_code:"",country_name:"",ca_type:"",cs_type:"",company_type:"",compliance_name:"",compliance_description:"",frequency:"annual",verification_required:"both"}),[m,g]=_.useState({country:"",companyType:"",verification:""}),[v,x]=_.useState([]),[j,b]=_.useState([]),[S,A]=_.useState(""),[E,T]=_.useState(""),[D,R]=_.useState(!1),[B,U]=_.useState(null),[I,F]=_.useState({isUploading:!1,success:0,errors:[]}),[pe,L]=_.useState(!1),[q,z]=_.useState({code:"",name:"",caTypes:[],csTypes:[]}),[V,de]=_.useState(""),[se,fe]=_.useState(""),oe=async()=>{a(!0);try{const[W,be,Ce]=await Promise.all([tn.getAllRules(),tn.getCountries(),tn.getCompanyTypes()]);t(W),x(be),b(Ce),d.country_code&&await Se(d.country_code)}catch(W){console.error("Error loading data:",W)}a(!1)},Se=async W=>{try{const[be,Ce]=await Promise.all([tn.getCATypeByCountry(W),tn.getCSTypeByCountry(W)]);A(be||""),T(Ce||"")}catch(be){console.error("Error loading country-specific types:",be)}};_.useEffect(()=>{oe()},[]);const Y=async W=>{W.preventDefault();try{l?await tn.updateRule(l.id,d):await tn.addRule(d),i(!1),u(null),K(),await oe()}catch(be){console.error("Error saving rule:",be),alert("Error saving compliance rule. Please try again.")}},ye=async W=>{if(confirm("Are you sure you want to delete this compliance rule?"))try{await tn.deleteRule(W),await oe()}catch(be){console.error("Error deleting rule:",be),alert("Error deleting compliance rule. Please try again.")}},P=W=>{u(W),f({country_code:W.country_code,country_name:W.country_name,ca_type:W.ca_type||"",cs_type:W.cs_type||"",company_type:W.company_type,compliance_name:W.compliance_name,compliance_description:W.compliance_description||"",frequency:W.frequency,verification_required:W.verification_required}),i(!0)},K=()=>{f({country_code:"",country_name:"",ca_type:"",cs_type:"",company_type:"",compliance_name:"",compliance_description:"",frequency:"annual",verification_required:"both"})},le=e.filter(W=>!(m.country&&W.country_code!==m.country||m.companyType&&W.company_type!==m.companyType||m.verification&&W.verification_required!==m.verification)),ee=async W=>{if(W)try{const be=await tn.getCompanyTypesByCountry(W);b(be)}catch(be){console.error("Error loading company types:",be)}},me=async()=>{if(!q.code||!q.name||q.caTypes.length===0||q.csTypes.length===0){alert("Please fill in country code, name, and at least one CA type and one CS type.");return}try{await tn.addCountryWithTypes({country_code:q.code.toUpperCase(),country_name:q.name,ca_types:q.caTypes,cs_types:q.csTypes}),z({code:"",name:"",caTypes:[],csTypes:[]}),de(""),fe(""),L(!1),await oe(),alert("Country added successfully with CA and CS types!")}catch(W){console.error("Error adding country:",W),alert("Error adding country. Please try again.")}},ke=()=>{V&&!q.caTypes.includes(V)&&(z(W=>({...W,caTypes:[...W.caTypes,V]})),de(""))},Ae=()=>{se&&!q.csTypes.includes(se)&&(z(W=>({...W,csTypes:[...W.csTypes,se]})),fe(""))},xe=W=>{z(be=>({...be,caTypes:be.caTypes.filter(Ce=>Ce!==W)}))},De=W=>{z(be=>({...be,csTypes:be.csTypes.filter(Ce=>Ce!==W)}))},ve=async()=>{if(B){F({isUploading:!0,success:0,errors:[]});try{const W=await $(B);console.log("Raw data from file:",W),console.log("First row keys:",W.length>0?Object.keys(W[0]):"No data");const be=W.map((ze,Pe)=>{let we={country_code:(ze["Country Code"]||ze["Country Co"]||ze.country_code||ze.country_co||"").toString().trim(),country_name:(ze["Country Name"]||ze.country_name||"").toString().trim(),ca_type:(ze["CA Type"]||ze.ca_type||"").toString().trim(),cs_type:(ze["CS Type"]||ze.cs_type||"").toString().trim(),company_type:(ze["Company Type"]||ze.Company||ze.company_type||ze.company||"").toString().trim(),compliance_name:(ze["Compliance Name"]||ze.Complianc||ze.compliance_name||ze.compliance||"").toString().trim(),compliance_description:(ze["Compliance Description"]||ze.Complianc||ze.compliance_description||ze.description||"").toString().trim(),frequency:(ze.Frequency||ze.frequency||"annual").toString().trim(),verification_required:(ze["Verification Required"]||ze.Verificatio||ze.verification_required||ze.verification||"both").toString().trim()};["first-year","monthly","quarterly","annual"].includes(we.frequency)||(console.warn(`Row ${Pe+1}: Invalid frequency "${we.frequency}", defaulting to "annual"`),we.frequency="annual");const qe=we.verification_required.toLowerCase().trim();return qe==="ca"||qe.includes("chartered")||qe.includes("tax advisor")||qe.includes("auditor")||qe.includes("cpa")||qe.includes("certified public accountant")||qe.includes("tax consultant")||qe.includes("financial advisor")||qe.includes("accounting professional")?we.verification_required="CA":qe==="cs"||qe.includes("company secretary")||qe.includes("corporate secretary")||qe.includes("management")||qe.includes("lawyer")||qe.includes("legal advisor")||qe.includes("legal counsel")||qe.includes("corporate lawyer")||qe.includes("business lawyer")||qe.includes("corporate governance")?we.verification_required="CS":(qe==="both"||qe.includes("ca and cs")||qe.includes("chartered accountant and company secretary")||qe.includes("tax advisor and legal advisor")||qe.includes("auditor and lawyer")||console.warn(`Row ${Pe+1}: Unrecognized verification_required "${we.verification_required}", defaulting to "both"`),we.verification_required="both"),(!we.country_code||!we.country_name||!we.compliance_name)&&console.warn(`Row ${Pe+1} missing required fields:`,we),console.log(`Row ${Pe+1} mapped:`,we),we}).filter(ze=>ze.country_code&&ze.country_name&&ze.compliance_name);console.log("Mapped rules data:",be);const Ce=await tn.bulkUploadRules(be);console.log("Result from bulkUploadRules received in handleBulkUpload:",{success:Ce.success,errors:Ce.errors}),F({isUploading:!1,success:Ce.success,errors:Ce.errors}),await oe(),Ce.errors.length===0?(alert(`Successfully uploaded ${Ce.success} compliance rules!`),R(!1),U(null)):alert(`Uploaded ${Ce.success} rules successfully. ${Ce.errors.length} errors occurred. Check the error details.`)}catch(W){console.error("Error uploading file:",W);const be=W instanceof Error?W.message:"Unknown error occurred";F({isUploading:!1,success:0,errors:[{row:0,error:be,data:null}]}),alert(`Error uploading file: ${be}`)}}},Z=()=>{const W=[{"Country Code":"US","Country Name":"United States","CA Type":"CPA","CS Type":"CISA","Company Type":"C-Corporation","Compliance Name":"Annual Financial Audit","Compliance Description":"Annual audit of financial statements by certified public accountant",Frequency:"annual","Verification Required":"both"},{"Country Code":"IN","Country Name":"India","CA Type":"CA","CS Type":"CISA","Company Type":"Private Limited","Compliance Name":"Tax Audit","Compliance Description":"Annual tax audit under Income Tax Act",Frequency:"annual","Verification Required":"CA"},{"Country Code":"UK","Country Name":"United Kingdom","CA Type":"ACA","CS Type":"CISA","Company Type":"Limited Company","Compliance Name":"Annual Return","Compliance Description":"Annual return filing with Companies House",Frequency:"annual","Verification Required":"both"},{"Country Code":"US","Country Name":"United States","CA Type":"CPA","CS Type":"CISA","Company Type":"LLC","Compliance Name":"Quarterly Tax Filing","Compliance Description":"Quarterly estimated tax payments",Frequency:"quarterly","Verification Required":"CA"},{"Country Code":"IN","Country Name":"India","CA Type":"CA","CS Type":"CISA","Company Type":"Public Limited","Compliance Name":"Board Meeting Minutes","Compliance Description":"Monthly board meeting minutes and resolutions",Frequency:"monthly","Verification Required":"CS"}],be=Object.keys(W[0]),Ce=[be.join(","),...W.map(ae=>be.map(qe=>{const ft=ae[qe];return typeof ft=="string"&&(ft.includes(",")||ft.includes('"'))?`"${ft.replace(/"/g,'""')}"`:ft}).join(","))].join(`
`),ze=new Blob([Ce],{type:"text/csv;charset=utf-8;"}),Pe=document.createElement("a"),we=URL.createObjectURL(ze);Pe.setAttribute("href",we),Pe.setAttribute("download","compliance_rules_sample.csv"),Pe.style.visibility="hidden",document.body.appendChild(Pe),Pe.click(),document.body.removeChild(Pe)},te=W=>{const be=W.split(`
`).filter(Pe=>Pe.trim());if(be.length<2)return[];const Ce=re(be[0]);return be.slice(1).map(Pe=>{const we=re(Pe),ae={};return Ce.forEach((qe,ft)=>{ae[qe]=we[ft]||""}),ae})},re=W=>{const be=[];let Ce="",ze=!1;for(let Pe=0;Pe<W.length;Pe++){const we=W[Pe];we==='"'?ze&&W[Pe+1]==='"'?(Ce+='"',Pe++):ze=!ze:we===","&&!ze?(be.push(Ce.trim()),Ce=""):Ce+=we}return be.push(Ce.trim()),be},$=async W=>new Promise((be,Ce)=>{const ze=new FileReader;ze.onload=Pe=>{var we;try{const ae=(we=Pe.target)==null?void 0:we.result;if(W.name.toLowerCase().endsWith(".csv")){const qe=te(ae);console.log("Parsed CSV data:",qe),be(qe)}else Ce(new Error("Excel files (.xlsx, .xls) are not supported yet. Please use CSV format."))}catch(ae){console.error("Error parsing file:",ae),Ce(ae)}},ze.onerror=()=>Ce(new Error("Failed to read file")),ze.readAsText(W,"UTF-8")}),ne=async W=>{const be=v.find(Ce=>Ce.country_code===W);W?(await Promise.all([ee(W),Se(W)]),f(Ce=>({...Ce,country_code:W,country_name:(be==null?void 0:be.country_name)||"",ca_type:S,cs_type:E}))):(b([]),A(""),T(""),f(Ce=>({...Ce,country_code:"",country_name:"",ca_type:"",cs_type:""})))};return r?n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsx("div",{className:"text-slate-600",children:"Loading compliance rules..."})}):n.jsxs("div",{className:"space-y-6",children:[n.jsx(yae,{currentUser:null}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-800",children:"Compliance Rules Management"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Manage all compliance rules in one comprehensive system"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs(Oe,{onClick:()=>R(!0),className:"bg-green-600 hover:bg-green-700",children:[n.jsx(_w,{className:"w-4 h-4 mr-2"}),"Bulk Upload"]}),n.jsxs(Oe,{onClick:()=>{i(!0),u(null),K()},className:"bg-blue-600 hover:bg-blue-700",children:[n.jsx(zi,{className:"w-4 h-4 mr-2"}),"Add Compliance Rule"]})]})]}),n.jsx(et,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(UJ,{className:"w-5 h-5 text-slate-600"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("select",{value:m.country,onChange:W=>g(be=>({...be,country:W.target.value})),className:"border border-slate-300 rounded-md px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Countries"}),v.map(W=>n.jsx("option",{value:W.country_code,children:W.country_name},W.country_code))]}),n.jsxs("select",{value:m.companyType,onChange:W=>g(be=>({...be,companyType:W.target.value})),className:"border border-slate-300 rounded-md px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Company Types"}),j.map(W=>n.jsx("option",{value:W,children:W},W))]}),n.jsxs("select",{value:m.verification,onChange:W=>g(be=>({...be,verification:W.target.value})),className:"border border-slate-300 rounded-md px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Verification Types"}),n.jsx("option",{value:"CA",children:"CA Required"}),n.jsx("option",{value:"CS",children:"CS Required"}),n.jsx("option",{value:"both",children:"Both Required"})]})]})]})}),s&&n.jsxs(et,{className:"p-6",children:[n.jsx("h4",{className:"text-lg font-semibold text-slate-700 mb-4",children:l?"Edit Compliance Rule":"Add New Compliance Rule"}),n.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Country *"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:d.country_code,onChange:W=>ne(W.target.value),required:!0,className:"flex-1 border border-slate-300 rounded-md px-3 py-2",children:[n.jsx("option",{value:"",children:"Select Country"}),v.map(W=>n.jsx("option",{value:W.country_code,children:W.country_name},W.country_code))]}),n.jsx(Oe,{type:"button",onClick:()=>L(!0),className:"bg-green-600 hover:bg-green-700 px-3 py-2",size:"sm",children:n.jsx(zi,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Type *"}),n.jsx("input",{type:"text",value:d.company_type,onChange:W=>f(be=>({...be,company_type:W.target.value})),required:!0,className:"w-full border border-slate-300 rounded-md px-3 py-2",placeholder:"e.g., Private Limited Company"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Compliance Name *"}),n.jsx("input",{type:"text",value:d.compliance_name,onChange:W=>f(be=>({...be,compliance_name:W.target.value})),required:!0,className:"w-full border border-slate-300 rounded-md px-3 py-2",placeholder:"e.g., Annual Return Filing"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CA Type"}),n.jsx("input",{type:"text",value:d.ca_type,readOnly:!0,className:"w-full border border-slate-300 rounded-md px-3 py-2 bg-slate-50 text-slate-600",placeholder:"Auto-populated based on country"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CS Type"}),n.jsx("input",{type:"text",value:d.cs_type,readOnly:!0,className:"w-full border border-slate-300 rounded-md px-3 py-2 bg-slate-50 text-slate-600",placeholder:"Auto-populated based on country"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Frequency *"}),n.jsxs("select",{value:d.frequency,onChange:W=>f(be=>({...be,frequency:W.target.value})),required:!0,className:"w-full border border-slate-300 rounded-md px-3 py-2",children:[n.jsx("option",{value:"first-year",children:"First Year"}),n.jsx("option",{value:"monthly",children:"Monthly"}),n.jsx("option",{value:"quarterly",children:"Quarterly"}),n.jsx("option",{value:"annual",children:"Annual"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Verification Required *"}),n.jsxs("select",{value:d.verification_required,onChange:W=>f(be=>({...be,verification_required:W.target.value})),required:!0,className:"w-full border border-slate-300 rounded-md px-3 py-2",children:[n.jsx("option",{value:"CA",children:"CA Required"}),n.jsx("option",{value:"CS",children:"CS Required"}),n.jsx("option",{value:"both",children:"Both Required"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Description"}),n.jsx("textarea",{value:d.compliance_description,onChange:W=>f(be=>({...be,compliance_description:W.target.value})),rows:3,className:"w-full border border-slate-300 rounded-md px-3 py-2",placeholder:"Detailed description of the compliance requirement..."})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(Oe,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:l?"Update Rule":"Add Rule"}),n.jsx(Oe,{type:"button",onClick:()=>{i(!1),u(null),K()},className:"bg-slate-500 hover:bg-slate-600",children:"Cancel"})]})]})]}),n.jsxs(et,{className:"overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:n.jsxs("h4",{className:"text-lg font-semibold text-slate-700",children:["Compliance Rules (",le.length,")"]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Country"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Company Type"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Compliance"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Frequency"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Verification"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"CA Type"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"CS Type"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-slate-200",children:le.map(W=>n.jsxs("tr",{className:"hover:bg-slate-50",children:[n.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:W.country_name}),n.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:W.company_type}),n.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:W.compliance_name}),W.compliance_description&&n.jsx("div",{className:"text-xs text-slate-500 mt-1",children:W.compliance_description})]})}),n.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:n.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:W.frequency})}),n.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${W.verification_required==="both"?"bg-purple-100 text-purple-800":W.verification_required==="CA"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:W.verification_required})}),n.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:W.ca_type||"-"}),n.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:W.cs_type||"-"}),n.jsx("td",{className:"px-4 py-3 text-sm",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Oe,{size:"sm",onClick:()=>P(W),className:"bg-blue-600 hover:bg-blue-700",children:n.jsx(Gl,{className:"w-3 h-3"})}),n.jsx(Oe,{size:"sm",onClick:()=>ye(W.id),className:"bg-red-600 hover:bg-red-700",children:n.jsx(qa,{className:"w-3 h-3"})})]})})]},W.id))})]})}),le.length===0&&n.jsx("div",{className:"text-center py-8 text-slate-500",children:"No compliance rules found. Add your first rule to get started."})]}),pe&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-[600px] max-h-[80vh] overflow-y-auto",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-4",children:"Add New Country with CA & CS Types"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Country Code *"}),n.jsx("input",{type:"text",value:q.code,onChange:W=>z(be=>({...be,code:W.target.value.toUpperCase()})),className:"w-full border border-slate-300 rounded-md px-3 py-2",placeholder:"e.g., IN, US, UK",maxLength:3})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Country Name *"}),n.jsx("input",{type:"text",value:q.name,onChange:W=>z(be=>({...be,name:W.target.value})),className:"w-full border border-slate-300 rounded-md px-3 py-2",placeholder:"e.g., India, United States"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CA Types *"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:V,onChange:W=>de(W.target.value),className:"flex-1 border border-slate-300 rounded-md px-3 py-2",placeholder:"e.g., CA, CPA, Auditor",onKeyPress:W=>W.key==="Enter"&&(W.preventDefault(),ke())}),n.jsx(Oe,{type:"button",onClick:ke,className:"bg-green-600 hover:bg-green-700 px-3 py-2",size:"sm",children:n.jsx(zi,{className:"w-4 h-4"})})]}),q.caTypes.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2",children:q.caTypes.map((W,be)=>n.jsxs("span",{className:"inline-flex items-center gap-1 bg-blue-100 text-blue-800 px-2 py-1 rounded-md text-sm",children:[W,n.jsx("button",{type:"button",onClick:()=>xe(W),className:"text-blue-600 hover:text-blue-800",children:"×"})]},be))})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CS Types *"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:se,onChange:W=>fe(W.target.value),className:"flex-1 border border-slate-300 rounded-md px-3 py-2",placeholder:"e.g., CS, Director, Legal",onKeyPress:W=>W.key==="Enter"&&(W.preventDefault(),Ae())}),n.jsx(Oe,{type:"button",onClick:Ae,className:"bg-green-600 hover:bg-green-700 px-3 py-2",size:"sm",children:n.jsx(zi,{className:"w-4 h-4"})})]}),q.csTypes.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2",children:q.csTypes.map((W,be)=>n.jsxs("span",{className:"inline-flex items-center gap-1 bg-green-100 text-green-800 px-2 py-1 rounded-md text-sm",children:[W,n.jsx("button",{type:"button",onClick:()=>De(W),className:"text-green-600 hover:text-green-800",children:"×"})]},be))})]})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx(Oe,{onClick:me,className:"bg-blue-600 hover:bg-blue-700",children:"Add Country with Types"}),n.jsx(Oe,{onClick:()=>{L(!1),z({code:"",name:"",caTypes:[],csTypes:[]}),de(""),fe("")},className:"bg-slate-500 hover:bg-slate-600",children:"Cancel"})]})]})}),D&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-[600px] max-h-[80vh] overflow-y-auto",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-4",children:"Bulk Upload Compliance Rules"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Upload Excel/CSV File *"}),n.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:W=>{var be;return U(((be=W.target.files)==null?void 0:be[0])||null)},className:"w-full border border-slate-300 rounded-md px-3 py-2"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Supported formats: .xlsx, .xls, .csv"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Sample File:"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(Oe,{onClick:Z,className:"bg-blue-600 hover:bg-blue-700",size:"sm",children:[n.jsx(_w,{className:"w-4 h-4 mr-2"}),"Download Sample CSV"]}),n.jsx("span",{className:"text-xs text-slate-500",children:"Download a sample file with the correct format and example data"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Expected Column Headers:"}),n.jsx("div",{className:"bg-slate-50 p-3 rounded-md text-sm",children:n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx("div",{children:"• Country Code"}),n.jsx("div",{children:"• Country Name"}),n.jsx("div",{children:"• CA Type"}),n.jsx("div",{children:"• CS Type"}),n.jsx("div",{children:"• Company Type"}),n.jsx("div",{children:"• Compliance Name"}),n.jsx("div",{children:"• Compliance Description"}),n.jsx("div",{children:"• Frequency"}),n.jsx("div",{children:"• Verification Required"})]})}),n.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:[n.jsx("strong",{children:"Valid values:"}),n.jsx("br",{}),"Frequency: annual, quarterly, monthly, first-year",n.jsx("br",{}),"Verification Required: CA, CS, both"]})]}),I.isUploading&&n.jsx("div",{className:"text-center py-4",children:n.jsx("div",{className:"text-slate-600",children:"Uploading and processing data..."})}),!I.isUploading&&(I.success>0||I.errors.length>0)&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:n.jsxs("div",{className:"text-green-800 font-medium",children:["Successfully uploaded: ",I.success," rules"]})}),I.errors.length>0&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:[n.jsxs("div",{className:"text-red-800 font-medium mb-2",children:["Errors (",I.errors.length,"):"]}),n.jsx("div",{className:"max-h-32 overflow-y-auto text-sm",children:I.errors.map((W,be)=>n.jsxs("div",{className:"text-red-700",children:["Row ",W.row,": ",W.error]},be))})]})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx(Oe,{onClick:ve,disabled:!B||I.isUploading,className:"bg-green-600 hover:bg-green-700 disabled:bg-slate-400",children:I.isUploading?"Uploading...":"Upload File"}),n.jsx(Oe,{onClick:()=>{R(!1),U(null),F({isUploading:!1,success:0,errors:[]})},className:"bg-slate-500 hover:bg-slate-600",children:"Cancel"})]})]})})]})};function wae({currentUser:e}){const[t,r]=_.useState("pricing"),[a,s]=_.useState([]),[i,l]=_.useState([]),[u,d]=_.useState([]),[f,m]=_.useState([]),[g,v]=_.useState(!1),[x,j]=_.useState(null),[b,S]=_.useState(null),[A,E]=_.useState({name:"",price:"",currency:"EUR",interval:"monthly",description:"",user_type:"Investor",country:"Global",is_active:!0}),[T,D]=_.useState({code:"",discount_type:"percentage",discount_value:"",max_uses:"",valid_from:"",valid_until:"",is_active:!0}),[R,B]=_.useState({base_price:150,currency:"EUR",is_active:!0,selected_countries:[]}),[U,I]=_.useState({percentage:30,is_active:!0,selected_countries:[]}),[F,pe]=_.useState([]),[L,q]=_.useState({country:"",amountMin:0,amountMax:0,investorFeeType:"percentage",investorFeeValue:0,startupFeeType:"percentage",startupFeeValue:0}),[z,V]=_.useState(null),[de,se]=_.useState(null),[fe,oe]=_.useState([]),[Se,Y]=_.useState([]),[ye,P]=_.useState([]),[K,le]=_.useState([]),[ee,me]=_.useState([]);_.useEffect(()=>{ke()},[]);const ke=async()=>{try{v(!0);const ae=await tn.getAllRules(),qe=[...new Set(ae.map(ft=>ft.country_name))].sort();d(qe),oe([]),Y([]),P([]),le([]),me([]),s([]),l([])}catch(ae){console.error("Error loading data:",ae),j("Failed to load financial model data")}finally{v(!1)}},Ae=async()=>{try{if(v(!0),j(null),!A.name||!A.price||!A.description){j("Please fill in all required fields");return}const ae={id:Date.now().toString(),name:A.name,price:parseFloat(A.price),currency:A.currency,interval:A.interval,description:A.description,user_type:A.user_type,country:A.country,is_active:A.is_active};s([...a,ae]),E({name:"",price:"",currency:"EUR",interval:"monthly",description:"",user_type:"Investor",country:"Global",is_active:!0}),S("Pricing plan created successfully")}catch(ae){console.error("Error creating plan:",ae),j("Failed to create pricing plan")}finally{v(!1)}},xe=async()=>{try{if(v(!0),j(null),!T.code||!T.discount_value||!T.max_uses){j("Please fill in all required fields");return}const ae={id:Date.now().toString(),code:T.code.toUpperCase(),discount_type:T.discount_type,discount_value:parseFloat(T.discount_value),max_uses:parseInt(T.max_uses),used_count:0,valid_from:T.valid_from||new Date().toISOString().split("T")[0],valid_until:T.valid_until,is_active:T.is_active,created_by:(e==null?void 0:e.id)||"",created_at:new Date().toISOString()};l([...i,ae]),D({code:"",discount_type:"percentage",discount_value:"",max_uses:"",valid_from:"",valid_until:"",is_active:!0}),S("Discount coupon created successfully")}catch(ae){console.error("Error creating coupon:",ae),j("Failed to create discount coupon")}finally{v(!1)}},De=async ae=>{if(confirm("Are you sure you want to delete this pricing plan?"))try{s(a.filter(qe=>qe.id!==ae)),S("Pricing plan deleted successfully")}catch(qe){console.error("Error deleting plan:",qe),j("Failed to delete pricing plan")}},ve=async ae=>{if(confirm("Are you sure you want to delete this discount coupon?"))try{l(i.filter(qe=>qe.id!==ae)),S("Discount coupon deleted successfully")}catch(qe){console.error("Error deleting coupon:",qe),j("Failed to delete discount coupon")}},Z=ae=>{m(qe=>qe.includes(ae)?qe.filter(ft=>ft!==ae):[...qe,ae])},te=()=>{m([...u])},re=()=>{m([])},$=ae=>{B(qe=>({...qe,selected_countries:qe.selected_countries.includes(ae)?qe.selected_countries.filter(ft=>ft!==ae):[...qe.selected_countries,ae]}))},ne=()=>{B(ae=>({...ae,selected_countries:[...u]}))},W=()=>{B(ae=>({...ae,selected_countries:[]}))},be=async()=>{try{v(!0),j(null),S("Due diligence settings updated successfully")}catch(ae){console.error("Error updating due diligence settings:",ae),j("Failed to update due diligence settings")}finally{v(!1)}},Ce=()=>{if(!L.country||!L.investorFeeValue||!L.startupFeeValue){j("Please fill in all required fields");return}const ae={id:Date.now(),country:L.country,userType:"Investor",amountMin:L.amountMin,amountMax:L.amountMax,feeType:L.investorFeeType,feeValue:L.investorFeeValue,isActive:!0},qe={id:Date.now()+1,country:L.country,userType:"Startup",amountMin:L.amountMin,amountMax:L.amountMax,feeType:L.startupFeeType,feeValue:L.startupFeeValue,isActive:!0};pe([...F,ae,qe]),q({country:"",amountMin:0,amountMax:0,investorFeeType:"percentage",investorFeeValue:0,startupFeeType:"percentage",startupFeeValue:0}),S("Fee configurations added successfully for both investors and startups")},ze=ae=>{const qe=[...F];qe[ae].isActive=!qe[ae].isActive,pe(qe)},Pe=ae=>{const qe=F.filter((ft,Et)=>Et!==ae);pe(qe),S("Fee configuration deleted successfully")},we=ae=>({Global:"EUR","United States":"USD","United Kingdom":"GBP",India:"INR",Germany:"EUR",France:"EUR",Canada:"CAD",Australia:"AUD",Japan:"JPY",China:"CNY",Brazil:"BRL",Mexico:"MXN","South Korea":"KRW",Singapore:"SGD",Netherlands:"EUR",Switzerland:"CHF",Sweden:"SEK",Norway:"NOK",Denmark:"DKK",Finland:"EUR",Italy:"EUR",Spain:"EUR",Portugal:"EUR",Ireland:"EUR",Austria:"EUR",Belgium:"EUR",Poland:"PLN","Czech Republic":"CZK",Hungary:"HUF",Romania:"RON",Bulgaria:"BGN",Croatia:"HRK",Slovenia:"EUR",Slovakia:"EUR",Estonia:"EUR",Latvia:"EUR",Lithuania:"EUR",Luxembourg:"EUR",Malta:"EUR",Cyprus:"EUR",Greece:"EUR"})[ae]||"EUR";return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Financial Model Management"}),n.jsx("p",{className:"text-slate-600",children:"Manage subscription pricing and discount coupons"})]})}),n.jsx("div",{className:"border-b border-slate-200",children:n.jsxs("nav",{className:"-mb-px flex space-x-8",children:[n.jsxs("button",{onClick:()=>r("pricing"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="pricing"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[n.jsx(No,{className:"h-4 w-4 inline mr-2"}),"Pricing Plans"]}),n.jsxs("button",{onClick:()=>r("coupons"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="coupons"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[n.jsx(j8,{className:"h-4 w-4 inline mr-2"}),"Discount Coupons"]}),n.jsxs("button",{onClick:()=>r("dueDiligence"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="dueDiligence"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[n.jsx(hd,{className:"h-4 w-4 inline mr-2"}),"Due Diligence"]}),n.jsxs("button",{onClick:()=>r("scoutingFees"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="scoutingFees"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[n.jsx(md,{className:"h-4 w-4 inline mr-2"}),"Scouting Fees"]})]})}),x&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:n.jsx("p",{className:"text-sm text-red-800",children:x})}),b&&n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:n.jsx("p",{className:"text-sm text-green-800",children:b})}),t==="pricing"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Create New Pricing Plan"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Plan Name"}),n.jsx(Ot,{value:A.name,onChange:ae=>E({...A,name:ae.target.value}),placeholder:"e.g., Monthly Plan"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Price (€)"}),n.jsx(Ot,{type:"number",value:A.price,onChange:ae=>E({...A,price:ae.target.value}),placeholder:"15"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Interval"}),n.jsxs("select",{value:A.interval,onChange:ae=>E({...A,interval:ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"monthly",children:"Monthly"}),n.jsx("option",{value:"yearly",children:"Yearly"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"User Type"}),n.jsxs("select",{value:A.user_type,onChange:ae=>E({...A,user_type:ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"Investor",children:"Investor"}),n.jsx("option",{value:"Startup",children:"Startup"}),n.jsx("option",{value:"Startup Facilitation Center",children:"Startup Facilitation Center"}),n.jsx("option",{value:"Investment Advisor",children:"Investment Advisor"})]})]}),n.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Countries"}),n.jsxs("div",{className:"border border-slate-300 rounded-md p-3 max-h-40 overflow-y-auto",children:[n.jsxs("div",{className:"flex gap-2 mb-3",children:[n.jsx(Oe,{type:"button",size:"sm",variant:"outline",onClick:te,className:"text-xs",children:"Select All"}),n.jsx(Oe,{type:"button",size:"sm",variant:"outline",onClick:re,className:"text-xs",children:"Unselect All"})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:u.map(ae=>n.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:f.includes(ae),onChange:()=>Z(ae),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-slate-700",children:ae})]},ae))}),f.length===0&&n.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"No countries selected"})]})]}),n.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),n.jsx(Ot,{value:A.description,onChange:ae=>E({...A,description:ae.target.value}),placeholder:"Description of the pricing plan"})]})]}),n.jsx("div",{className:"mt-4",children:n.jsxs(Oe,{onClick:Ae,disabled:g,children:[n.jsx(zi,{className:"h-4 w-4 mr-2"}),"Create Plan"]})})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Existing Pricing Plans"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Plan Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"User Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Country"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Interval"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Description"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:a.map(ae=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:ae.name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:ae.user_type}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:ae.country}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:["€",ae.price]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 capitalize",children:ae.interval}),n.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:ae.description}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:n.jsx(Gl,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>De(ae.id),className:"text-red-600 hover:text-red-900",children:n.jsx(qa,{className:"h-4 w-4"})})]})})]},ae.id))})]})})]})]}),t==="coupons"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Create New Discount Coupon"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Coupon Code"}),n.jsx(Ot,{value:T.code,onChange:ae=>D({...T,code:ae.target.value.toUpperCase()}),placeholder:"WELCOME20"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Discount Type"}),n.jsxs("select",{value:T.discount_type,onChange:ae=>D({...T,discount_type:ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"percentage",children:"Percentage"}),n.jsx("option",{value:"fixed",children:"Fixed Amount (€)"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Discount Value ",T.discount_type==="percentage"?"(%)":"(€)"]}),n.jsx(Ot,{type:"number",value:T.discount_value,onChange:ae=>D({...T,discount_value:ae.target.value}),placeholder:T.discount_type==="percentage"?"20":"50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Max Uses"}),n.jsx(Ot,{type:"number",value:T.max_uses,onChange:ae=>D({...T,max_uses:ae.target.value}),placeholder:"100"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Valid From"}),n.jsx(Ot,{type:"date",value:T.valid_from,onChange:ae=>D({...T,valid_from:ae.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Valid Until"}),n.jsx(Ot,{type:"date",value:T.valid_until,onChange:ae=>D({...T,valid_until:ae.target.value})})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Applicable Countries"}),n.jsxs("div",{className:"border border-slate-300 rounded-md p-3 max-h-40 overflow-y-auto",children:[n.jsxs("div",{className:"flex gap-2 mb-3",children:[n.jsx(Oe,{type:"button",size:"sm",variant:"outline",onClick:te,className:"text-xs",children:"Select All"}),n.jsx(Oe,{type:"button",size:"sm",variant:"outline",onClick:re,className:"text-xs",children:"Unselect All"})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:u.map(ae=>n.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:f.includes(ae),onChange:()=>Z(ae),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-slate-700",children:ae})]},ae))}),f.length===0&&n.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"No countries selected - will apply globally"})]})]}),n.jsx("div",{className:"mt-4",children:n.jsxs(Oe,{onClick:xe,disabled:g,children:[n.jsx(zi,{className:"h-4 w-4 mr-2"}),"Create Coupon"]})})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Existing Discount Coupons"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Value"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Usage"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Valid Until"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:i.map(ae=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:ae.code}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 capitalize",children:ae.discount_type}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:ae.discount_type==="percentage"?`${ae.discount_value}%`:`€${ae.discount_value}`}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:[ae.used_count,"/",ae.max_uses]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(ae.valid_until).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ae.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ae.is_active?"Active":"Inactive"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:n.jsx(Gl,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>ve(ae.id),className:"text-red-600 hover:text-red-900",children:n.jsx(qa,{className:"h-4 w-4"})})]})})]},ae.id))})]})})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Implemented General Discount Coupons"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Value"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Applicable To"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Countries"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Usage"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Valid Until"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:ee.map(ae=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:ae.code}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 capitalize",children:ae.discount_type}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:ae.discount_type==="percentage"?`${ae.discount_value}%`:`€${ae.discount_value}`}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ae.applicable_to==="All Services"?"bg-purple-100 text-purple-800":ae.applicable_to==="Subscription Plans"?"bg-blue-100 text-blue-800":ae.applicable_to==="Due Diligence"?"bg-green-100 text-green-800":ae.applicable_to==="Scouting Fees"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:ae.applicable_to})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx("div",{className:"flex flex-wrap gap-1",children:ae.countries.map((qe,ft)=>n.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:qe},ft))})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:[ae.used_count,"/",ae.max_uses]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(ae.valid_until).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ae.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ae.is_active?"Active":"Inactive"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:n.jsx(Gl,{className:"h-4 w-4"})}),n.jsx("button",{className:"text-red-600 hover:text-red-900",children:n.jsx(qa,{className:"h-4 w-4"})})]})})]},ae.id))})]})})]})]}),t==="dueDiligence"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Due Diligence Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Base Price (€)"}),n.jsx(Ot,{type:"number",value:R.base_price,onChange:ae=>B({...R,base_price:parseFloat(ae.target.value)||0}),placeholder:"150"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Currency"}),n.jsxs("select",{value:R.currency,onChange:ae=>B({...R,currency:ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"EUR",children:"EUR"}),n.jsx("option",{value:"USD",children:"USD"}),n.jsx("option",{value:"GBP",children:"GBP"})]})]}),n.jsx("div",{className:"flex items-end",children:n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:R.is_active,onChange:ae=>B({...R,is_active:ae.target.checked}),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-slate-700",children:"Active"})]})})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Applicable Countries"}),n.jsxs("div",{className:"border border-slate-300 rounded-md p-3 max-h-40 overflow-y-auto",children:[n.jsxs("div",{className:"flex gap-2 mb-3",children:[n.jsx(Oe,{type:"button",size:"sm",variant:"outline",onClick:ne,className:"text-xs",children:"Select All"}),n.jsx(Oe,{type:"button",size:"sm",variant:"outline",onClick:W,className:"text-xs",children:"Unselect All"})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:u.map(ae=>n.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:R.selected_countries.includes(ae),onChange:()=>$(ae),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-slate-700",children:ae})]},ae))}),R.selected_countries.length===0&&n.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"No countries selected - will apply globally"})]})]}),n.jsx("div",{className:"mt-4",children:n.jsxs(Oe,{onClick:be,disabled:g,children:[n.jsx(Dv,{className:"h-4 w-4 mr-2"}),"Update Settings"]})})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Due Diligence Discount Coupons"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Coupon Code"}),n.jsx(Ot,{value:T.code,onChange:ae=>D({...T,code:ae.target.value.toUpperCase()}),placeholder:"DD20OFF"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Discount Type"}),n.jsxs("select",{value:T.discount_type,onChange:ae=>D({...T,discount_type:ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"percentage",children:"Percentage"}),n.jsx("option",{value:"fixed",children:"Fixed Amount (€)"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Discount Value ",T.discount_type==="percentage"?"(%)":"(€)"]}),n.jsx(Ot,{type:"number",value:T.discount_value,onChange:ae=>D({...T,discount_value:ae.target.value}),placeholder:T.discount_type==="percentage"?"20":"30"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Max Uses"}),n.jsx(Ot,{type:"number",value:T.max_uses,onChange:ae=>D({...T,max_uses:ae.target.value}),placeholder:"100"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Valid From"}),n.jsx(Ot,{type:"date",value:T.valid_from,onChange:ae=>D({...T,valid_from:ae.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Valid Until"}),n.jsx(Ot,{type:"date",value:T.valid_until,onChange:ae=>D({...T,valid_until:ae.target.value})})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Applicable Countries"}),n.jsxs("div",{className:"border border-slate-300 rounded-md p-3 max-h-40 overflow-y-auto",children:[n.jsxs("div",{className:"flex gap-2 mb-3",children:[n.jsx(Oe,{type:"button",size:"sm",variant:"outline",onClick:te,className:"text-xs",children:"Select All"}),n.jsx(Oe,{type:"button",size:"sm",variant:"outline",onClick:re,className:"text-xs",children:"Unselect All"})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:u.map(ae=>n.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:f.includes(ae),onChange:()=>Z(ae),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-slate-700",children:ae})]},ae))}),f.length===0&&n.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"No countries selected - will apply globally"})]})]}),n.jsx("div",{className:"mt-4",children:n.jsxs(Oe,{onClick:xe,disabled:g,children:[n.jsx(zi,{className:"h-4 w-4 mr-2"}),"Create Due Diligence Coupon"]})})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Implemented Country-Specific Due Diligence Fees"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Country"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Base Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Currency"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Created"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:fe.map(ae=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:ae.country}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:ae.base_price}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:ae.currency}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ae.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ae.is_active?"Active":"Inactive"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(ae.created_at).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:n.jsx(Gl,{className:"h-4 w-4"})}),n.jsx("button",{className:"text-red-600 hover:text-red-900",children:n.jsx(qa,{className:"h-4 w-4"})})]})})]},ae.id))})]})})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Implemented Due Diligence Discount Coupons"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Value"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Countries"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Usage"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Valid Until"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:Se.map(ae=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:ae.code}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 capitalize",children:ae.discount_type}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:ae.discount_type==="percentage"?`${ae.discount_value}%`:`€${ae.discount_value}`}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx("div",{className:"flex flex-wrap gap-1",children:ae.countries.map((qe,ft)=>n.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:qe},ft))})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:[ae.used_count,"/",ae.max_uses]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(ae.valid_until).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ae.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ae.is_active?"Active":"Inactive"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:n.jsx(Gl,{className:"h-4 w-4"})}),n.jsx("button",{className:"text-red-600 hover:text-red-900",children:n.jsx(qa,{className:"h-4 w-4"})})]})})]},ae.id))})]})})]})]}),t==="scoutingFees"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"New Investment Flow with Scouting Fees"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Step 1: Investor Makes Offer"}),n.jsxs("p",{className:"text-sm text-blue-700",children:["Investor views pitch video and makes an offer, paying a ",n.jsx("strong",{children:"startup scouting fee"})," based on country, amount raised, and user type."]})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Step 2: Startup Reviews Offer"}),n.jsxs("p",{className:"text-sm text-green-700",children:["Startup sees the offer in their CapTable and can accept or reject it. If accepted, startup pays an ",n.jsx("strong",{children:"investor scouting fee"}),"."]})]}),n.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Step 3: Contact Details Revealed"}),n.jsx("p",{className:"text-sm text-purple-700",children:"Contact details are revealed based on investment advisor assignment. If no advisor is assigned, details are revealed directly to both parties."})]})]})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Add New Scouting Fee Configuration"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Country"}),n.jsxs("select",{value:L.country,onChange:ae=>q({...L,country:ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Select Country"}),n.jsx("option",{value:"Global",children:"Global (EUR)"}),u.map(ae=>n.jsxs("option",{value:ae,children:[ae," (",we(ae),")"]},ae))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Amount Range (Min)"}),n.jsx(Ot,{type:"number",value:L.amountMin,onChange:ae=>q({...L,amountMin:parseFloat(ae.target.value)||0}),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Amount Range (Max)"}),n.jsx(Ot,{type:"number",value:L.amountMax,onChange:ae=>q({...L,amountMax:parseFloat(ae.target.value)||0}),placeholder:"100000 (leave 0 for unlimited)"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsxs("h4",{className:"font-medium text-blue-800 mb-3 flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Investor Fees (Startup Scouting Fee)"]}),n.jsx("p",{className:"text-xs text-blue-600 mb-3",children:"Fee paid by investor when making an offer"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Fee Type"}),n.jsxs("select",{value:L.investorFeeType,onChange:ae=>q({...L,investorFeeType:ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Fee Value ",L.investorFeeType==="percentage"?"(%)":`(${we(L.country)})`]}),n.jsx(Ot,{type:"number",step:(L.investorFeeType==="percentage","0.01"),value:L.investorFeeValue,onChange:ae=>q({...L,investorFeeValue:parseFloat(ae.target.value)||0}),placeholder:L.investorFeeType==="percentage"?"2.0":"500"})]})]})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[n.jsxs("h4",{className:"font-medium text-green-800 mb-3 flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Startup Fees (Investor Scouting Fee)"]}),n.jsx("p",{className:"text-xs text-green-600 mb-3",children:"Fee paid by startup when accepting an offer"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Fee Type"}),n.jsxs("select",{value:L.startupFeeType,onChange:ae=>q({...L,startupFeeType:ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Fee Value ",L.startupFeeType==="percentage"?"(%)":`(${we(L.country)})`]}),n.jsx(Ot,{type:"number",step:(L.startupFeeType==="percentage","0.01"),value:L.startupFeeValue,onChange:ae=>q({...L,startupFeeValue:parseFloat(ae.target.value)||0}),placeholder:L.startupFeeType==="percentage"?"1.0":"300"})]})]})]})]}),n.jsx("div",{className:"mt-6",children:n.jsxs(Oe,{onClick:Ce,disabled:g,children:[n.jsx(zi,{className:"h-4 w-4 mr-2"}),"Add Fee Configuration for Both User Types"]})})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Current Scouting Fee Configurations"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Country"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"User Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Amount Range"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Fee Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Fee Value"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-slate-200",children:[F.map((ae,qe)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:ae.country}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ae.userType==="Investor"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:ae.userType})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:["$",ae.amountMin.toLocaleString()," - ",ae.amountMax===0?"∞":`$${ae.amountMax.toLocaleString()}`]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ae.feeType==="percentage"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:ae.feeType==="percentage"?"Percentage":"Fixed"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:ae.feeType==="percentage"?`${ae.feeValue}%`:`${we(ae.country)} ${ae.feeValue.toLocaleString()}`}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ae.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ae.isActive?"Active":"Inactive"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>ze(qe),className:`text-sm px-2 py-1 rounded ${ae.isActive?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:ae.isActive?"Deactivate":"Activate"}),n.jsx("button",{onClick:()=>Pe(qe),className:"text-red-600 hover:text-red-900",children:n.jsx(qa,{className:"h-4 w-4"})})]})})]},ae.id||qe)),F.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-sm text-slate-500",children:"No scouting fee configurations found. Add one above to get started."})})]})]})})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Default Scouting Fee Configurations"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-slate-800 mb-2",children:"Global Defaults (Applied when no specific country rule exists)"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("h5",{className:"font-medium text-slate-700 mb-2",children:"For Investors (Startup Scouting Fee):"}),n.jsxs("ul",{className:"space-y-1 text-slate-600",children:[n.jsx("li",{children:"• $0 - $100K: 2.0%"}),n.jsx("li",{children:"• $100K - $500K: 1.5%"}),n.jsx("li",{children:"• $500K - $1M: 1.0%"}),n.jsx("li",{children:"• $1M+: 0.5%"})]})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-medium text-slate-700 mb-2",children:"For Startups (Investor Scouting Fee):"}),n.jsxs("ul",{className:"space-y-1 text-slate-600",children:[n.jsx("li",{children:"• $0 - $100K: 1.0%"}),n.jsx("li",{children:"• $100K - $500K: 0.8%"}),n.jsx("li",{children:"• $500K - $1M: 0.5%"}),n.jsx("li",{children:"• $1M+: 0.3%"})]})]})]})]})})]})]})]})}const go=({title:e,value:t,icon:r})=>n.jsx(et,{className:"flex-1",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:e}),n.jsx("p",{className:"text-2xl font-bold text-slate-800",children:t})]}),n.jsx("div",{className:"p-3 bg-brand-light rounded-full",children:r})]})}),yo=(e,t="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:t,notation:"compact"}).format(e),jae=({users:e,startups:t,verificationRequests:r,investmentOffers:a,validationRequests:s,onProcessVerification:i,onProcessOffer:l,onProcessValidationRequest:u,onViewStartup:d})=>{const[f,m]=_.useState("dashboard"),[g,v]=_.useState("all"),x=_.useMemo(()=>e.filter(F=>F.role==="Investor").length,[e]),j=_.useMemo(()=>e.filter(F=>F.role==="Startup").length,[e]),b=_.useMemo(()=>e.filter(F=>F.role==="CA").length,[e]),S=_.useMemo(()=>e.filter(F=>F.role==="CS").length,[e]),A=_.useMemo(()=>e.filter(F=>F.role==="Startup Facilitation Center").length,[e]),E=_.useMemo(()=>e.filter(F=>F.role==="Investment Advisor").length,[e]),T=a.length,D=s.filter(F=>F.status==="pending").length,R=r.length,B=a.filter(F=>F.status==="pending").length,U=_.useMemo(()=>{if(g==="all")return e;const F=new Date,pe=g==="30d"?30:90,L=new Date(new Date().setDate(F.getDate()-pe));return e.filter(q=>new Date(q.registrationDate)>=L)},[e,g]),I=()=>{switch(f){case"dashboard":return n.jsx(_ae,{startups:t,users:U,onViewStartup:d,timeFilter:g,setTimeFilter:v});case"userManagement":return n.jsx(Nae,{users:e});case"startupManagement":return n.jsx(Cae,{startups:t,verificationRequests:r,validationRequests:s,onProcessVerification:i,onProcessValidationRequest:u,onViewStartup:d});case"investmentFlow":return n.jsx(kae,{offers:a,onProcessOffer:l});case"compliance":return n.jsx(Eae,{});case"financial":return n.jsx(Pae,{});case"analytics":return n.jsx(Tae,{users:U,startups:t,offers:a,timeFilter:g,setTimeFilter:v});case"system":return n.jsx(Oae,{});default:return null}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsx(go,{title:"Total Users",value:e.length,icon:n.jsx(Ps,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(go,{title:"Total Startups",value:j,icon:n.jsx(Jl,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(go,{title:"Total Investors",value:x,icon:n.jsx(Hp,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(go,{title:"Investment Advisors",value:E,icon:n.jsx(md,{className:"h-6 w-6 text-brand-primary"})})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsx(go,{title:"CAs (Auditors)",value:b,icon:n.jsx(rQ,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(go,{title:"CSs (Governance)",value:S,icon:n.jsx(iJ,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(go,{title:"Facilitation Centers",value:A,icon:n.jsx(K0,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(go,{title:"Total Startups (Entities)",value:t.length,icon:n.jsx(IJ,{className:"h-6 w-6 text-brand-primary"})})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsx(go,{title:"Pending Verifications",value:R,icon:n.jsx(em,{className:"h-6 w-6 text-yellow-600"})}),n.jsx(go,{title:"Pending Offers",value:B,icon:n.jsx(LJ,{className:"h-6 w-6 text-yellow-600"})}),n.jsx(go,{title:"Pending Validations",value:D,icon:n.jsx(Cs,{className:"h-6 w-6 text-yellow-600"})}),n.jsx(go,{title:"Total Offers",value:T,icon:n.jsx(_8,{className:"h-6 w-6 text-brand-primary"})})]}),n.jsx("div",{className:"border-b border-slate-200",children:n.jsxs("nav",{className:"-mb-px flex flex-wrap space-x-6","aria-label":"Tabs",children:[n.jsx(Xu,{id:"dashboard",activeTab:f,setActiveTab:m,icon:n.jsx(V_,{}),children:"Dashboard"}),n.jsx(Xu,{id:"userManagement",activeTab:f,setActiveTab:m,icon:n.jsx(Ps,{}),children:"User Management"}),n.jsx(Xu,{id:"startupManagement",activeTab:f,setActiveTab:m,icon:n.jsx(Jl,{}),children:"Startup Management"}),n.jsx(Xu,{id:"investmentFlow",activeTab:f,setActiveTab:m,icon:n.jsx(md,{}),children:"Investment Flow"}),n.jsx(Xu,{id:"compliance",activeTab:f,setActiveTab:m,icon:n.jsx(Cs,{}),children:"Compliance"}),n.jsx(Xu,{id:"financial",activeTab:f,setActiveTab:m,icon:n.jsx(No,{}),children:"Financial"}),n.jsx(Xu,{id:"analytics",activeTab:f,setActiveTab:m,icon:n.jsx(z_,{}),children:"Analytics"}),n.jsx(Xu,{id:"system",activeTab:f,setActiveTab:m,icon:n.jsx(Vp,{}),children:"System"})]})}),n.jsx("div",{className:"animate-fade-in",children:I()}),n.jsx("style",{children:`
                @keyframes fade-in {
                    from { opacity: 0; transform: translateY(10px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                .animate-fade-in {
                    animation: fade-in 0.4s ease-in-out forwards;
                }
            `})]})},Xu=({id:e,activeTab:t,setActiveTab:r,icon:a,children:s})=>{const i={className:"h-5 w-5"};return n.jsxs("button",{onClick:()=>r(e),className:`${t===e?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:[Vc.cloneElement(a,i),s]})},$h=({filter:e,currentFilter:t,setTimeFilter:r,children:a})=>n.jsx("button",{type:"button",onClick:()=>r(e),className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${t===e?"bg-brand-primary text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:a}),_ae=({startups:e,users:t,onViewStartup:r,timeFilter:a,setTimeFilter:s})=>n.jsxs("div",{className:"space-y-8",children:[n.jsxs(et,{children:[n.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-4 gap-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Platform Analytics"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx($h,{filter:"30d",currentFilter:a,setTimeFilter:s,children:"30 Days"}),n.jsx($h,{filter:"90d",currentFilter:a,setTimeFilter:s,children:"90 Days"}),n.jsx($h,{filter:"all",currentFilter:a,setTimeFilter:s,children:"All Time"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsx(yD,{users:t}),n.jsx(bD,{users:t})]})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"All Startups"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Sector"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Valuation"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:e.map(i=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:i.name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:i.sector}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:yo(i.currentValuation)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx(Yx,{status:i.complianceStatus})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>r(i.id),children:[n.jsx(ru,{className:"mr-2 h-4 w-4"})," View Details"]})})]},i.id))})]})})]})]}),Nae=({users:e})=>{const[t,r]=_.useState("All"),[a,s]=_.useState(""),i=e.filter(u=>{const d=t==="All"||u.role===t,f=u.name.toLowerCase().includes(a.toLowerCase())||u.email.toLowerCase().includes(a.toLowerCase());return d&&f}),l=e.reduce((u,d)=>(u[d.role]=(u[d.role]||0)+1,u),{});return n.jsxs("div",{className:"space-y-6",children:[n.jsx(et,{children:n.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Filter by Role"}),n.jsxs("select",{value:t,onChange:u=>r(u.target.value),className:"px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsxs("option",{value:"All",children:["All Roles (",e.length,")"]}),Object.entries(l).map(([u,d])=>n.jsxs("option",{value:u,children:[u," (",d,")"]},u))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Search Users"}),n.jsx("input",{type:"text",value:a,onChange:u=>s(u.target.value),placeholder:"Search by name or email...",className:"px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-64"})]})]}),n.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",i.length," of ",e.length," users"]})]})}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"User Management"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Email"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Role"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Service Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Registration Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:i.map(u=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:u.name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:u.email}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${u.role==="Admin"?"bg-purple-100 text-purple-800":u.role==="Investor"?"bg-green-100 text-green-800":u.role==="Startup"?"bg-blue-100 text-blue-800":u.role==="Investment Advisor"?"bg-orange-100 text-orange-800":u.role==="Startup Facilitation Center"?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"}`,children:u.role})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:u.serviceCode||u.investorCode||u.caCode||"-"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:u.registrationDate}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs(Oe,{size:"sm",variant:"outline",children:[n.jsx(ru,{className:"h-4 w-4 mr-1"}),"View"]})})]},u.id))})]})})]})]})},Sae=({requests:e,onProcessVerification:t})=>n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:'"Startup Nation" Verification Requests'}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Startup Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Request Date"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:e.length>0?e.map(r=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:r.startupName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:r.requestDate}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[n.jsxs(Oe,{size:"sm",className:"bg-red-600 hover:bg-red-700",onClick:()=>t(r.id,"rejected"),children:[n.jsx(Ql,{className:"mr-1 h-4 w-4"})," Reject"]}),n.jsxs(Oe,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>t(r.id,"approved"),children:[n.jsx(_o,{className:"mr-1 h-4 w-4"})," Approve"]})]})]},r.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:3,className:"text-center py-10 text-slate-500",children:"No pending verification requests."})})})]})})]}),Aae=({requests:e,onProcessValidationRequest:t})=>{const[r,a]=_.useState(null),[s,i]=_.useState(""),l=async(u,d)=>{a(u);try{await t(u,d,s),i("")}finally{a(null)}};return n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Startup Nation Validation Requests"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Admin Notes (optional)"}),n.jsx("textarea",{value:s,onChange:u=>i(u.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent",placeholder:"Add notes for the startup...",rows:3})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Startup Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Request Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:e.length>0?e.map(u=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:u.startupName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(u.requestDate).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${u.status==="pending"?"bg-yellow-100 text-yellow-800":u.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.status})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[u.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsxs(Oe,{size:"sm",className:"bg-red-600 hover:bg-red-700",onClick:()=>l(u.id,"rejected"),disabled:r===u.id,children:[n.jsx(Ql,{className:"mr-1 h-4 w-4"}),r===u.id?"Processing...":"Reject"]}),n.jsxs(Oe,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>l(u.id,"approved"),disabled:r===u.id,children:[n.jsx(_o,{className:"mr-1 h-4 w-4"}),r===u.id?"Processing...":"Approve"]})]}),u.status!=="pending"&&u.adminNotes&&n.jsx("span",{className:"text-xs text-slate-500",title:u.adminNotes,children:"Has notes"})]})]},u.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"text-center py-10 text-slate-500",children:"No validation requests found."})})})]})})]})},Cae=({startups:e,verificationRequests:t,validationRequests:r,onProcessVerification:a,onProcessValidationRequest:s,onViewStartup:i})=>{const[l,u]=_.useState("startups");return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"border-b border-slate-200",children:n.jsxs("nav",{className:"-mb-px flex space-x-6",children:[n.jsxs("button",{onClick:()=>u("startups"),className:`py-2 px-1 border-b-2 font-medium text-sm ${l==="startups"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[n.jsx(Jl,{className:"h-4 w-4 inline mr-2"}),"All Startups (",e.length,")"]}),n.jsxs("button",{onClick:()=>u("verifications"),className:`py-2 px-1 border-b-2 font-medium text-sm ${l==="verifications"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[n.jsx(em,{className:"h-4 w-4 inline mr-2"}),"Verifications (",t.length,")"]}),n.jsxs("button",{onClick:()=>u("validations"),className:`py-2 px-1 border-b-2 font-medium text-sm ${l==="validations"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[n.jsx(Cs,{className:"h-4 w-4 inline mr-2"}),"Validations (",r.filter(d=>d.status==="pending").length,")"]})]})}),l==="startups"&&n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"All Startups"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Sector"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Valuation"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:e.map(d=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:d.name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:d.sector}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:yo(d.currentValuation)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx(Yx,{status:d.complianceStatus})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>i(d.id),children:[n.jsx(ru,{className:"mr-2 h-4 w-4"})," View Details"]})})]},d.id))})]})})]}),l==="verifications"&&n.jsx(Sae,{requests:t,onProcessVerification:a}),l==="validations"&&n.jsx(Aae,{requests:r,onProcessValidationRequest:s})]})},kae=({offers:e,onProcessOffer:t})=>{const[r,a]=_.useState("activeOffers"),[s,i]=_.useState("all"),l=e.filter(f=>f.status==="pending"||f.status==="accepted"),u=l.filter(f=>s==="all"||f.status===s),d=l.reduce((f,m)=>(f[m.status]=(f[m.status]||0)+1,f),{});return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"border-b border-gray-200",children:n.jsxs("nav",{className:"-mb-px flex space-x-8",children:[n.jsx("button",{onClick:()=>a("activeOffers"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="activeOffers"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Active Investment Offers"}),n.jsx("button",{onClick:()=>a("ledger"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="ledger"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Investment Ledger"})]})}),r==="activeOffers"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx(et,{children:n.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[n.jsx("div",{className:"flex gap-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Filter by Status"}),n.jsxs("select",{value:s,onChange:f=>i(f.target.value),className:"px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsxs("option",{value:"all",children:["All Active Offers (",l.length,")"]}),n.jsxs("option",{value:"pending",children:["Pending (",d.pending||0,")"]}),n.jsxs("option",{value:"accepted",children:["Accepted (",d.accepted||0,")"]})]})]})}),n.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",u.length," of ",l.length," active offers"]})]})}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Active Investment Offers"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Startup"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Investor"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Offer Amount"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Equity %"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Scouting Fees"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Date"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:u.map(f=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:f.startupName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.investorEmail}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:yo(f.offerAmount)}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:[f.equityPercentage,"%"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsxs("div",{className:"text-xs",children:[n.jsxs("div",{children:["Startup: ",yo(f.startup_scouting_fee_paid||0)]}),n.jsxs("div",{children:["Investor: ",yo(f.investor_scouting_fee_paid||0)]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${f.status==="pending"?"bg-yellow-100 text-yellow-800":f.status==="accepted"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:f.status})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(f.createdAt).toLocaleDateString()})]},f.id))})]})})]})]}),r==="ledger"&&n.jsx("div",{className:"space-y-6",children:n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Investment Ledger"}),n.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Complete transaction history of all investment activities including offers, scouting fees, and status changes."}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Activity"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Startup"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Investor"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Amount"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Description"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:e.map(f=>n.jsxs(Vc.Fragment,{children:[n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(f.createdAt).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:"Offer Made"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.startupName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.investorEmail}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:yo(f.offerAmount)}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:["Investment offer for ",f.equityPercentage,"% equity"]})]}),f.startup_scouting_fee_paid>0&&n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(f.startup_scouting_fee_payment_date||f.createdAt).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600",children:"Startup Scouting Fee"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.startupName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.investorEmail}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:yo(f.startup_scouting_fee_paid)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:"Paid by investor when making offer"})]}),f.status!=="pending"&&n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(f.updatedAt||f.createdAt).toLocaleDateString()}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:["Offer ",f.status==="accepted"?"Accepted":"Rejected"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.startupName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.investorEmail}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:"—"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.status==="accepted"?"Startup accepted the investment offer":"Startup rejected the investment offer"})]}),f.status==="accepted"&&f.investor_scouting_fee_paid>0&&n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(f.investor_scouting_fee_payment_date||f.updatedAt||f.createdAt).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600",children:"Investor Scouting Fee"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.startupName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.investorEmail}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:yo(f.investor_scouting_fee_paid)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:"Paid by startup when accepting offer"})]}),f.contact_details_revealed&&n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(f.contact_details_revealed_date||f.updatedAt||f.createdAt).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-purple-600",children:"Contact Details Revealed"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.startupName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.investorEmail}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:"—"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:"Contact information shared between parties"})]})]},f.id))})]})})]})})]})},Eae=()=>n.jsx(bae,{}),Pae=()=>n.jsx(wae,{currentUser:null}),Tae=({users:e,startups:t,offers:r,timeFilter:a,setTimeFilter:s})=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs(et,{children:[n.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-4 gap-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Platform Analytics"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx($h,{filter:"30d",currentFilter:a,setTimeFilter:s,children:"30 Days"}),n.jsx($h,{filter:"90d",currentFilter:a,setTimeFilter:s,children:"90 Days"}),n.jsx($h,{filter:"all",currentFilter:a,setTimeFilter:s,children:"All Time"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsx(yD,{users:e}),n.jsx(bD,{users:e})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Investment Activity"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Total Investment Offers"}),n.jsx("span",{className:"font-semibold",children:r.length})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Pending Offers"}),n.jsx("span",{className:"font-semibold text-yellow-600",children:r.filter(i=>i.status==="pending").length})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Approved Offers"}),n.jsx("span",{className:"font-semibold text-green-600",children:r.filter(i=>i.status==="approved").length})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Total Investment Value"}),n.jsx("span",{className:"font-semibold",children:yo(r.reduce((i,l)=>i+l.offerAmount,0))})]})]})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Startup Metrics"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Total Startups"}),n.jsx("span",{className:"font-semibold",children:t.length})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Average Valuation"}),n.jsx("span",{className:"font-semibold",children:yo(t.reduce((i,l)=>i+l.currentValuation,0)/t.length||0)})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Total Funding Raised"}),n.jsx("span",{className:"font-semibold",children:yo(t.reduce((i,l)=>i+l.totalFunding,0))})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Total Revenue"}),n.jsx("span",{className:"font-semibold",children:yo(t.reduce((i,l)=>i+l.totalRevenue,0))})]})]})]})]})]}),Oae=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"System Management"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg",children:[n.jsx($x,{className:"h-8 w-8 text-blue-600 mb-2"}),n.jsx("h4",{className:"font-semibold text-slate-700",children:"Data Management"}),n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Manage platform data and exports"}),n.jsxs(Oe,{size:"sm",className:"mt-2",variant:"outline",children:[n.jsx($x,{className:"h-4 w-4 mr-1"}),"Access"]})]}),n.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg",children:[n.jsx(Vp,{className:"h-8 w-8 text-green-600 mb-2"}),n.jsx("h4",{className:"font-semibold text-slate-700",children:"System Settings"}),n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Configure platform settings"}),n.jsxs(Oe,{size:"sm",className:"mt-2",variant:"outline",children:[n.jsx(Vp,{className:"h-4 w-4 mr-1"}),"Configure"]})]}),n.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg",children:[n.jsx(Yl,{className:"h-8 w-8 text-yellow-600 mb-2"}),n.jsx("h4",{className:"font-semibold text-slate-700",children:"System Health"}),n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Monitor system performance"}),n.jsxs(Oe,{size:"sm",className:"mt-2",variant:"outline",children:[n.jsx(Yl,{className:"h-4 w-4 mr-1"}),"Monitor"]})]})]})]}),n.jsx(vae,{})]}),Dae=({startups:e,onUpdateCompliance:t,onViewStartup:r,currentUser:a,onProfileUpdate:s,onLogout:i})=>{const[l,u]=_.useState("all"),[d,f]=_.useState(""),[m,g]=_.useState(null),[v,x]=_.useState([]),[j,b]=_.useState([]),[S,A]=_.useState(e),[E,T]=_.useState({totalStartups:0,pendingReview:0,compliant:0,nonCompliant:0,activeAssignments:0,pendingRequests:0}),[D,R]=_.useState(!0),[B,U]=_.useState(!1),[I,F]=_.useState("assignments"),[pe,L]=_.useState(null),[q,z]=_.useState(!1),[V,de]=_.useState(!1),[se,fe]=_.useState(!1),[oe,Se]=_.useState(!1),[Y,ye]=_.useState([]),[P,K]=_.useState(!1),[le,ee]=_.useState(new Set),me=async ne=>{console.log("Share button clicked for startup:",ne.name),console.log("Startup object:",ne);const W=ne.pitchVideoUrl||"Video not available",be=`Startup: ${ne.name||"N/A"}
Sector: ${ne.sector||"N/A"}
Ask: $${(ne.investmentValue||0).toLocaleString()} for ${ne.equityAllocation||0}% equity
Valuation: $${(ne.currentValuation||0).toLocaleString()}

Pitch Video: ${W}`;console.log("Share details:",be);try{if(navigator.share){console.log("Using native share API");const Ce={title:ne.name||"Startup Pitch",text:be,url:W!=="Video not available"?W:void 0};await navigator.share(Ce)}else if(navigator.clipboard&&navigator.clipboard.writeText)console.log("Using clipboard API"),await navigator.clipboard.writeText(be),alert("Startup details copied to clipboard");else{console.log("Using fallback copy method");const Ce=document.createElement("textarea");Ce.value=be,document.body.appendChild(Ce),Ce.select(),document.execCommand("copy"),document.body.removeChild(Ce),alert("Startup details copied to clipboard")}}catch(Ce){console.error("Share failed",Ce),alert("Unable to share. Try copying manually.")}};_.useEffect(()=>{(async()=>{R(!0);try{const[W,be,Ce,ze]=await Promise.all([Ri.getCACode(),Ri.getCAStats(),Ri.getAssignedStartups(),Ri.getAssignmentRequests()]);g(W),T(be),x(Ce),b(ze)}catch(W){console.error("Error loading CA data:",W)}finally{R(!1)}})()},[]),_.useEffect(()=>{(async()=>{K(!0);try{const W=await xi.getActiveFundraisingStartups();ye(W)}catch(W){console.error("Error loading pitches:",W)}finally{K(!1)}})()},[]),_.useEffect(()=>{A(e)},[e]);const Ae=(I==="browse"?S:v).filter(W=>{const be=l==="all"||l==="pending"&&W.complianceStatus===Ct.Pending||l==="compliant"&&W.complianceStatus===Ct.Compliant||l==="non-compliant"&&W.complianceStatus===Ct.NonCompliant,Ce=W.name.toLowerCase().includes(d.toLowerCase())||W.sector.toLowerCase().includes(d.toLowerCase());return be&&Ce}),xe=j.filter(ne=>ne.status==="pending"),De=ne=>{switch(ne){case Ct.Compliant:return n.jsx(ua,{className:"h-5 w-5 text-green-500"});case Ct.NonCompliant:return n.jsx(Up,{className:"h-5 w-5 text-red-500"});case Ct.Pending:return n.jsx(Yl,{className:"h-5 w-5 text-yellow-500"});default:return n.jsx(vn,{className:"h-5 w-5 text-gray-500"})}},ve=ne=>{switch(ne){case Ct.Compliant:return"text-green-700 bg-green-50 border-green-200";case Ct.NonCompliant:return"text-red-700 bg-red-50 border-red-200";case Ct.Pending:return"text-yellow-700 bg-yellow-50 border-yellow-200";default:return"text-gray-700 bg-gray-50 border-gray-200"}},Z=async ne=>{try{if(await Ri.approveAssignmentRequest(ne)){const[be,Ce,ze]=await Promise.all([Ri.getCAStats(),Ri.getAssignedStartups(),Ri.getAssignmentRequests()]);T(be),x(Ce),b(ze),alert("Assignment request approved successfully!")}else alert("Failed to approve request. Please try again.")}catch(W){console.error("Error approving request:",W),alert("Error approving request.")}},te=async ne=>{const W=prompt("Please provide a reason for rejection (optional):");try{if(await Ri.rejectAssignmentRequest(ne,W||void 0)){const[Ce,ze,Pe]=await Promise.all([Ri.getCAStats(),Ri.getAssignedStartups(),Ri.getAssignmentRequests()]);T(Ce),x(ze),b(Pe),alert("Assignment request rejected successfully!")}else alert("Failed to reject request. Please try again.")}catch(be){console.error("Error rejecting request:",be),alert("Error rejecting request.")}},re=ne=>v.some(W=>W.id===ne),$=ne=>{ee(W=>{const be=new Set(W);return be.has(ne)?be.delete(ne):be.add(ne),be})};return D?n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-600",children:"Loading CA dashboard..."})]})}):oe?(console.log("🔍 CAView: Rendering ProfilePage, showProfilePage =",oe),n.jsx(cg,{currentUser:a,onBack:()=>{console.log("🔍 CAView: Back button clicked, setting showProfilePage to false"),Se(!1)},onProfileUpdate:ne=>{console.log("Profile updated in CAView:",ne)},onLogout:i})):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"relative profile-menu",children:n.jsx("button",{onClick:()=>{console.log("🔍 CAView: Menu button clicked, setting showProfilePage to true"),Se(!0)},className:"p-2 rounded-full hover:bg-slate-100 transition-colors","aria-label":"Profile menu",children:n.jsx(Ov,{className:"h-6 w-6 text-slate-600"})})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900",children:"TrackMyStartup"}),n.jsx("p",{className:"text-slate-600 text-sm lg:text-base",children:"Manage financial compliance and audit requirements"})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 lg:gap-4",children:[m&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"CA Code:"}),n.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 lg:px-3 lg:py-1 rounded-md text-xs lg:text-sm font-medium",children:m})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(No,{className:"h-6 w-6 lg:h-8 lg:w-8 text-green-600"}),n.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Chartered Accountant"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3 lg:gap-4",children:[n.jsx(et,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Total Startups"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-slate-900",children:E.totalStartups})]}),n.jsx(vn,{className:"h-6 w-6 lg:h-8 lg:w-8 text-blue-500"})]})}),n.jsx(et,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Pending Review"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-yellow-600",children:E.pendingReview})]}),n.jsx(Yl,{className:"h-6 w-6 lg:h-8 lg:w-8 text-yellow-500"})]})}),n.jsx(et,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Compliant"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-green-600",children:E.compliant})]}),n.jsx(ua,{className:"h-6 w-6 lg:h-8 lg:w-8 text-green-500"})]})}),n.jsx(et,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Non-Compliant"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-red-600",children:E.nonCompliant})]}),n.jsx(Up,{className:"h-6 w-6 lg:h-8 lg:w-8 text-red-500"})]})}),n.jsx(et,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Active Assignments"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-brand-primary",children:E.activeAssignments})]}),n.jsx(Hp,{className:"h-6 w-6 lg:h-8 lg:w-8 text-brand-primary"})]})}),n.jsx(et,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Pending Requests"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-orange-600",children:E.pendingRequests})]}),n.jsx(Yl,{className:"h-6 w-6 lg:h-8 lg:w-8 text-orange-500"})]})})]}),n.jsx(H_,{currentUser:a,userRole:"CA",className:"mb-6"}),n.jsx(et,{className:"p-4",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4",children:[n.jsx(Oe,{variant:I==="assignments"?"primary":"secondary",onClick:()=>F("assignments"),className:"w-full sm:w-auto text-sm",children:"My Assignments"}),n.jsxs(Oe,{variant:I==="requests"?"primary":"secondary",onClick:()=>F("requests"),className:"w-full sm:w-auto text-sm",children:["Assignment Requests (",E.pendingRequests,")"]}),n.jsx(Oe,{variant:I==="reels"?"primary":"secondary",onClick:()=>F("reels"),className:"w-full sm:w-auto text-sm",children:"Discover Pitches"})]}),n.jsxs("div",{className:"text-xs lg:text-sm text-slate-600 text-center lg:text-left",children:[I==="assignments"&&"View your assigned startups",I==="requests"&&"Review pending assignment requests",I==="reels"&&"Watch active fundraising pitches"]})]})}),I!=="reels"&&n.jsx(et,{className:"p-4",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(hd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search startups...",value:d,onChange:ne=>f(ne.target.value),className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary text-sm"})]})}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[n.jsx(Oe,{variant:l==="all"?"primary":"secondary",onClick:()=>u("all"),className:"text-xs py-2",children:"All"}),n.jsx(Oe,{variant:l==="pending"?"primary":"secondary",onClick:()=>u("pending"),className:"text-xs py-2",children:"Pending"}),n.jsx(Oe,{variant:l==="compliant"?"primary":"secondary",onClick:()=>u("compliant"),className:"text-xs py-2",children:"Compliant"}),n.jsx(Oe,{variant:l==="non-compliant"?"primary":"secondary",onClick:()=>u("non-compliant"),className:"text-xs py-2",children:"Non-Compliant"})]})]})}),I==="assignments"&&n.jsxs("div",{className:"space-y-4",children:[Ae.map(ne=>{const W=re(ne.id);return n.jsx(et,{className:"p-4 lg:p-6",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{className:"flex items-start gap-3 lg:gap-4",children:[De(ne.complianceStatus),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-base lg:text-lg font-semibold text-slate-900 truncate",children:ne.name}),n.jsx("p",{className:"text-sm text-slate-600",children:ne.sector}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mt-2",children:W&&n.jsx("span",{className:"text-xs lg:text-sm text-brand-primary font-medium",children:"✓ Assigned"})})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[De(ne.complianceStatus),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${ve(ne.complianceStatus)}`,children:ne.complianceStatus})]}),n.jsx("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:n.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>{console.log("🔍 View Details clicked for startup:",ne),console.log("🔍 onViewStartup function exists:",!!r),alert(`Navigating to ${ne.name} dashboard...`);const be={id:ne.id,name:ne.name,investmentType:"Seed",investmentValue:ne.totalFunding||0,equityAllocation:0,currentValuation:ne.totalFunding||0,complianceStatus:ne.complianceStatus,sector:ne.sector,totalFunding:ne.totalFunding,totalRevenue:ne.totalRevenue,registrationDate:ne.registrationDate,founders:[]};console.log("🔍 Calling onViewStartup with:",be),r(be),console.log("🔍 onViewStartup called successfully")},className:"w-full sm:w-auto text-xs",children:"View Details"})})]})]})},ne.id)}),Ae.length===0&&n.jsxs(et,{className:"p-6 lg:p-8 text-center",children:[n.jsx(vn,{className:"h-10 w-10 lg:h-12 lg:w-12 text-slate-400 mx-auto mb-4"}),n.jsx("p",{className:"text-sm lg:text-base text-slate-600",children:"No startups assigned to you yet"}),n.jsx(Oe,{variant:"primary",className:"mt-4 w-full sm:w-auto",onClick:()=>F("browse"),children:"Browse All Startups"})]})]}),I==="requests"&&n.jsxs("div",{className:"space-y-4",children:[xe.map(ne=>n.jsx(et,{className:"p-4 lg:p-6",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{className:"flex items-start gap-3 lg:gap-4",children:[n.jsx(Yl,{className:"h-5 w-5 text-orange-500 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-base lg:text-lg font-semibold text-slate-900",children:ne.startupName}),n.jsx("p",{className:"text-sm text-slate-600",children:"Assignment Request"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mt-2",children:[n.jsxs("span",{className:"text-xs lg:text-sm text-slate-500",children:["Requested: ",new Date(ne.requestDate).toLocaleDateString()]}),ne.notes&&n.jsxs("span",{className:"text-xs lg:text-sm text-slate-500",children:["Notes: ",ne.notes]})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[n.jsx("span",{className:"px-2 py-1 lg:px-3 lg:py-1 rounded-full text-xs lg:text-sm font-medium border text-orange-700 bg-orange-50 border-orange-200",children:"Pending"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[n.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>r(e.find(W=>W.id===ne.startupId)||e[0]),children:"View Startup"}),n.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>Z(ne.id),className:"text-green-600 border-green-600 hover:bg-green-50 w-full sm:w-auto text-xs",children:"Approve"}),n.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>te(ne.id),className:"text-red-600 border-red-600 hover:bg-red-50 w-full sm:w-auto text-xs",children:"Reject"})]})]})]})},ne.id)),xe.length===0&&n.jsxs(et,{className:"p-6 lg:p-8 text-center",children:[n.jsx(ua,{className:"h-10 w-10 lg:h-12 lg:w-12 text-green-400 mx-auto mb-4"}),n.jsx("p",{className:"text-sm lg:text-base text-slate-600",children:"No pending assignment requests"})]})]}),I==="reels"&&n.jsxs("div",{className:"animate-fade-in max-w-4xl mx-auto w-full",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-slate-800 mb-2",children:"Discover Pitches"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Watch startup videos and explore opportunities"})]}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx(hd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search startups by name or sector...",value:d,onChange:ne=>f(ne.target.value),className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary text-sm"})]})}),n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl border border-blue-100 gap-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("button",{onClick:()=>{z(!1),de(!1)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${!q&&!V?"bg-blue-600 text-white shadow-blue-200":"bg-white text-slate-600 hover:bg-blue-50 hover:text-blue-600 border border-slate-200"}`,children:[n.jsx(Wl,{className:"h-3 w-3 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"All"})]}),n.jsxs("button",{onClick:()=>{z(!0),de(!1)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${q&&!V?"bg-green-600 text-white shadow-green-200":"bg-white text-slate-600 hover:bg-green-50 hover:text-green-600 border border-slate-200"}`,children:[n.jsx(ua,{className:`h-3 w-3 sm:h-4 sm:w-4 ${q&&!V?"fill-current":""}`}),n.jsx("span",{className:"hidden sm:inline",children:"Verified"})]}),n.jsxs("button",{onClick:()=>{z(!1),de(!0)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${V?"bg-red-600 text-white shadow-red-200":"bg-white text-slate-600 hover:bg-red-50 hover:text-red-600 border border-slate-200"}`,children:[n.jsx(tm,{className:`h-3 w-3 sm:h-4 sm:w-4 ${V?"fill-current":""}`}),n.jsx("span",{className:"hidden sm:inline",children:"Favorites"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.jsxs("span",{className:"text-xs sm:text-sm font-medium",children:[Y.length," active pitches"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[n.jsx(Wl,{className:"h-4 w-4 sm:h-5 sm:w-5"}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Pitch Reels"})]})]})]}),n.jsxs("div",{className:"space-y-8",children:[(()=>{let ne=Y;return d.trim()&&(ne=ne.filter(W=>W.name.toLowerCase().includes(d.toLowerCase())||W.sector.toLowerCase().includes(d.toLowerCase()))),q?ne=ne.filter(W=>W.isStartupNationValidated):V&&(ne=ne.filter(W=>le.has(W.id))),ne})().map(ne=>{const W=xi.getYoutubeEmbedUrl(ne.pitchVideoUrl);return n.jsxs(et,{className:"!p-0 overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border-0 bg-white",children:[n.jsx("div",{className:"relative w-full aspect-[16/9] bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:W?pe===ne.id?n.jsxs("div",{className:"relative w-full h-full",children:[n.jsx("iframe",{src:W,title:`Pitch video for ${ne.name}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full"}),n.jsx("button",{onClick:()=>L(null),className:"absolute top-4 right-4 bg-black/70 text-white rounded-full p-2 hover:bg-black/90 transition-all duration-200 backdrop-blur-sm",children:"×"})]}):n.jsxs("div",{className:"relative w-full h-full group cursor-pointer",onClick:()=>L(ne.id),children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/40"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"w-20 h-20 bg-red-600 rounded-full flex items-center justify-center shadow-2xl transform group-hover:scale-110 transition-all duration-300 group-hover:shadow-red-500/50",children:n.jsx("svg",{className:"w-10 h-10 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M8 5v14l11-7z"})})})}),n.jsx("div",{className:"absolute bottom-4 left-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:n.jsx("p",{className:"text-sm font-medium",children:"Click to play"})})]}):n.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:n.jsxs("div",{className:"text-center",children:[n.jsx(od,{className:"h-16 w-16 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No video available"})]})})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-1",children:ne.name}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium flex items-center gap-2",children:[n.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),ne.sector]})]}),ne.isStartupNationValidated&&n.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-3 py-1.5 rounded-full text-xs font-medium shadow-sm",children:[n.jsx(ua,{className:"h-3 w-3"}),"Verified"]})]}),n.jsx("div",{className:"bg-gradient-to-r from-blue-50 via-purple-50 to-blue-50 px-4 py-3 mt-4 rounded-lg border border-blue-100 shadow-sm",children:n.jsxs("div",{className:"text-sm",children:[n.jsx("span",{className:"font-semibold text-slate-800",children:"Investment Ask:"}),n.jsxs("span",{className:"text-base font-bold text-blue-600 ml-2",children:["$",ne.investmentValue.toLocaleString()]}),n.jsx("span",{className:"text-slate-600 ml-2",children:"for"}),n.jsxs("span",{className:"font-semibold text-purple-600 ml-1",children:[ne.equityAllocation,"%"]}),n.jsx("span",{className:"text-slate-600 ml-1",children:"equity"})]})}),n.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[n.jsxs("button",{onClick:()=>$(ne.id),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 shadow-sm ${le.has(ne.id)?"bg-gradient-to-r from-red-500 to-pink-500 text-white shadow-red-200 hover:shadow-red-300":"bg-white text-slate-600 hover:bg-red-50 hover:text-red-600 border border-slate-200 hover:border-red-200"}`,children:[n.jsx(tm,{className:`h-5 w-5 ${le.has(ne.id)?"fill-current":""}`}),le.has(ne.id)&&n.jsx("span",{className:"text-xs",children:"Liked"})]}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>me(ne),className:"flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 shadow-sm bg-white text-slate-600 hover:bg-blue-50 hover:text-blue-600 border border-slate-200 hover:border-blue-200",children:[n.jsx(Rv,{className:"h-5 w-5"}),"Share"]}),ne.pitchDeckUrl&&ne.pitchDeckUrl!=="#"&&n.jsx("a",{href:ne.pitchDeckUrl,target:"_blank",rel:"noreferrer",children:n.jsxs(Oe,{size:"sm",variant:"secondary",className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white border-0 hover:from-blue-600 hover:to-purple-600 shadow-md hover:shadow-lg transition-all duration-200",children:[n.jsx(vn,{className:"h-4 w-4 mr-2"}),"View Deck"]})})]})]})]},ne.fundraisingId)}),Y.length===0&&n.jsx(et,{className:"text-center py-16 text-slate-500",children:"No active fundraising startups."})]})]})]})},Rae=({startups:e,onUpdateCompliance:t,onViewStartup:r,currentUser:a,onProfileUpdate:s,onLogout:i})=>{const[l,u]=_.useState("all"),[d,f]=_.useState(""),[m,g]=_.useState(null),[v,x]=_.useState([]),[j,b]=_.useState([]),[S,A]=_.useState(e),[E,T]=_.useState({totalStartups:0,pendingReview:0,compliant:0,nonCompliant:0,activeAssignments:0,pendingRequests:0}),[D,R]=_.useState(!0),[B,U]=_.useState(!1),[I,F]=_.useState("assignments"),[pe,L]=_.useState(null),[q,z]=_.useState(!1),[V,de]=_.useState(!1),[se,fe]=_.useState(!1),[oe,Se]=_.useState(!1),[Y,ye]=_.useState([]),[P,K]=_.useState(!1),[le,ee]=_.useState(new Set),me=async ne=>{console.log("Share button clicked for startup:",ne.name),console.log("Startup object:",ne);const W=ne.pitchVideoUrl||"Video not available",be=`Startup: ${ne.name||"N/A"}
Sector: ${ne.sector||"N/A"}
Ask: $${(ne.investmentValue||0).toLocaleString()} for ${ne.equityAllocation||0}% equity
Valuation: $${(ne.currentValuation||0).toLocaleString()}

Pitch Video: ${W}`;console.log("Share details:",be);try{if(navigator.share){console.log("Using native share API");const Ce={title:ne.name||"Startup Pitch",text:be,url:W!=="Video not available"?W:void 0};await navigator.share(Ce)}else if(navigator.clipboard&&navigator.clipboard.writeText)console.log("Using clipboard API"),await navigator.clipboard.writeText(be),alert("Startup details copied to clipboard");else{console.log("Using fallback copy method");const Ce=document.createElement("textarea");Ce.value=be,document.body.appendChild(Ce),Ce.select(),document.execCommand("copy"),document.body.removeChild(Ce),alert("Startup details copied to clipboard")}}catch(Ce){console.error("Share failed",Ce),alert("Unable to share. Try copying manually.")}};_.useEffect(()=>{(async()=>{R(!0);try{const[W,be,Ce,ze]=await Promise.all([Li.getCSCode(),Li.getCSStats(),Li.getAssignedStartups(),Li.getAssignmentRequests()]);g(W),T(be),x(Ce),b(ze)}catch(W){console.error("Error loading CS data:",W)}finally{R(!1)}})()},[]),_.useEffect(()=>{(async()=>{K(!0);try{const W=await xi.getActiveFundraisingStartups();ye(W)}catch(W){console.error("Error loading pitches:",W)}finally{K(!1)}})()},[]),_.useEffect(()=>{A(e)},[e]);const Ae=(I==="browse"?S:v).filter(W=>{const be=l==="all"||l==="pending"&&W.complianceStatus===Ct.Pending||l==="compliant"&&W.complianceStatus===Ct.Compliant||l==="non-compliant"&&W.complianceStatus===Ct.NonCompliant,Ce=W.name.toLowerCase().includes(d.toLowerCase())||W.sector.toLowerCase().includes(d.toLowerCase());return be&&Ce}),xe=j.filter(ne=>ne.status==="pending"),De=ne=>{switch(ne){case Ct.Compliant:return n.jsx(ua,{className:"h-5 w-5 text-green-500"});case Ct.NonCompliant:return n.jsx(Up,{className:"h-5 w-5 text-red-500"});case Ct.Pending:return n.jsx(Yl,{className:"h-5 w-5 text-yellow-500"});default:return n.jsx(vn,{className:"h-5 w-5 text-gray-500"})}},ve=ne=>{switch(ne){case Ct.Compliant:return"text-green-700 bg-green-50 border-green-200";case Ct.NonCompliant:return"text-red-700 bg-red-50 border-red-200";case Ct.Pending:return"text-yellow-700 bg-yellow-50 border-yellow-200";default:return"text-gray-700 bg-gray-50 border-gray-200"}},Z=async ne=>{try{if(await Li.approveAssignmentRequest(ne)){const[be,Ce,ze]=await Promise.all([Li.getCSStats(),Li.getAssignedStartups(),Li.getAssignmentRequests()]);T(be),x(Ce),b(ze),alert("Assignment request approved successfully!")}else alert("Failed to approve request. Please try again.")}catch(W){console.error("Error approving request:",W),alert("Error approving request.")}},te=async ne=>{const W=prompt("Please provide a reason for rejection (optional):");try{if(await Li.rejectAssignmentRequest(ne,W||void 0)){const[Ce,ze,Pe]=await Promise.all([Li.getCSStats(),Li.getAssignedStartups(),Li.getAssignmentRequests()]);T(Ce),x(ze),b(Pe),alert("Assignment request rejected successfully!")}else alert("Failed to reject request. Please try again.")}catch(be){console.error("Error rejecting request:",be),alert("Error rejecting request.")}},re=ne=>v.some(W=>W.id===ne),$=ne=>{ee(W=>{const be=new Set(W);return be.has(ne)?be.delete(ne):be.add(ne),be})};return D?n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-600",children:"Loading CS dashboard..."})]})}):oe?(console.log("🔍 CSView: Rendering ProfilePage, showProfilePage =",oe),n.jsx(cg,{currentUser:a,onBack:()=>{console.log("🔍 CSView: Back button clicked, setting showProfilePage to false"),Se(!1)},onProfileUpdate:ne=>{console.log("Profile updated in CSView:",ne)},onLogout:i})):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"relative profile-menu",children:n.jsx("button",{onClick:()=>{console.log("🔍 CSView: Menu button clicked, setting showProfilePage to true"),Se(!0)},className:"p-2 rounded-full hover:bg-slate-100 transition-colors","aria-label":"Profile menu",children:n.jsx(Ov,{className:"h-6 w-6 text-slate-600"})})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900",children:"TrackMyStartup"}),n.jsx("p",{className:"text-slate-600 text-sm lg:text-base",children:"Manage legal compliance and company secretary requirements"})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 lg:gap-4",children:[m&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"CS Code:"}),n.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 lg:px-3 lg:py-1 rounded-md text-xs lg:text-sm font-medium",children:m})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fQ,{className:"h-6 w-6 lg:h-8 lg:w-8 text-purple-600"}),n.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Company Secretary"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3 lg:gap-4",children:[n.jsx(et,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Total Startups"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-slate-900",children:E.totalStartups})]}),n.jsx(vn,{className:"h-6 w-6 lg:h-8 lg:w-8 text-blue-500"})]})}),n.jsx(et,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Pending Review"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-yellow-600",children:E.pendingReview})]}),n.jsx(Yl,{className:"h-6 w-6 lg:h-8 lg:w-8 text-yellow-500"})]})}),n.jsx(et,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Compliant"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-green-600",children:E.compliant})]}),n.jsx(ua,{className:"h-6 w-6 lg:h-8 lg:w-8 text-green-500"})]})}),n.jsx(et,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Non-Compliant"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-red-600",children:E.nonCompliant})]}),n.jsx(Up,{className:"h-6 w-6 lg:h-8 lg:w-8 text-red-500"})]})}),n.jsx(et,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Active Assignments"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-brand-primary",children:E.activeAssignments})]}),n.jsx(Hp,{className:"h-6 w-6 lg:h-8 lg:w-8 text-brand-primary"})]})}),n.jsx(et,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Pending Requests"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-orange-600",children:E.pendingRequests})]}),n.jsx(Yl,{className:"h-6 w-6 lg:h-8 lg:w-8 text-orange-500"})]})})]}),n.jsx(H_,{currentUser:a,userRole:"CS",className:"mb-6"}),n.jsx(et,{className:"p-4",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4",children:[n.jsx(Oe,{variant:I==="assignments"?"primary":"secondary",onClick:()=>F("assignments"),className:"w-full sm:w-auto text-sm",children:"My Assignments"}),n.jsxs(Oe,{variant:I==="requests"?"primary":"secondary",onClick:()=>F("requests"),className:"w-full sm:w-auto text-sm",children:["Assignment Requests (",E.pendingRequests,")"]}),n.jsx(Oe,{variant:I==="reels"?"primary":"secondary",onClick:()=>F("reels"),className:"w-full sm:w-auto text-sm",children:"Discover Pitches"})]}),n.jsxs("div",{className:"text-xs lg:text-sm text-slate-600 text-center lg:text-left",children:[I==="assignments"&&"View your assigned startups",I==="requests"&&"Review pending assignment requests",I==="reels"&&"Watch active fundraising pitches"]})]})}),I!=="reels"&&n.jsx(et,{className:"p-4",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(hd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search startups...",value:d,onChange:ne=>f(ne.target.value),className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary text-sm"})]})}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[n.jsx(Oe,{variant:l==="all"?"primary":"secondary",onClick:()=>u("all"),className:"text-xs py-2",children:"All"}),n.jsx(Oe,{variant:l==="pending"?"primary":"secondary",onClick:()=>u("pending"),className:"text-xs py-2",children:"Pending"}),n.jsx(Oe,{variant:l==="compliant"?"primary":"secondary",onClick:()=>u("compliant"),className:"text-xs py-2",children:"Compliant"}),n.jsx(Oe,{variant:l==="non-compliant"?"primary":"secondary",onClick:()=>u("non-compliant"),className:"text-xs py-2",children:"Non-Compliant"})]})]})}),I==="assignments"&&n.jsxs("div",{className:"space-y-4",children:[Ae.map(ne=>{const W=re(ne.id);return n.jsx(et,{className:"p-4 lg:p-6",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{className:"flex items-start gap-3 lg:gap-4",children:[De(ne.complianceStatus),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-base lg:text-lg font-semibold text-slate-900 truncate",children:ne.name}),n.jsx("p",{className:"text-sm text-slate-600",children:ne.sector}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mt-2",children:W&&n.jsx("span",{className:"text-xs lg:text-sm text-brand-primary font-medium",children:"✓ Assigned"})})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[De(ne.complianceStatus),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${ve(ne.complianceStatus)}`,children:ne.complianceStatus})]}),n.jsx("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:n.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>{console.log("🔍 View Details clicked for startup:",ne),console.log("🔍 onViewStartup function exists:",!!r),alert(`Navigating to ${ne.name} dashboard...`);const be={id:ne.id,name:ne.name,investmentType:"Seed",investmentValue:ne.totalFunding||0,equityAllocation:0,currentValuation:ne.totalFunding||0,complianceStatus:ne.complianceStatus,sector:ne.sector,totalFunding:ne.totalFunding,totalRevenue:ne.totalRevenue,registrationDate:ne.registrationDate,founders:[]};console.log("🔍 Calling onViewStartup with:",be),r(be),console.log("🔍 onViewStartup called successfully")},className:"w-full sm:w-auto text-xs",children:"View Details"})})]})]})},ne.id)}),Ae.length===0&&n.jsxs(et,{className:"p-6 lg:p-8 text-center",children:[n.jsx(vn,{className:"h-10 w-10 lg:h-12 lg:w-12 text-slate-400 mx-auto mb-4"}),n.jsx("p",{className:"text-sm lg:text-base text-slate-600",children:"No startups assigned to you yet"}),n.jsx(Oe,{variant:"primary",className:"mt-4 w-full sm:w-auto",onClick:()=>F("browse"),children:"Browse All Startups"})]})]}),I==="requests"&&n.jsxs("div",{className:"space-y-4",children:[xe.map(ne=>n.jsx(et,{className:"p-4 lg:p-6",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{className:"flex items-start gap-3 lg:gap-4",children:[n.jsx(Yl,{className:"h-5 w-5 text-orange-500 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-base lg:text-lg font-semibold text-slate-900",children:ne.startupName}),n.jsx("p",{className:"text-sm text-slate-600",children:"Assignment Request"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mt-2",children:[n.jsxs("span",{className:"text-xs lg:text-sm text-slate-500",children:["Requested: ",new Date(ne.requestDate).toLocaleDateString()]}),ne.notes&&n.jsxs("span",{className:"text-xs lg:text-sm text-slate-500",children:["Notes: ",ne.notes]})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[n.jsx("span",{className:"px-2 py-1 lg:px-3 lg:py-1 rounded-full text-xs lg:text-sm font-medium border text-orange-700 bg-orange-50 border-orange-200",children:"Pending"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[n.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>r(e.find(W=>W.id===ne.startupId)||e[0]),className:"w-full sm:w-auto text-xs",children:"View Startup"}),n.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>Z(ne.id),className:"text-green-600 border-green-600 hover:bg-green-50 w-full sm:w-auto text-xs",children:"Approve"}),n.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>te(ne.id),className:"text-red-600 border-red-600 hover:bg-red-50 w-full sm:w-auto text-xs",children:"Reject"})]})]})]})},ne.id)),xe.length===0&&n.jsxs(et,{className:"p-6 lg:p-8 text-center",children:[n.jsx(ua,{className:"h-10 w-10 lg:h-12 lg:w-12 text-green-400 mx-auto mb-4"}),n.jsx("p",{className:"text-sm lg:text-base text-slate-600",children:"No pending assignment requests"})]})]}),I==="reels"&&n.jsxs("div",{className:"animate-fade-in max-w-4xl mx-auto w-full",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-slate-800 mb-2",children:"Discover Pitches"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Watch startup videos and explore opportunities"})]}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx(hd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search startups by name or sector...",value:d,onChange:ne=>f(ne.target.value),className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary text-sm"})]})}),n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl border border-blue-100 gap-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("button",{onClick:()=>{z(!1),de(!1)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${!q&&!V?"bg-blue-600 text-white shadow-blue-200":"bg-white text-slate-600 hover:bg-blue-50 hover:text-blue-600 border border-slate-200"}`,children:[n.jsx(Wl,{className:"h-3 w-3 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"All"})]}),n.jsxs("button",{onClick:()=>{z(!0),de(!1)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${q&&!V?"bg-green-600 text-white shadow-green-200":"bg-white text-slate-600 hover:bg-green-50 hover:text-green-600 border border-slate-200"}`,children:[n.jsx(ua,{className:`h-3 w-3 sm:h-4 sm:w-4 ${q&&!V?"fill-current":""}`}),n.jsx("span",{className:"hidden sm:inline",children:"Verified"})]}),n.jsxs("button",{onClick:()=>{z(!1),de(!0)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${V?"bg-red-600 text-white shadow-red-200":"bg-white text-slate-600 hover:bg-red-50 hover:text-red-600 border border-slate-200"}`,children:[n.jsx(tm,{className:`h-3 w-3 sm:h-4 sm:w-4 ${V?"fill-current":""}`}),n.jsx("span",{className:"hidden sm:inline",children:"Favorites"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.jsxs("span",{className:"text-xs sm:text-sm font-medium",children:[Y.length," active pitches"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[n.jsx(Wl,{className:"h-4 w-4 sm:h-5 sm:w-5"}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Pitch Reels"})]})]})]}),n.jsxs("div",{className:"space-y-8",children:[(()=>{let ne=Y;return d.trim()&&(ne=ne.filter(W=>W.name.toLowerCase().includes(d.toLowerCase())||W.sector.toLowerCase().includes(d.toLowerCase()))),q?ne=ne.filter(W=>W.isStartupNationValidated):V&&(ne=ne.filter(W=>le.has(W.id))),ne})().map(ne=>{const W=xi.getYoutubeEmbedUrl(ne.pitchVideoUrl);return n.jsxs(et,{className:"!p-0 overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border-0 bg-white",children:[n.jsx("div",{className:"relative w-full aspect-[16/9] bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:W?pe===ne.id?n.jsxs("div",{className:"relative w-full h-full",children:[n.jsx("iframe",{src:W,title:`Pitch video for ${ne.name}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full"}),n.jsx("button",{onClick:()=>L(null),className:"absolute top-4 right-4 bg-black/70 text-white rounded-full p-2 hover:bg-black/90 transition-all duration-200 backdrop-blur-sm",children:"×"})]}):n.jsxs("div",{className:"relative w-full h-full group cursor-pointer",onClick:()=>L(ne.id),children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/40"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"w-20 h-20 bg-red-600 rounded-full flex items-center justify-center shadow-2xl transform group-hover:scale-110 transition-all duration-300 group-hover:shadow-red-500/50",children:n.jsx("svg",{className:"w-10 h-10 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M8 5v14l11-7z"})})})}),n.jsx("div",{className:"absolute bottom-4 left-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:n.jsx("p",{className:"text-sm font-medium",children:"Click to play"})})]}):n.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:n.jsxs("div",{className:"text-center",children:[n.jsx(od,{className:"h-16 w-16 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No video available"})]})})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-1",children:ne.name}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium flex items-center gap-2",children:[n.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),ne.sector]})]}),ne.isStartupNationValidated&&n.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-3 py-1.5 rounded-full text-xs font-medium shadow-sm",children:[n.jsx(ua,{className:"h-3 w-3"}),"Verified"]})]}),n.jsx("div",{className:"bg-gradient-to-r from-blue-50 via-purple-50 to-blue-50 px-4 py-3 mt-4 rounded-lg border border-blue-100 shadow-sm",children:n.jsxs("div",{className:"text-sm",children:[n.jsx("span",{className:"font-semibold text-slate-800",children:"Investment Ask:"}),n.jsxs("span",{className:"text-base font-bold text-blue-600 ml-2",children:["$",ne.investmentValue.toLocaleString()]}),n.jsx("span",{className:"text-slate-600 ml-2",children:"for"}),n.jsxs("span",{className:"font-semibold text-purple-600 ml-1",children:[ne.equityAllocation,"%"]}),n.jsx("span",{className:"text-slate-600 ml-1",children:"equity"})]})}),n.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[n.jsxs("button",{onClick:()=>$(ne.id),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 shadow-sm ${le.has(ne.id)?"bg-gradient-to-r from-red-500 to-pink-500 text-white shadow-red-200 hover:shadow-red-300":"bg-white text-slate-600 hover:bg-red-50 hover:text-red-600 border border-slate-200 hover:border-red-200"}`,children:[n.jsx(tm,{className:`h-5 w-5 ${le.has(ne.id)?"fill-current":""}`}),le.has(ne.id)&&n.jsx("span",{className:"text-xs",children:"Liked"})]}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>me(ne),className:"flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 shadow-sm bg-white text-slate-600 hover:bg-blue-50 hover:text-blue-600 border border-slate-200 hover:border-blue-200",children:[n.jsx(Rv,{className:"h-5 w-5"}),"Share"]}),ne.pitchDeckUrl&&ne.pitchDeckUrl!=="#"&&n.jsx("a",{href:ne.pitchDeckUrl,target:"_blank",rel:"noreferrer",children:n.jsxs(Oe,{size:"sm",variant:"secondary",className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white border-0 hover:from-blue-600 hover:to-purple-600 shadow-md hover:shadow-lg transition-all duration-200",children:[n.jsx(vn,{className:"h-4 w-4 mr-2"}),"View Deck"]})})]})]})]},ne.fundraisingId)}),Y.length===0&&n.jsx(et,{className:"text-center py-16 text-slate-500",children:"No active fundraising startups."})]})]})]})};class Lae{async addStartupToPortfolio(t,r,a){try{const{data:s,error:i}=await G.from("facilitator_startups").insert({facilitator_id:t,startup_id:r,recognition_record_id:a,status:"active"}).select().single();if(i)throw console.error("❌ Error adding startup to portfolio:",i),console.error("❌ Error details:",{code:i.code,message:i.message,details:i.details,hint:i.hint}),console.error("🔍 Data being inserted:",{facilitator_id:t,startup_id:r,recognition_record_id:a,status:"active"}),i;return{id:s.id,facilitatorId:s.facilitator_id,startupId:s.startup_id,recognitionRecordId:s.recognition_record_id,accessGrantedAt:s.access_granted_at,status:s.status,createdAt:s.created_at,updatedAt:s.updated_at}}catch(s){return console.error("Error in addStartupToPortfolio:",s),null}}async getFacilitatorPortfolio(t){try{const{data:r,error:a}=await G.from("facilitator_startups").select(`
          startup_id,
          status,
          access_granted_at
        `).eq("facilitator_id",t).eq("status","active");if(a)throw console.error("Error fetching facilitator relationships:",a),a;if(!r||r.length===0)return[];const s=r.map(b=>b.startup_id),{data:i,error:l}=await G.from("startups").select(`
          id,
          name,
          sector,
          current_valuation,
          compliance_status,
          total_funding,
          total_revenue,
          registration_date
        `).in("id",s);if(l)throw console.error("Error fetching startup data:",l),l;const{data:u,error:d}=await G.from("cap_table").select("*").in("startup_id",s).order("created_at",{ascending:!1}),{data:f,error:m}=await G.from("compliance_tasks").select("*").in("startup_id",s),{data:g,error:v}=await G.from("financials").select("*").in("startup_id",s),{data:x,error:j}=await G.from("incubation_programs").select("*").in("startup_id",s);return d&&console.warn("Warning: Could not fetch cap table data:",d),m&&console.warn("Warning: Could not fetch compliance data:",m),v&&console.warn("Warning: Could not fetch financial data:",v),j&&console.warn("Warning: Could not fetch incubation data:",j),(i||[]).map(b=>{const S=(u==null?void 0:u.filter(U=>U.startup_id===b.id))||[],A=(f==null?void 0:f.filter(U=>U.startup_id===b.id))||[],E=(g==null?void 0:g.filter(U=>U.startup_id===b.id))||[],T=(x==null?void 0:x.filter(U=>U.startup_id===b.id))||[],D=S[0],R=(D==null?void 0:D.post_money_valuation)||b.current_valuation||0,B=this.calculateOverallComplianceStatus(A);return{id:b.id,name:b.name,sector:b.sector||"N/A",currentValuation:R,complianceStatus:B,totalFunding:b.total_funding||0,totalRevenue:b.total_revenue||0,registrationDate:b.registration_date||new Date().toISOString().split("T")[0],capTableData:S,complianceData:A,financialData:E,incubationData:T}})}catch(r){return console.error("Error in getFacilitatorPortfolio:",r),[]}}calculateOverallComplianceStatus(t){if(!t||t.length===0)return"Pending";const r=t.length,a=t.filter(l=>l.status==="completed").length,s=t.filter(l=>l.status==="pending").length;return t.filter(l=>l.status==="pending"&&l.due_date&&new Date(l.due_date)<new Date).length>0?"Non-Compliant":a===r?"Compliant":(s>0,"Pending")}async hasAccessToStartup(t,r){try{const{data:a,error:s}=await G.from("facilitator_startups").select("id").eq("facilitator_id",t).eq("startup_id",r).eq("status","active").single();if(s){if(s.code==="PGRST116")return!1;throw s}return!!a}catch(a){return console.error("Error checking facilitator access:",a),!1}}async revokeAccess(t,r){try{const{error:a}=await G.from("facilitator_startups").update({status:"revoked"}).eq("facilitator_id",t).eq("startup_id",r);if(a)throw console.error("Error revoking access:",a),a;return!0}catch(a){return console.error("Error in revokeAccess:",a),!1}}}const hk=new Lae;class Mae{generateFacilitatorCode(){return`FAC${Math.random().toString(36).substring(2,9).toUpperCase()}`}async getFacilitatorCodeByUserId(t){try{const{data:r,error:a}=await G.from("users").select("facilitator_code").eq("id",t).eq("role","Startup Facilitation Center").single();return a?(console.error("Error fetching facilitator code:",a),null):(r==null?void 0:r.facilitator_code)||null}catch(r){return console.error("Error in getFacilitatorCodeByUserId:",r),null}}async getOpportunitiesByCode(t){try{const{data:r,error:a}=await G.from("incubation_opportunities").select("*").eq("facilitator_code",t).order("created_at",{ascending:!1});return a?(console.error("Error fetching opportunities by facilitator code:",a),[]):(console.log("Found opportunities for facilitator code:",t,r),(r||[]).map(s=>({id:s.id,programName:s.program_name,description:s.description,deadline:s.deadline,posterUrl:s.poster_url||void 0,videoUrl:s.video_url||void 0,facilitatorId:s.facilitator_id,facilitatorCode:s.facilitator_code||t,createdAt:s.created_at})))}catch(r){return console.error("Error in getOpportunitiesByCode:",r),[]}}async getApplicationsByCode(t){try{const{data:r,error:a}=await G.from("incubation_opportunities").select("id").eq("facilitator_code",t);if(a)return console.error("Error fetching opportunities by facilitator code:",a),[];if(!r||r.length===0)return console.log("No opportunities found for facilitator code:",t),[];const s=r.map(f=>f.id);console.log("Found opportunities for facilitator code:",s);const{data:i,error:l}=await G.from("opportunity_applications").select(`
          *,
          incubation_opportunities!opportunity_applications_opportunity_id_fkey (
            program_name,
            facilitator_code
          ),
          startups!opportunity_applications_startup_id_fkey (
            name
          )
        `).in("opportunity_id",s).order("created_at",{ascending:!1});if(l)return console.error("Error fetching applications:",l),[];console.log("Raw applications data:",i);const u=[...new Set((i==null?void 0:i.map(f=>f.startup_id))||[])];let d={};if(u.length>0){const{data:f,error:m}=await G.from("startup_pitch_materials").select("startup_id, pitch_deck_url, pitch_video_url").in("startup_id",u);!m&&f&&(d=(f||[]).reduce((g,v)=>(g[v.startup_id]={pitchDeckUrl:v.pitch_deck_url||void 0,pitchVideoUrl:v.pitch_video_url||void 0},g),{}))}return console.log("Pitch materials loaded:",d),l?(console.error("Error fetching applications:",l),[]):(console.log("Raw applications data:",i),(i||[]).map(f=>{var g,v;const m=d[f.startup_id]||{};return{id:f.id,startupId:f.startup_id,startupName:((g=f.startups)==null?void 0:g.name)||"Unknown Startup",opportunityId:f.opportunity_id,status:f.status||"pending",diligenceStatus:f.diligence_status||"none",agreementUrl:f.agreement_url||void 0,pitchDeckUrl:f.pitch_deck_url||m.pitchDeckUrl||void 0,pitchVideoUrl:f.pitch_video_url||m.pitchVideoUrl||void 0,facilitatorCode:((v=f.incubation_opportunities)==null?void 0:v.facilitator_code)||t,createdAt:f.created_at}}))}catch(r){return console.error("Error in getApplicationsByCode:",r),[]}}async createOrUpdateFacilitatorCode(t){try{console.log("🔍 Creating/updating facilitator code for user:",t);const r=await this.getFacilitatorCodeByUserId(t);if(r)return console.log("✅ User already has facilitator code:",r),r;const a=this.generateFacilitatorCode();console.log("📝 Generated new facilitator code:",a,"(length:",a.length,")");const{error:s}=await G.from("users").update({facilitator_code:a}).eq("id",t).eq("role","Startup Facilitation Center");return s?(console.error("❌ Error updating user with facilitator code:",s),console.error("❌ Code that failed:",a,"(length:",a.length,")"),null):(console.log("✅ Successfully created facilitator code:",a),a)}catch(r){return console.error("❌ Error in createOrUpdateFacilitatorCode:",r),null}}async checkComplianceAccess(t,r){try{console.log("🔍 Checking compliance access for facilitator code:",t,"startup ID:",r);const{data:a,error:s}=await G.from("incubation_opportunities").select("id").eq("facilitator_code",t);if(s)return console.error("Error fetching opportunities for facilitator code:",s),!1;if(!a||a.length===0)return console.log("No opportunities found for facilitator code:",t),!1;const i=a.map(f=>f.id);console.log("Found opportunities for facilitator code:",i);const{data:l,error:u}=await G.from("opportunity_applications").select("id, diligence_status").eq("startup_id",r).in("opportunity_id",i).eq("diligence_status","approved");if(u)return console.error("Error checking applications for compliance access:",u),!1;const d=l&&l.length>0;return console.log("Compliance access check result:",d,"for startup:",r),d}catch(a){return console.error("Error in checkComplianceAccess:",a),!1}}}const wD=new Mae,jD=({className:e="",currentUser:t})=>{const[r,a]=_.useState(null),[s,i]=_.useState(!0);return _.useEffect(()=>{(async()=>{if(t!=null&&t.id)try{const u=await wD.getFacilitatorCodeByUserId(t.id);a(u)}catch(u){console.error("Error loading facilitator code:",u)}finally{i(!1)}else i(!1)})()},[t==null?void 0:t.id]),s?n.jsx("div",{className:`bg-blue-100 text-blue-800 px-3 py-1 rounded-md text-sm font-medium ${e}`,children:"Loading..."}):r?n.jsxs("div",{className:`bg-blue-100 text-blue-800 px-3 py-1 rounded-md text-sm font-medium ${e}`,children:["Facilitator Code: ",n.jsx("span",{className:"font-bold",children:r})]}):null},u2={programName:"",description:"",deadline:"",posterUrl:"",videoUrl:"",facilitatorDescription:"",facilitatorWebsite:""},d2=({title:e,value:t,icon:r})=>n.jsx(et,{className:"flex-1",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:e}),n.jsx("p",{className:"text-2xl font-bold text-slate-800",children:t})]}),n.jsx("div",{className:"p-3 bg-brand-light rounded-full",children:r})]})}),Iae=({startups:e,newInvestments:t,startupAdditionRequests:r,onViewStartup:a,onAcceptRequest:s,currentUser:i,onProfileUpdate:l,onLogout:u})=>{const[d,f]=_.useState("dashboard"),[m,g]=_.useState(!1),[v,x]=_.useState(!1),[j,b]=_.useState(!1),[S,A]=_.useState(!1),[E,T]=_.useState(null),[D,R]=_.useState(null),[B,U]=_.useState(u2),[I,F]=_.useState(""),[pe,L]=_.useState(null),[q,z]=_.useState(!1),[V,de]=_.useState(null),[se,fe]=_.useState([]),[oe,Se]=_.useState(!1),[Y,ye]=_.useState(null),[P,K]=_.useState(null),[le,ee]=_.useState([]),[me,ke]=_.useState([]),[Ae,xe]=_.useState([]),[De,ve]=_.useState(!1),[Z,te]=_.useState([]),[re,$]=_.useState(!1),[ne,W]=_.useState(""),be=async Ke=>{console.log("Share button clicked for startup:",Ke.name),console.log("Startup object:",Ke);const Re=Ke.pitchVideoUrl||"Video not available",at=Ke.equityAllocation>0?Ke.investmentValue/(Ke.equityAllocation/100):0,rt=`Startup: ${Ke.name||"N/A"}
Sector: ${Ke.sector||"N/A"}
Ask: $${(Ke.investmentValue||0).toLocaleString()} for ${Ke.equityAllocation||0}% equity
Valuation: $${at.toLocaleString()}

Pitch Video: ${Re}`;console.log("Share details:",rt);try{if(navigator.share){console.log("Using native share API");const Tt={title:Ke.name||"Startup Pitch",text:rt,url:Re!=="Video not available"?Re:void 0};await navigator.share(Tt)}else if(navigator.clipboard&&navigator.clipboard.writeText)console.log("Using clipboard API"),await navigator.clipboard.writeText(rt),alert("Startup details copied to clipboard");else{console.log("Using fallback copy method");const Tt=document.createElement("textarea");Tt.value=rt,document.body.appendChild(Tt),Tt.select(),document.execCommand("copy"),document.body.removeChild(Tt),alert("Startup details copied to clipboard")}}catch(Tt){console.error("Share failed",Tt),alert("Unable to share. Try copying manually.")}},Ce=_.useMemo(()=>Z,[Z]);_.useMemo(()=>r,[r]);const ze=async Ke=>{try{$(!0);const Re=await hk.getFacilitatorPortfolio(Ke);te(Re)}catch(Re){console.error("Error loading portfolio:",Re),te([])}finally{$(!1)}},Pe=async Ke=>{try{ve(!0),console.log("🔍 Loading recognition requests for facilitator ID:",Ke);const{data:Re,error:at}=await G.from("users").select("facilitator_code").eq("id",Ke).single();if(at){console.error("❌ Error getting facilitator code:",at);return}let rt=Re==null?void 0:Re.facilitator_code;if(!rt&&(console.log("📝 No facilitator code found, creating one..."),rt=await wD.createOrUpdateFacilitatorCode(Ke),!rt)){console.error("❌ Failed to create facilitator code");return}if(console.log("📋 Facilitator code:",rt),!rt){console.error("❌ No facilitator code available, cannot load recognition records"),xe([]);return}console.log("🔍 Querying recognition_records with facilitator code:",rt);const{data:Tt,error:Te}=await G.from("recognition_records").select("*").limit(5);console.log("🔍 All recognition records in database:",Tt),console.log("🔍 All records error:",Te);const{data:Ue,error:it}=await G.from("recognition_records").select(`
          *,
          startups (
            id, 
            name, 
            sector, 
            total_funding,
            total_revenue,
            registration_date
          )
        `).eq("facilitator_code",rt).order("date_added",{ascending:!1});if(console.log("📊 Raw query result:",{data:Ue,error:it}),it){console.error("❌ Error loading recognition requests:",it),console.log("🔄 Trying fallback query without foreign key join...");const{data:We,error:It}=await G.from("recognition_records").select(`
            *,
            startups (
              id, 
              name, 
              sector, 
              total_funding,
              total_revenue,
              registration_date
            )
          `).eq("facilitator_code",rt).order("date_added",{ascending:!1});if(It){console.error("❌ Fallback query also failed:",It),xe([]);return}console.log("✅ Fallback query successful:",We);const ir=(We||[]).map(St=>({id:St.id.toString(),startupId:St.startup_id,programName:St.program_name,facilitatorName:St.facilitator_name,facilitatorCode:St.facilitator_code,incubationType:St.incubation_type,feeType:St.fee_type,feeAmount:St.fee_amount,equityAllocated:St.equity_allocated,preMoneyValuation:St.pre_money_valuation,signedAgreementUrl:St.signed_agreement_url,status:St.status||"pending",dateAdded:St.date_added,startup:St.startups}));console.log("✅ Loaded recognition requests (fallback):",ir),console.log("🔍 Startup data in fallback records:",ir.map(St=>{var Ht;return{id:St.id,startupName:(Ht=St.startup)==null?void 0:Ht.name,startupData:St.startup}})),xe(ir);return}const kt=(Ue||[]).map(We=>({id:We.id.toString(),startupId:We.startup_id,programName:We.program_name,facilitatorName:We.facilitator_name,facilitatorCode:We.facilitator_code,incubationType:We.incubation_type,feeType:We.fee_type,feeAmount:We.fee_amount,equityAllocated:We.equity_allocated,preMoneyValuation:We.pre_money_valuation,signedAgreementUrl:We.signed_agreement_url,status:We.status||"pending",dateAdded:We.date_added,startup:We.startups}));console.log("✅ Loaded recognition requests:",kt),console.log("🔍 Startup data in records:",kt.map(We=>{var It;return{id:We.id,startupName:(It=We.startup)==null?void 0:It.name,startupData:We.startup}})),xe(kt)}catch(Re){console.error("Error loading recognition requests:",Re)}finally{ve(!1)}};_.useEffect(()=>{let Ke=!0,Re;return(async()=>{try{const{data:{user:rt}}=await G.auth.getUser();if(!Ke||!(rt!=null&&rt.id))return;K(rt.id),console.log("🔍 Facilitator ID set:",rt.id),Re=setTimeout(()=>{Ke&&console.warn("⚠️ Data loading timeout - some data may not have loaded")},3e4);const[Tt,Te,Ue]=await Promise.allSettled([G.from("incubation_opportunities").select("*").eq("facilitator_id",rt.id).order("created_at",{ascending:!1}),Pe(rt.id),ze(rt.id)]);if(!Ke)return;if(Tt.status==="fulfilled"&&!Tt.value.error){const it=Tt.value.data;if(Array.isArray(it)){const kt=it.map(We=>({id:We.id,programName:We.program_name,description:We.description,deadline:We.deadline,posterUrl:We.poster_url||void 0,videoUrl:We.video_url||void 0,facilitatorId:We.facilitator_id,createdAt:We.created_at}));if(ee(kt),kt.length>0){const We=kt.map(It=>It.id);console.log("🔍 Loading applications for opportunities:",We);try{const{data:It,error:ir}=await G.from("opportunity_applications").select("id, opportunity_id, status, startup_id, pitch_deck_url, pitch_video_url, diligence_status, agreement_url, created_at, startups!inner(id,name)").in("opportunity_id",We).order("created_at",{ascending:!1});if(ir){console.error("❌ Error loading opportunity applications:",ir),console.log("🔄 Trying fallback query without inner join...");const{data:St,error:Ht}=await G.from("opportunity_applications").select("id, opportunity_id, status, startup_id, pitch_deck_url, pitch_video_url, diligence_status, agreement_url, created_at").in("opportunity_id",We).order("created_at",{ascending:!1});if(Ht)console.error("❌ Fallback query also failed:",Ht),ke([]);else{console.log("✅ Fallback applications query successful");const ar=(St||[]).map(cr=>({id:cr.id,startupId:cr.startup_id,startupName:"Unknown Startup",opportunityId:cr.opportunity_id,status:cr.status,diligenceStatus:cr.diligence_status,agreementUrl:cr.agreement_url,pitchDeckUrl:cr.pitch_deck_url,pitchVideoUrl:cr.pitch_video_url,createdAt:cr.created_at}));ke(ar)}}else{console.log("📋 Raw applications data:",It);const St=(It||[]).map(Ht=>{var ar;return{id:Ht.id,startupId:Ht.startup_id,startupName:((ar=Ht.startups)==null?void 0:ar.name)||`Startup #${Ht.startup_id}`,opportunityId:Ht.opportunity_id,status:Ht.status||"pending",pitchDeckUrl:Ht.pitch_deck_url||void 0,pitchVideoUrl:Ht.pitch_video_url||void 0,diligenceStatus:Ht.diligence_status||"none",agreementUrl:Ht.agreement_url||void 0,createdAt:Ht.created_at}});console.log("🎯 Mapped applications:",St),Ke&&ke(St)}}catch(It){console.error("Error loading applications:",It),ke([])}}else ke([])}}else console.error("Error loading opportunities:",Tt.status==="rejected"?Tt.reason:Tt.value.error);Te.status==="rejected"&&console.error("Error loading recognition records:",Te.reason),Ue.status==="rejected"&&console.error("Error loading portfolio:",Ue.reason)}catch(rt){console.error("Error in loadFacilitatorData:",rt)}finally{Re&&clearTimeout(Re)}})(),()=>{Ke=!1,Re&&clearTimeout(Re)}},[]),_.useEffect(()=>{if(d!=="discover")return;let Ke=!0;return Se(!0),xi.getActiveFundraisingStartups().then(Re=>{Ke&&fe(Re)}).finally(()=>{Ke&&Se(!1)}),()=>{Ke=!1}},[d]);const we=_.useMemo(()=>{const Ke=rt=>rt?new Date(rt).getTime():0,Re=me.filter(rt=>rt.status==="pending").sort((rt,Tt)=>Ke(Tt.createdAt)-Ke(rt.createdAt)),at=me.filter(rt=>rt.status!=="pending").sort((rt,Tt)=>Ke(Tt.createdAt)-Ke(rt.createdAt));return[...Re,...at]},[me]);_.useEffect(()=>{if(!P||le.length===0)return;const Ke=le.map(at=>at.id);let Re=null;try{Re=G.channel("opportunity_applications_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"opportunity_applications"},async at=>{try{const rt=at.new;if(!Ke.includes(rt.opportunity_id))return;const{data:Tt,error:Te}=await G.from("startups").select("id,name").eq("id",rt.startup_id).single();if(Te){console.error("Error fetching startup for new application:",Te);return}ke(Ue=>[{id:rt.id,startupId:rt.startup_id,startupName:(Tt==null?void 0:Tt.name)||`Startup #${rt.startup_id}`,opportunityId:rt.opportunity_id,status:rt.status||"pending",pitchDeckUrl:rt.pitch_deck_url||void 0,pitchVideoUrl:rt.pitch_video_url||void 0,diligenceStatus:rt.diligence_status||"none",agreementUrl:rt.agreement_url||void 0,createdAt:rt.created_at},...Ue]),console.log(`✅ New application received from ${(Tt==null?void 0:Tt.name)||"Startup"} for opportunity ${rt.opportunity_id}`),console.log("📝 Application details:",rt)}catch(rt){console.error("Error processing new application:",rt)}}).subscribe(at=>{at==="SUBSCRIBED"?console.log("✅ Subscribed to opportunity applications changes"):at==="CHANNEL_ERROR"&&console.error("❌ Error subscribing to opportunity applications changes")})}catch(at){console.error("Error setting up opportunity applications subscription:",at)}return()=>{Re&&(console.log("🔌 Unsubscribing from opportunity applications changes"),Re.unsubscribe())}},[P,le]),_.useEffect(()=>{if(!P||le.length===0)return;const Ke=le.map(at=>at.id);let Re=null;try{Re=G.channel("diligence_status_changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"opportunity_applications",filter:`opportunity_id=in.(${Ke.join(",")})`},async at=>{try{const rt=at.new;if(!Ke.includes(rt.opportunity_id))return;if(ke(Tt=>Tt.map(Te=>Te.id===rt.id?{...Te,diligenceStatus:rt.diligence_status||"none"}:Te)),rt.diligence_status==="approved"){const{data:Tt,error:Te}=await G.from("startups").select("name").eq("id",rt.startup_id).single();if(Te){console.error("Error fetching startup for diligence approval:",Te);return}console.log(`✅ Due diligence approved by ${(Tt==null?void 0:Tt.name)||"Startup"} for opportunity ${rt.opportunity_id}`);const Ue=document.createElement("div");Ue.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",Ue.innerHTML=`
              <div class="bg-white rounded-lg p-6 max-w-sm mx-4 text-center">
                <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                  <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                  </svg>
            </div>
                <h3 class="text-lg font-semibold text-gray-900 mb-2">Due Diligence Approved!</h3>
                <p class="text-gray-600 mb-4">${(Tt==null?void 0:Tt.name)||"Startup"} has approved your due diligence request.</p>
                <button onclick="this.parentElement.parentElement.remove()" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors">
                  Continue
                </button>
          </div>
            `,document.body.appendChild(Ue)}}catch(rt){console.error("Error handling diligence status update:",rt)}}).subscribe(at=>{at==="SUBSCRIBED"?console.log("✅ Subscribed to diligence status changes"):at==="CHANNEL_ERROR"&&console.error("❌ Error subscribing to diligence status changes")})}catch(at){console.error("Error setting up diligence status subscription:",at)}return()=>{Re&&(console.log("🔌 Unsubscribing from diligence status changes"),Re.unsubscribe())}},[P,le]);const ae=()=>{R(null),U(u2),F(""),x(!0)},qe=Ke=>{R(Ke);const Re=le[Ke];U({programName:(Re==null?void 0:Re.programName)||"",description:(Re==null?void 0:Re.description)||"",deadline:(Re==null?void 0:Re.deadline)||"",posterUrl:(Re==null?void 0:Re.posterUrl)||"",videoUrl:(Re==null?void 0:Re.videoUrl)||"",facilitatorDescription:"",facilitatorWebsite:""}),F(""),x(!0)},ft=Ke=>{const{name:Re,value:at}=Ke.target;U(rt=>({...rt,[Re]:at}))},Et=Ke=>{T(Ke),b(!0)},Bt=async Ke=>{if(confirm(`Are you sure you want to reject the application from ${Ke.startupName}?`))try{z(!0);const{error:Re}=await G.from("opportunity_applications").update({status:"rejected"}).eq("id",Ke.id);if(Re){console.error("Error rejecting application:",Re),alert("Failed to reject application. Please try again.");return}ke(at=>at.map(rt=>rt.id===Ke.id?{...rt,status:"rejected"}:rt)),alert("Application rejected successfully.")}catch(Re){console.error("Error rejecting application:",Re),alert("Failed to reject application. Please try again.")}finally{z(!1)}},vt=async Ke=>{if(confirm("Are you sure you want to remove this startup from your portfolio?"))try{z(!0);const{error:Re}=await G.from("facilitator_portfolio").delete().eq("startup_id",Ke).eq("facilitator_id",P);if(Re){console.error("Error removing startup from portfolio:",Re),alert("Failed to remove startup from portfolio. Please try again.");return}te(at=>at.filter(rt=>rt.id!==Ke)),alert("Startup removed from portfolio successfully.")}catch(Re){console.error("Error removing startup from portfolio:",Re),alert("Failed to remove startup from portfolio. Please try again.")}finally{z(!1)}},ht=async Ke=>{if(confirm("Are you sure you want to delete this recognition record?"))try{z(!0);const{error:Re}=await G.from("recognition_records").delete().eq("id",parseInt(Ke));if(Re){console.error("Error deleting recognition record:",Re),alert("Failed to delete recognition record. Please try again.");return}xe(at=>at.filter(rt=>rt.id!==Ke)),alert("Recognition record deleted successfully.")}catch(Re){console.error("Error deleting recognition record:",Re),alert("Failed to delete recognition record. Please try again.")}finally{z(!1)}},Dt=Ke=>{if(Ke.target.files&&Ke.target.files[0]){const Re=Ke.target.files[0];if(Re.type!=="application/pdf"){alert("Please upload a PDF file for the agreement.");return}if(Re.size>10*1024*1024){alert("File size must be less than 10MB.");return}L(Re)}},Ie=async Ke=>{if(Ke.preventDefault(),!E||!pe){alert("Please upload an agreement PDF.");return}z(!0);try{const Re=`agreements/${E.id}/${Date.now()}-${pe.name.replace(/[^a-zA-Z0-9.-]/g,"_")}`,{data:at,error:rt}=await G.storage.from("startup-documents").upload(Re,pe);if(rt)throw console.error("Storage upload error:",rt),new Error(`Failed to upload agreement: ${rt.message}`);const{data:Tt}=G.storage.from("startup-documents").getPublicUrl(Re),{error:Te}=await G.from("opportunity_applications").update({status:"accepted",agreement_url:Tt.publicUrl,diligence_status:"none"}).eq("id",E.id);if(Te)throw console.error("Database update error:",Te),new Error(`Failed to update application: ${Te.message}`);ke(it=>it.map(kt=>kt.id===E.id?{...kt,status:"accepted",agreementUrl:Tt.publicUrl,diligenceStatus:"none"}:kt)),b(!1),T(null),L(null);const Ue=document.createElement("div");Ue.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",Ue.innerHTML=`
        <div class="bg-white rounded-lg p-6 max-w-sm mx-4 text-center">
          <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
            <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            </div>
          <h3 class="text-lg font-semibold text-gray-900 mb-2">Application Accepted!</h3>
          <p class="text-gray-600 mb-4">Agreement uploaded successfully. You can now request due diligence.</p>
          <button onclick="this.parentElement.parentElement.remove()" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors">
            Continue
          </button>
          </div>
      `,document.body.appendChild(Ue)}catch(Re){console.error("Failed to accept application:",Re),alert("Failed to accept application. Please try again.")}finally{z(!1)}},_t=async Ke=>{if(Ke.diligenceStatus!=="requested"){z(!0);try{const{data:Re,error:at}=await G.rpc("request_diligence",{p_application_id:Ke.id});if(at)throw at;ke(Tt=>Tt.map(Te=>Te.id===Ke.id?{...Te,diligenceStatus:"requested"}:Te));const rt=document.createElement("div");rt.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",rt.innerHTML=`
        <div class="bg-white rounded-lg p-6 max-w-sm mx-4 text-center">
          <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
            <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            </div>
          <h3 class="text-lg font-semibold text-gray-900 mb-2">Due Diligence Requested!</h3>
          <p class="text-gray-600 mb-4">The startup has been notified to complete due diligence.</p>
          <button onclick="this.parentElement.parentElement.remove()" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">
            Continue
          </button>
          </div>
      `,document.body.appendChild(rt)}catch(Re){console.error("Failed to request diligence:",Re),alert("Failed to request diligence. Please try again.")}finally{z(!1)}}},jt=async Ke=>{if(!P){alert("Facilitator ID not found. Please refresh the page.");return}try{de(Ke);const Re=Ae.find(We=>We.id===Ke);if(!Re){alert("Record not found. Please try again.");return}if(console.log("🔍 Record found:",Re),console.log("🔍 Startup ID type:",typeof Re.startupId,"Value:",Re.startupId),typeof Re.startupId!="number"){console.error("❌ Invalid startup ID type:",typeof Re.startupId,Re.startupId),alert("Invalid startup data. Please try again.");return}const at=parseInt(Ke);if(isNaN(at)){console.error("❌ Invalid record ID format:",Ke),alert("Invalid record ID. Please try again.");return}const rt=await Promise.allSettled([G.from("recognition_records").select("id").eq("id",at).single(),G.from("startups").select("id").eq("id",Re.startupId).single(),G.from("users").select("id, role").eq("id",P).single()]),[Tt,Te,Ue]=rt;if(Tt.status==="rejected"||!Tt.value.data){console.error("❌ Recognition record not found in database:",Tt.status==="rejected"?Tt.reason:"No data"),alert("Recognition record not found. Please try again.");return}if(Te.status==="rejected"||!Te.value.data){console.error("❌ Startup not found in database:",Te.status==="rejected"?Te.reason:"No data"),alert("Startup not found. Please try again.");return}if(Ue.status==="rejected"||!Ue.value.data){console.error("❌ User not found in database:",Ue.status==="rejected"?Ue.reason:"No data"),alert("User not found. Please try again.");return}if(Ue.value.data.role!=="Startup Facilitation Center"){console.error("❌ User is not a facilitator:",Ue.value.data.role),alert("User is not authorized as a facilitator. Please try again.");return}console.log("✅ All validation checks passed");const{error:it}=await G.from("recognition_records").update({status:"approved"}).eq("id",at);if(it){console.error("Error updating recognition request status:",it),alert("Failed to approve recognition. Please try again.");return}if(console.log("🔍 Adding startup to portfolio:",{facilitatorId:P,startupId:Re.startupId,recognitionRecordId:at}),await hk.addStartupToPortfolio(P,Re.startupId,at)){xe(It=>{const ir=It.map(St=>St.id===Ke?{...St,status:"approved"}:St);return console.log("🔄 Updated recognition records:",ir),ir}),await ze(P);const We=document.createElement("div");We.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",We.innerHTML=`
            <div class="bg-white rounded-lg p-6 max-w-sm mx-4 text-center">
              <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
              </div>
              <h3 class="text-lg font-semibold text-gray-900 mb-2">Recognition Approved!</h3>
              <p class="text-gray-600 mb-4">Startup has been added to your portfolio.</p>
              <button onclick="this.parentElement.parentElement.remove()" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors">
                Continue
              </button>
            </div>
          `,document.body.appendChild(We)}else alert("Failed to add startup to portfolio. Please try again.")}catch(Re){console.error("Error approving recognition:",Re),alert("Failed to approve recognition. Please try again.")}finally{de(null)}},Pt=Ke=>{if(Ke.target.files&&Ke.target.files[0]){const Re=Ke.target.files[0];if(!Re.type.startsWith("image/")){alert("Please upload an image file (JPEG, PNG, GIF, WebP, SVG).");return}if(Re.size>5*1024*1024){alert("File size must be less than 5MB.");return}const at=URL.createObjectURL(Re);F(at),U(rt=>({...rt,posterUrl:at}))}},Rt=async Ke=>{if(Ke.preventDefault(),!P){alert("Unable to find facilitator account. Please re-login.");return}try{let Re=B.posterUrl;if(Re&&Re.startsWith("blob:")){const rt=document.querySelector('input[name="posterUrl"]');if(rt&&rt.files&&rt.files[0]){const Tt=rt.files[0],Te=`posters/${P}/${Date.now()}-${Tt.name.replace(/[^a-zA-Z0-9.-]/g,"_")}`;console.log("Uploading poster image:",Te);const{data:Ue,error:it}=await G.storage.from("opportunity-posters").upload(Te,Tt);if(it)throw console.error("Storage upload error:",it),new Error(`Failed to upload poster image: ${it.message}`);const{data:kt}=G.storage.from("opportunity-posters").getPublicUrl(Te);Re=kt.publicUrl,console.log("Poster uploaded successfully:",Re)}}const at={program_name:B.programName,description:B.description,deadline:B.deadline,poster_url:Re||null,video_url:B.videoUrl||null,facilitator_id:P};if(D!==null){const rt=le[D],{data:Tt,error:Te}=await G.from("incubation_opportunities").update(at).eq("id",rt.id).select().single();if(Te)throw Te;const Ue={id:Tt.id,programName:Tt.program_name,description:Tt.description,deadline:Tt.deadline,posterUrl:Tt.poster_url||void 0,videoUrl:Tt.video_url||void 0,facilitatorId:Tt.facilitator_id,createdAt:Tt.created_at};ee(it=>it.map((kt,We)=>We===D?Ue:kt))}else{const{data:rt,error:Tt}=await G.from("incubation_opportunities").insert(at).select().single();if(Tt)throw Tt;const Te={id:rt.id,programName:rt.program_name,description:rt.description,deadline:rt.deadline,posterUrl:rt.poster_url||void 0,videoUrl:rt.video_url||void 0,facilitatorId:rt.facilitator_id,createdAt:rt.created_at};ee(Ue=>[Te,...Ue])}x(!1),F(""),U(u2)}catch(Re){console.error("Failed to save opportunity:",Re),alert("Failed to save opportunity. Please try again.")}},rr=()=>{switch(d){case"dashboard":return n.jsxs("div",{className:"space-y-8 animate-fade-in",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsx(d2,{title:"My Startups",value:Ce.length,icon:n.jsx(Ps,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(d2,{title:"Opportunities Posted",value:le.length,icon:n.jsx(zJ,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(d2,{title:"Applications Received",value:me.length,icon:n.jsx(vn,{className:"h-6 w-6 text-brand-primary"})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Received Applications"}),n.jsx("div",{className:"overflow-x-auto max-h-96",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Startup"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Opportunity"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 uppercase",children:"Pitch Materials"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-slate-200",children:[we.map(Re=>{var at;return n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:Re.startupName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:((at=le.find(rt=>rt.id===Re.opportunityId))==null?void 0:at.programName)||"—"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:n.jsxs("div",{className:"flex justify-center items-center gap-3",children:[Re.pitchDeckUrl?n.jsx("a",{href:Re.pitchDeckUrl,target:"_blank",rel:"noopener noreferrer",className:"text-slate-500 hover:text-brand-primary transition-colors",title:"View Pitch Deck",children:n.jsx(vn,{className:"h-5 w-5"})}):n.jsx("span",{className:"text-slate-300 cursor-not-allowed",title:"No Pitch Deck",children:n.jsx(vn,{className:"h-5 w-5"})}),Re.pitchVideoUrl?n.jsx("a",{href:Re.pitchVideoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-slate-500 hover:text-brand-primary transition-colors",title:"View Pitch Video",children:n.jsx(od,{className:"h-5 w-5"})}):n.jsx("span",{className:"text-slate-300 cursor-not-allowed",title:"No Pitch Video",children:n.jsx(od,{className:"h-5 w-5"})})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-center",children:n.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[Re.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx(Oe,{size:"sm",onClick:()=>Et(Re),disabled:q,className:"w-full",children:"Approve Application"}),n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>Bt(Re),disabled:q,className:"w-full text-red-600 border-red-600 hover:bg-red-50",children:"Reject Application"})]}),Re.status==="accepted"&&n.jsx(Oe,{size:"sm",variant:"outline",disabled:!0,className:"w-full",children:"Approved"}),Re.status==="rejected"&&n.jsx(Oe,{size:"sm",variant:"outline",disabled:!0,className:"w-full text-red-600 border-red-600",children:"Rejected"}),(Re.diligenceStatus==="none"||Re.diligenceStatus==null)&&Re.status==="pending"&&n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>_t(Re),disabled:q,className:"w-full",children:"Request Diligence"}),(Re.diligenceStatus==="none"||Re.diligenceStatus==null)&&Re.status==="accepted"&&n.jsx(Oe,{size:"sm",variant:"outline",disabled:!0,title:"Disabled after application approval",className:"w-full",children:"Unavailable after approval"}),Re.diligenceStatus==="requested"&&n.jsx(Oe,{size:"sm",variant:"outline",disabled:!0,className:"w-full",children:"Diligence Requested"}),Re.diligenceStatus==="approved"&&n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>{const rt={id:Re.startupId,name:Re.startupName,sector:"Unknown",investmentType:"equity",investmentValue:0,equityAllocation:0,currentValuation:0,totalFunding:0,totalRevenue:0,registrationDate:new Date().toISOString().split("T")[0],currency:"USD",complianceStatus:Ct.Pending,founders:[]};a(rt)},className:"w-full",children:"View Diligence"})]})})]},Re.id)}),me.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"text-center py-8 text-slate-500",children:"No applications received yet."})})]})]})})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Recognition & Incubation Requests"}),n.jsx("div",{className:"overflow-x-auto",children:De?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-2"}),n.jsx("p",{className:"text-slate-500",children:"Loading recognition requests..."})]}):Ae.length===0?n.jsxs("div",{className:"text-center py-8 text-slate-500",children:[n.jsx("p",{children:"No recognition requests received yet."}),n.jsx("p",{className:"text-sm mt-1",children:"Startups will appear here when they submit recognition forms."})]}):n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Startup Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Program"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Documents"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:Ae.map(Re=>{var at,rt;return n.jsxs("tr",{children:[n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsx("div",{className:"text-sm font-medium text-slate-900",children:((at=Re.startup)==null?void 0:at.name)||"Unknown Startup"}),n.jsx("div",{className:"text-xs text-slate-500",children:((rt=Re.startup)==null?void 0:rt.sector)||"N/A"})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:Re.programName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:Re.incubationType}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:Re.signedAgreementUrl?n.jsx("a",{href:Re.signedAgreementUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"View Agreement"}):n.jsx("span",{className:"text-slate-400",children:"No document"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[Re.status==="pending"&&n.jsxs(Oe,{size:"sm",onClick:()=>jt(Re.id),disabled:V===Re.id,children:[n.jsx(_o,{className:"mr-2 h-4 w-4"}),V===Re.id?"Processing...":"Accept"]}),Re.status==="approved"&&n.jsxs(Oe,{size:"sm",variant:"outline",disabled:!0,className:"bg-green-50 text-green-700 border-green-200",children:[n.jsx(_o,{className:"mr-2 h-4 w-4"}),"Approved"]}),V===Re.id&&Re.status!=="approved"&&n.jsxs(Oe,{size:"sm",variant:"outline",disabled:!0,className:"bg-blue-50 text-blue-700 border-blue-200",children:[n.jsx(_o,{className:"mr-2 h-4 w-4"}),"Processing..."]}),n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>ht(Re.id),className:"text-red-600 border-red-600 hover:bg-red-50",title:"Delete recognition record",children:n.jsx(qa,{className:"h-4 w-4"})})]})})]},Re.id)})})]})})]}),n.jsxs(et,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"My Startups"}),n.jsx("div",{className:"overflow-x-auto",children:re?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-2"}),n.jsx("p",{className:"text-slate-500",children:"Loading portfolio..."})]}):n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Startup Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Compliance Status"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-slate-200",children:[Ce.map(Re=>n.jsxs("tr",{children:[n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsx("div",{className:"text-sm font-medium text-slate-900",children:Re.name}),n.jsx("div",{className:"text-xs text-slate-500",children:Re.sector})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx(Yx,{status:Re.complianceStatus})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>{const at={id:Re.id,name:Re.name,sector:Re.sector,investmentType:"equity",investmentValue:Re.totalFunding||0,equityAllocation:0,currentValuation:Re.totalFunding||0,totalFunding:Re.totalFunding||0,totalRevenue:Re.totalRevenue||0,registrationDate:Re.registrationDate||new Date().toISOString().split("T")[0],currency:Re.currency||"USD",complianceStatus:Re.complianceStatus||Ct.Pending,founders:[]};a(at)},title:"View complete startup dashboard for tracking",children:[n.jsx(ru,{className:"mr-2 h-4 w-4"}),"Track Startup"]}),n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>vt(Re.id),className:"text-red-600 border-red-600 hover:bg-red-50",title:"Remove startup from portfolio",children:n.jsx(qa,{className:"h-4 w-4"})})]})})]},Re.id)),Ce.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:3,className:"text-center py-8 text-slate-500",children:"No startups in your portfolio yet."})})]})]})})]})]}),n.jsxs("div",{className:"space-y-8",children:[n.jsx(y8,{data:Ce}),n.jsxs(et,{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"My Opportunities"}),n.jsxs(Oe,{size:"sm",onClick:ae,children:[n.jsx(w8,{className:"h-4 w-4 mr-1"})," Post"]})]}),n.jsx("div",{className:"overflow-x-auto max-h-96",children:n.jsxs("ul",{className:"divide-y divide-slate-200",children:[le.map((Re,at)=>n.jsxs("li",{className:"py-3 flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-slate-800",children:Re.programName}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Deadline: ",Re.deadline||"—"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>qe(at),title:"Edit",children:n.jsx(Gl,{className:"h-4 w-4"})}),n.jsx(Oe,{size:"sm",variant:"outline",onClick:async()=>{if(!confirm("Delete this opportunity?"))return;const rt=le[at],{error:Tt}=await G.from("incubation_opportunities").delete().eq("id",rt.id);Tt||ee(Te=>Te.filter((Ue,it)=>it!==at))},title:"Delete",children:"✕"})]})]},Re.id)),le.length===0&&n.jsx("li",{className:"text-center py-6 text-slate-500",children:"No opportunities posted."})]})})]})]})]})]});case"discover":const Ke=ne.trim()?se.filter(Re=>Re.name.toLowerCase().includes(ne.toLowerCase())||Re.sector.toLowerCase().includes(ne.toLowerCase())):se;return n.jsxs("div",{className:"animate-fade-in max-w-3xl mx-auto w-full",children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx(hd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search startups by name or sector...",value:ne,onChange:Re=>W(Re.target.value),className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary text-sm"})]})}),oe?n.jsxs(et,{className:"text-center py-16",children:[n.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-600",children:"Loading Pitches..."})]}):Ke.length===0?n.jsxs(et,{className:"p-8 text-center",children:[n.jsx(Wl,{className:"h-10 w-10 text-slate-400 mx-auto mb-2"}),n.jsx("p",{className:"text-slate-600",children:ne.trim()?"No startups found matching your search.":"No active fundraising pitches."})]}):n.jsx("div",{className:"space-y-6",children:Ke.map(Re=>{const at=xi.getYoutubeEmbedUrl(Re.pitchVideoUrl);return n.jsxs(et,{className:"!p-0 overflow-hidden shadow-lg",children:[n.jsx("div",{className:"relative w-full aspect-[16/9] bg-slate-900",children:at?Y===Re.id?n.jsx("iframe",{src:at,title:`Pitch video for ${Re.name}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full"}):n.jsxs("div",{className:"relative w-full h-full group cursor-pointer",onClick:()=>ye(Re.id),children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-black/20"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center shadow-lg transform group-hover:scale-110 transition-transform duration-200",children:n.jsx("svg",{className:"w-8 h-8 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M8 5v14l11-7z"})})})})]}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-slate-800 to-slate-900 flex items-center justify-center",children:n.jsxs("div",{className:"text-center text-slate-400",children:[n.jsx(od,{className:"h-16 w-16 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"Video not available"})]})})}),n.jsxs("div",{className:"p-5",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-xl font-bold text-slate-800",children:Re.name}),Re.complianceStatus===Ct.Compliant&&n.jsxs("div",{className:"flex items-center gap-1 bg-blue-600 text-white px-3 py-1.5 rounded-full text-xs font-medium",children:[n.jsx(ua,{className:"h-3 w-3"}),"Startup Nation Verified"]})]}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>be(Re),className:"flex items-center gap-2",children:[n.jsx(Rv,{className:"h-4 w-4"}),"Share"]})]}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:Re.sector}),n.jsxs("div",{className:"mt-3 text-sm",children:["Ask: $",Re.investmentValue.toLocaleString()," for ",n.jsxs("span",{className:"font-semibold text-blue-600",children:[Re.equityAllocation,"%"]})," equity"]}),n.jsx("div",{className:"mt-3 text-sm text-slate-500",children:Re.pitchDeckUrl?n.jsxs("a",{href:Re.pitchDeckUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 hover:text-blue-600",children:[n.jsx(vn,{className:"h-4 w-4"})," View Deck"]}):n.jsxs("span",{className:"inline-flex items-center gap-2 text-slate-400",children:[n.jsx(vn,{className:"h-4 w-4"})," Deck not available"]})})]})]},Re.id)})})]});default:return null}};return m?n.jsx(cg,{currentUser:i,onBack:()=>g(!1),onProfileUpdate:l,onLogout:u}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Facilitation Center Dashboard"}),n.jsx("p",{className:"text-slate-600",children:"Manage your startup portfolio and opportunities"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(jD,{currentUser:i}),n.jsxs(Oe,{variant:"outline",size:"sm",onClick:()=>g(!0),className:"flex items-center gap-2",children:[n.jsx(Ps,{className:"h-4 w-4"}),"Profile"]})]})]}),n.jsx("div",{className:"border-b border-slate-200",children:n.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[n.jsxs("button",{onClick:()=>f("dashboard"),className:`${d==="dashboard"?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:[n.jsx(V_,{className:"h-5 w-5"}),"Dashboard"]}),n.jsxs("button",{onClick:()=>f("discover"),className:`${d==="discover"?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:[n.jsx(Wl,{className:"h-5 w-5"}),"Discover Pitches"]})]})}),n.jsx("div",{className:"animate-fade-in",children:rr()}),n.jsx(Yn,{isOpen:v,onClose:()=>x(!1),title:D!==null?"Edit Opportunity":"Post New Opportunity",size:"2xl",children:n.jsxs("form",{onSubmit:Rt,children:[n.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-4",children:[n.jsx(Ot,{label:"Program Name",id:"programName",name:"programName",value:B.programName,onChange:ft,required:!0}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 mb-1",children:"Program Description"}),n.jsx("textarea",{id:"description",name:"description",value:B.description,onChange:ft,required:!0,rows:3,className:"block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-brand-primary focus:border-brand-primary sm:text-sm"})]}),n.jsx(Ot,{label:"Application Deadline",id:"deadline",name:"deadline",type:"date",value:B.deadline,onChange:ft,required:!0}),n.jsxs("div",{className:"border-t pt-4 mt-2 space-y-4",children:[n.jsx(Ot,{label:"Poster/Banner Image",id:"posterUrl",name:"posterUrl",type:"file",accept:"image/*",onChange:Pt}),I&&n.jsx("img",{src:I,alt:"Poster preview",className:"mt-2 rounded-lg max-h-40 w-auto"}),n.jsx("p",{className:"text-center text-sm text-slate-500",children:"OR"}),n.jsx(Ot,{label:"YouTube Video Link",id:"videoUrl",name:"videoUrl",type:"url",placeholder:"https://www.youtube.com/watch?v=...",value:B.videoUrl,onChange:ft})]}),n.jsxs("div",{className:"border-t pt-4 mt-2 space-y-4",children:[n.jsx("h4",{className:"text-md font-semibold text-slate-700",children:"About Your Organization"}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"facilitatorDescription",className:"block text-sm font-medium text-slate-700 mb-1",children:"Organization Description"}),n.jsx("textarea",{id:"facilitatorDescription",name:"facilitatorDescription",value:B.facilitatorDescription,onChange:ft,required:!0,rows:3,className:"block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-brand-primary focus:border-brand-primary sm:text-sm"})]}),n.jsx(Ot,{label:"Organization Website",id:"facilitatorWebsite",name:"facilitatorWebsite",type:"url",placeholder:"https://...",value:B.facilitatorWebsite,onChange:ft})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t mt-4",children:[n.jsx(Oe,{type:"button",variant:"secondary",onClick:()=>x(!1),children:"Cancel"}),n.jsx(Oe,{type:"submit",children:D!==null?"Save Changes":"Post Opportunity"})]})]})}),n.jsx(Yn,{isOpen:j,onClose:()=>b(!1),title:`Accept Application: ${E==null?void 0:E.startupName}`,children:n.jsxs("form",{onSubmit:Ie,className:"space-y-4",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:["To accept this application, please upload the agreement PDF for ",n.jsx("span",{className:"font-semibold",children:E==null?void 0:E.startupName}),"."]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Agreement PDF"}),n.jsx("input",{type:"file",accept:".pdf",onChange:Dt,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-slate-100 file:text-slate-700 hover:file:bg-slate-200",required:!0}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Max 10MB"}),pe&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 mt-2",children:[n.jsx(_o,{className:"h-4 w-4"}),n.jsx("span",{children:pe.name})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[n.jsx(Oe,{type:"button",variant:"secondary",onClick:()=>b(!1),disabled:q,children:"Cancel"}),n.jsx(Oe,{type:"submit",disabled:!pe||q,children:q?"Processing...":"Accept & Upload Agreement"})]})]})}),n.jsx("style",{children:`
        @keyframes fade-in { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fade-in 0.4s ease-out forwards; }
      `})]})},qae=e=>_.useMemo(()=>(e==null?void 0:e.currency)||"USD",[e==null?void 0:e.currency]),Fae=({currentUser:e,users:t,startups:r,investments:a,offers:s,interests:i})=>{var Ce,ze,Pe;const[l,u]=_.useState("dashboard"),[d,f]=_.useState(!1),[m,g]=_.useState(!1),[v,x]=_.useState(null),[j,b]=_.useState("investor"),[S,A]=_.useState({minimumInvestment:"",maximumInvestment:"",stage:"",successFee:"",successFeeType:"percentage",scoutingFee:""}),[E,T]=_.useState(null),[D,R]=_.useState(new Set),[B,U]=_.useState(!1),[I,F]=_.useState([]),[pe,L]=_.useState([]),[q,z]=_.useState(null),[V,de]=_.useState(new Set),[se,fe]=_.useState(!1),[oe,Se]=_.useState(!1),[Y,ye]=_.useState(!1),[P,K]=_.useState(""),le=qae(e);_.useEffect(()=>{console.log("🔍 InvestmentAdvisorView - All users data:",t),console.log("🔍 InvestmentAdvisorView - Current user data:",e),console.log("🔍 InvestmentAdvisorView - All startups data:",r)},[t,e,r]),_.useEffect(()=>{(async()=>{if(l==="discovery"){ye(!0);try{const ae=await xi.getActiveFundraisingStartups();F(ae)}catch(ae){console.error("Error loading active fundraising startups:",ae)}finally{ye(!1)}}})()},[l]),_.useEffect(()=>{if(l==="discovery"&&I.length>0){const we=I.filter(vt=>vt.complianceStatus===Ct.Compliant),ae=I.filter(vt=>vt.complianceStatus!==Ct.Compliant),qe=vt=>{const ht=[...vt];for(let Dt=ht.length-1;Dt>0;Dt--){const Ie=Math.floor(Math.random()*(Dt+1));[ht[Dt],ht[Ie]]=[ht[Ie],ht[Dt]]}return ht},ft=qe(we),Et=qe(ae),Bt=[...ft,...Et];L(Bt)}},[l,I]);const ee=_.useMemo(()=>{if(!t||!Array.isArray(t)||!r||!Array.isArray(r))return[];console.log("🔍 InvestmentAdvisorView Debug - serviceRequests:",{totalUsers:t.length,totalStartups:r.length,currentAdvisorCode:e==null?void 0:e.investment_advisor_code,currentUserRole:e==null?void 0:e.role,currentUserId:e==null?void 0:e.id});const we=t.filter(qe=>qe.role==="Investor"||qe.role==="Startup");console.log("🔍 All users with Investor/Startup roles:",we.map(qe=>({id:qe.id,name:qe.name,email:qe.email,role:qe.role,investment_advisor_code_entered:qe.investment_advisor_code_entered,advisor_accepted:qe.advisor_accepted,advisor_accepted_date:qe.advisor_accepted_date}))),we.forEach(qe=>{const ft=qe.investment_advisor_code_entered,Et=e==null?void 0:e.investment_advisor_code,Bt=qe.advisor_accepted===!0;console.log(`🔍 User ${qe.name} (${qe.role}):`,{userCode:ft,advisorCode:Et,codesMatch:ft===Et,isAccepted:Bt,shouldShow:ft===Et&&!Bt})});const ae=we.filter(qe=>{const ft=qe.investment_advisor_code_entered===(e==null?void 0:e.investment_advisor_code),Et=qe.advisor_accepted!==!0;return ft&&Et});return console.log("🔍 Pending requests found:",ae.length),console.log("🔍 Pending requests details:",ae.map(qe=>({id:qe.id,name:qe.name,email:qe.email,role:qe.role,code:qe.investment_advisor_code_entered}))),ae.map(qe=>({...qe,type:qe.role==="Investor"?"investor":"startup"}))},[t,r,e==null?void 0:e.investment_advisor_code]),me=_.useMemo(()=>{if(!t||!Array.isArray(t))return[];const we=t.filter(ae=>ae.role==="Investor"&&ae.investment_advisor_code_entered===(e==null?void 0:e.investment_advisor_code)&&ae.advisor_accepted===!0);return console.log("🔍 Accepted investors found:",we.length,we.map(ae=>({id:ae.id,name:ae.name,email:ae.email,code:ae.investment_advisor_code_entered,accepted:ae.advisor_accepted}))),we},[t,e==null?void 0:e.investment_advisor_code]),ke=_.useMemo(()=>!r||!Array.isArray(r)?[]:r.filter(we=>we.investment_advisor_code===(e==null?void 0:e.investment_advisor_code)),[r,e==null?void 0:e.investment_advisor_code]),Ae=_.useMemo(()=>{if(!s||!Array.isArray(s))return console.log("🔍 Offers Made Debug: No offers data or not an array",{offers:s}),[];console.log("🔍 Offers Made Debug: Starting filtering",{totalOffers:s.length,currentAdvisorCode:e==null?void 0:e.investment_advisor_code,totalUsers:(t==null?void 0:t.length)||0,totalStartups:(r==null?void 0:r.length)||0});const we=s.filter(ae=>{const qe=t.some(Bt=>{const vt=Bt.email===ae.investorEmail&&Bt.investment_advisor_code_entered===(e==null?void 0:e.investment_advisor_code);return vt&&console.log("🔍 Found investor match:",{userEmail:Bt.email,offerInvestorEmail:ae.investorEmail,userAdvisorCode:Bt.investment_advisor_code_entered,currentAdvisorCode:e==null?void 0:e.investment_advisor_code}),vt}),ft=r.some(Bt=>{const vt=Bt.id===ae.startupId&&Bt.investment_advisor_code===(e==null?void 0:e.investment_advisor_code);return vt&&console.log("🔍 Found startup match:",{startupId:Bt.id,offerStartupId:ae.startupId,startupAdvisorCode:Bt.investment_advisor_code,currentAdvisorCode:e==null?void 0:e.investment_advisor_code}),vt}),Et=qe||ft;return Et&&console.log("🔍 Including offer:",{offerId:ae.id,investorEmail:ae.investorEmail,startupId:ae.startupId,startupName:ae.startupName,investorHasAdvisor:qe,startupHasAdvisor:ft}),Et});return console.log("🔍 Offers Made Debug: Filtering complete",{totalOffers:s.length,filteredOffers:we.length,filteredOfferIds:we.map(ae=>ae.id)}),we},[s,t,r,e==null?void 0:e.investment_advisor_code]),xe=_.useMemo(()=>!a||!Array.isArray(a)?[]:a,[a]),De=async we=>{try{if(U(!0),we.type==="investor")await nx.acceptInvestmentAdvisorRequest(we.id,S);else{console.log("🔍 Finding startup for user:",we.id);const ae=r.find(qe=>qe.user_id===we.id);if(!ae)throw new Error("Startup not found for this user");console.log("🔍 Found startup:",ae),await nx.acceptStartupAdvisorRequest(ae.id,we.id,S)}alert(`${we.type==="investor"?"Investor":"Startup"} request accepted successfully!`),g(!1),window.location.reload()}catch(ae){console.error("Error accepting request:",ae),alert("Failed to accept request. Please try again.")}finally{U(!1)}},ve=async we=>{try{if(U(!0),me.length===0){alert("You have no assigned investors to recommend this opportunity to.");return}const ae=me.map(ft=>ft.id),qe=await Wn.recommendCoInvestmentOpportunity(we,(e==null?void 0:e.id)||"",ae);alert(`Successfully recommended this opportunity to ${qe} investors!`),window.location.reload()}catch(ae){console.error("Error recommending opportunity:",ae),alert("Failed to recommend opportunity. Please try again.")}finally{U(!1)}},Z=async(we,ae,qe)=>{try{U(!0),qe==="investor"?await Wn.approveInvestorAdvisorOffer(we,ae):await Wn.approveStartupAdvisorOffer(we,ae),alert(`Offer ${ae}ed successfully!`),window.location.reload()}catch(ft){console.error(`Error ${ae}ing offer:`,ft),alert(`Failed to ${ae} offer. Please try again.`)}finally{U(!1)}},te=async we=>{try{U(!0),await Wn.revealContactDetails(we),alert("Contact details have been revealed to both parties."),window.location.reload()}catch(ae){console.error("Error revealing contact details:",ae),alert("Failed to reveal contact details. Please try again.")}finally{U(!1)}},re=()=>{console.log("Logging out..."),window.location.href="/logout"},$=we=>{de(ae=>{const qe=new Set(ae);return qe.has(we)?qe.delete(we):qe.add(we),qe})},ne=async we=>{try{const ae={title:`${we.name} - Investment Opportunity`,text:`Check out this startup: ${we.name} in ${we.sector}`,url:window.location.href};navigator.share?await navigator.share(ae):(await navigator.clipboard.writeText(`${ae.title}
${ae.text}
${ae.url}`),alert("Startup details copied to clipboard"))}catch(ae){console.error("Share failed",ae),alert("Unable to share. Try copying manually.")}},W=we=>{alert(`Due Diligence service for ${we.name} - This feature can be implemented for advisors`)},be=we=>{alert(`Help investors make offers for ${we.name} - This feature can be implemented for advisors`)};return d?n.jsx(cg,{user:e,onBack:()=>f(!1),onUpdateUser:()=>{}}):n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-800 px-4 py-3 m-4 rounded",children:[n.jsx("h4",{className:"font-bold",children:"🔍 Debug Information:"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Current Advisor Code:"})," ",(e==null?void 0:e.investment_advisor_code)||"None"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Total Users:"})," ",(t==null?void 0:t.length)||0]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Investors with your code:"})," ",(t==null?void 0:t.filter(we=>we.role==="Investor"&&we.investment_advisor_code_entered===(e==null?void 0:e.investment_advisor_code)).length)||0]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Pending Requests:"})," ",ee.length]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Accepted Investors:"})," ",me.length]}),n.jsxs("details",{className:"mt-2",children:[n.jsx("summary",{className:"cursor-pointer font-medium",children:"Show All Users with Advisor Codes"}),n.jsx("pre",{className:"mt-2 text-xs bg-white p-2 rounded overflow-auto max-h-40",children:JSON.stringify(t==null?void 0:t.filter(we=>we.investment_advisor_code_entered).map(we=>({name:we.name,role:we.role,code:we.investment_advisor_code_entered,accepted:we.advisor_accepted})),null,2)})]})]}),n.jsx("div",{className:"bg-white shadow",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center py-6",children:[n.jsx("div",{className:"flex items-center",children:n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Investment Advisor Dashboard"})}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("button",{onClick:()=>f(!0),className:"text-gray-500 hover:text-gray-700",children:n.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),n.jsx("button",{onClick:re,className:"text-gray-500 hover:text-gray-700",children:n.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})})}),n.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:n.jsx("div",{className:"border-b border-gray-200",children:n.jsxs("nav",{className:"-mb-px flex space-x-8 px-6",children:[n.jsx("button",{onClick:()=>u("dashboard"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="dashboard"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:n.jsxs("div",{className:"flex items-center",children:[n.jsxs("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"})]}),"Dashboard"]})}),n.jsx("button",{onClick:()=>u("discovery"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="discovery"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Discover Pitches"]})}),n.jsx("button",{onClick:()=>u("myInvestments"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="myInvestments"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"My Investments"]})}),n.jsx("button",{onClick:()=>u("myInvestors"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="myInvestors"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),"My Investors"]})}),n.jsx("button",{onClick:()=>u("myStartups"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="myStartups"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"My Startups"]})}),n.jsx("button",{onClick:()=>u("interests"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="interests"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Investment Interests"]})})]})})}),l==="dashboard"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Service Requests"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Investors and Startups who have requested your services using your Investment Advisor Code"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Request Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ee.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"No pending service requests"})}):ee.map(we=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:we.name||"N/A"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:we.email}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${we.type==="investor"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:we.type==="investor"?"Investor":"Startup"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(we.created_at||Date.now()).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsx("button",{onClick:()=>{x(we),b(we.type),g(!0)},className:"text-blue-600 hover:text-blue-900",children:"Accept Request"})})]},we.id))})]})})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Offers Made"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Investment offers made by your assigned investors or received by your assigned startups"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Startup"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Investor"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Offer Amount"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Equity %"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scouting Fees"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ae.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:8,className:"px-6 py-4 text-center text-gray-500",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{children:"No relevant offers found"}),n.jsxs("div",{className:"text-xs text-gray-400",children:["Debug Info: Total offers: ",(s==null?void 0:s.length)||0," | Current advisor code: ",(e==null?void 0:e.investment_advisor_code)||"None"," | Users with advisor codes: ",(t==null?void 0:t.filter(we=>we.investment_advisor_code_entered).length)||0," | Startups with advisor codes: ",(r==null?void 0:r.filter(we=>we.investment_advisor_code).length)||0]}),n.jsxs("div",{className:"text-xs text-gray-400",children:["Sample offer data: ",(s==null?void 0:s.length)>0?JSON.stringify({investorEmail:(Ce=s[0])==null?void 0:Ce.investorEmail,startupId:(ze=s[0])==null?void 0:ze.startupId,startupName:(Pe=s[0])==null?void 0:Pe.startupName}):"No offers"]})]})})}):Ae.map(we=>{const ae=we.investor_advisor_approval_status,qe=we.startup_advisor_approval_status,ft=we.contact_details_revealed;return n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:we.startupName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:we.investorEmail}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Or(we.offerAmount)}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[we.equityPercentage,"%"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${we.status==="pending"?"bg-yellow-100 text-yellow-800":we.status==="accepted"?"bg-green-100 text-green-800":we.status==="pending_investor_advisor_approval"?"bg-blue-100 text-blue-800":we.status==="pending_startup_advisor_approval"?"bg-purple-100 text-purple-800":we.status==="investor_advisor_approved"||we.status==="startup_advisor_approved"?"bg-green-100 text-green-800":we.status==="investor_advisor_rejected"||we.status==="startup_advisor_rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:we.status.replace(/_/g," ").replace(/\b\w/g,Et=>Et.toUpperCase())})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsxs("div",{className:"text-xs",children:[n.jsxs("div",{children:["Startup: ",Or(we.startup_scouting_fee_amount||0)]}),n.jsxs("div",{children:["Investor: ",Or(we.investor_scouting_fee_amount||0)]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(we.createdAt).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:ae==="pending"||qe==="pending"?n.jsxs("div",{className:"space-x-2",children:[n.jsx("button",{onClick:()=>Z(we.id,"approve",ae==="pending"?"investor":"startup"),disabled:B,className:"px-3 py-1 text-xs bg-green-100 text-green-800 rounded-full hover:bg-green-200 disabled:opacity-50",children:"Approve"}),n.jsx("button",{onClick:()=>Z(we.id,"reject",ae==="pending"?"investor":"startup"),disabled:B,className:"px-3 py-1 text-xs bg-red-100 text-red-800 rounded-full hover:bg-red-200 disabled:opacity-50",children:"Reject"})]}):!ft&&we.status==="accepted"?n.jsx("button",{onClick:()=>te(we.id),disabled:B,className:"text-blue-600 hover:text-blue-900 disabled:opacity-50",children:"View Contact Details"}):ft?n.jsx("span",{className:"text-green-600",children:"Contact Details Revealed"}):n.jsx("span",{className:"text-gray-400",children:"Pending"})})]},we.id)})})]})})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Co-Investment Opportunities"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"All co-investment opportunities across the platform"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Startup"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sector"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Investment Amount"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Equity %"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lead Investor"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:xe.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"No co-investment opportunities available"})}):xe.map(we=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:we.name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:we.sector}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Or(we.investmentValue)}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[we.equityAllocation,"%"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"Lead Investor Name"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${we.complianceStatus==="Approved"?"bg-green-100 text-green-800":we.complianceStatus==="Pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:we.complianceStatus})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{alert("Due diligence functionality coming soon!")},className:"px-3 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800 hover:bg-purple-200",children:"Due Diligence"}),n.jsx("button",{onClick:()=>ve(we.id),disabled:B,className:"px-3 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200 disabled:opacity-50",children:"Recommend to My Investors"})]})})]},we.id))})]})})]})})]}),l==="discovery"&&n.jsxs("div",{className:"animate-fade-in max-w-4xl mx-auto w-full",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-slate-800 mb-2",children:"Discover Pitches"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Watch startup videos and explore opportunities for your investors"})]}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),n.jsx("input",{type:"text",placeholder:"Search startups by name or sector...",value:P,onChange:we=>K(we.target.value),className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]})}),n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl border border-blue-100 gap-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("button",{onClick:()=>{Se(!1),fe(!1)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${!oe&&!se?"bg-blue-600 text-white shadow-blue-200":"bg-white text-slate-600 hover:bg-blue-50 hover:text-blue-600 border border-slate-200"}`,children:[n.jsx("svg",{className:"h-3 w-3 sm:h-4 sm:w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),n.jsx("span",{className:"hidden sm:inline",children:"All"})]}),n.jsxs("button",{onClick:()=>{Se(!0),fe(!1)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${oe&&!se?"bg-green-600 text-white shadow-green-200":"bg-white text-slate-600 hover:bg-green-50 hover:text-green-600 border border-slate-200"}`,children:[n.jsx("svg",{className:`h-3 w-3 sm:h-4 sm:w-4 ${oe&&!se?"fill-current":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsx("span",{className:"hidden sm:inline",children:"Verified"})]}),n.jsxs("button",{onClick:()=>{Se(!1),fe(!0)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${se?"bg-red-600 text-white shadow-red-200":"bg-white text-slate-600 hover:bg-red-50 hover:text-red-600 border border-slate-200"}`,children:[n.jsx("svg",{className:`h-3 w-3 sm:h-4 sm:w-4 ${se?"fill-current":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),n.jsx("span",{className:"hidden sm:inline",children:"Favorites"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.jsxs("span",{className:"text-xs sm:text-sm font-medium",children:[I.length," active pitches"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[n.jsx("svg",{className:"h-4 w-4 sm:h-5 sm:w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Pitch Reels"})]})]})]}),n.jsx("div",{className:"space-y-8",children:Y?n.jsx("div",{className:"bg-white rounded-lg shadow text-center py-20",children:n.jsxs("div",{className:"max-w-sm mx-auto",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-2",children:"Loading Pitches..."}),n.jsx("p",{className:"text-slate-500",children:"Fetching active fundraising startups"})]})}):(()=>{let ae=l==="discovery"?pe:I;return P.trim()&&(ae=ae.filter(qe=>qe.name.toLowerCase().includes(P.toLowerCase())||qe.sector.toLowerCase().includes(P.toLowerCase()))),oe&&(ae=ae.filter(qe=>qe.isStartupNationValidated)),se&&(ae=ae.filter(qe=>V.has(qe.id))),ae.length===0?n.jsx("div",{className:"bg-white rounded-lg shadow text-center py-20",children:n.jsxs("div",{className:"max-w-sm mx-auto",children:[n.jsx("svg",{className:"h-16 w-16 text-slate-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),n.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-2",children:P.trim()?"No Matching Startups":oe?"No Verified Startups":se?"No Favorited Pitches":"No Active Fundraising"}),n.jsx("p",{className:"text-slate-500",children:P.trim()?"No startups found matching your search. Try adjusting your search terms or filters.":oe?"No Startup Nation verified startups are currently fundraising. Try removing the verification filter or check back later.":se?"Start favoriting pitches to see them here.":"No startups are currently fundraising. Check back later for new opportunities."})]})}):ae.map(qe=>{const ft=xi.getYoutubeEmbedUrl(qe.pitchVideoUrl);return n.jsxs("div",{className:"bg-white rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border-0 overflow-hidden",children:[n.jsx("div",{className:"relative w-full aspect-[16/9] bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:ft?q===qe.id?n.jsxs("div",{className:"relative w-full h-full",children:[n.jsx("iframe",{src:ft,title:`Pitch video for ${qe.name}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full"}),n.jsx("button",{onClick:()=>z(null),className:"absolute top-4 right-4 bg-black/70 text-white rounded-full p-2 hover:bg-black/90 transition-all duration-200 backdrop-blur-sm",children:"×"})]}):n.jsxs("div",{className:"relative w-full h-full group cursor-pointer",onClick:()=>z(qe.id),children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/40"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"w-20 h-20 bg-red-600 rounded-full flex items-center justify-center shadow-2xl transform group-hover:scale-110 transition-all duration-300 group-hover:shadow-red-500/50",children:n.jsx("svg",{className:"w-10 h-10 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M8 5v14l11-7z"})})})}),n.jsx("div",{className:"absolute bottom-4 left-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:n.jsx("p",{className:"text-sm font-medium",children:"Click to play"})})]}):n.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:n.jsxs("div",{className:"text-center",children:[n.jsx("svg",{className:"h-16 w-16 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),n.jsx("p",{className:"text-sm",children:"No video available"})]})})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:qe.name}),n.jsx("p",{className:"text-slate-600 font-medium",children:qe.sector})]}),n.jsx("div",{className:"flex items-center gap-2",children:qe.isStartupNationValidated&&n.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-3 py-1.5 rounded-full text-xs font-medium shadow-sm",children:[n.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Verified"]})})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[n.jsx("button",{onClick:()=>$(qe.id),className:`!rounded-full !p-3 transition-all duration-200 ${V.has(qe.id)?"bg-gradient-to-r from-red-500 to-pink-600 text-white shadow-lg shadow-red-200":"hover:bg-red-50 hover:text-red-600 border border-slate-200 bg-white"} px-3 py-2 rounded-lg text-sm font-medium`,children:n.jsx("svg",{className:`h-5 w-5 ${V.has(qe.id)?"fill-current":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),n.jsx("button",{onClick:()=>ne(qe),className:"!rounded-full !p-3 hover:bg-blue-50 hover:text-blue-600 hover:border-blue-300 transition-all duration-200 border border-slate-200 bg-white px-3 py-2 rounded-lg text-sm font-medium",children:n.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})})}),qe.pitchDeckUrl&&qe.pitchDeckUrl!=="#"&&n.jsx("a",{href:qe.pitchDeckUrl,target:"_blank",rel:"noopener noreferrer",className:"flex-1",children:n.jsxs("button",{className:"w-full hover:bg-blue-50 hover:text-blue-600 transition-all duration-200 border border-slate-200 bg-white px-3 py-2 rounded-lg text-sm font-medium",children:[n.jsx("svg",{className:"h-4 w-4 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"View Deck"]})}),n.jsxs("button",{onClick:()=>W(qe),className:"flex-1 hover:bg-purple-50 hover:text-purple-600 hover:border-purple-300 transition-all duration-200 border border-slate-200 bg-white px-3 py-2 rounded-lg text-sm font-medium",children:[n.jsx("svg",{className:"h-4 w-4 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Due Diligence (€150)"]}),n.jsxs("button",{onClick:()=>be(qe),className:"flex-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-lg shadow-blue-200 text-white px-3 py-2 rounded-lg text-sm font-medium",children:[n.jsx("svg",{className:"h-4 w-4 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Help Make Offer"]})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-blue-50 px-6 py-4 flex justify-between items-center border-t border-slate-200",children:[n.jsxs("div",{className:"text-base",children:[n.jsx("span",{className:"font-semibold text-slate-800",children:"Ask:"})," ",xi.formatCurrency(qe.investmentValue,le)," for ",n.jsxs("span",{className:"font-semibold text-blue-600",children:[qe.equityAllocation,"%"]})," equity"]}),qe.complianceStatus===Ct.Compliant&&n.jsxs("div",{className:"flex items-center gap-1 text-green-600",title:"This startup has been verified by Startup Nation",children:[n.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsx("span",{className:"text-xs font-semibold",children:"Verified"})]})]})]},qe.id)})})()})]}),l==="myInvestments"&&n.jsx("div",{className:"bg-white rounded-lg shadow",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"My Investments"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Investment deals facilitated through your advisory services"}),n.jsx("div",{className:"text-center text-gray-500 py-8",children:"Investment tracking functionality coming soon"})]})}),l==="myInvestors"&&n.jsx("div",{className:"bg-white rounded-lg shadow",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"My Investors"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Investors who have accepted your advisory services"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Accepted Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:me.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"No assigned investors"})}):me.map(we=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:we.name||"N/A"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:we.email}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(we.created_at||Date.now()).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Active"})})]},we.id))})]})})]})}),l==="myStartups"&&n.jsx("div",{className:"bg-white rounded-lg shadow",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"My Startups"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Startups that have accepted your advisory services"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sector"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Investment Value"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ke.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"No assigned startups"})}):ke.map(we=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:we.name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:we.sector}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Or(we.investmentValue)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Active"})})]},we.id))})]})})]})}),l==="interests"&&n.jsx("div",{className:"bg-white rounded-lg shadow",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Investment Interests"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Investment interests and preferences from your assigned clients"}),n.jsx("div",{className:"text-center text-gray-500 py-8",children:"Investment interests functionality coming soon"})]})}),m&&v&&n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:n.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:n.jsxs("div",{className:"mt-3",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Accept ",v.type==="investor"?"Investor":"Startup"," Request"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Minimum Investment"}),n.jsx("input",{type:"number",value:S.minimumInvestment,onChange:we=>A({...S,minimumInvestment:we.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Maximum Investment"}),n.jsx("input",{type:"number",value:S.maximumInvestment,onChange:we=>A({...S,maximumInvestment:we.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Success Fee"}),n.jsx("input",{type:"number",value:S.successFee,onChange:we=>A({...S,successFee:we.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),n.jsx("button",{onClick:()=>De(v),disabled:B,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:B?"Accepting...":"Accept Request"})]})]})})})]})},Bae=({isOpen:e,onClose:t})=>{const[r,a]=_.useState(""),[s,i]=_.useState(!1),[l,u]=_.useState(!1),[d,f]=_.useState(null),m=async x=>{x.preventDefault(),i(!0),f(null);try{const{success:j,error:b}=await br.sendPasswordResetEmail(r);j?(u(!0),a("")):f(b||"Failed to send password reset email. Please try again.")}catch(j){console.error("Password reset error:",j),f(j.message||"An unexpected error occurred. Please try again.")}finally{i(!1)}},g=()=>{a(""),f(null),u(!1),t()},v=()=>{a(""),f(null),u(!1)};return n.jsx(Yn,{isOpen:e,onClose:g,title:"Forgot Password",children:l?n.jsxs("div",{className:"text-center space-y-6",children:[n.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:n.jsx(ua,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"Check your email"}),n.jsxs("p",{className:"text-sm text-slate-600",children:["We've sent a password reset link to ",n.jsx("strong",{children:r})]})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 text-left",children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"What happens next?"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:"• Check your email inbox (and spam folder)"}),n.jsx("li",{children:"• Click the reset link in the email"}),n.jsx("li",{children:"• Create a new password"}),n.jsx("li",{children:"• Sign in with your new password"})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsx(Oe,{onClick:v,variant:"outline",className:"flex-1",children:"Send to Different Email"}),n.jsx(Oe,{onClick:g,className:"flex-1",children:"Got it, thanks!"})]})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 mb-4",children:n.jsx(bo,{className:"h-6 w-6 text-blue-600"})}),n.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"Reset your password"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),n.jsxs("form",{onSubmit:m,className:"space-y-4",children:[n.jsx(Ot,{label:"Email address",id:"reset-email",type:"email",autoComplete:"email",value:r,onChange:x=>a(x.target.value),required:!0,placeholder:"Enter your email address"}),d&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tu,{className:"h-4 w-4 text-red-600"}),n.jsx("p",{className:"text-red-800 text-sm",children:d})]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsx(Oe,{type:"button",variant:"outline",onClick:g,className:"flex-1",disabled:s,children:"Cancel"}),n.jsx(Oe,{type:"submit",className:"flex-1",disabled:s||!r.trim(),children:s?n.jsxs(n.Fragment,{children:[n.jsx($p,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"Send Reset Link"})]})]})]})})},Uae=({onLogin:e,onNavigateToRegister:t,onNavigateToCompleteRegistration:r,onNavigateToLanding:a})=>{const[s,i]=_.useState(""),[l,u]=_.useState(""),[d,f]=_.useState(!1),[m,g]=_.useState(null),[v,x]=_.useState(!1),[j,b]=_.useState(!1),S=async A=>{A.preventDefault(),f(!0),g(null),x(!1);const E=setTimeout(()=>{f(!1),g("Login timed out. Please try again.")},1e4);try{const{user:T,error:D}=await br.signInMinimal({email:s,password:l});if(clearTimeout(E),T){console.log("User authenticated:",T.email);const{data:R,error:B}=await br.supabase.from("users").select("government_id, ca_license").eq("id",T.id),U=R&&R.length>0?R[0]:null;if(console.log("Profile check result:",{profile:U,profileError:B,hasGovId:!!(U!=null&&U.government_id),hasCaLicense:!!(U!=null&&U.ca_license),govIdValue:U==null?void 0:U.government_id,caLicenseValue:U==null?void 0:U.ca_license}),B){console.error("Error fetching profile:",B),r();return}if(U)if(!U.government_id||!U.ca_license){console.log("Profile exists but documents missing - redirecting to Form 2"),console.log("Missing documents:",{govId:U.government_id,caLicense:U.ca_license}),r();return}else console.log("User complete, proceeding to dashboard"),e(T);else{console.log("No profile found - redirecting to Form 2"),r();return}}else D&&(g(D),(D.includes("does not exist")||D.includes("Please register first"))&&(x(!0),setTimeout(()=>{t()},3e3)))}catch(T){clearTimeout(E),console.error("Login error:",T),g(T.message||"An unexpected error occurred. Please try again.")}finally{f(!1)}};return n.jsxs("div",{className:"w-full flex flex-col items-center",children:[a&&n.jsx("div",{className:"w-full max-w-md mb-4 flex justify-start",children:n.jsx("button",{onClick:a,className:"text-sm text-slate-500 hover:text-slate-700 underline","aria-label":"Back",children:"← Back"})}),n.jsxs(et,{className:"w-full max-w-md",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("img",{src:au,alt:"TrackMyStartup",className:"mx-auto h-40 w-40 cursor-pointer hover:opacity-80 transition-opacity",onClick:a}),n.jsx("h2",{className:"mt-4 text-3xl font-bold tracking-tight text-slate-900",children:"Sign in to your account"}),n.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Or"," ",n.jsx("button",{onClick:t,className:"font-medium text-brand-primary hover:text-brand-secondary",children:"create a new account"})]})]}),n.jsxs("form",{onSubmit:S,className:"space-y-6",children:[n.jsx(Ot,{label:"Email address",id:"email",type:"email",autoComplete:"email",value:s,onChange:A=>i(A.target.value),required:!0}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ot,{label:"Password",id:"password",type:"password",autoComplete:"current-password",value:l,onChange:A=>u(A.target.value),required:!0}),n.jsx("div",{className:"text-right",children:n.jsx("button",{type:"button",onClick:()=>b(!0),className:"text-sm text-brand-primary hover:text-brand-secondary font-medium",children:"Forgot your password?"})})]}),m&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:[n.jsx("p",{className:"text-red-800 text-sm",children:m}),v&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}),n.jsx("p",{className:"text-red-600 text-xs",children:"Redirecting to registration..."})]})]}),n.jsx("div",{children:n.jsx(Oe,{type:"submit",className:"w-full",disabled:d||v,children:d?n.jsxs(n.Fragment,{children:[n.jsx($p,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):v?n.jsxs(n.Fragment,{children:[n.jsx($p,{className:"mr-2 h-4 w-4 animate-spin"}),"Redirecting..."]}):"Sign in"})})]})]}),n.jsx(Bae,{isOpen:j,onClose:()=>b(!1)})]})},$ae=({onEmailVerified:e,onNavigateToLogin:t,onNavigateToLanding:r})=>{const[a,s]=_.useState({name:"",email:"",password:"",confirmPassword:"",role:"Investor",startupName:"",investmentAdvisorCode:""}),[i,l]=_.useState(!1),[u,d]=_.useState(null),[f,m]=_.useState(!1),[g,v]=_.useState(!1),[x,j]=_.useState(["Investor","Startup","Startup Facilitation Center","Investment Advisor","Admin"]),[b,S]=_.useState({isValidating:!1,exists:!1,error:null,lastChecked:null}),A=_.useCallback((()=>{let D;return R=>{clearTimeout(D),D=setTimeout(async()=>{if(R&&R.includes("@")){S(B=>({...B,isValidating:!0}));try{const B=await br.checkEmailExists(R);S({isValidating:!1,exists:B.exists,error:B.error||null,lastChecked:R})}catch{S({isValidating:!1,exists:!1,error:"Unable to check email availability",lastChecked:R})}}else S({isValidating:!1,exists:!1,error:null,lastChecked:null})},500)}})(),[]);_.useEffect(()=>{a.email?A(a.email):S({isValidating:!1,exists:!1,error:null,lastChecked:null})},[a.email,A]);const E=(D,R)=>{s(B=>({...B,[D]:R})),D==="email"&&S(B=>({...B,error:null}))},T=async D=>{if(D.preventDefault(),l(!0),d(null),b.exists){d("This email is already registered. Please sign in instead."),l(!1);return}if(a.password!==a.confirmPassword){d("Passwords do not match"),l(!1);return}if(a.role==="Startup"&&!a.startupName.trim()){d("Startup name is required for Startup role"),l(!1);return}if(!a.email||!a.email.includes("@")){d("Please enter a valid email address"),l(!1);return}try{const{user:R,error:B,confirmationRequired:U}=await br.signUp({email:a.email,password:a.password,name:a.name,role:a.role,startupName:a.role==="Startup"?a.startupName:void 0,investmentAdvisorCode:a.investmentAdvisorCode||void 0,founders:[],fileUrls:{}});if(B){d(B),l(!1);return}U?(v(!0),m(!0),console.log("Email verification required for:",a.email)):R&&e({name:a.name,email:a.email,password:a.password,role:a.role,startupName:a.role==="Startup"?a.startupName:void 0,investmentAdvisorCode:a.investmentAdvisorCode||void 0})}catch(R){d(R.message||"An error occurred")}finally{l(!1)}};return f?n.jsx(et,{className:"w-full max-w-md",children:n.jsxs("div",{className:"text-center",children:[n.jsx(bo,{className:"mx-auto h-12 w-12 text-blue-500"}),n.jsx("h2",{className:"mt-4 text-2xl font-bold text-slate-900",children:"Check Your Email"}),n.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["We've sent a verification link to ",n.jsx("strong",{children:a.email})]}),n.jsx("p",{className:"mt-4 text-xs text-slate-500",children:"Please check your email and click the verification link to continue."}),g&&n.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-md",children:n.jsxs("div",{className:"flex items-center text-green-800",children:[n.jsx(ua,{className:"h-4 w-4 mr-2"}),n.jsx("span",{className:"text-sm",children:"Verification email sent successfully!"})]})}),n.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[n.jsx("p",{className:"text-sm text-blue-800 mb-3",children:n.jsx("strong",{children:"Next Steps:"})}),n.jsxs("p",{className:"text-xs text-blue-600",children:["1. Check your email for the verification link",n.jsx("br",{}),"2. Click the verification link in your email",n.jsx("br",{}),'3. Come back here and click "Continue to Login"']})]}),n.jsx("div",{className:"mt-4",children:n.jsx(Oe,{onClick:()=>{m(!1),v(!1),t()},className:"w-full",children:"Continue to Login"})}),n.jsx("div",{className:"mt-4",children:n.jsx("button",{onClick:()=>{m(!1),v(!1)},className:"text-sm text-slate-500 hover:text-slate-700 underline",children:"← Back to Registration Form"})})]})}):n.jsxs("div",{className:"w-full flex flex-col items-center",children:[r&&n.jsx("div",{className:"w-full max-w-2xl mb-4 flex justify-start",children:n.jsx("button",{onClick:r,className:"text-sm text-slate-500 hover:text-slate-700 underline","aria-label":"Back",children:"← Back"})}),n.jsxs(et,{className:"w-full max-w-2xl",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("img",{src:au,alt:"TrackMyStartup",className:"mx-auto h-40 w-40 cursor-pointer hover:opacity-80 transition-opacity",onClick:r}),n.jsx("h2",{className:"mt-4 text-3xl font-bold tracking-tight text-slate-900",children:"Create a new account"}),n.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Or"," ",n.jsx("button",{onClick:t,className:"text-brand-primary hover:text-brand-primary-dark underline",children:"sign in to your existing account"})]})]}),n.jsxs("form",{onSubmit:T,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx(Ot,{label:"Full Name",id:"name",name:"name",type:"text",required:!0,value:a.name,onChange:D=>E("name",D.target.value)}),n.jsxs("div",{children:[n.jsx(Ot,{label:"Email address",id:"email",name:"email",type:"email",required:!0,value:a.email,onChange:D=>E("email",D.target.value),className:b.exists?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-slate-300"}),a.email&&n.jsxs("div",{className:"mt-1",children:[b.isValidating&&n.jsxs("div",{className:"flex items-center text-sm text-slate-500",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-slate-500 mr-2"}),"Checking email availability..."]}),!b.isValidating&&b.exists&&n.jsxs("div",{className:"flex items-center text-sm text-red-600",children:[n.jsx(Up,{className:"h-4 w-4 mr-1"}),"This email is already registered. Please sign in instead."]}),!b.isValidating&&!b.exists&&b.lastChecked===a.email&&n.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[n.jsx(ua,{className:"h-4 w-4 mr-1"}),"Email is available"]}),b.error&&n.jsxs("div",{className:"flex items-center text-sm text-amber-600",children:[n.jsx(tu,{className:"h-4 w-4 mr-1"}),b.error]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx(Ot,{label:"Password",id:"password",name:"password",type:"password",required:!0,value:a.password,onChange:D=>E("password",D.target.value)}),n.jsx(Ot,{label:"Confirm Password",id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:a.confirmPassword,onChange:D=>E("confirmPassword",D.target.value)})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.jsxs("div",{children:[n.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-slate-700 mb-2",children:"Role *"}),n.jsxs("select",{id:"role",name:"role",required:!0,value:a.role,onChange:D=>E("role",D.target.value),className:"block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-brand-primary focus:border-brand-primary",children:[n.jsx("option",{value:"",children:"Select Role"}),x.map(D=>n.jsx("option",{value:D,children:D==="CA"?`${D} (Chartered Accountant)`:D==="CS"?`${D} (Company Secretary)`:D},D))]})]})}),(a.role==="Investor"||a.role==="Startup")&&n.jsx(Ot,{label:"Investment Advisor Code (Optional)",id:"investmentAdvisorCode",name:"investmentAdvisorCode",type:"text",placeholder:"IA-XXXXXX",value:a.investmentAdvisorCode,onChange:D=>E("investmentAdvisorCode",D.target.value),helpText:"Enter your Investment Advisor's code if you have one"}),a.role==="Startup"&&n.jsx(Ot,{label:"Startup Name",id:"startupName",name:"startupName",type:"text",required:!0,placeholder:"Enter your startup name",value:a.startupName,onChange:D=>E("startupName",D.target.value)}),u&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:n.jsxs("div",{className:"text-sm text-red-800",children:[n.jsx("strong",{children:"Error:"})," ",u]})}),n.jsx(Oe,{type:"submit",className:"w-full",disabled:i||b.exists,children:i?"Creating Account...":"Create Account"})]})]})]})},zae=({userData:e,onComplete:t,onBack:r})=>{var T,D,R;const[a,s]=_.useState({govId:null,roleSpecific:null,license:null,logo:null}),[i,l]=_.useState(""),[u,d]=_.useState([{id:"1",name:"",email:"",equity:0}]),[f,m]=_.useState(!1),[g,v]=_.useState(null);console.log("DocumentUploadStep - User role:",e.role),console.log("DocumentUploadStep - Is Investment Advisor?",e.role==="Investment Advisor");const x=(B,U)=>{var F;const I=(F=B.target.files)==null?void 0:F[0];I&&s(pe=>({...pe,[U]:I}))},j=()=>{const B=(u.length+1).toString();d(U=>[...U,{id:B,name:"",email:""}])},b=B=>{u.length>1&&d(U=>U.filter(I=>I.id!==B))},S=(B,U,I)=>{d(F=>F.map(pe=>pe.id===B?{...pe,[U]:I}:pe))},A=B=>{switch(B){case"Investor":return"PAN Card";case"Startup":return"Proof of Company Registration";case"CA":return"Copy of CA License";case"CS":return"Copy of CS License";case"Startup Facilitation Center":return"Proof of Organization Registration";case"Investment Advisor":return"Proof of Firm Registration";default:return"Document"}},E=async B=>{var U;if(B.preventDefault(),m(!0),v(null),!i){v("Country selection is required"),m(!1);return}if(!a.govId){v("Government ID is required"),m(!1);return}if(!a.roleSpecific){v(`${A(e.role)} is required`),m(!1);return}if(e.role==="Investment Advisor"||((U=e.role)==null?void 0:U.trim())==="Investment Advisor"){if(!a.license){v("License (As per country regulations) is required for Investment Advisors"),m(!1);return}if(!a.logo){v("Company logo is required for Investment Advisors"),m(!1);return}}if(e.role==="Startup"&&u.filter(F=>!F.name.trim()||!F.email.trim()).length>0){v("Please fill in all founder details"),m(!1);return}try{t(e,a,u,i)}catch(I){v(I.message||"An error occurred")}finally{m(!1)}};return n.jsxs(et,{className:"w-full max-w-2xl",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("img",{src:au,alt:"TrackMyStartup",className:"mx-auto h-40 w-40"}),n.jsx("h2",{className:"mt-4 text-3xl font-bold tracking-tight text-slate-900",children:"Complete Your Profile"}),n.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["TrackMyStartup - Welcome, ",e.name,"! Now let's upload your verification documents."]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-400",children:["Role: ",e.role]})]}),n.jsxs("form",{onSubmit:E,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(Ps,{className:"h-5 w-5 mr-2"}),"Country Information"]}),n.jsxs(Select,{label:"Country",id:"country",value:i,onChange:B=>l(B.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Select Country"}),n.jsx("option",{value:"United States",children:"United States"}),n.jsx("option",{value:"India",children:"India"}),n.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),n.jsx("option",{value:"Canada",children:"Canada"}),n.jsx("option",{value:"Australia",children:"Australia"}),n.jsx("option",{value:"Germany",children:"Germany"}),n.jsx("option",{value:"France",children:"France"}),n.jsx("option",{value:"Singapore",children:"Singapore"}),n.jsx("option",{value:"Japan",children:"Japan"}),n.jsx("option",{value:"China",children:"China"}),n.jsx("option",{value:"Brazil",children:"Brazil"}),n.jsx("option",{value:"Mexico",children:"Mexico"}),n.jsx("option",{value:"South Africa",children:"South Africa"}),n.jsx("option",{value:"Nigeria",children:"Nigeria"}),n.jsx("option",{value:"Kenya",children:"Kenya"}),n.jsx("option",{value:"Egypt",children:"Egypt"}),n.jsx("option",{value:"UAE",children:"UAE"}),n.jsx("option",{value:"Saudi Arabia",children:"Saudi Arabia"}),n.jsx("option",{value:"Israel",children:"Israel"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(vn,{className:"h-5 w-5 mr-2"}),"Verification Documents"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Government ID (Passport, Driver's License, etc.)"}),n.jsx(Ot,{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:B=>x(B,"govId"),required:!0}),a.govId&&n.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["✓ ",a.govId.name," selected"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:A(e.role)}),n.jsx(Ot,{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:B=>x(B,"roleSpecific"),required:!0}),a.roleSpecific&&n.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["✓ ",a.roleSpecific.name," selected"]})]}),(e.role==="Investment Advisor"||((T=e.role)==null?void 0:T.trim())==="Investment Advisor")&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"License (As per country regulations)"}),n.jsx(Ot,{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:B=>x(B,"license"),required:!0}),a.license&&n.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["✓ ",a.license.name," selected"]}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Upload your financial advisor license (if applicable)"})]}),e.role!=="Investment Advisor"&&n.jsxs("div",{className:"p-4 bg-yellow-100 border border-yellow-300 rounded-md",children:[n.jsxs("p",{className:"text-sm text-yellow-800",children:[n.jsx("strong",{children:"Debug:"}),' Role is "',e.role,'" (length: ',(D=e.role)==null?void 0:D.length,")"]}),n.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:'Expected: "Investment Advisor" (length: 18)'})]}),(e.role==="Investment Advisor"||((R=e.role)==null?void 0:R.trim())==="Investment Advisor")&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Upload Logo"}),n.jsx(Ot,{type:"file",accept:".jpg,.jpeg,.png,.svg",onChange:B=>x(B,"logo"),required:!0}),a.logo&&n.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["✓ ",a.logo.name," selected"]}),n.jsxs("div",{className:"text-xs text-slate-500 mt-1 space-y-1",children:[n.jsx("p",{children:"Upload your company logo (JPG, PNG, or SVG format)"}),n.jsxs("div",{className:"bg-blue-50 p-2 rounded border border-blue-200",children:[n.jsx("p",{className:"font-medium text-blue-800 mb-1",children:"Logo Specifications:"}),n.jsxs("ul",{className:"text-blue-700 space-y-0.5",children:[n.jsx("li",{children:"• Recommended size: 64x64 pixels (square format)"}),n.jsx("li",{children:"• Maximum file size: 2MB"}),n.jsx("li",{children:"• Supported formats: JPG, PNG, SVG"}),n.jsx("li",{children:"• Logo will be displayed as 64x64px with white background"}),n.jsx("li",{children:"• For best results, use a square logo or center your logo in a square canvas"})]})]})]})]})]})]}),e.role==="Startup"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(Ps,{className:"h-5 w-5 mr-2"}),"Founder Information"]}),n.jsx("p",{className:"text-sm text-slate-600",children:"Please provide the details of all founders."}),n.jsxs("div",{className:"space-y-4",children:[u.map((B,U)=>n.jsxs("div",{className:"p-4 border border-slate-200 rounded-md",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h4",{className:"font-medium text-slate-900",children:["Founder ",U+1]}),u.length>1&&n.jsx("button",{type:"button",onClick:()=>b(B.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Ot,{label:"Name",value:B.name,onChange:I=>S(B.id,"name",I.target.value),required:!0}),n.jsx(Ot,{label:"Email",type:"email",value:B.email,onChange:I=>S(B.id,"email",I.target.value),required:!0}),n.jsx(Ot,{label:"Equity (%)",type:"number",min:"0",max:"100",step:"0.1",value:B.equity,onChange:I=>S(B.id,"equity",parseFloat(I.target.value)||0),required:!0})]})]},B.id)),n.jsxs(Oe,{type:"button",onClick:j,variant:"outline",className:"w-full",children:[n.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Add Another Founder"]})]})]}),g&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:n.jsxs("div",{className:"text-sm text-red-800",children:[n.jsx("strong",{children:"Error:"})," ",g]})}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx(Oe,{type:"button",onClick:r,variant:"outline",className:"flex-1",children:"Back"}),n.jsx(Oe,{type:"submit",className:"flex-1",disabled:f,children:f?"Creating Profile...":"Complete Registration"})]})]})]})},Vae=e=>({"United States":"USD",India:"INR","United Kingdom":"GBP",Canada:"CAD",Australia:"AUD",Germany:"EUR",France:"EUR",Singapore:"SGD",Japan:"JPY",China:"CNY",Brazil:"BRL",Mexico:"MXN","South Africa":"ZAR",Nigeria:"NGN",Kenya:"KES",Egypt:"EGP",UAE:"AED","Saudi Arabia":"SAR",Israel:"ILS"})[e]||"USD",Hae=({onRegister:e,onNavigateToLogin:t,onNavigateToLanding:r})=>{const[a,s]=_.useState("basic"),[i,l]=_.useState(()=>{const v=localStorage.getItem("registrationData");if(v){const x=JSON.parse(v);return s("documents"),x}return null}),u=v=>{localStorage.setItem("registrationData",JSON.stringify(v)),l(v),s("documents")},d=()=>{s("basic"),l(null),localStorage.removeItem("registrationData")},f=async(v,x,j,b)=>{const S=new Promise((A,E)=>{setTimeout(()=>E(new Error("Registration timed out after 60 seconds. Please try again.")),6e4)});try{localStorage.removeItem("registrationData"),console.log("🚀 Starting optimized registration process..."),await Promise.race([m(v,x,j,b),S])}catch(A){throw console.error("Registration error:",A),A}},m=async(v,x,j,b)=>{try{const S=[];if(x.govId&&S.push(ds.uploadVerificationDocument(x.govId,v.email,"government-id").then(q=>({type:"govId",result:q}))),x.roleSpecific){const q=g(v.role);S.push(ds.uploadVerificationDocument(x.roleSpecific,v.email,q).then(z=>({type:"roleSpecific",result:z})))}x.license&&v.role==="Investment Advisor"&&S.push(ds.uploadVerificationDocument(x.license,v.email,"financial-advisor-license").then(q=>({type:"license",result:q}))),x.logo&&v.role==="Investment Advisor"&&S.push(ds.uploadVerificationDocument(x.logo,v.email,"company-logo").then(q=>({type:"logo",result:q}))),console.log(`📤 Uploading ${S.length} files in parallel...`);const A=await Promise.all(S);let E="",T="",D="",R="";A.forEach(({type:q,result:z})=>{if(z.success&&z.url)switch(q){case"govId":E=z.url;break;case"roleSpecific":T=z.url;break;case"license":D=z.url;break;case"logo":R=z.url;break}}),console.log("✅ All file uploads completed");const{data:{user:B},error:U}=await br.supabase.auth.getUser();if(U||!B)throw new Error("User not authenticated");const I={government_id:E,ca_license:T,verification_documents:[E,T].filter(Boolean),country:b,updated_at:new Date().toISOString()};v.role==="Investment Advisor"&&(D&&(I.financial_advisor_license_url=D),R&&(I.logo_url=R),I.verification_documents=[E,T,D,R].filter(Boolean)),investmentAdvisorCode&&investmentAdvisorCode.trim()&&(I.investment_advisor_code=investmentAdvisorCode.trim()),console.log("Updating user profile with data:",I),console.log("User ID:",B.id);const{data:F,error:pe}=await br.supabase.from("users").update(I).eq("id",B.id).select().single();if(pe)throw console.error("Update error:",pe),new Error(`Failed to update user profile: ${pe.message}`);if(v.role==="Startup")try{console.log("🏢 Setting up startup and founders...");const q={name:v.startupName||`${v.name}'s Startup`,investment_type:"Seed",investment_value:0,equity_allocation:0,current_valuation:0,compliance_status:"Pending",sector:"Technology",total_funding:0,total_revenue:0,registration_date:new Date().toISOString().split("T")[0],user_id:B.id,country_of_registration:b,currency:Vae(b)};investmentAdvisorCode&&investmentAdvisorCode.trim()&&(q.investment_advisor_code=investmentAdvisorCode.trim());const{data:z,error:V}=await br.supabase.from("startups").upsert(q,{onConflict:"name",ignoreDuplicates:!1}).select().single();if(V)throw console.error("Startup upsert error:",V),new Error(`Failed to create/update startup: ${V.message}`);const de=z==null?void 0:z.id;if(console.log("✅ Startup created/updated:",de),de&&j.length>0){console.log(`👥 Adding ${j.length} founders...`);const se=j.map(oe=>({startup_id:de,name:oe.name,email:oe.email,equity_percentage:oe.equity||0})),{error:fe}=await br.supabase.from("founders").upsert(se,{onConflict:"startup_id,email",ignoreDuplicates:!1});if(fe)throw console.error("Founders upsert error:",fe),new Error(`Failed to create/update founders: ${fe.message}`);console.log("✅ Founders added successfully")}}catch(q){throw console.error("Error handling startup/founders:",q),q}const L={id:F.id,email:F.email,name:F.name,role:F.role,startup_name:F.startup_name,investor_code:F.investor_code,ca_code:F.ca_code,cs_code:F.cs_code,registration_date:F.registration_date,phone:F.phone,address:F.address,city:F.city,state:F.state,country:F.country,company:F.company,government_id:F.government_id,ca_license:F.ca_license,verification_documents:F.verification_documents,profile_photo_url:F.profile_photo_url,is_profile_complete:!0,investment_advisor_code:F.investment_advisor_code,logo_url:F.logo_url,proof_of_business_url:F.proof_of_business_url,financial_advisor_license_url:F.financial_advisor_license_url};e(L,v.role==="Startup"?j:[],v.role==="Startup"?v.startupName:void 0,b)}catch(S){throw console.error("Registration error:",S),S}},g=v=>{switch(v){case"Investor":return"pan-card";case"Startup":return"company-registration";case"CA":return"ca-license";case"CS":return"cs-license";case"Startup Facilitation Center":return"org-registration";case"Investment Advisor":return"financial-advisor-license";default:return"document"}};return a==="documents"&&i?n.jsx(zae,{userData:i,onComplete:f,onBack:d}):n.jsx($ae,{onEmailVerified:u,onNavigateToLogin:t,onNavigateToLanding:r})};class Gae{async getAvailableCountries(){try{const t=await tn.getCountries(),r=[];for(const a of t){const[s,i]=await Promise.all([tn.getCATypeByCountry(a.country_code),tn.getCSTypeByCountry(a.country_code)]);r.push({country_code:a.country_code,country_name:a.country_name,ca_type:s,cs_type:i})}return r}catch(t){return console.error("Error fetching available countries:",t),[]}}async getCountryComplianceInfo(t){try{const a=(await tn.getCountries()).find(l=>l.country_code===t);if(!a)return null;const[s,i]=await Promise.all([tn.getCATypeByCountry(t),tn.getCSTypeByCountry(t)]);return{country_code:t,country_name:a.country_name,ca_type:s,cs_type:i}}catch(r){return console.error("Error fetching country compliance info:",r),null}}async getComplianceRulesForUser(t,r){try{return await tn.getRulesByCountryAndCompanyType(t,r)}catch(a){return console.error("Error fetching compliance rules for user:",a),[]}}async getCompanyTypesForCountry(t){try{return await tn.getCompanyTypesByCountry(t)}catch(r){return console.error("Error fetching company types for country:",r),[]}}async validateUserComplianceProfile(t){const r=[];try{const a=await this.getCountryComplianceInfo(t.country);return a?((await this.getCompanyTypesForCountry(t.country)).includes(t.company_type)||r.push("Invalid company type for selected country"),t.ca_type&&a.ca_type&&t.ca_type!==a.ca_type&&r.push(`CA type must be "${a.ca_type}" for ${a.country_name}`),t.cs_type&&a.cs_type&&t.cs_type!==a.cs_type&&r.push(`CS type must be "${a.cs_type}" for ${a.country_name}`),{valid:r.length===0,errors:r}):(r.push("Invalid country selected"),{valid:!1,errors:r})}catch(a){return console.error("Error validating user compliance profile:",a),{valid:!1,errors:["Error validating compliance profile"]}}}async getUserComplianceDashboard(t){try{const[r,a]=await Promise.all([this.getCountryComplianceInfo(t.country),this.getComplianceRulesForUser(t.country,t.company_type)]);return{compliance_rules:a,ca_type:(r==null?void 0:r.ca_type)||null,cs_type:(r==null?void 0:r.cs_type)||null,country_name:(r==null?void 0:r.country_name)||t.country}}catch(r){return console.error("Error fetching user compliance dashboard:",r),{compliance_rules:[],ca_type:null,cs_type:null,country_name:t.country}}}}const Kae=new Gae,mk=({onNavigateToRegister:e,onNavigateToDashboard:t})=>{const[r,a]=_.useState(null),[s,i]=_.useState([]),[l,u]=_.useState(null),[d,f]=_.useState({govId:null,roleSpecific:null,license:null,logo:null}),[m,g]=_.useState([{id:"1",name:"",email:"",shares:0,equity:0}]),[v,x]=_.useState({country:"United States",companyType:"C-Corporation",registrationDate:new Date().toISOString().split("T")[0],caServiceCode:"",csServiceCode:"",currency:"USD"}),[j,b]=_.useState({totalShares:1e6,pricePerShare:.01,esopReservedShares:1e5}),[S,A]=_.useState([]),[E,T]=_.useState([]),[D,R]=_.useState(!1),[B,U]=_.useState(null),[I,F]=_.useState(!0),[pe,L]=_.useState(!1),[q,z]=_.useState(!1),[V,de]=_.useState({}),[se,fe]=_.useState([]),oe=Vc.useMemo(()=>{if(console.log("🔍 Computing company types for country:",v.country),console.log("🗺️ Current rules map:",V),!v.country)return[];let Z=v.country;if(v.country&&!V[v.country]){for(const[$,ne]of Object.entries(V))if(ne.country_name===v.country){Z=$;break}}const te=V[Z];if(console.log("📋 Country data for",Z,":",te),!te||!te.company_types)return console.log("❌ No company types found for country:",Z),[];const re=Object.keys(te.company_types);return console.log("✅ Company types for",Z,":",re),re},[V,v.country]);_.useEffect(()=>{Se()},[]),_.useEffect(()=>{const Z=setTimeout(()=>{L(!0)},100);return()=>clearTimeout(Z)},[]),_.useEffect(()=>{const Z=async()=>{try{console.log("🔍 Loading compliance rules for company types...");const re=await tn.getAllRules();console.log("📊 Loaded compliance rules:",re.length,"rules");const $={},ne=[];re.forEach(W=>{$[W.country_code]||($[W.country_code]={country_name:W.country_name,company_types:{}});const be=W.company_type;be&&!be.toLowerCase().includes("setup")&&!be.toLowerCase().includes("ca type")&&!be.toLowerCase().includes("cs type")&&be!==W.ca_type&&be!==W.cs_type&&($[W.country_code].company_types[be]||($[W.country_code].company_types[be]=[]),$[W.country_code].company_types[be].push({id:W.id,name:W.compliance_name,description:W.compliance_description,frequency:W.frequency,verification_required:W.verification_required})),W.country_code&&W.country_code!=="default"&&!ne.includes(W.country_code)&&ne.push(W.country_code)}),console.log("🗺️ Built rules map:",$),console.log("🌍 Available countries:",ne),de($),fe(ne.sort())}catch(re){console.error("❌ Error loading compliance rules:",re)}},te=async()=>{try{const re=await Kae.getAvailableCountries();i(re)}catch(re){console.error("Error loading country compliance info:",re)}};Z(),te()},[]),_.useEffect(()=>{if(v.country&&v.companyType){const Z=oe;Z.length>0&&!Z.includes(v.companyType)&&(console.log(`🔧 Auto-updating company type: ${v.companyType} -> ${Z[0]} for country: ${v.country}`),x(te=>({...te,companyType:Z[0]})))}},[v.country,oe]),_.useEffect(()=>{if(v.country){const Z=Ik(v.country);Z!==v.currency&&(console.log(`🔧 Auto-updating currency: ${v.currency} -> ${Z} for country: ${v.country}`),x(te=>({...te,currency:Z})))}},[v.country]),_.useEffect(()=>{if(v.country&&s.length>0){const Z=s.find(te=>te.country_name===v.country);if(Z)u(Z),x(te=>({...te,caServiceCode:Z.ca_type||"",csServiceCode:Z.cs_type||""})),console.log(`🔧 Auto-updating CA/CS types for country: ${v.country}`,Z);else{const re={"United States":"US",India:"IN","United Kingdom":"GB",Canada:"CA",Australia:"AU",Germany:"DE",France:"FR",Singapore:"SG",Japan:"JP",China:"CN",Brazil:"BR",Mexico:"MX","South Africa":"ZA",Nigeria:"NG",Kenya:"KE",Egypt:"EG",UAE:"AE","Saudi Arabia":"SA",Israel:"IL"}[v.country];if(re){const $=s.find(ne=>ne.country_code===re);$&&(u($),x(ne=>({...ne,caServiceCode:$.ca_type||"",csServiceCode:$.cs_type||""})),console.log(`🔧 Auto-updating CA/CS types for country: ${v.country} (code: ${re})`,$))}}}},[v.country,s]);const Se=async()=>{var Z,te,re;try{const{data:{user:$},error:ne}=await br.supabase.auth.getUser();if(ne||!$){e();return}if(await br.isProfileComplete($.id)){t();return}const{data:be}=await br.supabase.from("users").select("*").eq("id",$.id).single();a({id:$.id,email:$.email,name:(be==null?void 0:be.name)||((Z=$.user_metadata)==null?void 0:Z.name)||"User",role:(be==null?void 0:be.role)||((te=$.user_metadata)==null?void 0:te.role)||"Investor",startupName:(be==null?void 0:be.startup_name)||((re=$.user_metadata)==null?void 0:re.startupName)})}catch($){console.error("Error checking user:",$),e()}finally{F(!1)}},Y=(Z,te)=>{var $;const re=($=Z.target.files)==null?void 0:$[0];re&&f(ne=>({...ne,[te]:re}))},ye=()=>{const Z=(m.length+1).toString();g(te=>[...te,{id:Z,name:"",email:"",shares:0,equity:0}])},P=Z=>{m.length>1&&g(te=>te.filter(re=>re.id!==Z))},K=(Z,te,re)=>{g($=>$.map(ne=>ne.id===Z?{...ne,[te]:re}:ne))},le=()=>{const Z=(S.length+1).toString();A(te=>[...te,{id:Z,country:"",companyType:"",registrationDate:"",caCode:"",csCode:""}])},ee=Z=>{A(te=>te.filter(re=>re.id!==Z))},me=(Z,te,re)=>{A($=>$.map(ne=>ne.id===Z?{...ne,[te]:re}:ne))},ke=Z=>{if(!Z)return[];const te=V[Z];return!te||!te.company_types?[]:Object.keys(te.company_types)},Ae=async(Z,te)=>{const re=s.find($=>$.country_code===te);if(re){const $=V[te],ne=$!=null&&$.company_types?Object.keys($.company_types):[],W=ne.length>0?ne[0]:"";A(be=>be.map(Ce=>Ce.id===Z?{...Ce,country:te,companyType:W,caCode:re.ca_type||"",csCode:re.cs_type||""}:Ce))}},xe=Z=>{switch(Z){case"Investor":return"PAN Card";case"Startup":return"Proof of Company Registration";case"CA":return"Copy of CA License";case"CS":return"Copy of CS License";case"Startup Facilitation Center":return"Proof of Organization Registration";case"Investment Advisor":return"Proof of Firm Registration";default:return"Document"}},De=async()=>{try{await br.signOut(),e()}catch(Z){console.error("Error during logout:",Z)}},ve=async Z=>{var te,re,$,ne,W,be,Ce,ze;if(Z.preventDefault(),R(!0),U(null),!v.country){U("Country selection is required"),R(!1);return}if(!d.govId){U("Government ID is required"),R(!1);return}if(!d.roleSpecific){U(`${xe(r.role)} is required`),R(!1);return}if(r.role==="Investment Advisor"){if(!d.license){U("License (As per country regulations) is required for Investment Advisors"),R(!1);return}if(!d.logo){U("Company logo is required for Investment Advisors"),R(!1);return}}if(r.role==="Startup"){if(m.filter(vt=>!vt.name.trim()||!vt.email.trim()).length>0){U("Please fill in all founder details"),R(!1);return}if(m.filter(vt=>!vt.shares||vt.shares<=0).length>0){U("Please specify the number of shares for all founders"),R(!1);return}if(j.totalShares<=0||j.pricePerShare<=0){U("Please enter valid share information"),R(!1);return}const ae=m.reduce((vt,ht)=>vt+(ht.shares||0),0),qe=j.esopReservedShares||0,ft=ae+qe;if(ft>j.totalShares){U(`Total allocated shares (${ft.toLocaleString()}) exceeds total shares (${j.totalShares.toLocaleString()}). Please adjust founder shares or ESOP reserved shares.`),R(!1);return}const Et=m.reduce((vt,ht)=>vt+(ht.equity||0),0);if(Et>100){U(`Total founder equity (${Et.toFixed(1)}%) exceeds 100%. Please adjust founder equity percentages.`),R(!1);return}if(m.filter(vt=>!vt.equity||vt.equity<=0).length>0){U("Please specify equity percentage for all founders"),R(!1);return}}try{let Pe="",we="";if(console.log("📁 Starting file uploads...",{govId:d.govId,roleSpecific:d.roleSpecific}),d.govId){console.log("📤 Uploading government ID...");const vt=await ds.uploadVerificationDocument(d.govId,r.email,"government-id");vt.success&&vt.url?(Pe=vt.url,console.log("✅ Government ID uploaded successfully:",Pe)):console.error("❌ Government ID upload failed:",vt)}if(d.roleSpecific){const vt=xe(r.role);console.log("📤 Uploading role-specific document:",vt);const ht=await ds.uploadVerificationDocument(d.roleSpecific,r.email,vt);ht.success&&ht.url?(we=ht.url,console.log("✅ Role-specific document uploaded successfully:",we)):console.error("❌ Role-specific document upload failed:",ht)}let ae="",qe="";if(r.role==="Investment Advisor"){if(d.license){console.log("📤 Uploading license document...");const vt=await ds.uploadVerificationDocument(d.license,r.email,"license");vt.success&&vt.url?(ae=vt.url,console.log("✅ License document uploaded successfully:",ae)):console.error("❌ License document upload failed:",vt)}if(d.logo){console.log("📤 Uploading company logo...");const vt=await ds.uploadVerificationDocument(d.logo,r.email,"logo");vt.success&&vt.url?(qe=vt.url,console.log("✅ Company logo uploaded successfully:",qe)):console.error("❌ Company logo upload failed:",vt)}}console.log("📊 Upload results:",{governmentIdUrl:Pe,roleSpecificUrl:we,licenseUrl:ae,logoUrl:qe});const ft=[Pe,we];ae&&ft.push(ae),qe&&ft.push(qe),console.log("💾 Updating user profile in database...",{userId:r.id,governmentId:Pe,caLicense:we,verificationDocuments:ft});const Et={government_id:Pe,ca_license:we,verification_documents:ft,logo_url:qe||null,financial_advisor_license_url:ae||null,updated_at:new Date().toISOString()},{error:Bt}=await br.supabase.from("users").update(Et).eq("id",r.id);if(Bt)throw console.error("❌ Database update failed:",Bt),new Error("Failed to update user profile");if(console.log("✅ User profile updated successfully in database"),r.role==="Startup")try{console.log("🔍 Looking for existing startup for user:",r.id);const{data:vt,error:ht}=await br.supabase.from("startups").select("*").eq("user_id",r.id);if(ht)throw console.error("❌ Error finding existing startup:",ht),ht;let Dt;if(vt&&vt.length>0)console.log("📝 Found existing startup, updating with profile data"),Dt=vt[0];else{console.log("🆕 No existing startup found, creating new one");const{data:Ie,error:_t}=await br.supabase.from("startups").insert({name:r.startupName||`${r.name}'s Startup`,investment_type:"Seed",investment_value:0,equity_allocation:0,current_valuation:0,compliance_status:"Pending",sector:"Technology",total_funding:0,total_revenue:0,registration_date:v.registrationDate,user_id:r.id}).select().single();if(_t)throw console.error("❌ Error creating startup:",_t),_t;Dt=Ie}if(Dt){if(m.length>0){const rr=m.map(at=>({startup_id:Dt.id,name:at.name,email:at.email,shares:at.shares||0,equity_percentage:at.equity||0}));console.log("💾 Saving founders data:",rr);const{data:Ke,error:Re}=await br.supabase.from("founders").insert(rr).select();if(Re)throw console.error("❌ Error saving founders:",Re),Re;console.log("✅ Founders saved successfully:",Ke)}const Ie={country:v.country,country_of_registration:v.country,company_type:v.companyType,registration_date:v.registrationDate,ca_service_code:v.caServiceCode||null,cs_service_code:v.csServiceCode||null,currency:v.currency,total_shares:j.totalShares,price_per_share:j.pricePerShare,esop_reserved_shares:j.esopReservedShares};console.log("💾 Updating startup with profile data:",Ie);const{data:_t,error:jt}=await br.supabase.from("startups").update(Ie).eq("id",Dt.id).select();if(jt)throw console.error("❌ Error updating startup with profile data:",jt),jt;console.log("✅ Startup updated with profile data successfully:",_t),console.log("💾 Syncing shares data to startup_shares table...");const{data:Pt,error:Rt}=await br.supabase.from("startup_shares").upsert({startup_id:Dt.id,total_shares:j.totalShares,price_per_share:j.pricePerShare,esop_reserved_shares:j.esopReservedShares},{onConflict:"startup_id"}).select();if(Rt?console.error("❌ Error syncing shares data to startup_shares table:",Rt):console.log("✅ Shares data synced to startup_shares table successfully:",Pt),console.log("🔍 Updated startup data for profile tab:",{id:(te=_t[0])==null?void 0:te.id,country:(re=_t[0])==null?void 0:re.country,company_type:($=_t[0])==null?void 0:$.company_type,registration_date:(ne=_t[0])==null?void 0:ne.registration_date,currency:(W=_t[0])==null?void 0:W.currency,total_shares:(be=_t[0])==null?void 0:be.total_shares,price_per_share:(Ce=_t[0])==null?void 0:Ce.price_per_share,esop_reserved_shares:(ze=_t[0])==null?void 0:ze.esop_reserved_shares}),console.log("✅ Shares data already stored in startups table"),S.length>0){const rr=S.filter(Ke=>Ke.country&&Ke.companyType&&Ke.registrationDate).map(Ke=>({startup_id:Dt.id,country:Ke.country,company_type:Ke.companyType,registration_date:Ke.registrationDate,ca_code:Ke.caCode||null,cs_code:Ke.csCode||null}));rr.length>0&&await br.supabase.from("subsidiaries").insert(rr)}if(E.length>0){const rr=E.filter(Ke=>Ke.country&&Ke.companyType&&Ke.startDate).map(Ke=>({startup_id:Dt.id,country:Ke.country,company_type:Ke.companyType,start_date:Ke.startDate}));rr.length>0&&await br.supabase.from("international_operations").insert(rr)}}}catch(vt){console.error("Error creating startup:",vt)}console.log("🎉 Registration complete! Redirecting to dashboard..."),t()}catch(Pe){U(Pe.message||"An error occurred")}finally{R(!1)}};return I?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:n.jsx(et,{className:"w-full max-w-md",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-primary mx-auto"}),n.jsx("p",{className:"mt-4 text-slate-600",children:"Checking your account..."})]})})}):r?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 py-12",children:n.jsxs(et,{className:"w-full max-w-2xl",children:[n.jsx("div",{className:"relative",children:n.jsx("div",{className:"absolute top-0 right-0",children:n.jsxs(Oe,{type:"button",variant:"outline",size:"sm",onClick:De,className:"flex items-center gap-2 text-slate-600 hover:text-slate-800",children:[n.jsx(Tv,{className:"h-4 w-4"}),"Logout"]})})}),n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("img",{src:au,alt:"TrackMyStartup",className:"mx-auto h-40 w-40"}),n.jsx("h2",{className:"mt-4 text-3xl font-bold tracking-tight text-slate-900",children:"Complete Your Registration"}),n.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["TrackMyStartup - Welcome, ",r.name,"! Please upload your verification documents to complete your profile."]})]}),n.jsxs("form",{onSubmit:ve,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(vn,{className:"h-5 w-5 mr-2"}),"Verification Documents"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Government ID (Passport, Driver's License, etc.)"}),n.jsx(Ot,{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:Z=>Y(Z,"govId"),required:!0}),d.govId&&n.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["✓ ",d.govId.name," selected"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:xe(r.role)}),n.jsx(Ot,{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:Z=>Y(Z,"roleSpecific"),required:!0}),d.roleSpecific&&n.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["✓ ",d.roleSpecific.name," selected"]})]}),r.role==="Investment Advisor"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"License (As per country regulations)"}),n.jsx(Ot,{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:Z=>Y(Z,"license"),required:!0}),d.license&&n.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["✓ ",d.license.name," selected"]}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Upload your financial advisor license (if applicable)"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Logo"}),n.jsx(Ot,{type:"file",accept:".jpg,.jpeg,.png,.svg",onChange:Z=>Y(Z,"logo"),required:!0}),d.logo&&n.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["✓ ",d.logo.name," selected"]}),n.jsxs("div",{className:"text-xs text-slate-500 mt-1 space-y-1",children:[n.jsx("p",{children:"Upload your company logo (JPG, PNG, or SVG format)"}),n.jsxs("div",{className:"bg-blue-50 p-2 rounded border border-blue-200",children:[n.jsx("p",{className:"font-medium text-blue-800 mb-1",children:"Logo Specifications:"}),n.jsxs("ul",{className:"text-blue-700 space-y-0.5",children:[n.jsx("li",{children:"• Recommended size: 64x64 pixels (square format)"}),n.jsx("li",{children:"• Maximum file size: 2MB"}),n.jsx("li",{children:"• Supported formats: JPG, PNG, SVG"}),n.jsx("li",{children:"• Logo will be displayed as 64x64px with white background"}),n.jsx("li",{children:"• For best results, use a square logo or center your logo in a square canvas"})]})]})]})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(jw,{className:"h-5 w-5 mr-2"}),"Country Information"]}),n.jsx("p",{className:"text-sm text-slate-600",children:"Select your country of operation."}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Country"}),n.jsxs("select",{value:v.country,onChange:Z=>x(te=>({...te,country:Z.target.value})),className:"w-full bg-white border border-slate-300 rounded-md px-3 py-2 text-slate-900 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[n.jsx("option",{value:"",children:"Select Country"}),n.jsx("option",{value:"United States",children:"United States"}),n.jsx("option",{value:"India",children:"India"}),n.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),n.jsx("option",{value:"Canada",children:"Canada"}),n.jsx("option",{value:"Australia",children:"Australia"}),n.jsx("option",{value:"Germany",children:"Germany"}),n.jsx("option",{value:"France",children:"France"}),n.jsx("option",{value:"Singapore",children:"Singapore"}),n.jsx("option",{value:"Japan",children:"Japan"}),n.jsx("option",{value:"China",children:"China"}),n.jsx("option",{value:"Brazil",children:"Brazil"}),n.jsx("option",{value:"Mexico",children:"Mexico"}),n.jsx("option",{value:"South Africa",children:"South Africa"}),n.jsx("option",{value:"Nigeria",children:"Nigeria"}),n.jsx("option",{value:"Kenya",children:"Kenya"}),n.jsx("option",{value:"Egypt",children:"Egypt"}),n.jsx("option",{value:"UAE",children:"UAE"}),n.jsx("option",{value:"Saudi Arabia",children:"Saudi Arabia"}),n.jsx("option",{value:"Israel",children:"Israel"}),n.jsx("option",{value:"Other",children:"Other"})]})]})]}),r.role==="Startup"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(Jl,{className:"h-5 w-5 mr-2"}),"Company Profile"]}),n.jsx("p",{className:"text-sm text-slate-600",children:"Provide your company's basic information and structure."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Type"}),n.jsx("select",{value:v.companyType,onChange:Z=>x(te=>({...te,companyType:Z.target.value})),className:"w-full bg-white border border-slate-300 rounded-md px-3 py-2 text-slate-900 focus:ring-blue-500 focus:border-blue-500",required:!0,children:oe.length>0?oe.map(Z=>n.jsx("option",{value:Z,children:Z},Z)):n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"C-Corporation",children:"C-Corporation"}),n.jsx("option",{value:"S-Corporation",children:"S-Corporation"}),n.jsx("option",{value:"LLC",children:"LLC"}),n.jsx("option",{value:"Partnership",children:"Partnership"}),n.jsx("option",{value:"Sole Proprietorship",children:"Sole Proprietorship"}),n.jsx("option",{value:"Private Limited",children:"Private Limited"}),n.jsx("option",{value:"Public Limited",children:"Public Limited"}),n.jsx("option",{value:"Other",children:"Other"})]})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Currency"}),n.jsxs("select",{value:v.currency,onChange:Z=>x(te=>({...te,currency:Z.target.value})),className:"w-full bg-white border border-slate-300 rounded-md px-3 py-2 text-slate-900 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[n.jsx("option",{value:"USD",children:"USD - US Dollar"}),n.jsx("option",{value:"EUR",children:"EUR - Euro"}),n.jsx("option",{value:"GBP",children:"GBP - British Pound"}),n.jsx("option",{value:"INR",children:"INR - Indian Rupee"}),n.jsx("option",{value:"CAD",children:"CAD - Canadian Dollar"}),n.jsx("option",{value:"AUD",children:"AUD - Australian Dollar"}),n.jsx("option",{value:"JPY",children:"JPY - Japanese Yen"}),n.jsx("option",{value:"CHF",children:"CHF - Swiss Franc"}),n.jsx("option",{value:"SGD",children:"SGD - Singapore Dollar"}),n.jsx("option",{value:"CNY",children:"CNY - Chinese Yuan"})]})]}),n.jsx(Ot,{label:"Registration Date",type:"date",value:v.registrationDate,onChange:Z=>x(te=>({...te,registrationDate:Z.target.value})),required:!0})]})]}),r.role==="Startup"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(ww,{className:"h-5 w-5 mr-2"}),"Share Information"]}),n.jsx("p",{className:"text-sm text-slate-600",children:"Define your company's share structure and equity distribution."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Ot,{label:"Total Shares Issued",type:"number",min:"1",value:j.totalShares,onChange:Z=>{const te=parseInt(Z.target.value)||0;b(re=>({...re,totalShares:te})),pe&&te>0&&g(re=>re.map($=>{if($.shares>0){const ne=$.shares/te*100,W=Math.round(ne*100)/100;return{...$,equity:W}}return $}))},required:!0}),n.jsx(Ot,{label:`Price Per Share (${v.currency})`,type:"number",min:"0.01",step:"0.01",value:j.pricePerShare,onChange:Z=>b(te=>({...te,pricePerShare:parseFloat(Z.target.value)||0})),required:!0}),n.jsx(Ot,{label:"ESOP Reserved Shares",type:"number",min:"0",value:j.esopReservedShares,onChange:Z=>b(te=>({...te,esopReservedShares:parseInt(Z.target.value)||0})),required:!0})]})]}),r.role==="Startup"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(Ps,{className:"h-5 w-5 mr-2"}),"Founder Information"]}),n.jsx("p",{className:"text-sm text-slate-600",children:"Please provide the details of all founders."}),n.jsxs("div",{className:"space-y-4",children:[m.map((Z,te)=>n.jsxs("div",{className:"p-4 border border-slate-200 rounded-md",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h4",{className:"font-medium text-slate-900",children:["Founder ",te+1]}),m.length>1&&n.jsx("button",{type:"button",onClick:()=>P(Z.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(Ot,{label:"Name",value:Z.name,onChange:re=>K(Z.id,"name",re.target.value),required:!0}),n.jsx(Ot,{label:"Email",type:"email",value:Z.email,onChange:re=>K(Z.id,"email",re.target.value),required:!0}),n.jsx(Ot,{label:"Number of Shares",type:"number",min:"0",value:Z.shares||0,onChange:re=>{const $=parseInt(re.target.value)||0;if(K(Z.id,"shares",$),pe&&j.totalShares>0&&!q){z(!0);const ne=$/j.totalShares*100,W=Math.round(ne*100)/100;K(Z.id,"equity",W),setTimeout(()=>z(!1),10)}},required:!0}),n.jsx(Ot,{label:pe?"Equity (%) (auto-calculated)":"Equity (%)",type:"number",min:"0",max:"100",step:"0.1",value:Z.equity?Number(Z.equity).toFixed(2):0,onChange:re=>{const $=parseFloat(re.target.value)||0;if(K(Z.id,"equity",$),pe&&j.totalShares>0&&$>0&&!q){z(!0);const ne=$/100*j.totalShares;if(ne>=1){const W=Math.round(ne);K(Z.id,"shares",W)}setTimeout(()=>z(!1),10)}},required:!0,readOnly:!1})]})]},Z.id)),r.role==="Startup"&&m.length>0&&j.totalShares>0&&n.jsxs("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg border",children:[n.jsx("h4",{className:"text-sm font-medium text-slate-700 mb-3",children:"Shares Allocation Summary"}),(()=>{const Z=m.reduce((ze,Pe)=>ze+(Pe.shares||0),0),te=j.esopReservedShares||0,re=Z+te,$=j.totalShares-re,ne=re>j.totalShares,W=m.reduce((ze,Pe)=>ze+(Pe.equity||0),0),be=j.totalShares>0?te/j.totalShares*100:0,Ce=100-W-be;return n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Total Shares:"}),n.jsx("span",{className:"font-medium",children:j.totalShares.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Founder Shares:"}),n.jsxs("span",{className:Z>j.totalShares?"text-red-600 font-medium":"text-slate-700",children:[Z.toLocaleString()," (",W.toFixed(1),"%)"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"ESOP Reserved:"}),n.jsxs("span",{className:"text-slate-700",children:[te.toLocaleString()," (",be.toFixed(1),"%)"]})]}),n.jsxs("div",{className:"flex justify-between font-medium pt-2 border-t border-slate-200",children:[n.jsx("span",{className:"text-slate-700",children:"Available for Investment:"}),n.jsxs("span",{className:$<0?"text-red-600":$===0?"text-yellow-600":"text-green-600",children:[$.toLocaleString()," (",Ce.toFixed(1),"%)"]})]}),ne&&n.jsxs("div",{className:"text-red-600 text-sm font-medium mt-3 p-3 bg-red-50 border border-red-200 rounded",children:["⚠️ Total allocated shares exceed total shares by ",(re-j.totalShares).toLocaleString(),n.jsx("br",{}),n.jsx("span",{className:"text-xs",children:"Please reduce founder shares or increase total shares."})]}),W>100&&n.jsxs("div",{className:"text-red-600 text-sm font-medium mt-3 p-3 bg-red-50 border border-red-200 rounded",children:["⚠️ Total founder equity exceeds 100% (",W.toFixed(1),"%)",n.jsx("br",{}),n.jsx("span",{className:"text-xs",children:"Please adjust founder equity percentages."})]})]})})()]}),n.jsxs(Oe,{type:"button",onClick:ye,variant:"outline",className:"w-full",children:[n.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Add Another Founder"]})]})]}),r.role==="Startup"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(ua,{className:"h-5 w-5 mr-2"}),"Service Provider Codes"]}),n.jsx("p",{className:"text-sm text-slate-600",children:"CA and CS types are automatically determined based on your selected country."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CA Type (Auto-populated)"}),n.jsx("input",{type:"text",value:(l==null?void 0:l.ca_type)||"Not available for this country",readOnly:!0,className:"w-full bg-slate-50 border border-slate-300 rounded-md px-3 py-2 text-slate-600"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CS Type (Auto-populated)"}),n.jsx("input",{type:"text",value:(l==null?void 0:l.cs_type)||"Not available for this country",readOnly:!0,className:"w-full bg-slate-50 border border-slate-300 rounded-md px-3 py-2 text-slate-600"})]})]})]}),r.role==="Startup"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(jw,{className:"h-5 w-5 mr-2"}),"Subsidiaries (Optional)"]}),n.jsx("p",{className:"text-sm text-slate-600",children:"Add any subsidiaries or international operations."}),n.jsxs("div",{className:"space-y-4",children:[S.map((Z,te)=>n.jsxs("div",{className:"p-4 border border-slate-200 rounded-md",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h4",{className:"font-medium text-slate-900",children:["Subsidiary ",te+1]}),n.jsxs("button",{type:"button",onClick:()=>ee(Z.id),className:"text-red-600 hover:text-red-800 text-sm flex items-center",children:[n.jsx(qa,{className:"h-4 w-4 mr-1"}),"Remove"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Country"}),n.jsxs("select",{value:Z.country,onChange:re=>Ae(Z.id,re.target.value),className:"w-full bg-white border border-slate-300 rounded-md px-3 py-2 text-slate-900 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"Select Country"}),s.map(re=>n.jsx("option",{value:re.country_code,children:re.country_name},re.country_code))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Type"}),n.jsxs("select",{value:Z.companyType,onChange:re=>me(Z.id,"companyType",re.target.value),className:"w-full bg-white border border-slate-300 rounded-md px-3 py-2 text-slate-900 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"Select Company Type"}),ke(Z.country).map(re=>n.jsx("option",{value:re,children:re},re))]})]}),n.jsx(Ot,{label:"Registration Date",type:"date",value:Z.registrationDate,onChange:re=>me(Z.id,"registrationDate",re.target.value)}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CA Type (Auto-populated)"}),n.jsx("input",{type:"text",value:Z.caCode||"Select country first",readOnly:!0,className:"w-full bg-slate-50 border border-slate-300 rounded-md px-3 py-2 text-slate-600"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CS Type (Auto-populated)"}),n.jsx("input",{type:"text",value:Z.csCode||"Select country first",readOnly:!0,className:"w-full bg-slate-50 border border-slate-300 rounded-md px-3 py-2 text-slate-600"})]})]})]},Z.id)),n.jsxs(Oe,{type:"button",onClick:le,variant:"outline",className:"w-full",children:[n.jsx(zi,{className:"h-4 w-4 mr-2"}),"Add Subsidiary"]})]})]}),B&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:n.jsxs("div",{className:"text-sm text-red-800",children:[n.jsx("strong",{children:"Error:"})," ",B]})}),n.jsx(Oe,{type:"submit",className:"w-full",disabled:D,children:D?"Completing Registration...":"Complete Registration"})]})]})}):null},Wae=({onNavigateToLogin:e})=>{const[t,r]=_.useState(""),[a,s]=_.useState(""),[i,l]=_.useState(!1),[u,d]=_.useState(!1),[f,m]=_.useState(!1),[g,v]=_.useState(!1),[x,j]=_.useState(null),[b,S]=_.useState(!1),[A,E]=_.useState({});_.useEffect(()=>{(async()=>{var de,se,fe,oe,Se;console.log("=== RESET PASSWORD SESSION DEBUG ==="),console.log("Full URL:",window.location.href),console.log("Pathname:",window.location.pathname),console.log("Search params:",window.location.search),console.log("Hash:",window.location.hash);const I=new URLSearchParams(window.location.search),F=window.location.hash,pe=I.get("access_token")||(F.includes("access_token=")?(de=F.split("access_token=")[1])==null?void 0:de.split("&")[0]:null),L=I.get("refresh_token")||(F.includes("refresh_token=")?(se=F.split("refresh_token=")[1])==null?void 0:se.split("&")[0]:null),q=I.get("code")||(F.includes("code=")?(fe=F.split("code=")[1])==null?void 0:fe.split("&")[0]:null),z=I.get("token")||(F.includes("token=")?(oe=F.split("token=")[1])==null?void 0:oe.split("&")[0]:null),V=I.get("type")||(F.includes("type=")?(Se=F.split("type=")[1])==null?void 0:Se.split("&")[0]:null);if(console.log("Token extraction results:",{accessToken:pe?`${pe.substring(0,20)}...`:null,refreshToken:L?`${L.substring(0,20)}...`:null,code:q?`${q.substring(0,20)}...`:null,pkceToken:z?`${z.substring(0,20)}...`:null,type:V,hasAccessToken:!!pe,hasRefreshToken:!!L,hasCode:!!q,hasPkceToken:!!z}),pe&&L)try{console.log("Setting session with tokens...");const{data:Y,error:ye}=await br.supabase.auth.setSession({access_token:pe,refresh_token:L});ye?(console.error("Error setting reset password session:",ye),j(`Invalid or expired reset link: ${ye.message}`)):(console.log("Reset password session established successfully:",Y),S(!0),window.history.replaceState({},document.title,window.location.pathname))}catch(Y){console.error("Error handling reset password session:",Y),j(`Invalid or expired reset link: ${Y.message}`)}else if(z){console.log("Found PKCE token, attempting to verify OTP...");try{let Y=!1;try{const{data:ye,error:P}=await br.supabase.auth.verifyOtp({token_hash:z,type:"recovery"});!P&&ye?(console.log("PKCE OTP verified successfully with token_hash:",ye),S(!0),Y=!0,window.history.replaceState({},document.title,window.location.pathname)):console.log("PKCE token_hash approach failed:",P)}catch(ye){console.log("PKCE token_hash approach error:",ye)}if(Y||console.log("Skipping PKCE token approach (requires email), trying other methods..."),!Y){console.log("All PKCE verification approaches failed - the reset link is invalid or expired"),j("Invalid or expired reset link. Please request a new password reset.");return}}catch(Y){console.error("Error handling PKCE token verification:",Y),j(`Invalid or expired reset link: ${Y.message}`)}}else if(q){console.log("Found code parameter, attempting to verify OTP...");try{let Y=!1;try{const{data:ye,error:P}=await br.supabase.auth.verifyOtp({token_hash:q,type:"recovery"});!P&&ye?(console.log("OTP verified successfully with token_hash:",ye),S(!0),Y=!0,window.history.replaceState({},document.title,window.location.pathname)):console.log("token_hash approach failed:",P)}catch(ye){console.log("token_hash approach error:",ye)}if(Y||console.log("Skipping token approach (requires email), trying other methods..."),!Y)try{console.log("Skipping token approach, trying exchangeCodeForSession...")}catch(ye){console.log("token approach error:",ye)}if(!Y)try{const{data:ye,error:P}=await br.supabase.auth.exchangeCodeForSession(q);!P&&ye?(console.log("Code exchanged for session successfully:",ye),S(!0),Y=!0,window.history.replaceState({},document.title,window.location.pathname)):console.log("exchangeCodeForSession failed:",P)}catch(ye){console.log("exchangeCodeForSession error:",ye)}if(!Y)try{const{data:{user:ye},error:P}=await br.supabase.auth.getUser();ye&&!P?(console.log("User session found after code processing:",ye.email),S(!0),Y=!0):console.log("No user session found after code processing:",P)}catch(ye){console.log("Error getting user after code processing:",ye)}if(!Y){console.log("All verification approaches failed - the reset link is invalid or expired"),j("Invalid or expired reset link. Please request a new password reset.");return}Y||j("Invalid or expired reset link. Please request a new password reset.")}catch(Y){console.error("Error handling code verification:",Y),j(`Invalid or expired reset link: ${Y.message}`)}}else if(V==="recovery"){console.log("Found recovery type link, attempting to handle...");try{const{data:{session:Y},error:ye}=await br.supabase.auth.getSession();Y&&!ye?(console.log("Recovery session found:",Y.user.email),S(!0)):(console.log("No recovery session found:",ye),j("Invalid or expired reset link. Please request a new password reset."))}catch(Y){console.error("Error handling recovery session:",Y),j("Invalid or expired reset link. Please request a new password reset.")}}else{console.log("No tokens found, checking existing session...");const{data:{user:Y},error:ye}=await br.supabase.auth.getUser();ye||!Y?(console.log("No existing session found:",ye),window.location.pathname==="/reset-password"?(console.log("Reset password path detected, but no tokens. This might be a Supabase configuration issue."),j("Password reset link configuration issue. Please check your Supabase settings and try requesting a new reset link.")):j("Invalid or expired reset link. Please request a new password reset.")):(console.log("Existing session found for user:",Y.email),S(!0))}})()},[]);const T=U=>U.length<8?"Password must be at least 8 characters long":/(?=.*[a-z])/.test(U)?/(?=.*[A-Z])/.test(U)?/(?=.*\d)/.test(U)?null:"Password must contain at least one number":"Password must contain at least one uppercase letter":"Password must contain at least one lowercase letter",D=()=>{const U={},I=T(t);return I&&(U.password=I),t!==a&&(U.confirmPassword="Passwords do not match"),E(U),Object.keys(U).length===0},R=async U=>{if(U.preventDefault(),!!D()){m(!0),j(null);try{console.log("Attempting password reset...");const{success:I,error:F}=await br.resetPassword(t);if(I)console.log("Password reset successful"),v(!0),setTimeout(()=>{e()},3e3);else{console.error("Password reset failed:",F),console.log("Trying alternative password reset method...");const{data:pe,error:L}=await br.supabase.auth.updateUser({password:t});L?(console.error("Alternative method also failed:",L),j(F||L.message||"Failed to reset password. Please try again.")):(console.log("Alternative method succeeded"),v(!0),setTimeout(()=>{e()},3e3))}}catch(I){console.error("Password reset error:",I),j(I.message||"An unexpected error occurred. Please try again.")}finally{m(!1)}}},B=()=>{e()};return g?n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center px-4",children:n.jsxs(et,{className:"w-full max-w-md text-center",children:[n.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:n.jsx(ua,{className:"h-6 w-6 text-green-600"})}),n.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Password Reset Successful!"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"Your password has been successfully updated. You can now sign in with your new password."}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-4 text-left mb-6",children:[n.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"What's next?"}),n.jsxs("ul",{className:"text-sm text-green-800 space-y-1",children:[n.jsx("li",{children:"• You'll be redirected to the login page"}),n.jsx("li",{children:"• Sign in with your new password"}),n.jsx("li",{children:"• Your account is now secure"})]})]}),n.jsx(Oe,{onClick:B,className:"w-full",children:"Go to Login"}),n.jsx("p",{className:"text-xs text-slate-500 mt-4",children:"Redirecting automatically in a few seconds..."})]})}):!b&&!x?n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center px-4",children:n.jsxs(et,{className:"w-full max-w-md text-center",children:[n.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 mb-4",children:n.jsx($p,{className:"h-6 w-6 text-blue-600 animate-spin"})}),n.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Preparing Reset"}),n.jsx("p",{className:"text-slate-600",children:"Setting up your password reset session..."})]})}):n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center px-4",children:n.jsxs(et,{className:"w-full max-w-md",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 mb-4",children:n.jsx(XJ,{className:"h-6 w-6 text-blue-600"})}),n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Reset Your Password"}),n.jsx("p",{className:"text-slate-600 mt-2",children:"Enter your new password below"})]}),x&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 mb-6",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tu,{className:"h-4 w-4 text-red-600"}),n.jsx("p",{className:"text-red-800 text-sm",children:x})]})}),!1,n.jsxs("form",{onSubmit:R,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-slate-700",children:"New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ot,{id:"new-password",type:i?"text":"password",value:t,onChange:U=>r(U.target.value),required:!0,placeholder:"Enter new password",className:A.password?"border-red-300 focus:border-red-500 focus:ring-red-500":""}),n.jsx("button",{type:"button",onClick:()=>l(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:i?n.jsx(F6,{className:"h-4 w-4 text-slate-400"}):n.jsx(ru,{className:"h-4 w-4 text-slate-400"})})]}),A.password&&n.jsx("p",{className:"text-red-600 text-xs",children:A.password})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-slate-700",children:"Confirm New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ot,{id:"confirm-password",type:u?"text":"password",value:a,onChange:U=>s(U.target.value),required:!0,placeholder:"Confirm new password",className:A.confirmPassword?"border-red-300 focus:border-red-500 focus:ring-red-500":""}),n.jsx("button",{type:"button",onClick:()=>d(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:u?n.jsx(F6,{className:"h-4 w-4 text-slate-400"}):n.jsx(ru,{className:"h-4 w-4 text-slate-400"})})]}),A.confirmPassword&&n.jsx("p",{className:"text-red-600 text-xs",children:A.confirmPassword})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Password Requirements"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:"• At least 8 characters long"}),n.jsx("li",{children:"• Contains at least one lowercase letter"}),n.jsx("li",{children:"• Contains at least one uppercase letter"}),n.jsx("li",{children:"• Contains at least one number"})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsx(Oe,{type:"button",variant:"outline",onClick:B,className:"flex-1",disabled:f,children:"Back to Login"}),n.jsx(Oe,{type:"submit",className:"flex-1",disabled:f||!t.trim()||!a.trim()||!b,children:f?n.jsxs(n.Fragment,{children:[n.jsx($p,{className:"mr-2 h-4 w-4 animate-spin"}),"Resetting..."]}):b?"Reset Password":"Preparing..."})]})]})]})})},Yae=({onNavigateToLogin:e,onNavigateToRegister:t})=>n.jsxs("div",{className:"min-h-screen bg-slate-50",children:[n.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-50",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-3 sm:py-4 flex justify-between items-center",children:[n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("img",{src:au,alt:"TrackMyStartup",className:"h-7 w-7 sm:h-8 sm:w-8 scale-[5] sm:scale-[5] origin-left cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>window.location.reload()})}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[n.jsx(Oe,{variant:"outline",size:"sm",onClick:e,className:"hidden sm:inline-flex",children:"Login"}),n.jsx(Oe,{variant:"primary",size:"sm",onClick:t,className:"px-3 py-1.5",children:"Get Started"})]})]})}),n.jsx("section",{className:"py-12 sm:py-16 lg:py-20 px-4 sm:px-6 lg:px-8",children:n.jsx("div",{className:"container mx-auto text-center",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("h1",{className:"text-3xl sm:text-5xl lg:text-6xl font-bold text-slate-900 mb-4 sm:mb-6",children:["Track Your Startup's",n.jsx("span",{className:"text-brand-primary block",children:"Growth Journey"})]}),n.jsx("p",{className:"text-base sm:text-xl text-slate-600 mb-6 sm:mb-8 max-w-2xl mx-auto",children:"Comprehensive startup tracking platform for investors, founders, and professionals. Monitor compliance, track investments, and manage your startup ecosystem all in one place."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",children:[n.jsxs(Oe,{variant:"primary",size:"md",onClick:t,className:"group w-full sm:w-auto",children:["Start Now",n.jsx(M6,{className:"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform"})]}),n.jsx(Oe,{variant:"outline",size:"md",onClick:e,className:"w-full sm:w-auto",children:"Sign In"})]})]})})}),n.jsx("section",{className:"py-12 sm:py-16 lg:py-20 px-4 sm:px-6 lg:px-8 bg-white",children:n.jsxs("div",{className:"container mx-auto",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-2xl sm:text-4xl font-bold text-slate-900 mb-3 sm:mb-4",children:"Everything You Need to Track"}),n.jsx("p",{className:"text-base sm:text-xl text-slate-600 max-w-2xl mx-auto",children:"From compliance monitoring to investment tracking, we've got you covered"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8",children:[n.jsxs("div",{className:"text-center p-5 sm:p-6",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-brand-primary/10 rounded-full flex items-center justify-center",children:n.jsx(z_,{className:"h-8 w-8 text-brand-primary"})}),n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Portfolio Management"}),n.jsx("p",{className:"text-slate-600",children:"Track all your startup investments in one comprehensive dashboard with real-time updates."})]}),n.jsxs("div",{className:"text-center p-5 sm:p-6",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-brand-primary/10 rounded-full flex items-center justify-center",children:n.jsx(Cs,{className:"h-8 w-8 text-brand-primary"})}),n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Compliance Tracking"}),n.jsx("p",{className:"text-slate-600",children:"Stay compliant with automated compliance monitoring and task management for your startups."})]}),n.jsxs("div",{className:"text-center p-5 sm:p-6",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-brand-primary/10 rounded-full flex items-center justify-center",children:n.jsx(md,{className:"h-8 w-8 text-brand-primary"})}),n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Performance Analytics"}),n.jsx("p",{className:"text-slate-600",children:"Get insights into your startup's financial health and growth metrics with detailed analytics."})]}),n.jsxs("div",{className:"text-center p-5 sm:p-6",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-brand-primary/10 rounded-full flex items-center justify-center",children:n.jsx(Ps,{className:"h-8 w-8 text-brand-primary"})}),n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Team Collaboration"}),n.jsx("p",{className:"text-slate-600",children:"Collaborate with CA, CS, and facilitation teams for seamless startup management."})]}),n.jsxs("div",{className:"text-center p-5 sm:p-6",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-brand-primary/10 rounded-full flex items-center justify-center",children:n.jsx(jw,{className:"h-8 w-8 text-brand-primary"})}),n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Global Compliance"}),n.jsx("p",{className:"text-slate-600",children:"Support for multiple countries and compliance frameworks including Canada, India, and US."})]}),n.jsxs("div",{className:"text-center p-5 sm:p-6",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-brand-primary/10 rounded-full flex items-center justify-center",children:n.jsx(lJ,{className:"h-8 w-8 text-brand-primary"})}),n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Investment Opportunities"}),n.jsx("p",{className:"text-slate-600",children:"Discover and invest in promising startups with our comprehensive investment platform."})]})]})]})}),n.jsx("section",{className:"py-12 sm:py-16 lg:py-20 px-4 sm:px-6 lg:px-8 bg-slate-100",children:n.jsxs("div",{className:"container mx-auto",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-2xl sm:text-4xl font-bold text-slate-900 mb-3 sm:mb-4",children:"Simple, Transparent Pricing"}),n.jsx("p",{className:"text-base sm:text-xl text-slate-600 max-w-2xl mx-auto",children:"Choose the plan that fits your needs. All plans include full access to our platform features."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 max-w-5xl mx-auto",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8 border border-slate-200",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Startups"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("span",{className:"text-3xl font-bold text-brand-primary",children:"€15"}),n.jsx("span",{className:"text-slate-600",children:"/month"})]}),n.jsxs("div",{className:"text-sm text-slate-500 mb-6",children:["or ",n.jsx("span",{className:"font-semibold text-slate-700",children:"€120/year"})," (save 33%)"]}),n.jsxs("ul",{className:"text-left space-y-2 text-slate-600 mb-6",children:[n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"Full platform access"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"Compliance tracking"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"Investment management"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"Financial reporting"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"Team collaboration"]})]}),n.jsx(Oe,{variant:"outline",size:"md",onClick:t,className:"w-full",children:"Get Started"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8 border border-slate-200 relative",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Investors"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("span",{className:"text-3xl font-bold text-brand-primary",children:"€15"}),n.jsx("span",{className:"text-slate-600",children:"/month"})]}),n.jsx("div",{className:"text-sm text-slate-500 mb-2",children:"per startup"}),n.jsxs("div",{className:"text-sm text-slate-500 mb-6",children:["or ",n.jsx("span",{className:"font-semibold text-slate-700",children:"€120/year"})," per startup (save 33%)"]}),n.jsxs("ul",{className:"text-left space-y-2 text-slate-600 mb-6",children:[n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"Portfolio management"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"Investment tracking"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"Due diligence tools"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"Performance analytics"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"Investment opportunities"]})]}),n.jsx(Oe,{variant:"outline",size:"md",onClick:t,className:"w-full",children:"Get Started"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8 border border-slate-200",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Facilitation Center"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("span",{className:"text-3xl font-bold text-brand-primary",children:"€20"}),n.jsx("span",{className:"text-slate-600",children:"/month"})]}),n.jsx("div",{className:"text-sm text-slate-500 mb-6",children:"Flat monthly rate"}),n.jsxs("ul",{className:"text-left space-y-2 text-slate-600 mb-6",children:[n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"Multi-startup management"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"Facilitator dashboard"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"Request management"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"Team coordination"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"Advanced reporting"]})]}),n.jsx(Oe,{variant:"outline",size:"md",onClick:t,className:"w-full",children:"Get Started"})]})})]}),n.jsxs("div",{className:"text-center mt-12",children:[n.jsx("p",{className:"text-slate-600 mb-4",children:"All plans include 24/7 support and regular platform updates"}),n.jsxs("p",{className:"text-sm text-slate-500",children:["Need a custom plan? ",n.jsx("a",{href:"mailto:support@trackmystartup.com",className:"text-brand-primary hover:underline",children:"Contact us"})," for enterprise solutions"]})]})]})}),n.jsx("section",{className:"py-12 sm:py-16 lg:py-20 px-4 sm:px-6 lg:px-8 bg-slate-100",children:n.jsx("div",{className:"container mx-auto text-center",children:n.jsxs("div",{className:"max-w-3xl mx-auto",children:[n.jsx("h2",{className:"text-2xl sm:text-4xl font-bold text-slate-900 mb-3 sm:mb-4",children:"Ready to Transform Your Startup Tracking?"}),n.jsx("p",{className:"text-base sm:text-xl text-slate-600 mb-6 sm:mb-8",children:"Join thousands of investors and founders who trust TrackMyStartup to manage their startup ecosystem."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",children:[n.jsxs(Oe,{variant:"primary",size:"md",onClick:t,className:"group w-full sm:w-auto",children:["Get Started Today",n.jsx(M6,{className:"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform"})]}),n.jsx(Oe,{variant:"outline",size:"md",onClick:e,className:"w-full sm:w-auto",children:"Already have an account? Sign In"})]})]})})})]}),f2=()=>{const e=new Date().getFullYear(),t=r=>{window.location.href=r};return n.jsx("footer",{className:"bg-slate-900 text-white mt-auto",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Track My Startup"}),n.jsx("p",{className:"text-slate-300 text-sm leading-relaxed",children:"Comprehensive platform for tracking startup growth, compliance, and investments. Built for investors, founders, and professionals."}),n.jsxs("div",{className:"flex space-x-4",children:[n.jsx("a",{href:"mailto:support@trackmystartup.com",className:"w-8 h-8 bg-brand-primary/20 rounded-full flex items-center justify-center hover:bg-brand-primary/30 transition-colors",children:n.jsx(bo,{className:"h-4 w-4 text-brand-primary"})}),n.jsx("a",{href:"tel:+919146169956",className:"w-8 h-8 bg-brand-primary/20 rounded-full flex items-center justify-center hover:bg-brand-primary/30 transition-colors",children:n.jsx(zx,{className:"h-4 w-4 text-brand-primary"})}),n.jsx("div",{className:"w-8 h-8 bg-brand-primary/20 rounded-full flex items-center justify-center",children:n.jsx(zp,{className:"h-4 w-4 text-brand-primary"})})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"text-md font-semibold text-white",children:"Contact Info"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"flex items-start space-x-3",children:n.jsxs("a",{href:"mailto:support@trackmystartup.com",className:"flex items-start space-x-3 hover:opacity-80 transition-opacity",children:[n.jsx(bo,{className:"h-4 w-4 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-300 text-sm",children:"General Support"}),n.jsx("p",{className:"text-white text-sm",children:"support@trackmystartup.com"})]})]})}),n.jsx("div",{className:"flex items-start space-x-3",children:n.jsxs("a",{href:"mailto:startup@trackmystartup.com",className:"flex items-start space-x-3 hover:opacity-80 transition-opacity",children:[n.jsx(bo,{className:"h-4 w-4 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-300 text-sm",children:"Startup Support"}),n.jsx("p",{className:"text-white text-sm",children:"startup@trackmystartup.com"})]})]})}),n.jsx("div",{className:"flex items-start space-x-3",children:n.jsxs("a",{href:"mailto:investor@trackmystartup.com",className:"flex items-start space-x-3 hover:opacity-80 transition-opacity",children:[n.jsx(bo,{className:"h-4 w-4 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-300 text-sm",children:"Investor Relations"}),n.jsx("p",{className:"text-white text-sm",children:"investor@trackmystartup.com"})]})]})}),n.jsx("div",{className:"flex items-start space-x-3",children:n.jsxs("a",{href:"tel:+919146169956",className:"flex items-start space-x-3 hover:opacity-80 transition-opacity",children:[n.jsx(zx,{className:"h-4 w-4 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-300 text-sm",children:"Phone"}),n.jsx("p",{className:"text-white text-sm",children:"+91 91461 69956"})]})]})}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(zp,{className:"h-4 w-4 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-300 text-sm",children:"Address"}),n.jsxs("p",{className:"text-white text-sm",children:["E&P Community Farms",n.jsx("br",{}),"1956/2 Wada Road",n.jsx("br",{}),"Rajgurunagar 410505, India"]})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"text-md font-semibold text-white",children:"Quick Links"}),n.jsxs("ul",{className:"space-y-2",children:[n.jsx("li",{children:n.jsxs("button",{onClick:()=>t("/about"),className:"text-slate-300 hover:text-white text-sm transition-colors duration-200 flex items-center group",children:["About Us - E&P Community Farms",n.jsx(Dc,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),n.jsx("li",{children:n.jsxs("button",{onClick:()=>t("/contact"),className:"text-slate-300 hover:text-white text-sm transition-colors duration-200 flex items-center group",children:["Contact - E&P Community Farms",n.jsx(Dc,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),n.jsx("li",{children:n.jsxs("button",{onClick:()=>t("/products"),className:"text-slate-300 hover:text-white text-sm transition-colors duration-200 flex items-center group",children:["Product Price & Registration",n.jsx(Dc,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"text-md font-semibold text-white",children:"Specialized Support"}),n.jsxs("ul",{className:"space-y-2",children:[n.jsx("li",{children:n.jsxs("a",{href:"mailto:incubation_center@trackmystartup.com",className:"text-slate-300 hover:text-white text-sm transition-colors duration-200 flex items-center group",children:["Incubation Centers",n.jsx(Dc,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),n.jsx("li",{children:n.jsxs("a",{href:"mailto:investment_advisor@trackmystartup.com",className:"text-slate-300 hover:text-white text-sm transition-colors duration-200 flex items-center group",children:["Investment Advisors",n.jsx(Dc,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),n.jsx("li",{children:n.jsxs("button",{onClick:()=>t("/privacy-policy"),className:"text-slate-300 hover:text-white text-sm transition-colors duration-200 flex items-center group",children:["Privacy Policy",n.jsx(Dc,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),n.jsx("li",{children:n.jsxs("button",{onClick:()=>t("/terms-conditions"),className:"text-slate-300 hover:text-white text-sm transition-colors duration-200 flex items-center group",children:["Terms & Conditions",n.jsx(Dc,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),n.jsx("li",{children:n.jsxs("button",{onClick:()=>t("/cancellation-refunds"),className:"text-slate-300 hover:text-white text-sm transition-colors duration-200 flex items-center group",children:["Cancellation & Refunds",n.jsx(Dc,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),n.jsx("li",{children:n.jsxs("button",{onClick:()=>t("/shipping"),className:"text-slate-300 hover:text-white text-sm transition-colors duration-200 flex items-center group",children:["Shipping Policy",n.jsx(Dc,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})})]})]})]}),n.jsx("div",{className:"border-t border-slate-700 mt-8 pt-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0",children:[n.jsxs("div",{className:"text-center sm:text-left",children:[n.jsxs("p",{className:"text-slate-400 text-sm",children:["© ",e," E&P Community Farms. All rights reserved."]}),n.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"Powered by E&P Community Farms"}),n.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"Specialized Support by E&P Community Farms"})]}),n.jsxs("div",{className:"flex items-center space-x-6",children:[n.jsx("button",{onClick:()=>t("/home"),className:"text-slate-400 hover:text-white text-sm transition-colors duration-200",children:"Home"}),n.jsx("button",{onClick:()=>t("/contact"),className:"text-slate-400 hover:text-white text-sm transition-colors duration-200",children:"Contact"})]})]})})]})})},Xae=()=>{const e=()=>{window.history.back()};return n.jsx("div",{className:"min-h-screen bg-slate-50",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-brand-primary hover:text-brand-secondary mb-6 transition-colors",children:[n.jsx(nc,{className:"h-4 w-4"}),"Back"]}),n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Privacy Policy"}),n.jsx("p",{className:"text-slate-600 mb-8",children:"E&P Community Farms"}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8",children:n.jsxs("div",{className:"prose prose-slate max-w-none",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Privacy Policy of E&P Community Farms"}),n.jsx("p",{className:"text-slate-600 mb-4",children:'This Privacy Policy describes how E&P Community Farms ("we," "our," "us," or "the Owner") collects, uses, stores, and protects the personal data of users ("you," "your," or "User") when accessing or using our website www.trackmystartup.com and related services.'}),n.jsx("p",{className:"text-slate-600 mb-4",children:"By using this Website, you agree to the practices described in this Privacy Policy. Please read it carefully."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"1. Information We Collect"}),n.jsx("p",{className:"text-slate-600 mb-2",children:"We may collect the following types of information:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Personal Information:"})," Name, email address, phone number, organization, and login details when you register or contact us."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Business Information:"})," Startup details, investment-related information, compliance documents, and other data uploaded by Users for monitoring purposes."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Usage Data:"})," IP address, browser type, operating system, referral source, and browsing behavior within our platform."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Cookies and Tracking Technologies:"})," We use cookies and similar tools to enhance User experience and analyze platform performance."]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"2. How We Use Your Information"}),n.jsx("p",{className:"text-slate-600 mb-2",children:"We use the collected information for purposes including:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2",children:[n.jsx("li",{children:"Providing and improving our compliance and monitoring services."}),n.jsx("li",{children:"Facilitating communication between investors, incubators, and startups."}),n.jsx("li",{children:"Ensuring platform security, fraud prevention, and compliance with applicable laws."}),n.jsx("li",{children:"Personalizing User experience and providing relevant insights."}),n.jsx("li",{children:"Sending service updates, notifications, or promotional material (where consent is provided)."})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"3. Data Sharing and Disclosure"}),n.jsx("p",{className:"text-slate-600 mb-2",children:"We do not sell or rent personal data. However, we may share information in the following cases:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"With Consent:"})," When Users explicitly agree to share information."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"With Service Providers:"})," Third-party vendors that help us deliver services (e.g., hosting, analytics, communication tools)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"For Legal Reasons:"})," If required by law, regulation, or legal process."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Business Transfers:"})," In case of mergers, acquisitions, or sale of assets."]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"4. Data Retention"}),n.jsx("p",{className:"text-slate-600",children:"We retain personal data only as long as necessary to provide our services, comply with legal obligations, resolve disputes, and enforce agreements. After this period, data will be securely deleted or anonymized."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"5. Data Security"}),n.jsx("p",{className:"text-slate-600",children:"We implement technical and organizational measures to safeguard your data against unauthorized access, disclosure, alteration, or destruction. However, no method of electronic transmission or storage is 100% secure, and we cannot guarantee absolute security."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"6. User Rights"}),n.jsx("p",{className:"text-slate-600 mb-2",children:"Depending on applicable laws, Users may have the right to:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2",children:[n.jsx("li",{children:"Access, update, or delete their personal data."}),n.jsx("li",{children:"Restrict or object to certain data processing activities."}),n.jsx("li",{children:"Withdraw consent at any time where processing is based on consent."}),n.jsx("li",{children:"Request data portability."})]}),n.jsx("p",{className:"text-slate-600 mt-4",children:"Requests may be submitted via the contact details provided below."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"7. International Data Transfers"}),n.jsx("p",{className:"text-slate-600",children:"If you are accessing the Website from outside India, please note that your data may be transferred and stored on servers located in jurisdictions with different data protection laws."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"8. Cookies Policy"}),n.jsx("p",{className:"text-slate-600",children:"Our Website uses cookies to improve functionality, analyze usage, and deliver personalized experiences. Users may control cookie settings through their browser, but some features may not function properly without cookies."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"9. Children's Privacy"}),n.jsx("p",{className:"text-slate-600",children:"Our services are not directed to individuals under 18. We do not knowingly collect personal data from minors. If you believe a child has provided us with personal information, please contact us immediately."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"10. Changes to This Policy"}),n.jsx("p",{className:"text-slate-600",children:"We may update this Privacy Policy from time to time. Users will be notified of significant changes through the Website or email. Continued use of the Website after changes constitutes acceptance of the revised Privacy Policy."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"11. Contact Information"}),n.jsxs("p",{className:"text-slate-600",children:["For questions, concerns, or requests regarding this Privacy Policy, please contact:",n.jsx("br",{}),"E&P Community Farms",n.jsx("br",{}),"Email: ",n.jsx("a",{href:"mailto:support@trackmystartup.com",className:"text-brand-primary hover:underline",children:"support@trackmystartup.com"}),n.jsx("br",{}),"Website: ",n.jsx("a",{href:"https://www.trackmystartup.com",className:"text-brand-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:"www.trackmystartup.com"})]})]})]})})]})]})})},Zae=()=>{const e=()=>{window.history.back()};return n.jsx("div",{className:"min-h-screen bg-slate-50",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-brand-primary hover:text-brand-secondary mb-6 transition-colors",children:[n.jsx(nc,{className:"h-4 w-4"}),"Back"]}),n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Cancellation & Refund Policy"}),n.jsx("p",{className:"text-slate-600 mb-2",children:"Track My Startup"}),n.jsx("p",{className:"text-sm text-slate-500 mb-8",children:"Effective Date: 23-09-2025"}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8",children:n.jsxs("div",{className:"prose prose-slate max-w-none",children:[n.jsx("div",{className:"mb-6",children:n.jsx("p",{className:"text-slate-600 mb-4",children:'This policy outlines the procedures for canceling your subscription to "Track My Startup" and the conditions under which a refund may be issued.'})}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"Part A: Cancellation Policy"}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"1. Your Right to Cancel"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"You have the right to cancel your subscription at any time. You can manage your subscription and initiate a cancellation directly from your account settings or billing dashboard within the platform."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"2. Effect of Cancellation"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2 mb-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"For Monthly Subscriptions:"})," When you cancel a monthly subscription, you will retain full access to your paid features until the end of your current billing period. At the end of that period, your account will be downgraded to our free plan (if available) or access will be restricted, and you will not be charged again."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"For Annual Subscriptions:"})," When you cancel an annual subscription, you will retain full access to your paid features until the end of your one-year subscription term. You will not be charged for the subsequent year."]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"3. Data Retention After Cancellation"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"Upon cancellation, your data will be retained on our servers for a grace period of ninety (90) days. During this period, you can resubscribe to regain access to your data. After 90 days, we reserve the right to permanently delete your data from our systems."})]})]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"Part B: Refund Policy"}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"1. 14-Day Money-Back Guarantee (New Customers)"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"We offer a 14-day money-back guarantee for your first subscription purchase. If you are not satisfied with our service for any reason, you may request a full refund within 14 calendar days of your initial payment. This guarantee applies only to your first purchase and does not apply to subsequent renewals."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"2. Subscription Renewals"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2 mb-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Monthly Renewals:"})," Payments for monthly subscription renewals are non-refundable."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Annual Renewals:"})," Payments for annual subscription renewals are non-refundable. We will send a reminder email to your registered address before your annual renewal date."]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"3. How to Request a Refund"}),n.jsxs("p",{className:"text-slate-600 mb-4",children:["To request a refund under the 14-Day Money-Back Guarantee, you must contact our support team at ",n.jsx("a",{href:"mailto:support@trackmystartup.com",className:"text-brand-primary hover:underline",children:"support@trackmystartup.com"})," within the 14-day period. Please provide your account details and the reason for your request."]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"4. Exceptions"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"Refunds outside of the 14-day guarantee will not be issued, except in cases of a significant, prolonged platform outage or a billing error on our part. These exceptions will be reviewed on a case-by-case basis."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"5. Processing Time"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"Approved refunds will be processed within 5-10 business days and will be credited back to the original method of payment."})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Contact Information"}),n.jsxs("p",{className:"text-slate-600",children:["For cancellation requests, refund inquiries, or questions about this policy, please contact us:",n.jsx("br",{}),n.jsx("strong",{children:"Phone:"})," ",n.jsx("a",{href:"tel:+919146169956",className:"text-brand-primary hover:underline",children:"+91 91461 69956"}),n.jsx("br",{}),n.jsx("strong",{children:"Address:"})," 1956/2 Wada Road, Rajgurunagar 410505, India",n.jsx("br",{}),n.jsx("strong",{children:"Email:"})," ",n.jsx("a",{href:"mailto:support@trackmystartup.com",className:"text-brand-primary hover:underline",children:"support@trackmystartup.com"})]})]})]})})]})]})})},Jae=()=>{const e=()=>{window.history.back()};return n.jsx("div",{className:"min-h-screen bg-slate-50",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-brand-primary hover:text-brand-secondary mb-6 transition-colors",children:[n.jsx(nc,{className:"h-4 w-4"}),"Back"]}),n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Shipping Policy"}),n.jsx("p",{className:"text-slate-600 mb-2",children:"Track My Startup"}),n.jsx("p",{className:"text-sm text-slate-500 mb-8",children:"Effective Date: 23-09-2025"}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8",children:n.jsxs("div",{className:"prose prose-slate max-w-none",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"1. Scope of Policy"}),n.jsx("p",{className:"text-slate-600 mb-4",children:'This Service Delivery Policy outlines how "Track My Startup" provides users with access to our platform and its services upon subscription. As a digital Software-as-a-Service (SaaS) platform, we do not ship physical goods. All services are delivered electronically.'})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"2. Account Activation and Access"}),n.jsx("p",{className:"text-slate-600 mb-4",children:'Upon successful completion of your registration and payment, your "Track My Startup" account will be activated immediately. You will receive a confirmation email sent to the address you provided during registration. This email will include your login credentials or a link to set up your password and access your account dashboard.'})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"3. Service Delivery Timeline"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2 mb-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Instant Access:"})," Access to the platform is granted instantaneously once your payment is successfully processed by our payment gateway."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Confirmation Email:"})," The confirmation email is dispatched within minutes of successful registration. If you do not receive this email within one hour, please check your spam or junk mail folder before contacting support."]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"4. Communication"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"All communications regarding your service delivery, including account activation, billing notifications, and platform updates, will be sent to the email address associated with your account. It is your responsibility to keep this email address up to date."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"5. System Requirements"}),n.jsx("p",{className:"text-slate-600 mb-4",children:'To access and use the "Track My Startup" platform, you will need a stable internet connection and a modern web browser (e.g., Chrome, Firefox, Safari, Edge).'})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"6. No Physical Shipping"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"No physical products, software CDs, or printed materials will be shipped to you. Your access to the platform is entirely digital."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Contact Information"}),n.jsxs("p",{className:"text-slate-600",children:["For any questions regarding service delivery or account access, please contact us:",n.jsx("br",{}),n.jsx("strong",{children:"Phone:"})," ",n.jsx("a",{href:"tel:+919146169956",className:"text-brand-primary hover:underline",children:"+91 91461 69956"}),n.jsx("br",{}),n.jsx("strong",{children:"Address:"})," 1956/2 Wada Road, Rajgurunagar 410505, India",n.jsx("br",{}),n.jsx("strong",{children:"Email:"})," ",n.jsx("a",{href:"mailto:support@trackmystartup.com",className:"text-brand-primary hover:underline",children:"support@trackmystartup.com"})]})]})]})})]})]})})},Qae=()=>{const e=()=>{window.history.back()};return n.jsx("div",{className:"min-h-screen bg-slate-50",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-brand-primary hover:text-brand-secondary mb-6 transition-colors",children:[n.jsx(nc,{className:"h-4 w-4"}),"Back"]}),n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Terms & Conditions"}),n.jsx("p",{className:"text-slate-600 mb-8",children:"Track My Startup"}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8",children:n.jsxs("div",{className:"prose prose-slate max-w-none",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Terms and Conditions of Track My Startup"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"These Terms govern:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 mb-4 space-y-1",children:[n.jsx("li",{children:"the use of this Website (www.trackmystartup.com), and"}),n.jsx("li",{children:"any other related agreement or legal relationship with the Owner,"})]}),n.jsx("p",{className:"text-slate-600 mb-4",children:"in a legally binding way. By accessing or using the Website, you agree to these Terms and Conditions. Please read this document carefully."}),n.jsxs("p",{className:"text-slate-600 mb-4",children:[n.jsx("strong",{children:"This Website is provided by:"}),n.jsx("br",{}),"Track My Startup",n.jsx("br",{}),"Owner contact email: ",n.jsx("a",{href:"mailto:saeel.momin@gmail.com",className:"text-brand-primary hover:underline",children:"saeel.momin@gmail.com"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"1. What Users Should Know at a Glance"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2",children:[n.jsx("li",{children:"These Terms apply to all Users of the Website."}),n.jsx("li",{children:"Some provisions may apply differently to Consumers (individuals using for personal purposes) and Business Users (investors, incubators, startups). Where applicable, such distinctions will be clearly mentioned."}),n.jsx("li",{children:"Unless otherwise stated, all provisions apply equally to all Users."})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"2. Terms of Use"}),n.jsx("p",{className:"text-slate-600 mb-2",children:"By using this Website, Users confirm that they:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2",children:[n.jsx("li",{children:"Are at least 18 years of age."}),n.jsx("li",{children:"Have the legal authority to enter into binding agreements."}),n.jsx("li",{children:"Will use the Website in compliance with applicable laws and these Terms."})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"3. Services Provided"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"E&P Community Farms offers compliance and investment monitoring tools to investors, incubators, and other stakeholders for tracking startup progress."}),n.jsx("p",{className:"text-slate-600 mb-4",children:"The Owner reserves the right to add, modify, suspend, or discontinue services at any time."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"4. Content on This Website"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"Unless otherwise specified, all content, tools, and features available on this Website are owned or licensed by the Owner."}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2",children:[n.jsx("li",{children:"Users may not copy, modify, distribute, or exploit any content except as explicitly permitted."}),n.jsx("li",{children:"Business data uploaded by Users remains their property, but by uploading it, Users grant E&P Community Farms a license to use such data solely for providing the services."})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"5. Acceptable Use"}),n.jsx("p",{className:"text-slate-600 mb-2",children:"Users agree not to:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2",children:[n.jsx("li",{children:"Use the Website for unlawful, harmful, or fraudulent activities."}),n.jsx("li",{children:"Upload false, misleading, or infringing information."}),n.jsx("li",{children:"Attempt to hack, disrupt, or interfere with the Website's functionality."}),n.jsx("li",{children:"Reproduce, resell, or exploit services without written permission."})]}),n.jsx("p",{className:"text-slate-600 mt-4",children:"Violation of these rules may result in suspension or termination of access."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"6. Access to External Resources"}),n.jsx("p",{className:"text-slate-600",children:"The Website may contain links to third-party resources. E&P Community Farms has no control over such resources and is not responsible for their content, availability, or practices."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"7. Liability and Indemnification"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Disclaimer of Warranties"}),n.jsx("p",{className:"text-slate-600 mb-4",children:'The Website is provided on an "as is" and "as available" basis. We make no guarantees about accuracy, availability, or error-free operation.'}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Limitation of Liability"}),n.jsx("p",{className:"text-slate-600 mb-2",children:"To the fullest extent permitted by law, E&P Community Farms shall not be liable for:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2 mb-4",children:[n.jsx("li",{children:"Any indirect, incidental, or consequential damages."}),n.jsx("li",{children:"Loss of profits, business opportunities, or data."}),n.jsx("li",{children:"Unauthorized access to or use of User information."})]}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Indemnification"}),n.jsx("p",{className:"text-slate-600",children:"Users agree to indemnify and hold harmless E&P Community Farms, its affiliates, officers, employees, and partners from any claims, liabilities, damages, or expenses arising from their use of the Website or violation of these Terms."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"8. Privacy Policy"}),n.jsx("p",{className:"text-slate-600",children:"The collection and processing of personal data are governed by our Privacy Policy, available on the Website."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"9. Service Interruption"}),n.jsx("p",{className:"text-slate-600",children:"We reserve the right to interrupt or suspend services temporarily for maintenance, system updates, or unforeseen events. In case of termination of services, we will provide reasonable notice where possible."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"10. Intellectual Property Rights"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"All intellectual property rights related to the Website, including trademarks, service marks, logos, and software, remain the exclusive property of E&P Community Farms or its licensors."}),n.jsx("p",{className:"text-slate-600",children:"Users may not use these without prior written consent."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"11. Changes to These Terms"}),n.jsx("p",{className:"text-slate-600",children:"We may update these Terms from time to time. Users will be notified through the Website or via email when significant changes occur. Continued use of the Website implies acceptance of the updated Terms."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"12. Governing Law and Jurisdiction"}),n.jsx("p",{className:"text-slate-600",children:"These Terms are governed by the laws of India. Any disputes shall be subject to the exclusive jurisdiction of the courts of Pune, Maharashtra, India."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"13. Severability"}),n.jsx("p",{className:"text-slate-600",children:"If any provision of these Terms is found invalid or unenforceable, the remaining provisions will remain in effect."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"14. Contact Information"}),n.jsxs("p",{className:"text-slate-600",children:["For any questions or concerns regarding these Terms, please contact:",n.jsx("br",{}),"E&P Community Farms",n.jsx("br",{}),"Email: ",n.jsx("a",{href:"mailto:support@trackmystartup.com",className:"text-brand-primary hover:underline",children:"support@trackmystartup.com"}),n.jsx("br",{}),"Website: ",n.jsx("a",{href:"https://www.trackmystartup.com",className:"text-brand-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:"www.trackmystartup.com"})]})]})]})})]})]})})},ene=()=>{const e=()=>{window.history.back()};return n.jsx("div",{className:"min-h-screen bg-slate-50",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-brand-primary hover:text-brand-secondary mb-6 transition-colors",children:[n.jsx(nc,{className:"h-4 w-4"}),"Back"]}),n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"About Us"}),n.jsx("p",{className:"text-slate-600 mb-8",children:"Track My Startup"}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8 mb-8",children:n.jsxs("div",{className:"prose prose-slate max-w-none",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"About Track My Startup"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"Track My Startup is a comprehensive platform designed to facilitate early-stage startups and mentor first-time founders. We bridge the gap between academia and industry through startup facilitation, research collaboration, student entrepreneurship, and professional training programs."}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Our Mission"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"We are dedicated to empowering the startup ecosystem by providing robust tools for compliance monitoring, investment tracking, and startup health assessment. Our platform serves investors, incubators, startups, and other stakeholders in creating a more transparent and efficient startup ecosystem."}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Leadership"}),n.jsxs("div",{className:"bg-slate-50 rounded-lg p-6 mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Dr. Saeel Ismail Momin"}),n.jsxs("p",{className:"text-slate-600 mb-4",children:[n.jsx("strong",{children:"Founder & CEO"}),n.jsx("br",{}),"Polymer scientist with over 9 years of global research experience and 3 years of entrepreneurial experience. Dr. Momin's expertise lies in polymer science, macromolecules, and nanotechnology."]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Education"}),n.jsxs("ul",{className:"text-sm text-slate-600 space-y-1",children:[n.jsx("li",{children:"• PhD. Polymer Chemistry (University of Strasbourg, France)"}),n.jsx("li",{children:"• MSc. Sustainable Materials Polymer Science (University of Freiburg, Germany)"}),n.jsx("li",{children:"• Graduate Diploma in Science (University of Sydney, Australia)"}),n.jsx("li",{children:"• BSc. Chemistry (University of Sydney, Australia)"})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Key Achievements"}),n.jsxs("ul",{className:"text-sm text-slate-600 space-y-1",children:[n.jsx("li",{children:"• Led Startup Nation Olympiad 2025 (World's Largest Startup Competition)"}),n.jsx("li",{children:"• India-Australia RISE Accelerator Grant (45 Lakhs)"}),n.jsx("li",{children:"• Startup India Seed Fund (10 Lakhs)"}),n.jsx("li",{children:"• National Finalist UNDP Youth Co:Lab 2022"})]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Patents & Innovations"}),n.jsxs("ul",{className:"text-sm text-slate-600 space-y-1",children:[n.jsx("li",{children:"• Process for developing self-stratifying aqueous coating (India: 558402)"}),n.jsx("li",{children:"• High speed and high accuracy humidity sensor (World: WO2024156677)"}),n.jsx("li",{children:"• Process to convert waste leachate into plant growth promoter (India: 558759)"}),n.jsx("li",{children:"• Carbon negative food waste processing system (India: IN202121018361)"})]})]}),n.jsxs("p",{className:"text-slate-600 text-sm",children:[n.jsx("strong",{children:"Languages:"})," English, Hindi, Marathi, Urdu, French",n.jsx("br",{}),n.jsx("strong",{children:"Specialization:"})," Problem-solving social issues with robust industrial know-how, promoting academia-industry collaboration through startup facilitation and research."]})]}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"What We Do"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"E&P Community Farms provides comprehensive services including compliance monitoring, investment tracking, startup health assessment, and mentorship programs. We work with a network of 400+ educational institutions, 300+ founders, and 250+ incubation centers and investors across Asia, Africa, Europe, Middle-East, and Oceania."})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-brand-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Ps,{className:"h-6 w-6 text-brand-primary"})}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Global Network"}),n.jsx("p",{className:"text-slate-600 text-sm",children:"We work with 400+ educational institutions, 300+ founders, and 250+ incubation centers across multiple continents."})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-brand-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(_8,{className:"h-6 w-6 text-brand-primary"})}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Research-Driven"}),n.jsx("p",{className:"text-slate-600 text-sm",children:"Our solutions are backed by 9+ years of global research experience and cutting-edge polymer science expertise."})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-brand-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(rJ,{className:"h-6 w-6 text-brand-primary"})}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Proven Track Record"}),n.jsx("p",{className:"text-slate-600 text-sm",children:"Led the world's largest startup competition and secured multiple grants including India-Australia RISE Accelerator."})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Contact Us"}),n.jsxs("p",{className:"text-slate-600",children:["Ready to learn more about E&P Community Farms? We'd love to hear from you.",n.jsx("br",{}),"General Support: ",n.jsx("a",{href:"mailto:support@trackmystartup.com",className:"text-brand-primary hover:underline",children:"support@trackmystartup.com"}),n.jsx("br",{}),"Startup Support: ",n.jsx("a",{href:"mailto:startup@trackmystartup.com",className:"text-brand-primary hover:underline",children:"startup@trackmystartup.com"}),n.jsx("br",{}),"Investor Relations: ",n.jsx("a",{href:"mailto:investor@trackmystartup.com",className:"text-brand-primary hover:underline",children:"investor@trackmystartup.com"}),n.jsx("br",{}),"Phone: ",n.jsx("a",{href:"tel:+919146169956",className:"text-brand-primary hover:underline",children:"+91 91461 69956"}),n.jsx("br",{}),"Address: E&P Community Farms, 1956/2 Wada Road, Rajgurunagar 410505, India"]})]})]})]})})},tne=()=>{const[e,t]=_.useState({name:"",email:"",subject:"",message:""}),r=()=>{window.history.back()},a=i=>{const{name:l,value:u}=i.target;t(d=>({...d,[l]:u}))},s=i=>{i.preventDefault(),alert("Thank you for your message! We will get back to you soon."),t({name:"",email:"",subject:"",message:""})};return n.jsx("div",{className:"min-h-screen bg-slate-50",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("button",{onClick:r,className:"flex items-center gap-2 text-brand-primary hover:text-brand-secondary mb-6 transition-colors",children:[n.jsx(nc,{className:"h-4 w-4"}),"Back"]}),n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Contact Us"}),n.jsx("p",{className:"text-slate-600 mb-8",children:"E&P Community Farms"}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Get in Touch"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"We'd love to hear from you. Send us a message and we'll respond as soon as possible."}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex items-start space-x-3",children:n.jsxs("a",{href:"mailto:support@trackmystartup.com",className:"flex items-start space-x-3 hover:opacity-80 transition-opacity",children:[n.jsx(bo,{className:"h-5 w-5 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-600 text-sm",children:"General Support"}),n.jsx("p",{className:"text-slate-900 font-medium",children:"support@trackmystartup.com"})]})]})}),n.jsx("div",{className:"flex items-start space-x-3",children:n.jsxs("a",{href:"mailto:startup@trackmystartup.com",className:"flex items-start space-x-3 hover:opacity-80 transition-opacity",children:[n.jsx(bo,{className:"h-5 w-5 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-600 text-sm",children:"Startup Support"}),n.jsx("p",{className:"text-slate-900 font-medium",children:"startup@trackmystartup.com"})]})]})}),n.jsx("div",{className:"flex items-start space-x-3",children:n.jsxs("a",{href:"mailto:investor@trackmystartup.com",className:"flex items-start space-x-3 hover:opacity-80 transition-opacity",children:[n.jsx(bo,{className:"h-5 w-5 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-600 text-sm",children:"Investor Relations"}),n.jsx("p",{className:"text-slate-900 font-medium",children:"investor@trackmystartup.com"})]})]})}),n.jsx("div",{className:"flex items-start space-x-3",children:n.jsxs("a",{href:"mailto:incubation_center@trackmystartup.com",className:"flex items-start space-x-3 hover:opacity-80 transition-opacity",children:[n.jsx(bo,{className:"h-5 w-5 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-600 text-sm",children:"Incubation Centers"}),n.jsx("p",{className:"text-slate-900 font-medium",children:"incubation_center@trackmystartup.com"})]})]})}),n.jsx("div",{className:"flex items-start space-x-3",children:n.jsxs("a",{href:"mailto:investment_advisor@trackmystartup.com",className:"flex items-start space-x-3 hover:opacity-80 transition-opacity",children:[n.jsx(bo,{className:"h-5 w-5 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-600 text-sm",children:"Investment Advisors"}),n.jsx("p",{className:"text-slate-900 font-medium",children:"investment_advisor@trackmystartup.com"})]})]})}),n.jsx("div",{className:"flex items-start space-x-3",children:n.jsxs("a",{href:"tel:+919146169956",className:"flex items-start space-x-3 hover:opacity-80 transition-opacity",children:[n.jsx(zx,{className:"h-5 w-5 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-600 text-sm",children:"Phone"}),n.jsx("p",{className:"text-slate-900 font-medium",children:"+91 91461 69956"})]})]})}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(zp,{className:"h-5 w-5 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-600 text-sm",children:"Address"}),n.jsxs("p",{className:"text-slate-900 font-medium",children:["E&P Community Farms",n.jsx("br",{}),"1956/2 Wada Road",n.jsx("br",{}),"Rajgurunagar 410505, India"]})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Business Hours"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Monday - Friday"}),n.jsx("span",{className:"text-slate-900",children:"8:00 AM - 6:00 PM"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Saturday"}),n.jsx("span",{className:"text-slate-900",children:"9:00 AM - 4:00 PM"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Sunday"}),n.jsx("span",{className:"text-slate-900",children:"Closed"})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Send us a Message"}),n.jsxs("form",{onSubmit:s,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 mb-1",children:"Name"}),n.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:a,required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),n.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:a,required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-slate-700 mb-1",children:"Subject"}),n.jsx("input",{type:"text",id:"subject",name:"subject",value:e.subject,onChange:a,required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-slate-700 mb-1",children:"Message"}),n.jsx("textarea",{id:"message",name:"message",value:e.message,onChange:a,required:!0,rows:4,className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent"})]}),n.jsxs("button",{type:"submit",className:"w-full bg-brand-primary text-white py-2 px-4 rounded-md hover:bg-brand-secondary transition-colors duration-200 flex items-center justify-center gap-2",children:[n.jsx(pQ,{className:"h-4 w-4"}),"Send Message"]})]})]})]})]})]})})},rne=()=>{const e=()=>{window.history.back()},t=[{name:"Farm Management Package",price:"$299/month",description:"Complete farm management solution with crop planning, inventory tracking, and financial reporting.",features:["Crop Planning","Inventory Management","Financial Reports","Weather Integration"]},{name:"Community Farm Program",price:"$199/month",description:"Collaborative farming program for community-based agricultural projects.",features:["Community Dashboard","Resource Sharing","Collaborative Planning","Progress Tracking"]},{name:"Sustainable Practices Guide",price:"$99/month",description:"Comprehensive guide to sustainable farming practices and environmental stewardship.",features:["Best Practices","Environmental Impact","Certification Support","Expert Consultation"]}];return n.jsx("div",{className:"min-h-screen bg-slate-50",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-brand-primary hover:text-brand-secondary mb-6 transition-colors",children:[n.jsx(nc,{className:"h-4 w-4"}),"Back"]}),n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Product Price & Registration"}),n.jsx("p",{className:"text-slate-600 mb-8",children:"E AND P Community Farms"}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8 mb-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"Our Products & Services"}),n.jsx("p",{className:"text-slate-600 max-w-2xl mx-auto",children:"Choose from our comprehensive range of agricultural solutions designed to help you succeed in modern farming. All our products come with full support and training from our expert team."})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:t.map((r,a)=>n.jsxs("div",{className:"bg-slate-50 rounded-lg p-6 border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 bg-brand-primary/10 rounded-full flex items-center justify-center",children:n.jsx(nQ,{className:"h-5 w-5 text-brand-primary"})}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:r.name})]}),n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(No,{className:"h-5 w-5 text-green-600"}),n.jsx("span",{className:"text-2xl font-bold text-green-600",children:r.price})]}),n.jsx("p",{className:"text-slate-600 mb-4 text-sm",children:r.description}),n.jsx("ul",{className:"space-y-2 mb-6",children:r.features.map((s,i)=>n.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[n.jsx(ua,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),n.jsx("span",{className:"text-slate-600",children:s})]},i))}),n.jsx("button",{className:"w-full bg-brand-primary text-white py-2 px-4 rounded-md hover:bg-brand-secondary transition-colors duration-200",children:"Register Now"})]},a))})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Registration Process"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-brand-primary/10 rounded-full flex items-center justify-center mx-auto mb-3",children:n.jsx("span",{className:"text-brand-primary font-bold",children:"1"})}),n.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Choose Package"}),n.jsx("p",{className:"text-slate-600 text-sm",children:"Select the product that best fits your needs"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-brand-primary/10 rounded-full flex items-center justify-center mx-auto mb-3",children:n.jsx("span",{className:"text-brand-primary font-bold",children:"2"})}),n.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Complete Form"}),n.jsx("p",{className:"text-slate-600 text-sm",children:"Fill out our registration form with your details"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-brand-primary/10 rounded-full flex items-center justify-center mx-auto mb-3",children:n.jsx("span",{className:"text-brand-primary font-bold",children:"3"})}),n.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Payment"}),n.jsx("p",{className:"text-slate-600 text-sm",children:"Secure payment processing for your subscription"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-brand-primary/10 rounded-full flex items-center justify-center mx-auto mb-3",children:n.jsx("span",{className:"text-brand-primary font-bold",children:"4"})}),n.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Get Started"}),n.jsx("p",{className:"text-slate-600 text-sm",children:"Access your account and begin using our services"})]})]})]})]})]})})},ane=()=>{switch(window.location.pathname){case"/privacy-policy":return n.jsx(Xae,{});case"/cancellation-refunds":return n.jsx(Zae,{});case"/shipping":return n.jsx(Jae,{});case"/terms-conditions":return n.jsx(Qae,{});case"/about":return n.jsx(ene,{});case"/contact":return n.jsx(tne,{});case"/products":return n.jsx(rne,{});default:return n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Page Not Found"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"The page you're looking for doesn't exist."}),n.jsx("button",{onClick:()=>window.history.back(),className:"bg-brand-primary text-white px-6 py-2 rounded-md hover:bg-brand-secondary transition-colors",children:"Go Back"})]})})}},nne=()=>{const e=["/privacy-policy","/cancellation-refunds","/shipping","/terms-conditions","/about","/contact","/products"],t=window.location.pathname;if(e.includes(t))return n.jsx("div",{className:"min-h-screen bg-slate-100 flex flex-col",children:n.jsx("main",{className:"flex-1",children:n.jsx(ane,{})})});const r=(Te,Ue,it=7)=>{const kt=new Date;kt.setTime(kt.getTime()+it*24*60*60*1e3),document.cookie=`${Te}=${Ue};expires=${kt.toUTCString()};path=/`},a=Te=>{const Ue=Te+"=",it=document.cookie.split(";");for(let kt=0;kt<it.length;kt++){let We=it[kt];for(;We.charAt(0)===" ";)We=We.substring(1,We.length);if(We.indexOf(Ue)===0)return We.substring(Ue.length,We.length)}return null},s=Te=>{document.cookie=`${Te}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;`},[i,l]=_.useState(()=>{const Te=a("currentView");return Te==="startupHealth"||Te==="dashboard"?Te:"dashboard"}),[u,d]=_.useState(0),[f,m]=_.useState(0),[g,v]=_.useState(()=>{if(typeof window<"u"){const Te=window.location.pathname,Ue=new URLSearchParams(window.location.search),it=window.location.hash;if(Te==="/reset-password"||Ue.get("type")==="recovery"||it.includes("type=recovery")||Ue.get("access_token")||Ue.get("refresh_token"))return"reset-password"}return"landing"}),[x,j]=_.useState(null),[b,S]=_.useState(null),[A,E]=_.useState(!1),[T,D]=_.useState(!0),[R,B]=_.useState(!1),[U,I]=_.useState(null),[F,pe]=_.useState(!1),[L,q]=_.useState(!1);_.useEffect(()=>{const Te=()=>{const Ue=window.location.pathname,it=new URLSearchParams(window.location.search),kt=window.location.hash;(Ue==="/reset-password"||it.get("type")==="recovery"||kt.includes("type=recovery")||it.get("access_token")||it.get("refresh_token"))&&v("reset-password")};return Te(),window.addEventListener("popstate",Te),()=>{window.removeEventListener("popstate",Te)}},[]);const[z,V]=_.useState(null),[de,se]=_.useState(!1),fe=_.useRef(null),oe=_.useRef(null);_.useEffect(()=>{},[i,z,de]),_.useEffect(()=>{const Te=Ue=>{};return window.addEventListener("tab-change",Te),()=>{window.removeEventListener("tab-change",Te)}},[]),_.useEffect(()=>{fe.current=z},[z]),_.useEffect(()=>{oe.current=x},[x]);const[Se,Y]=_.useState([]),[ye,P]=_.useState([]),[K,le]=_.useState([]),[ee,me]=_.useState([]),[ke,Ae]=_.useState([]),[xe,De]=_.useState([]),[ve,Z]=_.useState([]),te=_.useRef([]),re=_.useRef([]),$=_.useRef([]);_.useEffect(()=>{te.current=Se},[Se]),_.useEffect(()=>{re.current=xe},[xe]),_.useEffect(()=>{$.current=ve},[ve]);const[ne,W]=_.useState("Initializing..."),be=_.useRef(!1),Ce=_.useRef(!1);_.useEffect(()=>{be.current=A},[A]),_.useEffect(()=>{Ce.current=F},[F]);const ze=(Te,Ue)=>{const it=new CustomEvent("tab-change",{detail:{tabName:Te,component:Ue}});window.dispatchEvent(it)};window.emitTabChange=ze,window.forceDataRefresh=()=>{console.log("🔄 Global force data refresh triggered"),pe(!1),Ce.current=!1,initializeAuth()},window.resetAuthState=()=>{console.log("🔄 Global auth state reset triggered"),j(null),E(!1),pe(!1),oe.current=null,be.current=!1,Ce.current=!1,r("lastAuthUserId",""),r("lastAuthTimestamp",""),initializeAuth()},_.useEffect(()=>{r("currentView",i,1)},[i]),_.useEffect(()=>{let Te=!0;(async()=>{try{console.log("Starting auth initialization..."),await(async()=>{var St,Ht,ar;const We=window.location.hash,It=new URLSearchParams(window.location.search);let ir=null;if(We.includes("access_token=")?ir=(St=We.split("access_token=")[1])==null?void 0:St.split("&")[0]:It.has("access_token")&&(ir=It.get("access_token")),ir){console.log("Found access token in URL");try{console.log("Setting session with access token...");const{data:cr,error:Ur}=await br.supabase.auth.setSession({access_token:ir,refresh_token:""});if(Ur)console.error("Error setting session:",Ur);else if(cr.user){console.log("Session set successfully, handling email confirmation...");const{user:Ar,error:or}=await br.handleEmailConfirmation();if(Ar&&Te)console.log("Email confirmation successful, user:",Ar.email),j(Ar),E(!0);else if(or){console.error("Email confirmation failed:",or),console.log("Attempting to create profile manually...");const{user:fr,error:gr}=await br.createProfile(((Ht=cr.user.user_metadata)==null?void 0:Ht.name)||"Unknown",((ar=cr.user.user_metadata)==null?void 0:ar.role)||"Investor");fr&&Te?(console.log("Profile created manually:",fr.email),j(fr),E(!0)):console.error("Manual profile creation failed:",gr)}}window.history.replaceState({},document.title,window.location.pathname)}catch(cr){console.error("Error during email confirmation:",cr)}}console.log("Auth initialization complete, waiting for auth state...")})()}catch(kt){console.error("Error in auth initialization:",kt)}finally{Te&&console.log("Auth initialization complete")}})();const{data:{subscription:it}}=br.onAuthStateChange(async(kt,We)=>{var It,ir,St,Ht,ar,cr;if(L){console.log("🚫 Ignoring auth event because ignoreAuthEvents flag is set");return}if(`${kt}`,`${((It=We==null?void 0:We.user)==null?void 0:It.email)||"none"}`,`${A}`,`${(x==null?void 0:x.email)||"none"}`,`${F}`,`${i}`,`${R}`,`${L}`,!!Te&&kt!=="TOKEN_REFRESHED")if(kt==="SIGNED_IN"||kt==="INITIAL_SESSION"){if(R){console.log("Auth state change already in progress, skipping...");return}if(be.current&&oe.current&&Ce.current&&(We!=null&&We.user)&&oe.current.id===We.user.id){if(kt==="TOKEN_REFRESHED"||kt==="INITIAL_SESSION"){console.log("🚫 AGGRESSIVE FIX: Blocking duplicate auth event to prevent unnecessary refresh");return}console.log("✅ Allowing auth event to proceed:",kt)}const Ur=a("lastAuthUserId"),Ar=a("lastAuthTimestamp"),or=Date.now().toString();if(console.log("🔍 Auth event debug:",{event:kt,sessionUserId:(ir=We==null?void 0:We.user)==null?void 0:ir.id,lastAuthUserId:Ur,lastAuthTimestamp:Ar,currentTime:or,isAuthenticated:be.current,currentUserId:(St=oe.current)==null?void 0:St.id}),We!=null&&We.user&&Ur===We.user.id&&Ar){const fr=parseInt(or)-parseInt(Ar);if(console.log("🔍 Time difference:",fr,"ms"),fr<5e3){console.log("🚫 Duplicate auth event detected (likely from window focus), skipping to prevent refresh");return}}We!=null&&We.user&&(r("lastAuthUserId",We.user.id,1),r("lastAuthTimestamp",or,1),console.log("💾 Stored auth info in cookies:",{userId:We.user.id,timestamp:or})),B(!0);try{if(We!=null&&We.user){if(!We.user.email_confirmed_at){console.log("Email not confirmed, signing out user"),await br.supabase.auth.signOut(),I("Please confirm your email before logging in. Check your inbox for the confirmation link.");return}if(Te){const fr={id:We.user.id,email:We.user.email||"",name:((Ht=We.user.user_metadata)==null?void 0:Ht.name)||"Unknown",role:((ar=We.user.user_metadata)==null?void 0:ar.role)||"Investor",startup_name:((cr=We.user.user_metadata)==null?void 0:cr.startupName)||void 0,registration_date:new Date().toISOString().split("T")[0]},gr=x,Fa=["1. Creating basic user from session",`2. User email: ${fr.email}`,`3. User role: ${fr.role}`,`4. User startup name: ${fr.startup_name||"none"}`,`5. Registration date: ${fr.registration_date}`,`6. Previous user: ${(gr==null?void 0:gr.email)||"none"}`,`7. Previous role: ${(gr==null?void 0:gr.role)||"none"}`,"8. About to call setCurrentUser"];j(fr),E(!0),D(!1),F||pe(!1)}(async()=>{try{console.log("Fetching full profile after sign-in...");let fr=await br.getCurrentUser();if(!fr){console.log("Profile not found, attempting to create it automatically...");const gr=We.user.user_metadata;if(gr!=null&&gr.name&&(gr!=null&&gr.role)){console.log("Creating profile automatically with metadata:",{name:gr.name,role:gr.role});const{data:Fa,error:nn}=await br.supabase.from("users").insert({id:We.user.id,email:We.user.email,name:gr.name,role:gr.role,startup_name:gr.startupName||null,registration_date:new Date().toISOString().split("T")[0]}).select().single();if(nn)console.error("Error creating profile automatically:",nn);else{if(console.log("Profile created automatically:",Fa),gr.role==="Startup"&&gr.startupName)try{const{data:sa}=await br.supabase.from("startups").select("id").eq("name",gr.startupName).single();sa||(await br.supabase.from("startups").insert({name:gr.startupName,investment_type:"Seed",investment_value:0,equity_allocation:0,current_valuation:0,compliance_status:"Pending",sector:"Technology",total_funding:0,total_revenue:0,registration_date:new Date().toISOString().split("T")[0],user_id:We.user.id}),console.log("Startup record created automatically"))}catch(sa){console.warn("Failed to create startup record automatically (non-blocking):",sa)}fr=await br.getCurrentUser()}}}if(fr&&Te){if(console.log("Full profile loaded. Updating currentUser with startup_name:",fr.startup_name),console.log("Profile completion status:",fr.is_profile_complete),!fr.is_profile_complete){console.log("Profile not complete, redirecting to complete-registration page"),j(fr),v("complete-registration"),D(!1),B(!1);return}j(fr)}}catch(fr){console.error("Failed to load/create full user profile after sign-in (non-blocking):",fr)}finally{Te&&B(!1)}})()}else Te&&(j(null),E(!1),D(!1),B(!1))}catch(fr){console.error("Error processing auth state change:",fr),Te&&B(!1)}}else kt==="SIGNED_OUT"&&Te&&(j(null),S(null),E(!1),D(!1),B(!1),pe(!1))});return()=>{Te=!1,it==null||it.unsubscribe()}},[]);const Pe=_.useCallback(async Te=>{try{console.log("🔍 Fetching investment advisor data for code:",Te);const{data:Ue,error:it}=await G.from("users").select("id, email, name, role, investment_advisor_code, logo_url").eq("investment_advisor_code",Te).eq("role","Investment Advisor").single();return it?(console.error("❌ Error fetching investment advisor:",it),null):Ue?(console.log("✅ Found assigned investment advisor:",Ue),console.log("🔍 Advisor logo_url:",Ue.logo_url),console.log("🔍 Advisor has logo:",!!Ue.logo_url),S(Ue),Ue):null}catch(Ue){return console.error("❌ Error in fetchAssignedInvestmentAdvisor:",Ue),null}},[]),we=_.useCallback(async(Te=!1)=>{var Ue,it,kt,We,It,ir,St,Ht,ar,cr,Ur;if(!(!be.current||!oe.current)&&!(Ce.current&&!Te))try{console.log("Fetching data for authenticated user...",{forceRefresh:Te,hasInitialDataLoaded:Ce.current});const Ar=new Promise((Yr,lr)=>{setTimeout(()=>lr(new Error("Request timeout - network may be unavailable")),1e4)});let or;((Ue=oe.current)==null?void 0:Ue.role)==="Admin"?(console.log("🔍 Using getAllStartupsForAdmin for Admin role"),or=m0.getAllStartupsForAdmin()):((it=oe.current)==null?void 0:it.role)==="Investment Advisor"?(console.log("🔍 Using getAllStartupsForInvestmentAdvisor for Investment Advisor role"),or=m0.getAllStartupsForInvestmentAdvisor()):((kt=oe.current)==null?void 0:kt.role)==="CA"?or=Ri.getAssignedStartups().then(Yr=>Yr.map(lr=>({id:lr.id,name:lr.name,investmentType:"Seed",investmentValue:lr.totalFunding||0,equityAllocation:0,currentValuation:lr.totalFunding||0,complianceStatus:lr.complianceStatus,sector:lr.sector,totalFunding:lr.totalFunding,totalRevenue:lr.totalRevenue,registrationDate:lr.registrationDate,founders:[]}))):((We=oe.current)==null?void 0:We.role)==="CS"?or=Li.getAssignedStartups().then(Yr=>Yr.map(lr=>({id:lr.id,name:lr.name,investmentType:"Seed",investmentValue:lr.totalFunding||0,equityAllocation:0,currentValuation:lr.totalFunding||0,complianceStatus:lr.complianceStatus,sector:lr.sector,totalFunding:lr.totalFunding,totalRevenue:lr.totalRevenue,registrationDate:lr.registrationDate,founders:[]}))):(console.log("🔍 Using default startup fetching for role:",(It=oe.current)==null?void 0:It.role),or=m0.getAllStartups());const fr=Promise.allSettled([or,Wn.getNewInvestments(),nx.getStartupAdditionRequests(),nx.getAllUsers(),TS.getVerificationRequests(),((ir=oe.current)==null?void 0:ir.role)==="Investor"?Wn.getUserInvestmentOffers(oe.current.email):((St=oe.current)==null?void 0:St.role)==="Admin"?Wn.getAllInvestmentOffers():Promise.resolve([]),sx.getAllValidationRequests()]),[gr,Fa,nn,sa,Ba,dn,Oa]=await Promise.race([fr,Ar]);let Wr=gr.status==="fulfilled"?gr.value:[];const yn=nn.status==="fulfilled"?nn.value:[];if((x==null?void 0:x.role)==="Investor"&&Array.isArray(yn)){const Yr=(x==null?void 0:x.investor_code)||(x==null?void 0:x.investorCode),lr=yn.filter(ia=>(ia.status||"pending")==="approved"&&(!Yr||!(ia!=null&&ia.investor_code)||ia.investor_code===Yr||ia.investorCode===Yr)).map(ia=>ia.name).filter(ia=>!!ia);if(lr.length>0){const ia=await m0.getStartupsByNames(lr),ni={};Wr.forEach(bn=>{bn&&bn.name&&(ni[bn.name]=bn)}),ia.forEach(bn=>{bn&&bn.name&&(ni[bn.name]=bn)}),Wr=Object.values(ni)}}if(Y(Wr),P(Fa.status==="fulfilled"?Fa.value:[]),le(yn),me(sa.status==="fulfilled"?sa.value:[]),Ae(Ba.status==="fulfilled"?Ba.value:[]),De(dn.status==="fulfilled"?dn.value:[]),Z(Oa.status==="fulfilled"?Oa.value:[]),console.log("Data fetched successfully!"),console.log("Startups loaded:",gr.status==="fulfilled"?gr.value.length:0),console.log("Users loaded:",sa.status==="fulfilled"?sa.value.length:0),console.log("Current user role:",x==null?void 0:x.role),console.log("🔍 Checking for investment advisor code..."),console.log("🔍 Current user:",oe.current),console.log("🔍 Investment advisor code entered:",(Ht=oe.current)==null?void 0:Ht.investment_advisor_code_entered),(ar=oe.current)!=null&&ar.investment_advisor_code_entered){console.log("🔍 User has assigned investment advisor code:",oe.current.investment_advisor_code_entered);const Yr=await Pe(oe.current.investment_advisor_code_entered);console.log("🔍 Advisor fetch result:",Yr)}else console.log("🔍 User has no assigned investment advisor"),S(null);if(((cr=oe.current)==null?void 0:cr.role)==="Startup"&&gr.status==="fulfilled"&&!fe.current){console.log("🔍 Auto-finding startup for user:",oe.current.email),console.log("🔍 User startup_name:",oe.current.startup_name),console.log("🔍 Available startups:",gr.value.map(lr=>({name:lr.name,id:lr.id})));let Yr=gr.value.find(lr=>lr.name===oe.current.startup_name);!Yr&&gr.value.length===1&&(console.log("🔁 Fallback: selecting the only startup available for this user"),Yr=gr.value[0]),console.log("🔍 Auto-found startup:",Yr),Yr&&(V(Yr),Ce.current||l("startupHealth"))}else if(((Ur=oe.current)==null?void 0:Ur.role)==="Startup"&&fe.current&&(console.log("🔍 Startup user already has selected startup, preserving current state"),gr.status==="fulfilled")){const Yr=gr.value.find(lr=>{var ia;return lr.id===((ia=fe.current)==null?void 0:ia.id)});Yr&&(console.log("🔄 Updating selectedStartup with fresh data from database"),V(Yr))}}catch(Ar){console.error("Error fetching data:",Ar),Y([]),P([]),le([]),me([]),Ae([]),De([])}finally{D(!1),pe(!0)}},[Pe]);_.useEffect(()=>{A&&x&&!F&&we()},[A,x==null?void 0:x.id]),_.useEffect(()=>{A&&x&&F?(console.log("✅ User fully authenticated with data loaded, setting ignoreAuthEvents flag"),q(!0)):q(!1)},[A,x,F]),_.useEffect(()=>{(async()=>{if((x==null?void 0:x.role)==="Startup"&&(z!=null&&z.id)){const Te=await Wn.getOffersForStartup(z.id);De(Te)}})()},[z==null?void 0:z.id]);const ae=_.useCallback(Te=>{console.log(`User ${Te.email} logged in as ${Te.role}`),E(!0),j(Te),Te.role!=="Startup"&&l("investor")},[]),qe=_.useCallback((Te,Ue,it,kt)=>{if(console.log(`User ${Te.email} registered as ${Te.role}`),Te.role==="Startup"&&Ue.length>0){console.log("Registering with founders:",Ue);const We={id:Date.now(),name:it||"Newly Registered Co",investmentType:va.Seed,investmentValue:0,equityAllocation:0,currentValuation:0,complianceStatus:Ct.Pending,sector:"Technology",totalFunding:0,totalRevenue:0,registrationDate:new Date().toISOString().split("T")[0],founders:Ue};Y(It=>[We,...It]),V(We),l("startupHealth")}ae(Te)},[ae]),ft=_.useCallback(async()=>{try{await br.signOut(),E(!1),j(null),S(null),V(null),v("login"),l("investor"),pe(!1),q(!1),s("lastAuthUserId"),s("lastAuthTimestamp"),s("currentView")}catch(Te){console.error("Logout failed:",Te)}},[]),Et=_.useCallback((Te,Ue)=>{let it;if(typeof Te=="number"){if(it=te.current.find(We=>We.id===Te),!it)if(console.error("Startup not found with ID:",Te,"in available startups:",te.current.map(We=>({id:We.id,name:We.name}))),(x==null?void 0:x.role)==="Startup Facilitation Center"){console.log("🔍 Facilitator accessing startup, fetching from database..."),Bt(Te,Ue);return}else return}else it=Te;console.log("🔍 Setting selectedStartup to:",it);const kt=(x==null?void 0:x.role)==="CA"||(x==null?void 0:x.role)==="CS"||(x==null?void 0:x.role)==="Startup Facilitation Center"||(x==null?void 0:x.role)==="Investor";console.log("🔍 Setting isViewOnly to:",kt),V(it),se(kt),l("startupHealth"),(x==null?void 0:x.role)==="Startup Facilitation Center"&&Ue&&(window.facilitatorTargetTab=Ue),d(We=>We+1),m(We=>We+1),setTimeout(()=>{console.log("🔍 Forcing additional re-render..."),d(We=>We+1),m(We=>We+1)},50),setTimeout(()=>{console.log("🔍 Forcing final re-render..."),d(We=>We+1),m(We=>We+1)},100),console.log("🔍 handleViewStartup completed")},[x==null?void 0:x.role]),Bt=async(Te,Ue)=>{try{console.log("🔍 Fetching startup data for facilitator, ID:",Te);const[it,kt,We]=await Promise.allSettled([G.from("startups").select("*").eq("id",Te).single(),G.from("startup_shares").select("total_shares, esop_reserved_shares, price_per_share").eq("startup_id",Te).single(),G.from("founders").select("name, email, shares, equity_percentage").eq("startup_id",Te)]),It=it.status==="fulfilled"?it.value:null,ir=kt.status==="fulfilled"?kt.value:null,St=We.status==="fulfilled"?We.value:null;if(It.error||!It.data){console.error("Error fetching startup from database:",It.error),alert("Unable to access startup. Please check your permissions.");return}const Ht=It.data,ar=ir.data,Ur=(St.data||[]).map(or=>({name:or.name,email:or.email,shares:or.shares||0,equityPercentage:or.equity_percentage||0})),Ar={id:Ht.id,name:Ht.name,investmentType:Ht.investment_type,investmentValue:Ht.investment_value,equityAllocation:Ht.equity_allocation,currentValuation:Ht.current_valuation,complianceStatus:Ht.compliance_status,sector:Ht.sector,totalFunding:Ht.total_funding,totalRevenue:Ht.total_revenue,registrationDate:Ht.registration_date,founders:Ur,esopReservedShares:(ar==null?void 0:ar.esop_reserved_shares)||0,totalShares:(ar==null?void 0:ar.total_shares)||0,pricePerShare:(ar==null?void 0:ar.price_per_share)||0};console.log("✅ Startup fetched from database with shares and founders:",Ar),console.log("📊 Share data:",ar),console.log("👥 Founders data:",Ur),se(!0),V(Ar),l("startupHealth"),Ue&&(window.facilitatorTargetTab=Ue),d(or=>or+1),m(or=>or+1),setTimeout(()=>{console.log("🔍 Forcing additional re-render..."),d(or=>or+1),m(or=>or+1)},50),setTimeout(()=>{console.log("🔍 Forcing final re-render..."),d(or=>or+1),m(or=>or+1)},100),console.log("🔍 Facilitator startup access completed")}catch(it){console.error("Error in facilitator startup access:",it),alert("Unable to access startup. Please try again.")}},vt=_.useCallback(()=>{V(null),se(!1),l("dashboard"),d(Te=>Te+1)},[]);_.useCallback(Te=>{l(Te),r("currentView",Te,30)},[i]);const ht=_.useCallback(async Te=>{try{const Ue=await N2.acceptStartupRequest(Te);Y(it=>[...it,Ue]),le(it=>it.filter(kt=>kt.id!==Te)),alert(`${Ue.name} has been added to your portfolio.`)}catch(Ue){console.error("Error accepting startup request:",Ue),alert("Failed to accept startup request. Please try again.")}},[]),Dt=_.useCallback((Te,Ue)=>{const it={id:Date.now(),name:Ue.name,investmentType:Te.type,investmentValue:Te.value,equityAllocation:Te.equity,sector:Ue.sector,totalFunding:Ue.totalFunding,totalRevenue:Ue.totalRevenue,registrationDate:Ue.registrationDate,pitchDeckUrl:Te.pitchDeckUrl,pitchVideoUrl:Te.pitchVideoUrl,complianceStatus:Ue.complianceStatus};if(P(kt=>[it,...kt]),Te.validationRequested){const kt={id:Date.now(),startupId:Ue.id,startupName:Ue.name,requestDate:new Date().toISOString().split("T")[0]};Ae(We=>[kt,...We]),alert(`${Ue.name} is now listed for fundraising and a verification request has been sent to the admin.`)}else alert(`${Ue.name} is now listed for fundraising.`)},[]),Ie=_.useCallback(async(Te,Ue)=>{var kt,We;console.log("🔄 handleInvestorAdded called with:",{investment:Te,startup:Ue}),console.log("🔍 Investment object keys:",Object.keys(Te)),console.log("🔍 Investment investor code:",Te.investorCode),console.log("🔍 Current user investor codes:",{investor_code:x==null?void 0:x.investor_code,investorCode:x==null?void 0:x.investorCode});const it=((kt=oe.current)==null?void 0:kt.investor_code)||((We=oe.current)==null?void 0:We.investorCode)||Te.investorCode;if(console.log("🔍 Normalized investor code:",it),!Te.investorCode){console.log("❌ No investor code found in investment, returning early");return}console.log("✅ Investor code found, proceeding to create startup addition request...");try{const It={id:Date.now(),name:Ue.name,investmentType:Ue.investmentType,investmentValue:Te.amount,equityAllocation:Te.equityAllocated,sector:Ue.sector,totalFunding:Ue.totalFunding+Te.amount,totalRevenue:Ue.totalRevenue,registrationDate:Ue.registrationDate,investorCode:Te.investorCode,status:"pending"},ir=await N2.createStartupAdditionRequest({name:Ue.name,investment_type:Ue.investmentType,investment_value:Te.amount,equity_allocation:Te.equityAllocated,sector:Ue.sector,total_funding:Ue.totalFunding+Te.amount,total_revenue:Ue.totalRevenue,registration_date:Ue.registrationDate,investor_code:Te.investorCode,status:"pending"}),St={...It,id:ir.id};le(Ht=>[St,...Ht]),console.log("✅ Startup addition request created and saved to database:",ir),console.log("✅ Local state updated with request ID:",St.id),alert(`Investor request created for ${Ue.name}. It will appear in the investor's Approve Startup Requests.`)}catch(It){console.error("❌ Error creating startup addition request:",It),alert("Failed to create investor request. Please try again.")}},[]),_t=_.useCallback((Te,Ue)=>{Y(it=>it.map(kt=>kt.id===Te?{...kt,founders:Ue}:kt)),(z==null?void 0:z.id)===Te&&V(it=>it?{...it,founders:Ue}:null),alert("Founder information updated successfully.")},[]),jt=_.useCallback(async(Te,Ue,it,kt,We)=>{if(oe.current)try{const It=await Wn.createInvestmentOffer({investor_email:oe.current.email,startup_name:Te.name,startup_id:Te.id,offer_amount:Ue,equity_percentage:it,country:kt||"United States",startup_amount_raised:We||Te.totalFunding});De(St=>[It,...St]);const ir=It.startup_scouting_fee_paid||0;ir>0?alert(`Your offer for ${Te.name} has been submitted successfully! A startup scouting fee of $${ir.toFixed(2)} has been paid. The startup will now review your offer.`):alert(`Your offer for ${Te.name} has been submitted successfully! The startup will now review your offer.`)}catch(It){console.error("Error submitting offer:",It);let ir="Failed to submit offer. Please try again.";It instanceof Error?ir=It.message:typeof It=="object"&&It!==null&&(ir=`Submit failed: ${JSON.stringify(It)}`),alert(ir)}},[]),Pt=_.useCallback(async(Te,Ue)=>{try{(await TS.processVerification(Te,Ue)).success&&(Ae(kt=>kt.filter(We=>We.id!==Te)),alert(Ue==="approved"?'Verification request has been approved and startup is now "Startup Nation Verified".':"Verification request has been rejected."))}catch(it){console.error("Error processing verification:",it),alert("Failed to process verification. Please try again.")}},[]),Rt=_.useCallback(async(Te,Ue)=>{try{await Wn.updateOfferStatus(Te,Ue),De(kt=>kt.map(We=>We.id===Te?{...We,status:Ue}:We));const it=re.current.find(kt=>kt.id===Te);if(it){let kt=`The offer for ${it.startupName} from ${it.investorEmail} has been ${Ue}.`;Ue==="accepted"?kt+=" The investment deal is now finalized!":Ue==="completed"&&(kt+=" The investment transaction has been completed!"),alert(kt)}}catch(it){console.error("Error processing offer:",it),alert("Failed to process offer. Please try again.")}},[]),rr=_.useCallback(async(Te,Ue,it)=>{try{console.log("Attempting to update offer:",{offerId:Te,offerAmount:Ue,equityPercentage:it});const kt=await Wn.updateInvestmentOffer(Te,Ue,it);De(We=>We.map(It=>It.id===Te?{...It,offerAmount:Ue,equityPercentage:it}:It)),alert("Offer updated successfully!")}catch(kt){console.error("Error updating offer:",kt);let We="Failed to update offer. Please try again.";kt instanceof Error?We=`Update failed: ${kt.message}`:typeof kt=="object"&&kt!==null&&(We=`Update failed: ${JSON.stringify(kt)}`),alert(We)}},[]),Ke=_.useCallback(async Te=>{try{await Wn.deleteInvestmentOffer(Te),De(Ue=>Ue.filter(it=>it.id!==Te)),alert("Offer cancelled successfully!")}catch(Ue){console.error("Error cancelling offer:",Ue),alert("Failed to cancel offer. Please try again.")}},[]),Re=_.useCallback(async(Te,Ue,it)=>{try{const kt=await sx.processValidationRequest(Te,Ue,it);Z(It=>It.map(ir=>ir.id===Te?kt:ir));const We=$.current.find(It=>It.id===Te);We&&alert(`The validation request for ${We.startupName} has been ${Ue}.`)}catch(kt){console.error("Error processing validation request:",kt),alert("Failed to process validation request. Please try again.")}},[]),at=_.useCallback(async(Te,Ue)=>{try{console.log(`🔄 Updating compliance status for startup ${Te} to: ${Ue}`),console.log(`📊 Status type: ${typeof Ue}, Value: "${Ue}"`);const{data:it,error:kt}=await G.from("startups").select("id, name, compliance_status").eq("id",Te).single();if(kt)throw console.error("❌ Error checking startup existence:",kt),new Error(`Startup with ID ${Te} not found in database`);console.log("🔍 Found startup in database:",it),console.log("🔍 Current database status:",it.compliance_status);const{data:We,error:It}=await G.from("startups").update({compliance_status:Ue}).eq("id",Te).select();if(It)throw console.error("❌ Database update error:",It),console.error("❌ Error details:",{code:It.code,message:It.message,details:It.details,hint:It.hint}),It;if(console.log("✅ Database update successful:",We),console.log("✅ Rows affected:",We.length),We.length===0)throw new Error(`No rows were updated. Startup ID ${Te} may not exist or have different permissions.`);Y(Ht=>Ht.map(ar=>ar.id===Te?{...ar,complianceStatus:Ue}:ar));const ir=te.current.find(Ht=>Ht.id===Te),St=(ir==null?void 0:ir.name)||"Startup";console.log(`✅ Successfully updated ${St} compliance status to ${Ue}`),alert(`${St} compliance status has been updated to ${Ue}.`)}catch(it){console.error("❌ Error updating compliance:",it),alert(`Failed to update compliance status: ${it.message||"Unknown error"}. Please try again.`)}},[]),rt=_.useCallback(Te=>{console.log("🚨 handleProfileUpdate called - this might trigger refresh"),j(Ue=>({...Ue,...Te})),console.log("✅ Profile updated in App.tsx:",Te)},[]);if(T)return console.log("Rendering loading screen...",{isAuthenticated:A,currentUser:!!x}),n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50 text-brand-primary",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx(z_,{className:"w-16 h-16 animate-pulse"}),n.jsx("p",{className:"text-xl font-semibold",children:"Loading Application..."}),n.jsxs("p",{className:"text-sm text-slate-600",children:["Auth: ",A?"Yes":"No"," | User: ",x?"Yes":"No"," | Role: ",(x==null?void 0:x.role)||"None"]}),ne&&n.jsx("p",{className:"text-sm text-slate-600",children:ne})]})});if(g==="complete-registration")return console.log("🎯 Showing CompleteRegistrationPage (Form 2)"),n.jsxs("div",{className:"min-h-screen bg-slate-100 flex flex-col",children:[n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsx(mk,{onNavigateToRegister:()=>v("register"),onNavigateToDashboard:async()=>{console.log("🔄 Navigating to dashboard after registration completion");try{const Te=await br.getCurrentUser();Te&&(console.log("✅ User data refreshed for dashboard:",Te),j(Te),E(!0),v("login"))}catch(Te){console.error("❌ Error refreshing user data:",Te),E(!0),v("login")}}})}),n.jsx(f2,{})]});if(g==="reset-password")return console.log("🎯 Showing ResetPasswordPage"),n.jsxs("div",{className:"min-h-screen bg-slate-100 flex flex-col",children:[n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsx(Wae,{onNavigateToLogin:()=>v("login")})}),n.jsx(f2,{})]});if(console.log("🔍 App.tsx render - currentPage:",g,"isAuthenticated:",A),!A)return n.jsxs("div",{className:"min-h-screen bg-slate-100 flex flex-col",children:[n.jsx("div",{className:"flex-1 flex items-center justify-center",children:g==="landing"?n.jsx(Yae,{onNavigateToLogin:()=>v("login"),onNavigateToRegister:()=>v("register")}):g==="login"?n.jsx(Uae,{onLogin:ae,onNavigateToRegister:()=>v("register"),onNavigateToCompleteRegistration:()=>{console.log("🔄 Navigating to complete-registration page"),v("complete-registration")},onNavigateToLanding:()=>v("landing")}):g==="register"?n.jsx(Hae,{onRegister:qe,onNavigateToLogin:()=>v("login"),onNavigateToLanding:()=>v("landing")}):n.jsx(mk,{onNavigateToRegister:()=>v("register"),onNavigateToDashboard:async()=>{console.log("🔄 Navigating to dashboard after registration completion");try{const Te=await br.getCurrentUser();Te&&(console.log("✅ User data refreshed for dashboard:",Te),j(Te),E(!0),v("login"),console.log("🔄 Forcing startup data refresh after registration..."),setTimeout(()=>{we(!0)},1e3))}catch(Te){console.error("❌ Error refreshing user data:",Te),E(!0),v("login")}}})}),g==="landing"&&n.jsx(f2,{})]});const Tt=()=>{if(A&&x&&!x.role)return n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary mx-auto mb-4"}),n.jsx("p",{className:"text-slate-600",children:"Loading your dashboard..."})]})});if(i==="startupHealth"&&z)return n.jsx(uk,{startup:z,userRole:x==null?void 0:x.role,user:x,onBack:vt,onActivateFundraising:Dt,onInvestorAdded:Ie,onUpdateFounders:_t,isViewOnly:de,investmentOffers:xe,onProcessOffer:Rt});if((x==null?void 0:x.role)==="Admin")return n.jsx(jae,{users:ee,startups:Se,verificationRequests:ke,investmentOffers:xe,validationRequests:ve,onProcessVerification:Pt,onProcessOffer:Rt,onProcessValidationRequest:Re,onViewStartup:Et});if((x==null?void 0:x.role)==="CA")return n.jsx(Dae,{startups:Se,onUpdateCompliance:at,onViewStartup:Et,currentUser:x,onProfileUpdate:rt,onLogout:ft});if((x==null?void 0:x.role)==="CS")return n.jsx(Rae,{startups:Se,onUpdateCompliance:at,onViewStartup:Et,currentUser:x,onProfileUpdate:rt,onLogout:ft});if((x==null?void 0:x.role)==="Startup Facilitation Center")return n.jsx(Iae,{startups:Se,newInvestments:ye,startupAdditionRequests:K,onViewStartup:Et,onAcceptRequest:ht,currentUser:x,onProfileUpdate:rt,onLogout:ft});if((x==null?void 0:x.role)==="Investment Advisor")return n.jsx(Fae,{currentUser:x,users:ee,startups:Se,investments:ye,offers:xe,interests:[]});if((x==null?void 0:x.role)==="Investor")return n.jsx($Q,{startups:Se,newInvestments:ye,startupAdditionRequests:K,investmentOffers:xe,currentUser:x,onViewStartup:Et,onAcceptRequest:ht,onMakeOffer:jt,onUpdateOffer:rr,onCancelOffer:Ke});if((x==null?void 0:x.role)==="Startup"){console.log("🔍 Startup user detected:",x.email),console.log("🔍 User startup_name:",x.startup_name),console.log("🔍 Available startups:",Se.map(Ue=>({name:Ue.name,id:Ue.id})));let Te=Se.find(Ue=>Ue.name===x.startup_name);return!Te&&Se.length===1&&(console.log("🔁 Fallback in renderer: selecting the only startup available for this user"),Te=Se[0]),console.log("🚨🚨🚨 APP COMPONENT DEBUGGING - STARTUP DATA 🚨🚨🚨"),console.log("🔍 Found user startup:",Te),console.log("🔍 User startup founders:",Te==null?void 0:Te.founders),console.log("🔍 User startup ESOP reserved shares:",Te==null?void 0:Te.esopReservedShares),console.log("🚨🚨🚨 END APP COMPONENT DEBUGGING 🚨🚨🚨"),Te?(console.log("✅ Rendering StartupHealthView for startup:",Te.name),n.jsx(uk,{startup:Te,userRole:x==null?void 0:x.role,user:x,onBack:()=>{},onActivateFundraising:Dt,onInvestorAdded:Ie,onUpdateFounders:_t,investmentOffers:xe,onProcessOffer:Rt})):(console.log("❌ No startup found for user:",x.email),n.jsxs("div",{className:"text-center py-20",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"No Startup Found"}),n.jsx("p",{className:"text-slate-500 mt-2",children:"No startup associated with your account. Please contact support."}),n.jsxs("div",{className:"mt-4 text-sm text-slate-400",children:[n.jsx("p",{children:"Debug Info:"}),n.jsxs("p",{children:["User startup_name: ",x.startup_name||"NULL"]}),n.jsxs("p",{children:["Available startups: ",Se.length]})]})]}))}return n.jsxs("div",{className:"text-center py-20",children:[n.jsxs("h2",{className:"text-xl font-semibold",children:["TrackMyStartup - Welcome, ",x==null?void 0:x.email]}),n.jsx("p",{className:"text-slate-500 mt-2",children:"Startup user view - select a startup to view details."})]})};return n.jsxs("div",{className:"min-h-screen bg-slate-100 text-slate-800 flex flex-col",children:[n.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-50",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[n.jsx("div",{className:"flex items-center gap-3",children:(()=>{const Te=(x==null?void 0:x.role)==="Investment Advisor"&&(x==null?void 0:x.logo_url),Ue=b&&((x==null?void 0:x.role)==="Investor"||(x==null?void 0:x.role)==="Startup"),it=!!(Te||Ue);return console.log("🔍 Header logo display check:",{currentUserRole:x==null?void 0:x.role,currentUserLogo:x==null?void 0:x.logo_url,assignedAdvisor:!!b,assignedAdvisorLogo:b==null?void 0:b.logo_url,isInvestmentAdvisor:Te,hasAssignedAdvisor:Ue,shouldShowAdvisorLogo:it}),it})()?n.jsxs("div",{className:"flex items-center gap-3",children:[(x==null?void 0:x.role)==="Investment Advisor"&&(x!=null&&x.logo_url)||b!=null&&b.logo_url?n.jsxs(n.Fragment,{children:[n.jsx("img",{src:(x==null?void 0:x.role)==="Investment Advisor"?x.logo_url:b==null?void 0:b.logo_url,alt:"Company Logo",className:"h-8 w-8 rounded object-contain bg-white border border-gray-200 p-1",onError:Te=>{var Ue;Te.currentTarget.style.display="none",(Ue=Te.currentTarget.nextElementSibling)==null||Ue.classList.remove("hidden")}}),n.jsx("img",{src:au,alt:"TrackMyStartup",className:"h-8 w-8 scale-[5] md:scale-[4] lg:scale-[5] xl:scale-[6] origin-left hidden"})]}):n.jsx("div",{className:"h-8 w-8 rounded bg-purple-100 border border-purple-200 flex items-center justify-center",children:n.jsx("span",{className:"text-purple-600 font-semibold text-xs",children:"IA"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:(x==null?void 0:x.role)==="Investment Advisor"?x.name||"Investment Advisor":(b==null?void 0:b.name)||"Investment Advisor"}),n.jsx("p",{className:"text-xs text-blue-600",children:"Supported by Track My Startup"})]})]}):n.jsx("img",{src:au,alt:"TrackMyStartup",className:"h-8 w-8 scale-[5] md:scale-[4] lg:scale-[5] xl:scale-[6] origin-left"})}),n.jsxs("div",{className:"flex items-center gap-6",children:[(x==null?void 0:x.role)==="Investor"&&n.jsxs("div",{className:"hidden sm:block text-sm text-slate-500 bg-slate-100 px-3 py-1.5 rounded-md font-mono",children:["Investor Code: ",n.jsx("span",{className:"font-semibold text-brand-primary",children:x.investor_code||x.investorCode||"Not Set"}),!x.investor_code&&!x.investorCode&&n.jsx("span",{className:"text-red-500 text-xs ml-2",children:"⚠️ Code missing"})]}),(x==null?void 0:x.role)==="Startup Facilitation Center"&&n.jsx(jD,{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-md text-sm font-medium",currentUser:x}),(x==null?void 0:x.role)==="Investment Advisor"&&n.jsxs("div",{className:"hidden sm:block text-sm text-slate-500 bg-slate-100 px-3 py-1.5 rounded-md font-mono",children:["Advisor Code: ",n.jsx("span",{className:"font-semibold text-brand-primary",children:(x==null?void 0:x.investment_advisor_code)||"IA-XXXXXX"})]}),((x==null?void 0:x.role)==="Investor"||(x==null?void 0:x.role)==="Startup")&&(x==null?void 0:x.investment_advisor_code_entered)&&n.jsxs("div",{className:"hidden sm:block text-sm text-slate-500 bg-purple-100 px-3 py-1.5 rounded-md font-mono",children:["Advisor: ",n.jsx("span",{className:"font-semibold text-purple-800",children:x.investment_advisor_code_entered})]}),n.jsxs("button",{onClick:ft,className:"flex items-center gap-2 text-sm font-medium text-slate-600 hover:text-brand-primary transition-colors",children:[n.jsx(Tv,{className:"h-4 w-4"}),"Logout"]})]})]})}),U&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mx-4 mt-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsxs("div",{className:"text-sm text-red-800",children:[n.jsx("strong",{children:"Error:"})," ",U]}),n.jsx("button",{onClick:()=>I(null),className:"ml-auto text-red-600 hover:text-red-800",children:"×"})]})}),n.jsx("main",{className:"container mx-auto p-4 sm:p-6 lg:p-8 flex-1",children:n.jsx(Tt,{},`${u}-${f}`)})]})},_D=document.getElementById("root");if(!_D)throw new Error("Could not find root element to mount to");const sne=qR.createRoot(_D);sne.render(n.jsx(Vc.StrictMode,{children:n.jsx(nne,{})}));export{ba as _,one as c,Eo as g,G as s};
